<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl/openssl] bb0190: Use the same encryption growth macro consistently
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2022-November/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%20bb0190%3A%20Use%20the%20same%20encryption%20growth%20macro%0A%20consistently&In-Reply-To=%3Copenssl/openssl/push/refs/heads/openssl-3.0/1aef13-bb0190%40github.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037776.html">
   <LINK REL="Next"  HREF="037778.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl/openssl] bb0190: Use the same encryption growth macro consistently</H1>
    <B>Matt Caswell</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%20bb0190%3A%20Use%20the%20same%20encryption%20growth%20macro%0A%20consistently&In-Reply-To=%3Copenssl/openssl/push/refs/heads/openssl-3.0/1aef13-bb0190%40github.com%3E"
       TITLE="[openssl/openssl] bb0190: Use the same encryption growth macro consistently">noreply at github.com
       </A><BR>
    <I>Mon Nov 14 11:36:05 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="037776.html">[openssl/openssl] 1aef13: apps/speed.c: add verifying if fdopen returns NULL
</A></li>
        <LI>Next message (by thread): <A HREF="037778.html">[openssl/openssl] 3d004c: Use the same encryption growth macro consistently
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37777">[ date ]</a>
              <a href="thread.html#37777">[ thread ]</a>
              <a href="subject.html#37777">[ subject ]</a>
              <a href="author.html#37777">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  Branch: refs/heads/openssl-3.0
  Home:   <A HREF="https://github.com/openssl/openssl">https://github.com/openssl/openssl</A>
  Commit: bb0190e8a4d43d06a8ba6e6fca68571b4c3361a5
      <A HREF="https://github.com/openssl/openssl/commit/bb0190e8a4d43d06a8ba6e6fca68571b4c3361a5">https://github.com/openssl/openssl/commit/bb0190e8a4d43d06a8ba6e6fca68571b4c3361a5</A>
  Author: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
  Date:   2022-11-14 (Mon, 14 Nov 2022)

  Changed paths:
    M ssl/record/rec_layer_s3.c

  Log Message:
  -----------
  Use the same encryption growth macro consistently

We had two different macros for calculating the potential growth due to
encryption. The macro we use for allocating the underlying buffer should be
the same one that we use for reserving bytes for encryption growth.

Also if we are adding the MAC independently of the cipher algorithm then
the encryption growth will not include that MAC so we should remove it
from the amount of bytes that we reserve for that growth. Otherwise we
might exceed our buffer size and the WPACKET_reserve operation will
fail.

Reviewed-by: Hugo Landau &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">hlandau at openssl.org</A>&gt;
Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
Reviewed-by: Paul Dale &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">pauli at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/19264">https://github.com/openssl/openssl/pull/19264</A>)

(cherry picked from commit 3d004cefec5135a3b080dc898d7f7d5452ef309f)


</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="037776.html">[openssl/openssl] 1aef13: apps/speed.c: add verifying if fdopen returns NULL
</A></li>
	<LI>Next message (by thread): <A HREF="037778.html">[openssl/openssl] 3d004c: Use the same encryption growth macro consistently
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37777">[ date ]</a>
              <a href="thread.html#37777">[ thread ]</a>
              <a href="subject.html#37777">[ subject ]</a>
              <a href="author.html#37777">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
