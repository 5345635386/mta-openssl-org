<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl/tools] cb9d81: adjust newraw key to record time like the handshak...
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2024-May/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/tools%5D%20cb9d81%3A%20adjust%20newraw%20key%20to%20record%20time%20like%20the%0A%20handshak...&In-Reply-To=%3Copenssl/tools/push/refs/heads/master/291a58-58b7b9%40github.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="041817.html">
   <LINK REL="Next"  HREF="041819.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl/tools] cb9d81: adjust newraw key to record time like the handshak...</H1>
    <B>Neil Horman</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/tools%5D%20cb9d81%3A%20adjust%20newraw%20key%20to%20record%20time%20like%20the%0A%20handshak...&In-Reply-To=%3Copenssl/tools/push/refs/heads/master/291a58-58b7b9%40github.com%3E"
       TITLE="[openssl/tools] cb9d81: adjust newraw key to record time like the handshak...">noreply at github.com
       </A><BR>
    <I>Thu May  2 14:33:03 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="041817.html">[openssl/openssl] 067fbc: Reduce optimization in hppa builds
</A></li>
        <LI>Next message (by thread): <A HREF="041819.html">[openssl/openssl] 1316aa: Add check for public key presence on sm2 signing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41818">[ date ]</a>
              <a href="thread.html#41818">[ thread ]</a>
              <a href="subject.html#41818">[ subject ]</a>
              <a href="author.html#41818">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  Branch: refs/heads/master
  Home:   <A HREF="https://github.com/openssl/tools">https://github.com/openssl/tools</A>
  Commit: cb9d8154dbb3cdbdf9d4225f9791da86d9a62a43
      <A HREF="https://github.com/openssl/tools/commit/cb9d8154dbb3cdbdf9d4225f9791da86d9a62a43">https://github.com/openssl/tools/commit/cb9d8154dbb3cdbdf9d4225f9791da86d9a62a43</A>
  Author: Neil Horman &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">nhorman at openssl.org</A>&gt;
  Date:   2024-04-30 (Tue, 30 Apr 2024)

  Changed paths:
    M perf/newrawkey.c

  Log Message:
  -----------
  adjust newraw key to record time like the handshake test

the handshake test records the average time of each thread running
its test, while other tests record the overall duration, leading to
inconsistencies in how we do measurement.

Bring newrawkey into line with how handshake does it.

Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/tools/pull/184">https://github.com/openssl/tools/pull/184</A>)


  Commit: 8e82dd6faa516f212cede0008cf1fd7828453e5b
      <A HREF="https://github.com/openssl/tools/commit/8e82dd6faa516f212cede0008cf1fd7828453e5b">https://github.com/openssl/tools/commit/8e82dd6faa516f212cede0008cf1fd7828453e5b</A>
  Author: Neil Horman &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">nhorman at openssl.org</A>&gt;
  Date:   2024-04-30 (Tue, 30 Apr 2024)

  Changed paths:
    M perf/pemread.c

  Log Message:
  -----------
  convert pemread to be consistent in its time measurement

like handshake and newrawkey, record times per thread and average them

Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/tools/pull/184">https://github.com/openssl/tools/pull/184</A>)


  Commit: bd3ad5fa870f4bfea1beccb116b908e555974b40
      <A HREF="https://github.com/openssl/tools/commit/bd3ad5fa870f4bfea1beccb116b908e555974b40">https://github.com/openssl/tools/commit/bd3ad5fa870f4bfea1beccb116b908e555974b40</A>
  Author: Neil Horman &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">nhorman at openssl.org</A>&gt;
  Date:   2024-04-30 (Tue, 30 Apr 2024)

  Changed paths:
    M perf/providerdoall.c

  Log Message:
  -----------
  Convert providerdoall to be consistent in time measurement

Convert it to do the same math the other tests do

Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/tools/pull/184">https://github.com/openssl/tools/pull/184</A>)


  Commit: 3486229fa96bed8bbf4aa9e8f564236d9359f0d9
      <A HREF="https://github.com/openssl/tools/commit/3486229fa96bed8bbf4aa9e8f564236d9359f0d9">https://github.com/openssl/tools/commit/3486229fa96bed8bbf4aa9e8f564236d9359f0d9</A>
  Author: Neil Horman &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">nhorman at openssl.org</A>&gt;
  Date:   2024-04-30 (Tue, 30 Apr 2024)

  Changed paths:
    M perf/randbytes.c

  Log Message:
  -----------
  convert randbytes to use consistent time measurements

modify randbytes to measure time the way the other tests do

Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/tools/pull/184">https://github.com/openssl/tools/pull/184</A>)


  Commit: 7efe27febfa3bc9ba526142e52dfe0b7fc64dceb
      <A HREF="https://github.com/openssl/tools/commit/7efe27febfa3bc9ba526142e52dfe0b7fc64dceb">https://github.com/openssl/tools/commit/7efe27febfa3bc9ba526142e52dfe0b7fc64dceb</A>
  Author: Neil Horman &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">nhorman at openssl.org</A>&gt;
  Date:   2024-04-30 (Tue, 30 Apr 2024)

  Changed paths:
    M perf/rsasign.c

  Log Message:
  -----------
  make rsasign measure time consistently

Like the other tests, measure time per thread and average those

Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/tools/pull/184">https://github.com/openssl/tools/pull/184</A>)


  Commit: 42debe8613e93c35ed5c53356bab9d728a1260fc
      <A HREF="https://github.com/openssl/tools/commit/42debe8613e93c35ed5c53356bab9d728a1260fc">https://github.com/openssl/tools/commit/42debe8613e93c35ed5c53356bab9d728a1260fc</A>
  Author: Neil Horman &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">nhorman at openssl.org</A>&gt;
  Date:   2024-04-30 (Tue, 30 Apr 2024)

  Changed paths:
    M perf/sslnew.c

  Log Message:
  -----------
  convert sslnew to measure time consistently

Make it do the same math the other tests do

Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/tools/pull/184">https://github.com/openssl/tools/pull/184</A>)


  Commit: 2db2bd1fc22cc077386cc73ec38982bcd87400d3
      <A HREF="https://github.com/openssl/tools/commit/2db2bd1fc22cc077386cc73ec38982bcd87400d3">https://github.com/openssl/tools/commit/2db2bd1fc22cc077386cc73ec38982bcd87400d3</A>
  Author: Neil Horman &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">nhorman at openssl.org</A>&gt;
  Date:   2024-05-02 (Thu, 02 May 2024)

  Changed paths:
    M perf/newrawkey.c
    M perf/pemread.c
    M perf/providerdoall.c
    M perf/rsasign.c
    M perf/x509storeissuer.c

  Log Message:
  -----------
  make x509storeissuer do timekeeping like the other tests

Also, while I'm in here, fix an aliasing issue in threadcount, in which
the main routine had a variable overriding the global one.

Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/tools/pull/184">https://github.com/openssl/tools/pull/184</A>)


  Commit: 58b7b94ae5f674e9665f9d9c816efa3c28fce4e6
      <A HREF="https://github.com/openssl/tools/commit/58b7b94ae5f674e9665f9d9c816efa3c28fce4e6">https://github.com/openssl/tools/commit/58b7b94ae5f674e9665f9d9c816efa3c28fce4e6</A>
  Author: Neil Horman &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">nhorman at openssl.org</A>&gt;
  Date:   2024-05-02 (Thu, 02 May 2024)

  Changed paths:
    M perf/handshake.c
    M perf/newrawkey.c
    M perf/pemread.c
    M perf/providerdoall.c
    M perf/randbytes.c
    M perf/rsasign.c
    M perf/sslnew.c

  Log Message:
  -----------
  Convert all perf tools to not use ossl_time_divide

It looses information as its doing integer division

Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/tools/pull/184">https://github.com/openssl/tools/pull/184</A>)


Compare: <A HREF="https://github.com/openssl/tools/compare/291a58020944...58b7b94ae5f6">https://github.com/openssl/tools/compare/291a58020944...58b7b94ae5f6</A>

To unsubscribe from these emails, change your notification settings at <A HREF="https://github.com/openssl/tools/settings/notifications">https://github.com/openssl/tools/settings/notifications</A>
</PRE>
































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="041817.html">[openssl/openssl] 067fbc: Reduce optimization in hppa builds
</A></li>
	<LI>Next message (by thread): <A HREF="041819.html">[openssl/openssl] 1316aa: Add check for public key presence on sm2 signing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#41818">[ date ]</a>
              <a href="thread.html#41818">[ thread ]</a>
              <a href="subject.html#41818">[ subject ]</a>
              <a href="author.html#41818">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
