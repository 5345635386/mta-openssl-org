<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2016-July/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1468867800.527527.27392.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009083.html">
   <LINK REL="Next"  HREF="009088.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  master update</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1468867800.527527.27392.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  master update">levitte at openssl.org
       </A><BR>
    <I>Mon Jul 18 18:50:00 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="009083.html">[openssl-commits] [openssl]  master update
</A></li>
        <LI>Next message: <A HREF="009088.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9085">[ date ]</a>
              <a href="thread.html#9085">[ thread ]</a>
              <a href="subject.html#9085">[ subject ]</a>
              <a href="author.html#9085">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  1e3d16b0a62a9523b44cfcd65abc5998949ed9ab (commit)
       via  7218ae513408a58e8f8f20ed49dc45505e00a5b2 (commit)
       via  0f01b7bc8536c816f7b6e9305437346b68a1fe89 (commit)
       via  52fef270bf037a2b8caffdb34f6195191c08d9f2 (commit)
       via  7f5af797287eb21469b27b43358a9e916cdc1445 (commit)
      from  3cea73a7fcaaada1ea0ee4b4353ed0176fee1112 (commit)


- Log -----------------------------------------------------------------
commit 1e3d16b0a62a9523b44cfcd65abc5998949ed9ab
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Fri Jul 8 17:58:36 2016 +0200

    Don't make a difference between building test programs and other programs
    
    This adds a new target 'build_programs' and makes 'build_apps' and
    'build_tests' aliases for it, for backward compatibility.
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;

commit 7218ae513408a58e8f8f20ed49dc45505e00a5b2
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Fri Jul 8 14:52:51 2016 +0200

    Use _NO_INST in some build.info files
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;

commit 0f01b7bc8536c816f7b6e9305437346b68a1fe89
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Fri Jul 8 14:52:09 2016 +0200

    Adapt the build files to the new &quot;install&quot; hash table
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;

commit 52fef270bf037a2b8caffdb34f6195191c08d9f2
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Fri Jul 8 14:51:23 2016 +0200

    Document the _NO_INST variants
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;

commit 7f5af797287eb21469b27b43358a9e916cdc1445
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Fri Jul 8 14:28:58 2016 +0200

    build.info: implement PROGRAM_NO_INST, and dito for ENGINES, SCRIPTS, LIBS
    
    PROGRAM_NO_INST, ENGINES_NO_INST, SCRIPTS_NO_INST and LIBS_NO_INST are
    to be used to specify program, engines, scripts and libraries that are
    not to be installed in the system.  Fuzzers, test programs, that sort
    of things are of the _NO_INST type, for example.
    
    For the benefit of build file templates and other templates that use
    data from configdata.pm, a new hash table $unified_info{install} is
    created.  It contains a set of subhashes, one for each type of
    installable, each having an array of file names as values.  For
    example, it can look like this:
    
        &quot;install&quot; =&gt;
            {
                &quot;engines&quot; =&gt;
                    [
                        &quot;engines/afalg/afalg&quot;,
                        &quot;engines/capi&quot;,
                        &quot;engines/dasync&quot;,
                        &quot;engines/padlock&quot;,
                    ],
                &quot;libraries&quot; =&gt;
                    [
                        &quot;libcrypto&quot;,
                        &quot;libssl&quot;,
                    ],
                &quot;programs&quot; =&gt;
                    [
                        &quot;apps/openssl&quot;,
                    ],
                &quot;scripts&quot; =&gt;
                    [
                        &quot;apps/CA.pl&quot;,
                        &quot;apps/tsget&quot;,
                        &quot;tools/c_rehash&quot;,
                    ],
            },
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;

-----------------------------------------------------------------------

Summary of changes:
 Configurations/README.design         | 60 ++++++++++++++++++++-----
 Configurations/descrip.mms.tmpl      | 38 ++++++++--------
 Configurations/unix-Makefile.tmpl    | 48 ++++++++++----------
 Configurations/windows-makefile.tmpl | 52 ++++++++++++----------
 Configure                            | 86 ++++++++++++++++++++++++++++++------
 engines/build.info                   |  3 +-
 fuzz/build.info                      |  4 +-
 test/build.info                      |  4 +-
 8 files changed, 199 insertions(+), 96 deletions(-)

diff --git a/Configurations/README.design b/Configurations/README.design
index 5777e72..bea9790 100644
--- a/Configurations/README.design
+++ b/Configurations/README.design
@@ -37,7 +37,9 @@ build-file templates, adapted for the platform they are meant for (see
 sections on %unified_info and build-file templates further down).
 
 The variables PROGRAMS, LIBS, ENGINES and SCRIPTS are used to declare
-end products.
+end products.  There are variants for them with '_NO_INST' as suffix
+(PROGRAM_NO_INST etc) to specify end products that shouldn't get
+installed.
 
 The variables SOURCE, DEPEND, INCLUDE and ORDINALS are indexed by a
 produced file, and their values are the source used to produce that
@@ -124,17 +126,24 @@ This is the build.info file in 'ssl/', and it tells us that the
 library 'libssl' is built from the source file 'ssl/tls.c'.
 
     # engines/build.info
-    ENGINES=libossltest
-    SOURCE[libossltest]=e_ossltest.c
-    DEPEND[libossltest]=../libcrypto
-    INCLUDE[libossltest]=../include
-
-This is the build.info file in 'engines/', telling us that an engine
-called 'engines/libossltest' shall be built, that it's source is
+    ENGINES=dasync
+    SOURCE[dasync]=e_dasync.c
+    DEPEND[dasync]=../libcrypto
+    INCLUDE[dasync]=../include
+
+    ENGINES_NO_INST=ossltest
+    SOURCE[ossltest]=e_ossltest.c
+    DEPEND[ossltest]=../libcrypto
+    INCLUDE[ossltest]=../include
+
+This is the build.info file in 'engines/', telling us that two engines
+called 'engines/dasync' and 'engines/ossltest' shall be built, that
+dasync's source is 'engines/e_dasync.c' and ossltest's source is
 'engines/e_ossltest.c' and that the include directory 'include/' may
-be used when building anything that will be part of this engine.
-Finally, the engine 'engines/libossltest' depends on the library
-'libcrypto' to function properly.
+be used when building anything that will be part of these engines.
+Also, both engines depend on the library 'libcrypto' to function
+properly.  Finally, only dasync is being installed, as ossltest is
+only for internal testing.
 
 When Configure digests these build.info files, the accumulated
 information comes down to this:
@@ -154,7 +163,12 @@ information comes down to this:
     INCLUDE[apps/openssl]=. include
     DEPEND[apps/openssl]=libssl
 
-    ENGINES=engines/ossltest
+    ENGINES=engines/dasync
+    SOURCE[engines/dasync]=engines/e_dasync.c
+    DEPEND[engines/dasync]=libcrypto
+    INCLUDE[engines/dasync]=include
+
+    ENGINES_NO_INST=engines/ossltest
     SOURCE[engines/ossltest]=engines/e_ossltest.c
     DEPEND[engines/ossltest]=libcrypto
     INCLUDE[engines/ossltest]=include
@@ -213,6 +227,11 @@ indexes:
                pairs.  These are directly inferred from the INCLUDE
                variables in build.info files.
 
+  install   =&gt; a hash table containing 'type' =&gt; [ 'file' ... ] pairs.
+               The types are 'programs', 'libraries', 'engines' and
+               'scripts', and the array of files list the files of
+               that type that should be installed.
+
   libraries =&gt; a list of libraries.  These are directly inferred from
                the LIBS variable in build.info files.
 
@@ -277,6 +296,7 @@ section above would be digested into a %unified_info table:
             },
         &quot;engines&quot; =&gt;
             [
+                &quot;engines/dasync&quot;,
                 &quot;engines/ossltest&quot;,
             ],
         &quot;generate&quot; =&gt;
@@ -313,6 +333,22 @@ section above would be digested into a %unified_info table:
                         &quot;util&quot;,
                     ],
             }
+        &quot;install&quot; =&gt;
+            {
+                &quot;engines&quot; =&gt;
+                    [
+                        &quot;engines/dasync&quot;,
+                    ],
+                &quot;libraries&quot; =&gt;
+                    [
+                        &quot;libcrypto&quot;,
+                        &quot;libssl&quot;,
+                    ],
+                &quot;programs&quot; =&gt;
+                    [
+                        &quot;apps/openssl&quot;,
+                    ],
+           },
         &quot;libraries&quot; =&gt;
             [
                 &quot;libcrypto&quot;,
diff --git a/Configurations/descrip.mms.tmpl b/Configurations/descrip.mms.tmpl
index b3cf430..706b4f4 100644
--- a/Configurations/descrip.mms.tmpl
+++ b/Configurations/descrip.mms.tmpl
@@ -43,8 +43,7 @@
   # Because we need to make two computations of these data,
   # we store them in arrays for reuse
   our @shlibs = map { $unified_info{sharednames}-&gt;{$_} || () } @{$unified_info{libraries}};
-  our @programs = grep { !m|^\[\.test\]| } @{$unified_info{programs}};
-  our @testprogs = grep { m|^\[\.test\]| } @{$unified_info{programs}};
+  our @install_shlibs = map { $unified_info{sharednames}-&gt;{$_} || () } @{$unified_info{install}-&gt;{libraries}};
   our @generated = ( ( map { (my $x = $_) =~ s|\.S$|\.s|; $x }
                        grep { defined $unified_info{generate}-&gt;{$_} }
                        map { @{$unified_info{sources}-&gt;{$_}} }
@@ -118,8 +117,7 @@ DEP_EXT=.D
 LIBS={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_.&quot;.OLB&quot; } @{$unified_info{libraries}}) -}
 SHLIBS={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_.&quot;.EXE&quot; } @shlibs) -}
 ENGINES={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_.&quot;.EXE&quot; } @{$unified_info{engines}}) -}
-PROGRAMS={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_.&quot;.EXE&quot; } @programs) -}
-TESTPROGS={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_.&quot;.EXE&quot; } @testprogs) -}
+PROGRAMS={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_.&quot;.EXE&quot; } @{$unified_info{programs}}) -}
 SCRIPTS={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_ } @{$unified_info{scripts}}) -}
 {- output_off() if $disabled{makedepend}; &quot;&quot; -}
 DEPS={- our @deps = map { (my $x = $_) =~ s|\.o$|\$(DEP_EXT)|; $x; }
@@ -130,6 +128,10 @@ DEPS={- our @deps = map { (my $x = $_) =~ s|\.o$|\$(DEP_EXT)|; $x; }
 GENERATED_MANDATORY={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_ } @{$unified_info{depends}-&gt;{&quot;&quot;}} ) -}
 GENERATED={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_ } @generated) -}
 
+INSTALL_LIBS={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_.&quot;.OLB&quot; } @{$unified_info{install}-&gt;{libraries}}) -}
+INSTALL_SHLIBS={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_.&quot;.EXE&quot; } @install_shlibs) -}
+INSTALL_ENGINES={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_.&quot;.EXE&quot; } @{$unified_info{install}-&gt;{engines}}) -}
+INSTALL_PROGRAMS={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_.&quot;.EXE&quot; } @{$unified_info{install}-&gt;{programs}}) -}
 {- output_off() if $disabled{apps}; &quot;&quot; -}
 BIN_SCRIPTS=[.tools]c_rehash.pl
 MISC_SCRIPTS=[.apps]CA.pl, [.apps]tsget.pl
@@ -240,22 +242,22 @@ NODEBUG=@
 # The main targets ###################################################
 
 all : build_generated, -
-      build_libs_nodep, build_engines_nodep, build_apps_nodep, -
+      build_libs_nodep, build_engines_nodep, build_programs_nodep, -
       depend
 
 build_libs : build_generated, build_libs_nodep, depend
 build_libs_nodep : $(LIBS), $(SHLIBS)
 build_engines : build_generated, build_engines_nodep, depend
 build_engines_nodep : $(ENGINES)
-build_apps : build_generated, build_apps_nodep, depend
-build_apps_nodep : $(PROGRAMS), $(SCRIPTS)
-build_tests : build_generated, build_tests_nodep, depend
-build_tests_nodep : $(TESTPROGS)
+build_programs : build_generated, build_programs_nodep, depend
+build_programs_nodep : $(PROGRAMS), $(SCRIPTS)
 
 build_generated : $(GENERATED_MANDATORY)
 
-test tests : build_generated, -
-             build_apps_nodep, build_engines_nodep, build_tests_nodep, -
+# Kept around for backward compatibility
+build_apps build_tests : build_programs
+
+test tests : build_generated, build_programs_nodep, build_engines_nodep, -
              depend
         @ ! {- output_off() if $disabled{tests}; &quot;&quot; -}
         SET DEFAULT [.test]{- move(&quot;test&quot;) -}
@@ -312,14 +314,13 @@ check_install :
 uninstall : uninstall_docs uninstall_sw
 
 # Because VMS wants the generation number (or *) to delete files, we can't
-# use $(LIBS), $(PROGRAMS), $(GENERATED), $(ENGINES) and $(TESTPROGS) directly.
+# use $(LIBS), $(PROGRAMS), $(GENERATED) and $(ENGINES)directly.
 libclean :
         {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_.OLB;*&quot; } @{$unified_info{libraries}}) || &quot;@ !&quot; -}
         {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_.EXE;*,$_.MAP;*,$_.OPT;*&quot; } @shlibs) || &quot;@ !&quot; -}
 
 clean : libclean
-        {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_.EXE;*,$_.OPT;*&quot; } @programs) || &quot;@ !&quot; -}
-        {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_.EXE;*,$_.OPT;*&quot; } @testprogs) || &quot;@ !&quot; -}
+        {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_.EXE;*,$_.OPT;*&quot; } @{$unified_info{programs}}) || &quot;@ !&quot; -}
         {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_.EXE;*,$_.OPT;*&quot; } @{$unified_info{engines}}) || &quot;@ !&quot; -}
         {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_;*&quot; } @{$unified_info{scripts}}) || &quot;@ !&quot; -}
         {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_;*&quot; } @generated) || &quot;@ !&quot; -}
@@ -382,12 +383,11 @@ install_dev : check_INSTALLTOP
         - CREATE/DIR ossl_installroot:[LIB.'arch']
         {- join(&quot;\n        &quot;,
                 map { &quot;COPY/PROT=W:R $_.OLB ossl_installroot:[LIB.'arch']&quot; }
-                @{$unified_info{libraries}}) -}
+                @{$unified_info{install}-&gt;{libraries}}) -}
         @ {- output_off() if $disabled{shared}; &quot;&quot; -} !
         {- join(&quot;\n        &quot;,
-                map { &quot;COPY/PROT=W:RE $_.EXE ossl_installroot:[LIB.'arch']&quot; }
-                map { $unified_info{sharednames}-&gt;{$_} || () }
-                @{$unified_info{libraries}}) -}
+                map { &quot;COPY/PROT=W:R $_.OLB ossl_installroot:[LIB.'arch']&quot; }
+                @install_shlibs) -}
         @ {- output_on() if $disabled{shared}; &quot;&quot; -} !
 
 install_runtime : check_INSTALLTOP
@@ -407,7 +407,7 @@ install_engines : check_INSTALLTOP
         - CREATE/DIR ossl_installroot:[ENGINES{- $sover.$target{pointer_size} -}.'arch']
         {- join(&quot;\n        &quot;,
                 map { &quot;COPY/PROT=W:RE $_.EXE ossl_installroot:[ENGINES$sover$target{pointer_size}.'arch']&quot; }
-                grep(!m|ossltest$|i, @{$unified_info{engines}})) -}
+                @{$unified_info{install}-&gt;{engines}}) -}
         @ {- output_on() unless scalar @{$unified_info{engines}}; &quot;&quot; -} !
 
 install_startup : [.VMS]openssl_startup.com [.VMS]openssl_shutdown.com -
diff --git a/Configurations/unix-Makefile.tmpl b/Configurations/unix-Makefile.tmpl
index 495edb9..783fbc4 100644
--- a/Configurations/unix-Makefile.tmpl
+++ b/Configurations/unix-Makefile.tmpl
@@ -86,9 +86,9 @@ SHLIB_TARGET={- $target{shared_target} -}
 
 LIBS={- join(&quot; &quot;, map { $_.$libext } @{$unified_info{libraries}}) -}
 SHLIBS={- join(&quot; &quot;, map { shlib($_) } @{$unified_info{libraries}}) -}
+SHLIB_INFO={- join(&quot; &quot;, map { &quot;\&quot;&quot;.shlib($_).&quot;;&quot;.shlib_simple($_).&quot;\&quot;&quot; } @{$unified_info{libraries}}) -}
 ENGINES={- join(&quot; &quot;, map { dso($_) } @{$unified_info{engines}}) -}
-PROGRAMS={- join(&quot; &quot;, map { $_.$exeext } grep { !m|^test/| } @{$unified_info{programs}}) -}
-TESTPROGS={- join(&quot; &quot;, map { $_.$exeext } grep { m|^test/| } @{$unified_info{programs}}) -}
+PROGRAMS={- join(&quot; &quot;, map { $_.$exeext } @{$unified_info{programs}}) -}
 SCRIPTS={- join(&quot; &quot;, @{$unified_info{scripts}}) -}
 {- output_off() if $disabled{makedepend}; &quot;&quot; -}
 DEPS={- join(&quot; &quot;, map { (my $x = $_) =~ s|\.o$|$depext|; $x; }
@@ -103,13 +103,16 @@ GENERATED={- join(&quot; &quot;,
                     grep { /\.o$/ } keys %{$unified_info{sources}} ),
                   ( grep { /\.h$/ } keys %{$unified_info{generate}} )) -}
 
+INSTALL_LIBS={- join(&quot; &quot;, map { $_.$libext } @{$unified_info{install}-&gt;{libraries}}) -}
+INSTALL_SHLIBS={- join(&quot; &quot;, map { shlib($_) } @{$unified_info{install}-&gt;{libraries}}) -}
+INSTALL_SHLIB_INFO={- join(&quot; &quot;, map { &quot;\&quot;&quot;.shlib($_).&quot;;&quot;.shlib_simple($_).&quot;\&quot;&quot; } @{$unified_info{install}-&gt;{libraries}}) -}
+INSTALL_ENGINES={- join(&quot; &quot;, map { dso($_) } @{$unified_info{install}-&gt;{engines}}) -}
+INSTALL_PROGRAMS={- join(&quot; &quot;, map { $_.$exeext } @{$unified_info{install}-&gt;{programs}}) -}
 {- output_off() if $disabled{apps}; &quot;&quot; -}
 BIN_SCRIPTS=$(BLDDIR)/tools/c_rehash
 MISC_SCRIPTS=$(BLDDIR)/apps/CA.pl $(BLDDIR)/apps/tsget
 {- output_on() if $disabled{apps}; &quot;&quot; -}
 
-SHLIB_INFO={- join(&quot; &quot;, map { &quot;\&quot;&quot;.shlib($_).&quot;;&quot;.shlib_simple($_).&quot;\&quot;&quot; } @{$unified_info{libraries}}) -}
-
 # DESTDIR is for package builders so that they can configure for, say,
 # /usr/ and yet have everything installed to /tmp/somedir/usr/.
 # Normally it is left empty.
@@ -221,21 +224,21 @@ PROCESSOR= {- $config{processor} -}
 
 # The main targets ###################################################
 
-{- dependmagic('all'); -}: build_libs_nodep build_engines_nodep build_apps_nodep link-utils
+{- dependmagic('all'); -}: build_libs_nodep build_engines_nodep build_programs_nodep link-utils
 {- dependmagic('build_libs'); -}: build_libs_nodep
 {- dependmagic('build_engines'); -}: build_engines_nodep
-{- dependmagic('build_apps'); -}: build_apps_nodep
-{- dependmagic('build_tests'); -}: build_tests_nodep
+{- dependmagic('build_programs'); -}: build_programs_nodep
 
 build_generated: $(GENERATED_MANDATORY)
 build_libs_nodep: libcrypto.pc libssl.pc openssl.pc
 build_engines_nodep: $(ENGINES)
-build_apps_nodep: $(PROGRAMS) $(SCRIPTS)
-build_tests_nodep: $(TESTPROGS)
+build_programs_nodep: $(PROGRAMS) $(SCRIPTS)
+
+# Kept around for backward compatibility
+build_apps build_tests: build_programs
 
 test: tests
-{- dependmagic('tests'); -}: build_tests_nodep build_apps_nodep \
-                             build_engines_nodep link-utils
+{- dependmagic('tests'); -}: build_programs_nodep build_engines_nodep link-utils
 	@ : {- output_off() if $disabled{tests}; &quot;&quot; -}
 	( cd test; \
 	  SRCTOP=../$(SRCDIR) \
@@ -355,7 +358,7 @@ install_dev:
 		chmod 644 $(DESTDIR)$(INSTALLTOP)/include/openssl/$$fn; \
 	done
 	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)
-	@set -e; for l in $(LIBS); do \
+	@set -e; for l in $(INSTALL_LIBS); do \
 		fn=`basename $$l`; \
 		echo &quot;install $$l -&gt; $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn&quot;; \
 		cp $$l $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.new; \
@@ -365,7 +368,7 @@ install_dev:
 		      $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn; \
 	done
 	@ : {- output_off() if $disabled{shared}; &quot;&quot; -}
-	@set -e; for s in $(SHLIB_INFO); do \
+	@set -e; for s in $(INSTALL_SHLIB_INFO); do \
 		s1=`echo &quot;$$s&quot; | cut -f1 -d&quot;;&quot;`; \
 		s2=`echo &quot;$$s&quot; | cut -f2 -d&quot;;&quot;`; \
 		fn1=`basename $$s1`; \
@@ -414,13 +417,13 @@ uninstall_dev:
 	done
 	-$(RMDIR) $(DESTDIR)$(INSTALLTOP)/include/openssl
 	-$(RMDIR) $(DESTDIR)$(INSTALLTOP)/include
-	@set -e; for l in $(LIBS); do \
+	@set -e; for l in $(INSTALL_LIBS); do \
 		fn=`basename $$l`; \
 		echo &quot;$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn&quot;; \
 		$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn; \
 	done
 	@ : {- output_off() if $disabled{shared}; &quot;&quot; -}
-	@set -e; for s in $(SHLIB_INFO); do \
+	@set -e; for s in $(INSTALL_SHLIB_INFO); do \
 		s1=`echo &quot;$$s&quot; | cut -f1 -d&quot;;&quot;`; \
 		s2=`echo &quot;$$s&quot; | cut -f2 -d&quot;;&quot;`; \
 		fn1=`basename $$s1`; \
@@ -448,12 +451,9 @@ install_engines:
 	@[ -n &quot;$(INSTALLTOP)&quot; ] || (echo INSTALLTOP should not be empty; exit 1)
 	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(ENGINESDIR)/
 	@echo &quot;*** Installing engines&quot;
-	@set -e; for e in dummy $(ENGINES); do \
+	@set -e; for e in dummy $(INSTALL_ENGINES); do \
 		if [ &quot;$$e&quot; = &quot;dummy&quot; ]; then continue; fi; \
 		fn=`basename $$e`; \
-		if [ &quot;$$fn&quot; = '{- dso(&quot;ossltest&quot;) -}' ]; then \
-			continue; \
-		fi; \
 		echo &quot;install $$e -&gt; $(DESTDIR)$(ENGINESDIR)/$$fn&quot;; \
 		cp $$e $(DESTDIR)$(ENGINESDIR)/$$fn.new; \
 		chmod 755 $(DESTDIR)$(ENGINESDIR)/$$fn.new; \
@@ -463,7 +463,7 @@ install_engines:
 
 uninstall_engines:
 	@echo &quot;*** Uninstalling engines&quot;
-	@set -e; for e in dummy $(ENGINES); do \
+	@set -e; for e in dummy $(INSTALL_ENGINES); do \
 		if [ &quot;$$e&quot; = &quot;dummy&quot; ]; then continue; fi; \
 		fn=`basename $$e`; \
 		if [ &quot;$$fn&quot; = '{- dso(&quot;ossltest&quot;) -}' ]; then \
@@ -480,7 +480,7 @@ install_runtime:
 	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(OPENSSLDIR)/misc
 	@echo &quot;*** Installing runtime files&quot;
 	@ : {- output_off() unless windowsdll(); &quot;&quot; -}
-	@set -e; for s in dummy $(SHLIBS); do \
+	@set -e; for s in dummy $(INSTALL_SHLIBS); do \
 		if [ &quot;$$s&quot; = &quot;dummy&quot; ]; then continue; fi; \
 		fn=`basename $$s`; \
 		echo &quot;install $$s -&gt; $(DESTDIR)$(INSTALLTOP)/bin/$$fn&quot;; \
@@ -490,7 +490,7 @@ install_runtime:
 		      $(DESTDIR)$(INSTALLTOP)/bin/$$fn; \
 	done
 	@ : {- output_on() unless windowsdll(); &quot;&quot; -}
-	@set -e; for x in dummy $(PROGRAMS); do \
+	@set -e; for x in dummy $(INSTALL_PROGRAMS); do \
 		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
 		fn=`basename $$x`; \
 		echo &quot;install $$x -&gt; $(DESTDIR)$(INSTALLTOP)/bin/$$fn&quot;; \
@@ -511,7 +511,7 @@ install_runtime:
 
 uninstall_runtime:
 	@echo &quot;*** Uninstalling runtime files&quot;
-	@set -e; for x in dummy $(PROGRAMS); \
+	@set -e; for x in dummy $(INSTALL_PROGRAMS); \
 	do  \
 		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
 		fn=`basename $$x`; \
@@ -533,7 +533,7 @@ uninstall_runtime:
 		$(RM) $(DESTDIR)$(OPENSSLDIR)/misc/$$fn; \
 	done
 	@ : {- output_off() unless windowsdll(); &quot;&quot; -}
-	@set -e; for s in dummy $(SHLIBS); do \
+	@set -e; for s in dummy $(INSTALL_SHLIBS); do \
 		if [ &quot;$$s&quot; = &quot;dummy&quot; ]; then continue; fi; \
 		fn=`basename $$s`; \
 		echo &quot;$(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$fn&quot;; \
diff --git a/Configurations/windows-makefile.tmpl b/Configurations/windows-makefile.tmpl
index 4eedaa2..b35feb5 100644
--- a/Configurations/windows-makefile.tmpl
+++ b/Configurations/windows-makefile.tmpl
@@ -65,15 +65,9 @@ SHLIBS={- join(&quot; &quot;, map { shlib($_) } @{$unified_info{libraries}}) -}
 SHLIBPDBS={- join(&quot; &quot;, map { local $shlibext = &quot;.pdb&quot;; shlib($_) } @{$unified_info{libraries}}) -}
 ENGINES={- join(&quot; &quot;, map { dso($_) } @{$unified_info{engines}}) -}
 ENGINEPDBS={- join(&quot; &quot;, map { local $dsoext = &quot;.pdb&quot;; dso($_) } @{$unified_info{engines}}) -}
-PROGRAMS={- join(&quot; &quot;, map { $_.$exeext } grep { !m|^test\\| } @{$unified_info{programs}}) -}
-PROGRAMPDBS={- join(&quot; &quot;, map { $_.&quot;.pdb&quot; } grep { !m|^test\\| } @{$unified_info{programs}}) -}
-TESTPROGS={- join(&quot; &quot;, map { $_.$exeext } grep { m|^test\\| } @{$unified_info{programs}}) -}
+PROGRAMS={- join(&quot; &quot;, map { $_.$exeext } @{$unified_info{programs}}) -}
+PROGRAMPDBS={- join(&quot; &quot;, map { $_.&quot;.pdb&quot; } @{$unified_info{programs}}) -}
 SCRIPTS={- join(&quot; &quot;, @{$unified_info{scripts}}) -}
-{- output_off() if $disabled{apps}; &quot;&quot; -}
-BIN_SCRIPTS=$(BLDDIR)\tools\c_rehash.pl
-MISC_SCRIPTS=$(BLDDIR)\apps\CA.pl $(BLDDIR)\apps\tsget.pl
-{- output_on() if $disabled{apps}; &quot;&quot; -}
-
 {- output_off() if $disabled{makedepend}; &quot;&quot; -}
 DEPS={- join(&quot; &quot;, map { (my $x = $_) =~ s|\.o$|$depext|; $x; }
                   grep { $unified_info{sources}-&gt;{$_}-&gt;[0] =~ /\.c$/ }
@@ -87,6 +81,18 @@ GENERATED={- join(&quot; &quot;,
                     grep { /\.o$/ } keys %{$unified_info{sources}} ),
                   ( grep { /\.h$/ } keys %{$unified_info{generate}} )) -}
 
+INSTALL_LIBS={- join(&quot; &quot;, map { $_.$libext } @{$unified_info{install}-&gt;{libraries}}) -}
+INSTALL_SHLIBS={- join(&quot; &quot;, map { shlib($_) } @{$unified_info{install}-&gt;{libraries}}) -}
+INSTALL_SHLIBPDBS={- join(&quot; &quot;, map { local $shlibext = &quot;.pdb&quot;; shlib($_) } @{$unified_info{install}-&gt;{libraries}}) -}
+INSTALL_ENGINES={- join(&quot; &quot;, map { dso($_) } @{$unified_info{install}-&gt;{engines}}) -}
+INSTALL_ENGINEPDBS={- join(&quot; &quot;, map { local $dsoext = &quot;.pdb&quot;; dso($_) } @{$unified_info{install}-&gt;{engines}}) -}
+INSTALL_PROGRAMS={- join(&quot; &quot;, map { $_.$exeext } grep { !m|^test\\| } @{$unified_info{install}-&gt;{programs}}) -}
+INSTALL_PROGRAMPDBS={- join(&quot; &quot;, map { $_.&quot;.pdb&quot; } grep { !m|^test\\| } @{$unified_info{install}-&gt;{programs}}) -}
+{- output_off() if $disabled{apps}; &quot;&quot; -}
+BIN_SCRIPTS=$(BLDDIR)\tools\c_rehash.pl
+MISC_SCRIPTS=$(BLDDIR)\apps\CA.pl $(BLDDIR)\apps\tsget.pl
+{- output_on() if $disabled{apps}; &quot;&quot; -}
+
 # Do not edit these manually. Use Configure with --prefix or --openssldir
 # to change this!  Short explanation in the top comment in Configure
 INSTALLTOP_dev={- # $prefix is used in the OPENSSLDIR perl snippet
@@ -172,22 +178,22 @@ PROCESSOR= {- $config{processor} -}
 # The main targets ###################################################
 
 all: build_generated \
-     build_libs_nodep build_engines_nodep build_apps_nodep depend
+     build_libs_nodep build_engines_nodep build_programs_nodep depend
 
 build_libs: build_generated build_libs_nodep depend
 build_libs_nodep: $(LIBS) {- join(&quot; &quot;,map { shlib_import($_) } @{$unified_info{libraries}}) -}
 build_engines: build_generated build_engines_nodep depend
 build_engines_nodep: $(ENGINES)
-build_apps: build_generated build_apps_nodep depend
-build_apps_nodep: $(PROGRAMS) $(SCRIPTS)
-build_tests: build_generated build_tests_nodep depend
-build_tests_nodep: $(TESTPROGS)
+build_programs: build_generated build_programs_nodep depend
+build_programs_nodep: $(PROGRAMS) $(SCRIPTS)
 
 build_generated: $(GENERATED_MANDATORY)
 
+# Kept around for backward compatibility
+build_apps build_tests: build_programs
+
 test: tests
-tests: build_generated \
-       build_tests_nodep build_apps_nodep build_engines_nodep depend
+tests: build_generated build_programs_nodep build_engines_nodep depend
 	@rem {- output_off() if $disabled{tests}; &quot;&quot; -}
 	set SRCTOP=$(SRCDIR)
 	set BLDTOP=$(BLDDIR)
@@ -217,7 +223,7 @@ libclean:
 	-del /Q ossl_static.pdb
 
 clean: libclean
-	-del /Q /F $(PROGRAMS) $(TESTPROGS) $(ENGINES) $(SCRIPTS)
+	-del /Q /F $(PROGRAMS) $(ENGINES) $(SCRIPTS)
 	-del /Q /F $(GENERATED)
 	-del /Q /S /F *.d
 	-del /Q /S /F *.obj
@@ -268,7 +274,7 @@ install_dev:
 	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(BLDDIR)\include\openssl\*.h \
 				       &quot;$(INSTALLTOP)\include\openssl&quot;
 	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\mkdir-p.pl&quot; &quot;$(INSTALLTOP)\$(LIBDIR)&quot;
-	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(LIBS) \
+	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(INSTALL_LIBS) \
 				       &quot;$(INSTALLTOP)\$(LIBDIR)&quot;
 	@if &quot;$(SHLIBS)&quot;==&quot;&quot; \
 	 &quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; ossl_static.pdb \
@@ -281,9 +287,9 @@ install_engines:
 	@echo *** Installing engines
 	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\mkdir-p.pl&quot; &quot;$(ENGINESDIR)&quot;
 	@if not &quot;$(ENGINES)&quot;==&quot;&quot; \
-	 &quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(ENGINES) &quot;$(ENGINESDIR)&quot;
+	 &quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(INSTALL_ENGINES) &quot;$(ENGINESDIR)&quot;
 	@if not &quot;$(ENGINES)&quot;==&quot;&quot; \
-	 &quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(ENGINEPDBS) &quot;$(ENGINESDIR)&quot;
+	 &quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(INSTALL_ENGINEPDBS) &quot;$(ENGINESDIR)&quot;
 
 uninstall_engines:
 
@@ -292,13 +298,13 @@ install_runtime:
 	@echo *** Installing runtime files
 	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\mkdir-p.pl&quot; &quot;$(INSTALLTOP)\bin&quot;
 	@if not &quot;$(SHLIBS)&quot;==&quot;&quot; \
-	 &quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(SHLIBS) &quot;$(INSTALLTOP)\bin&quot;
+	 &quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(INSTALL_SHLIBS) &quot;$(INSTALLTOP)\bin&quot;
 	@if not &quot;$(SHLIBS)&quot;==&quot;&quot; \
-	 &quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(SHLIBPDBS) \
+	 &quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(INSTALL_SHLIBPDBS) \
                                         &quot;$(INSTALLTOP)\bin&quot;
-	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(PROGRAMS) \
+	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(INSTALL_PROGRAMS) \
                                         &quot;$(INSTALLTOP)\bin&quot;
-	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(PROGRAMPDBS) \
+	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(INSTALL_PROGRAMPDBS) \
                                         &quot;$(INSTALLTOP)\bin&quot;
 	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(BIN_SCRIPTS) \
                                         &quot;$(INSTALLTOP)\bin&quot;
diff --git a/Configure b/Configure
index bd49a89..bd13d37 100755
--- a/Configure
+++ b/Configure
@@ -1360,9 +1360,13 @@ if ($builder eq &quot;unified&quot;) {
         my $f = $_-&gt;[1];
         # The basic things we're trying to build
         my @programs = ();
+        my @programs_install = ();
         my @libraries = ();
+        my @libraries_install = ();
         my @engines = ();
+        my @engines_install = ();
         my @scripts = ();
+        my @scripts_install = ();
         my @extra = ();
         my @overrides = ();
         my @intermediates = ();
@@ -1426,18 +1430,42 @@ if ($builder eq &quot;unified&quot;) {
             qr/^\s*ENDIF\s*$/
             =&gt; sub { die &quot;ENDIF out of scope&quot; if ! @skip;
                      pop @skip; },
-            qr/^\s*PROGRAMS\s*=\s*(.*)\s*$/
-            =&gt; sub { push @programs, tokenize($1)
-                         if !@skip || $skip[$#skip] &gt; 0 },
-            qr/^\s*LIBS\s*=\s*(.*)\s*$/
-            =&gt; sub { push @libraries, tokenize($1)
-                         if !@skip || $skip[$#skip] &gt; 0 },
-            qr/^\s*ENGINES\s*=\s*(.*)\s*$/
-            =&gt; sub { push @engines, tokenize($1)
-                         if !@skip || $skip[$#skip] &gt; 0 },
-            qr/^\s*SCRIPTS\s*=\s*(.*)\s*$/
-            =&gt; sub { push @scripts, tokenize($1)
-                         if !@skip || $skip[$#skip] &gt; 0 },
+            qr/^\s*PROGRAMS(_NO_INST)?\s*=\s*(.*)\s*$/
+            =&gt; sub {
+                if (!@skip || $skip[$#skip] &gt; 0) {
+                    my $install = $1;
+                    my @x = tokenize($2);
+                    push @programs, @x;
+                    push @programs_install, @x unless $install;
+                }
+            },
+            qr/^\s*LIBS(_NO_INST)?\s*=\s*(.*)\s*$/
+            =&gt; sub {
+                if (!@skip || $skip[$#skip] &gt; 0) {
+                    my $install = $1;
+                    my @x = tokenize($2);
+                    push @libraries, @x;
+                    push @libraries_install, @x unless $install;
+                }
+            },
+            qr/^\s*ENGINES(_NO_INST)?\s*=\s*(.*)\s*$/
+            =&gt; sub {
+                if (!@skip || $skip[$#skip] &gt; 0) {
+                    my $install = $1;
+                    my @x = tokenize($2);
+                    push @engines, @x;
+                    push @engines_install, @x unless $install;
+                }
+            },
+            qr/^\s*SCRIPTS(_NO_INST)?\s*=\s*(.*)\s*$/
+            =&gt; sub {
+                if (!@skip || $skip[$#skip] &gt; 0) {
+                    my $install = $1;
+                    my @x = tokenize($2);
+                    push @scripts, @x;
+                    push @scripts_install, @x unless $install;
+                }
+            },
             qr/^\s*EXTRA\s*=\s*(.*)\s*$/
             =&gt; sub { push @extra, tokenize($1)
                          if !@skip || $skip[$#skip] &gt; 0 },
@@ -1523,6 +1551,14 @@ if ($builder eq &quot;unified&quot;) {
             $unified_info{programs}-&gt;{$program} = 1;
         }
 
+        foreach (@programs_install) {
+            my $program = cleanfile($buildd, $_, $blddir);
+            if ($unified_info{rename}-&gt;{$program}) {
+                $program = $unified_info{rename}-&gt;{$program};
+            }
+            $unified_info{install}-&gt;{programs}-&gt;{$program} = 1;
+        }
+
         foreach (@libraries) {
             my $library = cleanfile($buildd, $_, $blddir);
             if ($unified_info{rename}-&gt;{$library}) {
@@ -1531,6 +1567,14 @@ if ($builder eq &quot;unified&quot;) {
             $unified_info{libraries}-&gt;{$library} = 1;
         }
 
+        foreach (@libraries_install) {
+            my $library = cleanfile($buildd, $_, $blddir);
+            if ($unified_info{rename}-&gt;{$library}) {
+                $library = $unified_info{rename}-&gt;{$library};
+            }
+            $unified_info{install}-&gt;{libraries}-&gt;{$library} = 1;
+        }
+
         die &lt;&lt;&quot;EOF&quot; if scalar @engines and !$config{dynamic_engines};
 ENGINES can only be used if configured with 'dynamic-engine'.
 This is usually a fault in a build.info file.
@@ -1543,6 +1587,14 @@ EOF
             $unified_info{engines}-&gt;{$library} = 1;
         }
 
+        foreach (@engines_install) {
+            my $library = cleanfile($buildd, $_, $blddir);
+            if ($unified_info{rename}-&gt;{$library}) {
+                $library = $unified_info{rename}-&gt;{$library};
+            }
+            $unified_info{install}-&gt;{engines}-&gt;{$library} = 1;
+        }
+
         foreach (@scripts) {
             my $script = cleanfile($buildd, $_, $blddir);
             if ($unified_info{rename}-&gt;{$script}) {
@@ -1551,6 +1603,14 @@ EOF
             $unified_info{scripts}-&gt;{$script} = 1;
         }
 
+        foreach (@scripts_install) {
+            my $script = cleanfile($buildd, $_, $blddir);
+            if ($unified_info{rename}-&gt;{$script}) {
+                $script = $unified_info{rename}-&gt;{$script};
+            }
+            $unified_info{install}-&gt;{scripts}-&gt;{$script} = 1;
+        }
+
         foreach (@extra) {
             my $extra = cleanfile($buildd, $_, $blddir);
             $unified_info{extra}-&gt;{$extra} = 1;
@@ -1749,7 +1809,7 @@ EOF
         $unified_info{$_} = [ sort keys %{$unified_info{$_}} ];
     }
     # Two level structures
-    foreach my $l1 ((&quot;sources&quot;, &quot;shared_sources&quot;, &quot;ldadd&quot;, &quot;depends&quot;)) {
+    foreach my $l1 ((&quot;install&quot;, &quot;sources&quot;, &quot;shared_sources&quot;, &quot;ldadd&quot;, &quot;depends&quot;)) {
         foreach my $l2 (sort keys %{$unified_info{$l1}}) {
             $unified_info{$l1}-&gt;{$l2} =
                 [ sort keys %{$unified_info{$l1}-&gt;{$l2}} ];
diff --git a/engines/build.info b/engines/build.info
index e42684f..25917ff 100644
--- a/engines/build.info
+++ b/engines/build.info
@@ -8,7 +8,8 @@ IF[{- !$disabled{&quot;engine&quot;} -}]
       SOURCE[../libcrypto]=e_capi.c
     ENDIF
   ELSE
-    ENGINES=padlock dasync ossltest
+    ENGINES=padlock dasync
+    ENGINES_NO_INST=ossltest
     SOURCE[padlock]=e_padlock.c {- $target{padlock_asm_src} -}
     DEPEND[padlock]=../libcrypto
     INCLUDE[padlock]=../include
diff --git a/fuzz/build.info b/fuzz/build.info
index a3d3849..9d90bc7 100644
--- a/fuzz/build.info
+++ b/fuzz/build.info
@@ -9,7 +9,7 @@
 -}
 
 IF[{- !$disabled{&quot;fuzz-afl&quot;} || !$disabled{&quot;fuzz-libfuzzer&quot;} -}]
-  PROGRAMS=asn1 asn1parse bignum bndiv cms conf crl ct server x509
+  PROGRAMS_NO_INST=asn1 asn1parse bignum bndiv cms conf crl ct server x509
 
   SOURCE[asn1]=asn1.c driver.c
   INCLUDE[asn1]=../include {- $ex_inc -}
@@ -53,7 +53,7 @@ IF[{- !$disabled{&quot;fuzz-afl&quot;} || !$disabled{&quot;fuzz-libfuzzer&quot;} -}]
 ENDIF
 
 IF[{- !$disabled{tests} -}]
-  PROGRAMS=asn1-test asn1parse-test bignum-test bndiv-test cms-test conf-test crl-test ct-test server-test x509-test
+  PROGRAMS_NO_INST=asn1-test asn1parse-test bignum-test bndiv-test cms-test conf-test crl-test ct-test server-test x509-test
 
   SOURCE[asn1-test]=asn1.c test-corpus.c
   INCLUDE[asn1-test]=../include
diff --git a/test/build.info b/test/build.info
index 30f94a2..4e1ec65 100644
--- a/test/build.info
+++ b/test/build.info
@@ -1,5 +1,5 @@
 IF[{- !$disabled{tests} -}]
-  PROGRAMS=\
+  PROGRAMS_NO_INST=\
           aborttest \
           sanitytest bntest \
           ectest ecdsatest ecdhtest gmdifftest pbelutest ideatest \
@@ -275,7 +275,7 @@ IF[{- !$disabled{tests} -}]
        next if grep { $_ eq lc(&quot;$name.h&quot;) } @nogo_headers;
        $OUT .= &lt;&lt;&quot;_____&quot;;
 
-  PROGRAMS=buildtest_$name
+  PROGRAMS_NO_INST=buildtest_$name
   GENERATE[buildtest_$name.c]=generate_buildtest.pl $name
   SOURCE[buildtest_$name]=buildtest_$name.c
   INCLUDE[buildtest_$name]=../include
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009083.html">[openssl-commits] [openssl]  master update
</A></li>
	<LI>Next message: <A HREF="009088.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9085">[ date ]</a>
              <a href="thread.html#9085">[ thread ]</a>
              <a href="subject.html#9085">[ subject ]</a>
              <a href="author.html#9085">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
