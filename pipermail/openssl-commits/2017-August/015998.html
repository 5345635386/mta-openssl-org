<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2017-August/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1503014771.083370.17253.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015989.html">
   <LINK REL="Next"  HREF="016004.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  master update</H1>
    <B>paul.dale at oracle.com</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1503014771.083370.17253.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  master update">paul.dale at oracle.com
       </A><BR>
    <I>Fri Aug 18 00:06:11 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="015989.html">[openssl-commits] [openssl]  master update
</A></li>
        <LI>Next message: <A HREF="016004.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15998">[ date ]</a>
              <a href="thread.html#15998">[ thread ]</a>
              <a href="subject.html#15998">[ subject ]</a>
              <a href="author.html#15998">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  b99fe5f4927b305bae88daac2484c284fe749329 (commit)
      from  524fdd515569e12047ddb29ba4c7f19706aacc98 (commit)


- Log -----------------------------------------------------------------
commit b99fe5f4927b305bae88daac2484c284fe749329
Author: Pauli &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">paul.dale at oracle.com</A>&gt;
Date:   Fri Aug 18 09:50:25 2017 +1000

    Remove tests dependence on e_os.h
    
    Apart from ssltest_old.c, the test suite relied on e_os.h for the
    OSSL_NELEM macro and nothing else.
    
    The ssltest_old.c also requires EXIT and some socket macros.
    
    Create a new header to define the OSSL_NELEM macro and use that instead.
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/4186">https://github.com/openssl/openssl/pull/4186</A>)

-----------------------------------------------------------------------

Summary of changes:
 e_os.h                                           | 6 +++---
 test/testutil/init.c =&gt; include/internal/nelem.h | 9 ++++-----
 test/asn1_internal_test.c                        | 2 +-
 test/asn1_time_test.c                            | 2 +-
 test/bad_dtls_test.c                             | 2 +-
 test/bftest.c                                    | 2 +-
 test/bntest.c                                    | 2 +-
 test/casttest.c                                  | 2 +-
 test/cipher_overhead_test.c                      | 2 +-
 test/cipherbytes_test.c                          | 2 +-
 test/cipherlist_test.c                           | 2 +-
 test/ciphername_test.c                           | 2 +-
 test/constant_time_test.c                        | 2 +-
 test/crltest.c                                   | 2 +-
 test/d2i_test.c                                  | 2 +-
 test/danetest.c                                  | 2 +-
 test/dhtest.c                                    | 2 +-
 test/drbgtest.c                                  | 2 +-
 test/dsatest.c                                   | 2 +-
 test/dtlsv1listentest.c                          | 2 +-
 test/ecstresstest.c                              | 2 +-
 test/ectest.c                                    | 2 +-
 test/evp_extra_test.c                            | 2 +-
 test/exptest.c                                   | 2 +-
 test/handshake_helper.c                          | 2 +-
 test/hmactest.c                                  | 2 +-
 test/ideatest.c                                  | 2 +-
 test/igetest.c                                   | 2 +-
 test/lhash_test.c                                | 2 +-
 test/md2test.c                                   | 2 +-
 test/mdc2_internal_test.c                        | 2 +-
 test/mdc2test.c                                  | 2 +-
 test/modes_internal_test.c                       | 2 +-
 test/poly1305_internal_test.c                    | 2 +-
 test/rc2test.c                                   | 2 +-
 test/rc4test.c                                   | 2 +-
 test/rc5test.c                                   | 2 +-
 test/rsa_test.c                                  | 2 +-
 test/servername_test.c                           | 2 +-
 test/siphash_internal_test.c                     | 2 +-
 test/ssl_cert_table_internal_test.c              | 2 +-
 test/ssl_test_ctx.c                              | 2 +-
 test/ssl_test_ctx_test.c                         | 2 +-
 test/sslapitest.c                                | 2 +-
 test/ssltest_old.c                               | 2 ++
 test/ssltestlib.c                                | 2 +-
 test/stack_test.c                                | 2 +-
 test/test_test.c                                 | 2 +-
 test/testutil/driver.c                           | 2 +-
 test/testutil/format_output.c                    | 2 +-
 test/testutil/main.c                             | 2 +-
 test/testutil/stanza.c                           | 2 +-
 test/testutil/tests.c                            | 2 +-
 test/time_offset_test.c                          | 2 +-
 test/v3nametest.c                                | 2 +-
 test/x509_internal_test.c                        | 2 +-
 test/x509_time_test.c                            | 2 +-
 test/x509aux.c                                   | 2 +-
 58 files changed, 64 insertions(+), 63 deletions(-)
 copy test/testutil/init.c =&gt; include/internal/nelem.h (75%)

diff --git a/e_os.h b/e_os.h
index 4e01f9b..87d98c2 100644
--- a/e_os.h
+++ b/e_os.h
@@ -1,5 +1,5 @@
 /*
- * Copyright 1995-2016 The OpenSSL Project Authors. All Rights Reserved.
+ * Copyright 1995-2017 The OpenSSL Project Authors. All Rights Reserved.
  *
  * Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
  * this file except in compliance with the License.  You can obtain a copy
@@ -14,6 +14,8 @@
 
 # include &lt;openssl/e_os2.h&gt;
 # include &lt;openssl/crypto.h&gt;
+# include &lt;internal/nelem.h&gt;
+
 /*
  * &lt;openssl/e_os2.h&gt; contains what we can justify to make visible to the
  * outside; this file e_os.h is not part of the exported interface.
@@ -540,8 +542,6 @@ struct servent *getservbyname(const char *name, const char *proto);
 # endif
 /* end vxworks */
 
-#define OSSL_NELEM(x)    (sizeof(x)/sizeof((x)[0]))
-
 #ifdef FUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION
 # define CRYPTO_memcmp memcmp
 #endif
diff --git a/test/testutil/init.c b/include/internal/nelem.h
similarity index 75%
copy from test/testutil/init.c
copy to include/internal/nelem.h
index 5095c7f..d65a21a 100644
--- a/test/testutil/init.c
+++ b/include/internal/nelem.h
@@ -7,9 +7,8 @@
  * <A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>
  */
 
-#include &quot;../testutil.h&quot;
+#ifndef HEADER_NELEM_H
+# define HEADER_NELEM_H
 
-int global_init(void)
-{
-    return 1;
-}
+# define OSSL_NELEM(x)    (sizeof(x)/sizeof((x)[0]))
+#endif
diff --git a/test/asn1_internal_test.c b/test/asn1_internal_test.c
index 194a073..06e324b 100644
--- a/test/asn1_internal_test.c
+++ b/test/asn1_internal_test.c
@@ -16,7 +16,7 @@
 #include &lt;openssl/evp.h&gt;
 #include &lt;openssl/objects.h&gt;
 #include &quot;testutil.h&quot;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 /**********************************************************************
  *
diff --git a/test/asn1_time_test.c b/test/asn1_time_test.c
index 184a18a..897436c 100644
--- a/test/asn1_time_test.c
+++ b/test/asn1_time_test.c
@@ -16,7 +16,7 @@
 #include &lt;openssl/evp.h&gt;
 #include &lt;openssl/objects.h&gt;
 #include &quot;testutil.h&quot;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 struct testdata {
     char *data;             /* TIME string value */
diff --git a/test/bad_dtls_test.c b/test/bad_dtls_test.c
index 2c10a1c..932cb0e 100644
--- a/test/bad_dtls_test.c
+++ b/test/bad_dtls_test.c
@@ -39,7 +39,7 @@
 #include &lt;openssl/kdf.h&gt;
 
 #include &quot;../ssl/packet_locl.h&quot;
-#include &quot;../e_os.h&quot; /* for OSSL_NELEM() */
+#include &lt;internal/nelem.h&gt;
 
 #include &quot;testutil.h&quot;
 
diff --git a/test/bftest.c b/test/bftest.c
index cc509f2..0639ec8 100644
--- a/test/bftest.c
+++ b/test/bftest.c
@@ -19,7 +19,7 @@
 
 #include &quot;testutil.h&quot;
 
-#include &quot;../e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 #ifndef OPENSSL_NO_BF
 # include &lt;openssl/blowfish.h&gt;
diff --git a/test/bntest.c b/test/bntest.c
index f32b308..cb292c6 100644
--- a/test/bntest.c
+++ b/test/bntest.c
@@ -12,7 +12,7 @@
 #include &lt;string.h&gt;
 #include &lt;ctype.h&gt;
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &lt;internal/numbers.h&gt;
 #include &lt;openssl/bn.h&gt;
 #include &lt;openssl/crypto.h&gt;
diff --git a/test/casttest.c b/test/casttest.c
index 0fdcb10..417a4cb 100644
--- a/test/casttest.c
+++ b/test/casttest.c
@@ -12,7 +12,7 @@
 #include &lt;stdlib.h&gt;
 
 #include &lt;openssl/opensslconf.h&gt; /* To see if OPENSSL_NO_CAST is defined */
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 #ifndef OPENSSL_NO_CAST
diff --git a/test/cipher_overhead_test.c b/test/cipher_overhead_test.c
index e93bf33..a07ac7e 100644
--- a/test/cipher_overhead_test.c
+++ b/test/cipher_overhead_test.c
@@ -7,7 +7,7 @@
  * <A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>
  */
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 #ifdef __VMS
diff --git a/test/cipherbytes_test.c b/test/cipherbytes_test.c
index 6601f7b..13d6b23 100644
--- a/test/cipherbytes_test.c
+++ b/test/cipherbytes_test.c
@@ -18,7 +18,7 @@
 #include &lt;openssl/ssl3.h&gt;
 #include &lt;openssl/tls1.h&gt;
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 static SSL_CTX *ctx;
diff --git a/test/cipherlist_test.c b/test/cipherlist_test.c
index 8290427..6ec9631 100644
--- a/test/cipherlist_test.c
+++ b/test/cipherlist_test.c
@@ -18,7 +18,7 @@
 #include &lt;openssl/ssl3.h&gt;
 #include &lt;openssl/tls1.h&gt;
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 typedef struct cipherlist_test_fixture {
diff --git a/test/ciphername_test.c b/test/ciphername_test.c
index f010a3b..0eac902 100644
--- a/test/ciphername_test.c
+++ b/test/ciphername_test.c
@@ -19,7 +19,7 @@
 #include &lt;openssl/ssl3.h&gt;
 #include &lt;openssl/tls1.h&gt;
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 typedef struct cipher_id_name {
diff --git a/test/constant_time_test.c b/test/constant_time_test.c
index 8575194..24cbaf3 100644
--- a/test/constant_time_test.c
+++ b/test/constant_time_test.c
@@ -10,7 +10,7 @@
 #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;internal/constant_time_locl.h&quot;
 #include &quot;testutil.h&quot;
 #include &quot;internal/numbers.h&quot;
diff --git a/test/crltest.c b/test/crltest.c
index 720c13b..f5af4b1 100644
--- a/test/crltest.c
+++ b/test/crltest.c
@@ -7,7 +7,7 @@
  * <A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>
  */
 
-#include &quot;../e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &lt;string.h&gt;
 #include &lt;openssl/bio.h&gt;
 #include &lt;openssl/crypto.h&gt;
diff --git a/test/d2i_test.c b/test/d2i_test.c
index e5ebcfa..48edba4 100644
--- a/test/d2i_test.c
+++ b/test/d2i_test.c
@@ -20,7 +20,7 @@
 #include &lt;openssl/err.h&gt;
 #include &lt;openssl/x509.h&gt;
 #include &lt;openssl/x509v3.h&gt;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 static const ASN1_ITEM *item_type;
 static const char *test_file;
diff --git a/test/danetest.c b/test/danetest.c
index d21f554..de51c83 100644
--- a/test/danetest.c
+++ b/test/danetest.c
@@ -24,7 +24,7 @@
 #endif
 #include &quot;testutil.h&quot;
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 #define _UC(c) ((unsigned char)(c))
 
diff --git a/test/dhtest.c b/test/dhtest.c
index 595732c..ac09c44 100644
--- a/test/dhtest.c
+++ b/test/dhtest.c
@@ -11,7 +11,7 @@
 #include &lt;stdlib.h&gt;
 #include &lt;string.h&gt;
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &lt;openssl/crypto.h&gt;
 #include &lt;openssl/bio.h&gt;
 #include &lt;openssl/bn.h&gt;
diff --git a/test/drbgtest.c b/test/drbgtest.c
index 62d2dbd..28d0d90 100644
--- a/test/drbgtest.c
+++ b/test/drbgtest.c
@@ -8,7 +8,7 @@
  */
 
 #include &lt;string.h&gt;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &lt;openssl/crypto.h&gt;
 #include &lt;openssl/err.h&gt;
 #include &lt;openssl/rand.h&gt;
diff --git a/test/dsatest.c b/test/dsatest.c
index 7c58731..d25a1d7 100644
--- a/test/dsatest.c
+++ b/test/dsatest.c
@@ -19,7 +19,7 @@
 #include &lt;openssl/dsa.h&gt;
 
 #include &quot;testutil.h&quot;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 #ifndef OPENSSL_NO_DSA
 static int dsa_cb(int p, int n, BN_GENCB *arg);
diff --git a/test/dtlsv1listentest.c b/test/dtlsv1listentest.c
index e401ccf..00120cc 100644
--- a/test/dtlsv1listentest.c
+++ b/test/dtlsv1listentest.c
@@ -12,7 +12,7 @@
 #include &lt;openssl/bio.h&gt;
 #include &lt;openssl/err.h&gt;
 #include &lt;openssl/conf.h&gt;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 #ifndef OPENSSL_NO_SOCK
diff --git a/test/ecstresstest.c b/test/ecstresstest.c
index e16ccd5..7c76f02 100644
--- a/test/ecstresstest.c
+++ b/test/ecstresstest.c
@@ -8,7 +8,7 @@
  * or in the file LICENSE in the source distribution.
  */
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 #include &lt;stdio.h&gt;
diff --git a/test/ectest.c b/test/ectest.c
index 80e1001..85847e0 100644
--- a/test/ectest.c
+++ b/test/ectest.c
@@ -8,7 +8,7 @@
  * <A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>
  */
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 #ifndef OPENSSL_NO_EC
diff --git a/test/evp_extra_test.c b/test/evp_extra_test.c
index acccfe5..5ca95e4 100644
--- a/test/evp_extra_test.c
+++ b/test/evp_extra_test.c
@@ -16,7 +16,7 @@
 #include &lt;openssl/rsa.h&gt;
 #include &lt;openssl/x509.h&gt;
 #include &quot;testutil.h&quot;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 /*
  * kExampleRSAKeyDER is an RSA private key in ASN.1, DER format. Of course, you
diff --git a/test/exptest.c b/test/exptest.c
index b357a23..62a2377 100644
--- a/test/exptest.c
+++ b/test/exptest.c
@@ -11,7 +11,7 @@
 #include &lt;stdlib.h&gt;
 #include &lt;string.h&gt;
 
-#include &quot;../e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 #include &lt;openssl/bio.h&gt;
 #include &lt;openssl/bn.h&gt;
diff --git a/test/handshake_helper.c b/test/handshake_helper.c
index d200332..b33cdd5 100644
--- a/test/handshake_helper.c
+++ b/test/handshake_helper.c
@@ -18,7 +18,7 @@
 
 #ifndef OPENSSL_NO_SOCK
 # define USE_SOCKETS
-# include &quot;e_os.h&quot;
+# include &lt;internal/nelem.h&gt;
 #endif
 
 #include &quot;handshake_helper.h&quot;
diff --git a/test/hmactest.c b/test/hmactest.c
index efe21e0..abd1193 100644
--- a/test/hmactest.c
+++ b/test/hmactest.c
@@ -11,7 +11,7 @@
 #include &lt;string.h&gt;
 #include &lt;stdlib.h&gt;
 
-#include &quot;../e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 # include &lt;openssl/hmac.h&gt;
 # include &lt;openssl/sha.h&gt;
diff --git a/test/ideatest.c b/test/ideatest.c
index 32fea47..5b715fe 100644
--- a/test/ideatest.c
+++ b/test/ideatest.c
@@ -9,7 +9,7 @@
 
 #include &lt;string.h&gt;
 
-#include &quot;../e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 #ifndef OPENSSL_NO_IDEA
diff --git a/test/igetest.c b/test/igetest.c
index a5c890e..8a1db67 100644
--- a/test/igetest.c
+++ b/test/igetest.c
@@ -12,7 +12,7 @@
 #include &lt;openssl/rand.h&gt;
 #include &lt;stdio.h&gt;
 #include &lt;string.h&gt;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 #define TEST_SIZE       128
diff --git a/test/lhash_test.c b/test/lhash_test.c
index 704b180..6deea8d 100644
--- a/test/lhash_test.c
+++ b/test/lhash_test.c
@@ -16,7 +16,7 @@
 #include &lt;openssl/err.h&gt;
 #include &lt;openssl/crypto.h&gt;
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 /*
diff --git a/test/md2test.c b/test/md2test.c
index cda8469..df55932 100644
--- a/test/md2test.c
+++ b/test/md2test.c
@@ -9,7 +9,7 @@
 
 #include &lt;string.h&gt;
 
-#include &quot;../e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 #ifndef OPENSSL_NO_MD2
diff --git a/test/mdc2_internal_test.c b/test/mdc2_internal_test.c
index 2c8d22d..c5e74ea 100644
--- a/test/mdc2_internal_test.c
+++ b/test/mdc2_internal_test.c
@@ -14,7 +14,7 @@
 
 #include &lt;openssl/mdc2.h&gt;
 #include &quot;testutil.h&quot;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 typedef struct {
     const char *input;
diff --git a/test/mdc2test.c b/test/mdc2test.c
index 4f29953..5dfe60e 100644
--- a/test/mdc2test.c
+++ b/test/mdc2test.c
@@ -9,7 +9,7 @@
 
 #include &lt;string.h&gt;
 
-#include &quot;../e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 #if defined(OPENSSL_NO_DES) &amp;&amp; !defined(OPENSSL_NO_MDC2)
diff --git a/test/modes_internal_test.c b/test/modes_internal_test.c
index e2eb3b6..3fd0498 100644
--- a/test/modes_internal_test.c
+++ b/test/modes_internal_test.c
@@ -16,7 +16,7 @@
 #include &lt;openssl/modes.h&gt;
 #include &quot;../crypto/modes/modes_lcl.h&quot;
 #include &quot;testutil.h&quot;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 typedef struct {
     size_t size;
diff --git a/test/poly1305_internal_test.c b/test/poly1305_internal_test.c
index 592f4b6..55b7644 100644
--- a/test/poly1305_internal_test.c
+++ b/test/poly1305_internal_test.c
@@ -15,7 +15,7 @@
 #include &quot;testutil.h&quot;
 #include &quot;internal/poly1305.h&quot;
 #include &quot;../crypto/poly1305/poly1305_local.h&quot;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 typedef struct {
     size_t size;
diff --git a/test/rc2test.c b/test/rc2test.c
index 6323d81..fc00076 100644
--- a/test/rc2test.c
+++ b/test/rc2test.c
@@ -7,7 +7,7 @@
  * <A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>
  */
 
-#include &quot;../e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 #ifndef OPENSSL_NO_RC2
diff --git a/test/rc4test.c b/test/rc4test.c
index b2032fd..e3f41b6 100644
--- a/test/rc4test.c
+++ b/test/rc4test.c
@@ -9,7 +9,7 @@
 
 #include &lt;string.h&gt;
 
-#include &quot;../e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 #ifndef OPENSSL_NO_RC4
diff --git a/test/rc5test.c b/test/rc5test.c
index 16a0364..9aa214f 100644
--- a/test/rc5test.c
+++ b/test/rc5test.c
@@ -9,7 +9,7 @@
 
 #include &lt;string.h&gt;
 
-#include &quot;../e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 #ifndef OPENSSL_NO_RC5
diff --git a/test/rsa_test.c b/test/rsa_test.c
index 55339f9..13dcde1 100644
--- a/test/rsa_test.c
+++ b/test/rsa_test.c
@@ -12,7 +12,7 @@
 #include &lt;stdio.h&gt;
 #include &lt;string.h&gt;
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 #include &lt;openssl/crypto.h&gt;
 #include &lt;openssl/err.h&gt;
diff --git a/test/servername_test.c b/test/servername_test.c
index e0fe4d5..f1b66ee 100644
--- a/test/servername_test.c
+++ b/test/servername_test.c
@@ -21,7 +21,7 @@
 #include &quot;../ssl/packet_locl.h&quot;
 
 #include &quot;testutil.h&quot;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 #define CLIENT_VERSION_LEN      2
 
diff --git a/test/siphash_internal_test.c b/test/siphash_internal_test.c
index ca24339..60a2d8d 100644
--- a/test/siphash_internal_test.c
+++ b/test/siphash_internal_test.c
@@ -16,7 +16,7 @@
 #include &quot;testutil.h&quot;
 #include &quot;internal/siphash.h&quot;
 #include &quot;../crypto/siphash/siphash_local.h&quot;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 static BIO* b_stderr = NULL;
 static BIO* b_stdout = NULL;
diff --git a/test/ssl_cert_table_internal_test.c b/test/ssl_cert_table_internal_test.c
index 9d6d2b5..9f52015 100644
--- a/test/ssl_cert_table_internal_test.c
+++ b/test/ssl_cert_table_internal_test.c
@@ -14,7 +14,7 @@
 
 #include &lt;openssl/ssl.h&gt;
 #include &quot;testutil.h&quot;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 #ifdef __VMS
 # pragma names save
diff --git a/test/ssl_test_ctx.c b/test/ssl_test_ctx.c
index b581cdf..9dc3395 100644
--- a/test/ssl_test_ctx.c
+++ b/test/ssl_test_ctx.c
@@ -12,7 +12,7 @@
 #include &lt;openssl/e_os2.h&gt;
 #include &lt;openssl/crypto.h&gt;
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;ssl_test_ctx.h&quot;
 #include &quot;testutil.h&quot;
 
diff --git a/test/ssl_test_ctx_test.c b/test/ssl_test_ctx_test.c
index f7ffe40..2376ce1 100644
--- a/test/ssl_test_ctx_test.c
+++ b/test/ssl_test_ctx_test.c
@@ -15,7 +15,7 @@
 #include &lt;stdio.h&gt;
 #include &lt;string.h&gt;
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;ssl_test_ctx.h&quot;
 #include &quot;testutil.h&quot;
 #include &lt;openssl/e_os2.h&gt;
diff --git a/test/sslapitest.c b/test/sslapitest.c
index 1c43686..dfcbf11 100644
--- a/test/sslapitest.c
+++ b/test/sslapitest.c
@@ -17,7 +17,7 @@
 
 #include &quot;ssltestlib.h&quot;
 #include &quot;testutil.h&quot;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;../ssl/ssl_locl.h&quot;
 
 static char *cert = NULL;
diff --git a/test/ssltest_old.c b/test/ssltest_old.c
index 3a8d9b2..9e3bb7a 100644
--- a/test/ssltest_old.c
+++ b/test/ssltest_old.c
@@ -25,6 +25,8 @@
 #include &lt;string.h&gt;
 #include &lt;time.h&gt;
 
+#include &lt;internal/nelem.h&gt;
+
 #define USE_SOCKETS
 #include &quot;e_os.h&quot;
 
diff --git a/test/ssltestlib.c b/test/ssltestlib.c
index 64acea3..410d323 100644
--- a/test/ssltestlib.c
+++ b/test/ssltestlib.c
@@ -9,7 +9,7 @@
 
 #include &lt;string.h&gt;
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;ssltestlib.h&quot;
 #include &quot;testutil.h&quot;
 
diff --git a/test/stack_test.c b/test/stack_test.c
index ba2ceaf..922dfdd 100644
--- a/test/stack_test.c
+++ b/test/stack_test.c
@@ -16,7 +16,7 @@
 #include &lt;openssl/err.h&gt;
 #include &lt;openssl/crypto.h&gt;
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 /* The macros below generate unused functions which error out one of the clang
diff --git a/test/test_test.c b/test/test_test.c
index ae16d82..742cd61 100644
--- a/test/test_test.c
+++ b/test/test_test.c
@@ -16,7 +16,7 @@
 #include &lt;openssl/crypto.h&gt;
 #include &lt;openssl/bn.h&gt;
 
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 #define TEST(expected, test) test_case((expected), #test, (test))
diff --git a/test/testutil/driver.c b/test/testutil/driver.c
index 274d3cd..1859706 100644
--- a/test/testutil/driver.c
+++ b/test/testutil/driver.c
@@ -14,7 +14,7 @@
 #include &lt;string.h&gt;
 #include &lt;assert.h&gt;
 
-#include &quot;../../e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &lt;openssl/bio.h&gt;
 
 /*
diff --git a/test/testutil/format_output.c b/test/testutil/format_output.c
index ae3bf0e..13123d5 100644
--- a/test/testutil/format_output.c
+++ b/test/testutil/format_output.c
@@ -13,7 +13,7 @@
 
 #include &lt;string.h&gt;
 #include &lt;ctype.h&gt;
-#include &quot;../../e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 /* The size of memory buffers to display on failure */
 #define MEM_BUFFER_SIZE     (2000)
diff --git a/test/testutil/main.c b/test/testutil/main.c
index 34abcb2..2f4eeb6 100644
--- a/test/testutil/main.c
+++ b/test/testutil/main.c
@@ -8,7 +8,7 @@
  */
 
 #include &quot;../testutil.h&quot;
-#include &quot;../../e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;output.h&quot;
 #include &quot;tu_local.h&quot;
 
diff --git a/test/testutil/stanza.c b/test/testutil/stanza.c
index 8a8f0cc..3596752 100644
--- a/test/testutil/stanza.c
+++ b/test/testutil/stanza.c
@@ -12,7 +12,7 @@
 #include &lt;string.h&gt;
 #include &lt;ctype.h&gt;
 
-#include &quot;e_os.h&quot;
+#include &quot;internal/nelem.h&quot;
 #include &quot;../testutil.h&quot;
 #include &quot;tu_local.h&quot;
 
diff --git a/test/testutil/tests.c b/test/testutil/tests.c
index b2d95db..cea81ca 100644
--- a/test/testutil/tests.c
+++ b/test/testutil/tests.c
@@ -14,7 +14,7 @@
 #include &lt;errno.h&gt;
 #include &lt;string.h&gt;
 #include &lt;ctype.h&gt;
-#include &quot;../../e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 /*
  * Output a failed test first line.
diff --git a/test/time_offset_test.c b/test/time_offset_test.c
index b7f1e87..8814ccb 100644
--- a/test/time_offset_test.c
+++ b/test/time_offset_test.c
@@ -16,7 +16,7 @@
 #include &lt;openssl/asn1.h&gt;
 #include &lt;openssl/x509.h&gt;
 #include &quot;testutil.h&quot;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 typedef struct {
     const char *data;
diff --git a/test/v3nametest.c b/test/v3nametest.c
index 0f89260..36f8df6 100644
--- a/test/v3nametest.c
+++ b/test/v3nametest.c
@@ -8,7 +8,7 @@
  */
 
 #include &lt;string.h&gt;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &lt;openssl/x509.h&gt;
 #include &lt;openssl/x509v3.h&gt;
 #include &quot;testutil.h&quot;
diff --git a/test/x509_internal_test.c b/test/x509_internal_test.c
index 17517cd..930c01c 100644
--- a/test/x509_internal_test.c
+++ b/test/x509_internal_test.c
@@ -15,7 +15,7 @@
 #include &lt;openssl/x509.h&gt;
 #include &lt;openssl/x509v3.h&gt;
 #include &quot;testutil.h&quot;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 /**********************************************************************
  *
diff --git a/test/x509_time_test.c b/test/x509_time_test.c
index 7790b82..e8cec0c 100644
--- a/test/x509_time_test.c
+++ b/test/x509_time_test.c
@@ -15,7 +15,7 @@
 #include &lt;openssl/asn1.h&gt;
 #include &lt;openssl/x509.h&gt;
 #include &quot;testutil.h&quot;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 
 typedef struct {
     const char *data;
diff --git a/test/x509aux.c b/test/x509aux.c
index 13a2ffc..d38aeb0 100644
--- a/test/x509aux.c
+++ b/test/x509aux.c
@@ -16,7 +16,7 @@
 #include &lt;openssl/pem.h&gt;
 #include &lt;openssl/conf.h&gt;
 #include &lt;openssl/err.h&gt;
-#include &quot;e_os.h&quot;
+#include &lt;internal/nelem.h&gt;
 #include &quot;testutil.h&quot;
 
 static int test_certs(int num)
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015989.html">[openssl-commits] [openssl]  master update
</A></li>
	<LI>Next message: <A HREF="016004.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15998">[ date ]</a>
              <a href="thread.html#15998">[ thread ]</a>
              <a href="subject.html#15998">[ subject ]</a>
              <a href="author.html#15998">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
