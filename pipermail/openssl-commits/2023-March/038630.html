<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl/openssl] 0fc00f: Do not fail if ctx dup does not succeed
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2023-March/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%200fc00f%3A%20Do%20not%20fail%20if%20ctx%20dup%20does%20not%20succeed&In-Reply-To=%3Copenssl/openssl/push/refs/heads/master/dba97d-3fc2b7%40github.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038629.html">
   <LINK REL="Next"  HREF="038631.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl/openssl] 0fc00f: Do not fail if ctx dup does not succeed</H1>
    <B>Simo Sorce</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%200fc00f%3A%20Do%20not%20fail%20if%20ctx%20dup%20does%20not%20succeed&In-Reply-To=%3Copenssl/openssl/push/refs/heads/master/dba97d-3fc2b7%40github.com%3E"
       TITLE="[openssl/openssl] 0fc00f: Do not fail if ctx dup does not succeed">noreply at github.com
       </A><BR>
    <I>Tue Mar 14 21:45:26 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="038629.html">[openssl/openssl] fe24a0: Improve the performance of d2i_AutoPrivateKey and ...
</A></li>
        <LI>Next message (by thread): <A HREF="038631.html">[openssl/openssl] d015b5: Remove spurious error queue entries on early data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38630">[ date ]</a>
              <a href="thread.html#38630">[ thread ]</a>
              <a href="subject.html#38630">[ subject ]</a>
              <a href="author.html#38630">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  Branch: refs/heads/master
  Home:   <A HREF="https://github.com/openssl/openssl">https://github.com/openssl/openssl</A>
  Commit: 0fc00fc0e3867fc5f95fab1046ad7d2a85db06f8
      <A HREF="https://github.com/openssl/openssl/commit/0fc00fc0e3867fc5f95fab1046ad7d2a85db06f8">https://github.com/openssl/openssl/commit/0fc00fc0e3867fc5f95fab1046ad7d2a85db06f8</A>
  Author: Simo Sorce &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">simo at redhat.com</A>&gt;
  Date:   2023-03-15 (Wed, 15 Mar 2023)

  Changed paths:
    M crypto/evp/m_sigver.c
    M crypto/evp/p_sign.c
    M crypto/evp/p_verify.c
    M doc/man3/EVP_DigestSignInit.pod
    M doc/man3/EVP_DigestVerifyInit.pod
    M doc/man3/EVP_SignInit.pod
    M doc/man3/EVP_VerifyInit.pod

  Log Message:
  -----------
  Do not fail if ctx dup does not succeed

If the ctx was *really* needed we'll probably fail later with an error
anyway, so no point in failing immediately.

Document that this behavior is dependent on the provider used to
implement the signature/verification.

Signed-off-by: Simo Sorce &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">simo at redhat.com</A>&gt;

Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
Reviewed-by: Dmitry Belyavskiy &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">beldmit at gmail.com</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/20375">https://github.com/openssl/openssl/pull/20375</A>)


  Commit: f3c0dd4f0cd3bc282575a98181f8190d81189a78
      <A HREF="https://github.com/openssl/openssl/commit/f3c0dd4f0cd3bc282575a98181f8190d81189a78">https://github.com/openssl/openssl/commit/f3c0dd4f0cd3bc282575a98181f8190d81189a78</A>
  Author: Simo Sorce &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">simo at redhat.com</A>&gt;
  Date:   2023-03-15 (Wed, 15 Mar 2023)

  Changed paths:
    M test/build.info
    M test/evp_extra_test.c
    M test/fake_rsaprov.c

  Log Message:
  -----------
  Add test for context duplication failure

This checks that the first operation successfully completes even if
context duplication fails. But follwing operations get errors as
if the context was finlised.

Signed-off-by: Simo Sorce &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">simo at redhat.com</A>&gt;

Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
Reviewed-by: Dmitry Belyavskiy &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">beldmit at gmail.com</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/20375">https://github.com/openssl/openssl/pull/20375</A>)


  Commit: 3fc2b7d6b8f961144905330dfd4689f5bd515199
      <A HREF="https://github.com/openssl/openssl/commit/3fc2b7d6b8f961144905330dfd4689f5bd515199">https://github.com/openssl/openssl/commit/3fc2b7d6b8f961144905330dfd4689f5bd515199</A>
  Author: Simo Sorce &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">simo at redhat.com</A>&gt;
  Date:   2023-03-15 (Wed, 15 Mar 2023)

  Changed paths:
    M crypto/evp/digest.c
    M crypto/evp/m_sigver.c
    M include/crypto/evp.h
    M include/openssl/evp.h

  Log Message:
  -----------
  Add a flag so finalised contexts are not reused

The EVP layer should not rely on the underlying low level code to
handle catching incorrect reuse of contexts.
Add a flag to mark a context as finalised as needed and then catch and
immediately error on Update/Final operations if called improperly.

Signed-off-by: Simo Sorce &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">simo at redhat.com</A>&gt;

Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
Reviewed-by: Dmitry Belyavskiy &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">beldmit at gmail.com</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/20375">https://github.com/openssl/openssl/pull/20375</A>)


Compare: <A HREF="https://github.com/openssl/openssl/compare/dba97d4c7142...3fc2b7d6b8f9">https://github.com/openssl/openssl/compare/dba97d4c7142...3fc2b7d6b8f9</A>
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="038629.html">[openssl/openssl] fe24a0: Improve the performance of d2i_AutoPrivateKey and ...
</A></li>
	<LI>Next message (by thread): <A HREF="038631.html">[openssl/openssl] d015b5: Remove spurious error queue entries on early data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38630">[ date ]</a>
              <a href="thread.html#38630">[ thread ]</a>
              <a href="subject.html#38630">[ subject ]</a>
              <a href="author.html#38630">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
