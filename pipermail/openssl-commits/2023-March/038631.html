<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl/openssl] d015b5: Remove spurious error queue entries on early data
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2023-March/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%20d015b5%3A%20Remove%20spurious%20error%20queue%20entries%20on%0A%20early%20data&In-Reply-To=%3Copenssl/openssl/push/refs/heads/openssl-3.1/fe24a0-85e247%40github.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="038630.html">
   <LINK REL="Next"  HREF="038632.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl/openssl] d015b5: Remove spurious error queue entries on early data</H1>
    <B>Matt Caswell</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%20d015b5%3A%20Remove%20spurious%20error%20queue%20entries%20on%0A%20early%20data&In-Reply-To=%3Copenssl/openssl/push/refs/heads/openssl-3.1/fe24a0-85e247%40github.com%3E"
       TITLE="[openssl/openssl] d015b5: Remove spurious error queue entries on early data">noreply at github.com
       </A><BR>
    <I>Tue Mar 14 21:47:28 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="038630.html">[openssl/openssl] 0fc00f: Do not fail if ctx dup does not succeed
</A></li>
        <LI>Next message (by thread): <A HREF="038632.html">[openssl/openssl] 3520f5: Remove spurious error queue entries on early data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38631">[ date ]</a>
              <a href="thread.html#38631">[ thread ]</a>
              <a href="subject.html#38631">[ subject ]</a>
              <a href="author.html#38631">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  Branch: refs/heads/openssl-3.1
  Home:   <A HREF="https://github.com/openssl/openssl">https://github.com/openssl/openssl</A>
  Commit: d015b50dc9af0640c7c019a693368c3488d692d8
      <A HREF="https://github.com/openssl/openssl/commit/d015b50dc9af0640c7c019a693368c3488d692d8">https://github.com/openssl/openssl/commit/d015b50dc9af0640c7c019a693368c3488d692d8</A>
  Author: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
  Date:   2023-03-15 (Wed, 15 Mar 2023)

  Changed paths:
    M ssl/record/ssl3_record.c

  Log Message:
  -----------
  Remove spurious error queue entries on early data

Early data decryption is expected to fail sometimes. If it does we should
not leave spurious error entries on the queue.

Fixes #20377

Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
Reviewed-by: Dmitry Belyavskiy &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">beldmit at gmail.com</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/20442">https://github.com/openssl/openssl/pull/20442</A>)


  Commit: 85e247ebc08c07ed4a86f8a128ddceeb3f48bcbc
      <A HREF="https://github.com/openssl/openssl/commit/85e247ebc08c07ed4a86f8a128ddceeb3f48bcbc">https://github.com/openssl/openssl/commit/85e247ebc08c07ed4a86f8a128ddceeb3f48bcbc</A>
  Author: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
  Date:   2023-03-15 (Wed, 15 Mar 2023)

  Changed paths:
    M test/sslapitest.c

  Log Message:
  -----------
  Test that there are no errors on the stack for rejected early data

If we reject early data then it is normal for decryption operations to
fail. We should ensure there are no spurious errors on the stack in that
case. This adds a test for that scenario.

Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
Reviewed-by: Dmitry Belyavskiy &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">beldmit at gmail.com</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/20442">https://github.com/openssl/openssl/pull/20442</A>)


Compare: <A HREF="https://github.com/openssl/openssl/compare/fe24a06cfad9...85e247ebc08c">https://github.com/openssl/openssl/compare/fe24a06cfad9...85e247ebc08c</A>
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="038630.html">[openssl/openssl] 0fc00f: Do not fail if ctx dup does not succeed
</A></li>
	<LI>Next message (by thread): <A HREF="038632.html">[openssl/openssl] 3520f5: Remove spurious error queue entries on early data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38631">[ date ]</a>
              <a href="thread.html#38631">[ thread ]</a>
              <a href="subject.html#38631">[ subject ]</a>
              <a href="author.html#38631">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
