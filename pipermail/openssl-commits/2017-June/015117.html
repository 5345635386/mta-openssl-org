<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2017-June/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1497960738.480901.11338.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015114.html">
   <LINK REL="Next"  HREF="015119.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  master update</H1>
    <B>Rich Salz</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1497960738.480901.11338.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  master update">rsalz at openssl.org
       </A><BR>
    <I>Tue Jun 20 12:12:18 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="015114.html">[openssl-commits] [openssl]  master update
</A></li>
        <LI>Next message: <A HREF="015119.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15117">[ date ]</a>
              <a href="thread.html#15117">[ thread ]</a>
              <a href="subject.html#15117">[ subject ]</a>
              <a href="author.html#15117">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  0ea155fc1c4e6ba3655f435164ea3f884883df29 (commit)
      from  7447c49f0db741f886a9a187e29deef2e2e394db (commit)


- Log -----------------------------------------------------------------
commit 0ea155fc1c4e6ba3655f435164ea3f884883df29
Author: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;
Date:   Mon Jun 19 12:58:06 2017 -0400

    Add RAND_UNIMPLEMENTED error code
    
    See old GitHub PR 38.
    
    Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/3714">https://github.com/openssl/openssl/pull/3714</A>)

-----------------------------------------------------------------------

Summary of changes:
 crypto/err/openssl.txt    |  1 +
 crypto/rand/rand_err.c    |  2 ++
 crypto/rand/rand_lib.c    |  1 +
 doc/man3/RAND_bytes.pod   | 22 +++++++++-------------
 include/openssl/randerr.h |  1 +
 5 files changed, 14 insertions(+), 13 deletions(-)

diff --git a/crypto/err/openssl.txt b/crypto/err/openssl.txt
index 37e3166..e2cf2c5 100644
--- a/crypto/err/openssl.txt
+++ b/crypto/err/openssl.txt
@@ -2042,6 +2042,7 @@ PKCS7_R_UNSUPPORTED_CIPHER_TYPE:111:unsupported cipher type
 PKCS7_R_UNSUPPORTED_CONTENT_TYPE:112:unsupported content type
 PKCS7_R_WRONG_CONTENT_TYPE:113:wrong content type
 PKCS7_R_WRONG_PKCS7_TYPE:114:wrong pkcs7 type
+RAND_R_FUNC_NOT_IMPLEMENTED:101:Function not implemented
 RAND_R_PRNG_NOT_SEEDED:100:PRNG not seeded
 RSA_R_ALGORITHM_MISMATCH:100:algorithm mismatch
 RSA_R_BAD_E_VALUE:101:bad e value
diff --git a/crypto/rand/rand_err.c b/crypto/rand/rand_err.c
index 177a109..6888ed9 100644
--- a/crypto/rand/rand_err.c
+++ b/crypto/rand/rand_err.c
@@ -19,6 +19,8 @@ static const ERR_STRING_DATA RAND_str_functs[] = {
 };
 
 static const ERR_STRING_DATA RAND_str_reasons[] = {
+    {ERR_PACK(ERR_LIB_RAND, 0, RAND_R_FUNC_NOT_IMPLEMENTED),
+    &quot;Function not implemented&quot;},
     {ERR_PACK(ERR_LIB_RAND, 0, RAND_R_PRNG_NOT_SEEDED), &quot;PRNG not seeded&quot;},
     {0, NULL}
 };
diff --git a/crypto/rand/rand_lib.c b/crypto/rand/rand_lib.c
index 7ffd10b..84d6b5d 100644
--- a/crypto/rand/rand_lib.c
+++ b/crypto/rand/rand_lib.c
@@ -137,6 +137,7 @@ int RAND_bytes(unsigned char *buf, int num)
     const RAND_METHOD *meth = RAND_get_rand_method();
     if (meth &amp;&amp; meth-&gt;bytes)
         return meth-&gt;bytes(buf, num);
+    RANDerr(RAND_F_RAND_BYTES, RAND_R_FUNC_NOT_IMPLEMENTED);
     return (-1);
 }
 
diff --git a/doc/man3/RAND_bytes.pod b/doc/man3/RAND_bytes.pod
index a12f867..58aa962 100644
--- a/doc/man3/RAND_bytes.pod
+++ b/doc/man3/RAND_bytes.pod
@@ -22,24 +22,20 @@ RAND_bytes() puts B&lt;num&gt; cryptographically strong pseudo-random bytes
 into B&lt;buf&gt;. An error occurs if the PRNG has not been seeded with
 enough randomness to ensure an unpredictable byte sequence.
 
-RAND_pseudo_bytes() has been deprecated. Users should use RAND_bytes() instead.
-RAND_pseudo_bytes() puts B&lt;num&gt; pseudo-random bytes into B&lt;buf&gt;.
-Pseudo-random byte sequences generated by RAND_pseudo_bytes() will be
-unique if they are of sufficient length, but are not necessarily
-unpredictable. They can be used for non-cryptographic purposes and for
-certain purposes in cryptographic protocols, but usually not for key
-generation etc.
+RAND_pseudo_bytes() has been deprecated; use RAND_bytes() instead.
 
 The contents of B&lt;buf&gt; is mixed into the entropy pool before retrieving
 the new pseudo-random bytes unless disabled at compile time (see FAQ).
 
 =head1 RETURN VALUES
 
-RAND_bytes() returns 1 on success, 0 otherwise. The error code can be
-obtained by L&lt;ERR_get_error(3)&gt;. RAND_pseudo_bytes() returns 1 if the
-bytes generated are cryptographically strong, 0 otherwise. Both
-functions return -1 if they are not supported by the current RAND
-method.
+RAND_bytes() returns 1 on success, -1 if not supported by the current
+RAND method, or 0 on other failure. The error code can be
+obtained by L&lt;ERR_get_error(3)&gt;.
+
+=head HISTORY
+
+RAND_pseudo_bytes() was deprecated in OpenSSL 1.1.0.
 
 =head1 SEE ALSO
 
@@ -48,7 +44,7 @@ L&lt;RAND_add(3)&gt;
 
 =head1 COPYRIGHT
 
-Copyright 2000-2016 The OpenSSL Project Authors. All Rights Reserved.
+Copyright 2000-2017 The OpenSSL Project Authors. All Rights Reserved.
 
 Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
 this file except in compliance with the License.  You can obtain a copy
diff --git a/include/openssl/randerr.h b/include/openssl/randerr.h
index 80f1a68..5c9ab86 100644
--- a/include/openssl/randerr.h
+++ b/include/openssl/randerr.h
@@ -27,6 +27,7 @@ int ERR_load_RAND_strings(void);
 /*
  * RAND reason codes.
  */
+# define RAND_R_FUNC_NOT_IMPLEMENTED                      101
 # define RAND_R_PRNG_NOT_SEEDED                           100
 
 #endif
</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015114.html">[openssl-commits] [openssl]  master update
</A></li>
	<LI>Next message: <A HREF="015119.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15117">[ date ]</a>
              <a href="thread.html#15117">[ thread ]</a>
              <a href="subject.html#15117">[ subject ]</a>
              <a href="author.html#15117">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
