<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2021-July/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1627024132.134493.15494.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034964.html">
   <LINK REL="Next"  HREF="034969.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl]  master update</H1>
    <B>tomas at openssl.org</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1627024132.134493.15494.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl]  master update">tomas at openssl.org
       </A><BR>
    <I>Fri Jul 23 07:08:52 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="034964.html">[openssl]  master update
</A></li>
        <LI>Next message: <A HREF="034969.html">[openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34966">[ date ]</a>
              <a href="thread.html#34966">[ thread ]</a>
              <a href="subject.html#34966">[ subject ]</a>
              <a href="author.html#34966">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  74b7f339aa58af57c0e71b7efca66e6f2db5ae2e (commit)
      from  40184c96103a388209939c1c19920971c05bb78c (commit)


- Log -----------------------------------------------------------------
commit 74b7f339aa58af57c0e71b7efca66e6f2db5ae2e
Author: jenda1 &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">lana.jan at gmail.com</A>&gt;
Date:   Tue Jul 20 16:32:49 2021 +0200

    Makefile: Avoid changing LIBDIR based on whether it already exists
    
    unix-Makefile.tmpl checks if the target LIBDIR exists on the build
    machine or not and based on the result modify the final LIBDIR.
    This should be avoided, build results should not depend on the build
    machine root filesystem layout. It makes the build results unstable.
    
    The fix simply removes the dir existence test from the unix-Makefile.tmpl.
    
    Fixes: openssl#16121
    
    Reviewed-by: Paul Dale &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">pauli at openssl.org</A>&gt;
    Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/16122">https://github.com/openssl/openssl/pull/16122</A>)

-----------------------------------------------------------------------

Summary of changes:
 Configurations/unix-Makefile.tmpl | 9 +--------
 1 file changed, 1 insertion(+), 8 deletions(-)

diff --git a/Configurations/unix-Makefile.tmpl b/Configurations/unix-Makefile.tmpl
index 0fb80f1968..f88a70f482 100644
--- a/Configurations/unix-Makefile.tmpl
+++ b/Configurations/unix-Makefile.tmpl
@@ -297,14 +297,7 @@ OPENSSLDIR={- #
               $openssldir -}
 LIBDIR={- our $libdir = $config{libdir};
           unless ($libdir) {
-              #
-              # if $prefix/lib$target{multilib} is not an existing
-              # directory, then assume that it's not searched by linker
-              # automatically, in which case adding $target{multilib} suffix
-              # causes more grief than we're ready to tolerate, so don't...
-              our $multilib =
-                  -d &quot;$prefix/lib$target{multilib}&quot; ? $target{multilib} : &quot;&quot;;
-              $libdir = &quot;lib$multilib&quot;;
+              $libdir = &quot;lib$target{multilib}&quot;;
           }
           file_name_is_absolute($libdir) ? &quot;&quot; : $libdir -}
 # $(libdir) is chosen to be compatible with the GNU coding standards
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034964.html">[openssl]  master update
</A></li>
	<LI>Next message: <A HREF="034969.html">[openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34966">[ date ]</a>
              <a href="thread.html#34966">[ thread ]</a>
              <a href="subject.html#34966">[ subject ]</a>
              <a href="author.html#34966">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
