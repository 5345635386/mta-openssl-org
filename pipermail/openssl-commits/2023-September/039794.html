<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl/openssl] 17dd9a: OSSL_STORE: Fix error flag clearing and setting (p...
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2023-September/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%2017dd9a%3A%20OSSL_STORE%3A%20Fix%20error%20flag%20clearing%20and%0A%20setting%20%28p...&In-Reply-To=%3Copenssl/openssl/push/refs/heads/master/c870a4-17dd9a%40github.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="039793.html">
   <LINK REL="Next"  HREF="039795.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl/openssl] 17dd9a: OSSL_STORE: Fix error flag clearing and setting (p...</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%2017dd9a%3A%20OSSL_STORE%3A%20Fix%20error%20flag%20clearing%20and%0A%20setting%20%28p...&In-Reply-To=%3Copenssl/openssl/push/refs/heads/master/c870a4-17dd9a%40github.com%3E"
       TITLE="[openssl/openssl] 17dd9a: OSSL_STORE: Fix error flag clearing and setting (p...">noreply at github.com
       </A><BR>
    <I>Fri Sep  8 06:34:43 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="039793.html">[openssl/openssl] f04c64: Check error return from cms_sd_asn1_ctrl() correctly.
</A></li>
        <LI>Next message (by thread): <A HREF="039795.html">[openssl/openssl] 0d5d03: OSSL_STORE: Fix error flag clearing and setting (p...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39794">[ date ]</a>
              <a href="thread.html#39794">[ thread ]</a>
              <a href="subject.html#39794">[ subject ]</a>
              <a href="author.html#39794">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  Branch: refs/heads/master
  Home:   <A HREF="https://github.com/openssl/openssl">https://github.com/openssl/openssl</A>
  Commit: 17dd9a2c6262c00800301fddd9441a9c590a630e
      <A HREF="https://github.com/openssl/openssl/commit/17dd9a2c6262c00800301fddd9441a9c590a630e">https://github.com/openssl/openssl/commit/17dd9a2c6262c00800301fddd9441a9c590a630e</A>
  Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
  Date:   2023-09-08 (Fri, 08 Sep 2023)

  Changed paths:
    M crypto/store/store_lib.c

  Log Message:
  -----------
  OSSL_STORE: Fix error flag clearing and setting (provider path only)

When the provider's load function returned with an error, the libcrypto
error flag was only set if EOF hadn't been reached.  This is troublesome,
as an error can very well occur during the last load before EOF is reached!

Also, the error flag was never reset, even though documentation specifies
that it should indicate an error in the last load (i.e. not the one before
that).

Fixes #21968

Reviewed-by: Dmitry Belyavskiy &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">beldmit at gmail.com</A>&gt;
Reviewed-by: Paul Dale &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">pauli at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/21976">https://github.com/openssl/openssl/pull/21976</A>)


</PRE>


































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="039793.html">[openssl/openssl] f04c64: Check error return from cms_sd_asn1_ctrl() correctly.
</A></li>
	<LI>Next message (by thread): <A HREF="039795.html">[openssl/openssl] 0d5d03: OSSL_STORE: Fix error flag clearing and setting (p...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39794">[ date ]</a>
              <a href="thread.html#39794">[ thread ]</a>
              <a href="subject.html#39794">[ subject ]</a>
              <a href="author.html#39794">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
