<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl/openssl] 87ceff: evp enc: cache cipher IV length
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2022-August/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%2087ceff%3A%20evp%20enc%3A%20cache%20cipher%20IV%20length&In-Reply-To=%3Copenssl/openssl/push/refs/heads/openssl-3.0/d3072f-2e4b07%40github.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="037243.html">
   <LINK REL="Next"  HREF="037245.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl/openssl] 87ceff: evp enc: cache cipher IV length</H1>
    <B>Pauli</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%2087ceff%3A%20evp%20enc%3A%20cache%20cipher%20IV%20length&In-Reply-To=%3Copenssl/openssl/push/refs/heads/openssl-3.0/d3072f-2e4b07%40github.com%3E"
       TITLE="[openssl/openssl] 87ceff: evp enc: cache cipher IV length">noreply at github.com
       </A><BR>
    <I>Fri Aug 19 10:15:03 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="037243.html">[openssl/openssl] e0c4e4: BIO_sendmmsg/BIO_recvmmsg (API only)
</A></li>
        <LI>Next message (by thread): <A HREF="037245.html">[openssl/openssl] 6a9255: Update gitignore
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37244">[ date ]</a>
              <a href="thread.html#37244">[ thread ]</a>
              <a href="subject.html#37244">[ subject ]</a>
              <a href="author.html#37244">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  Branch: refs/heads/openssl-3.0
  Home:   <A HREF="https://github.com/openssl/openssl">https://github.com/openssl/openssl</A>
  Commit: 87ceff925f5f1d43dac0413f36c8b7bba94e4a41
      <A HREF="https://github.com/openssl/openssl/commit/87ceff925f5f1d43dac0413f36c8b7bba94e4a41">https://github.com/openssl/openssl/commit/87ceff925f5f1d43dac0413f36c8b7bba94e4a41</A>
  Author: Pauli &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">pauli at openssl.org</A>&gt;
  Date:   2022-08-19 (Fri, 19 Aug 2022)

  Changed paths:
    M crypto/evp/evp_enc.c
    M crypto/evp/evp_lib.c
    M crypto/evp/evp_local.h

  Log Message:
  -----------
  evp enc: cache cipher IV length

Instead of doing a heavy params based query every time a context is asked for
its IV length, this value is cached in the context and only queried if it could
have been modified.

Fixes #17064

Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/18995">https://github.com/openssl/openssl/pull/18995</A>)


  Commit: 2e4b074800a293c5f3049286116a0a5030ea9312
      <A HREF="https://github.com/openssl/openssl/commit/2e4b074800a293c5f3049286116a0a5030ea9312">https://github.com/openssl/openssl/commit/2e4b074800a293c5f3049286116a0a5030ea9312</A>
  Author: Pauli &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">pauli at openssl.org</A>&gt;
  Date:   2022-08-19 (Fri, 19 Aug 2022)

  Changed paths:
    M crypto/evp/evp_lib.c

  Log Message:
  -----------
  Fix bug in EVP_CIPHER_CTX_get_iv_length()

Out of range values could possibly be returned due to a lack of range checking.
Very unlikely to be exploitable for our provider because sensible values are
returned for all ciphers.

Also fixed the defaulting code so that the cipher's IV length is returned if
the cipher ctx doesn't support getting.

Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
Reviewed-by: Dmitry Belyavskiy &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">beldmit at gmail.com</A>&gt;
Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/18995">https://github.com/openssl/openssl/pull/18995</A>)


Compare: <A HREF="https://github.com/openssl/openssl/compare/d3072f3f3ba3...2e4b074800a2">https://github.com/openssl/openssl/compare/d3072f3f3ba3...2e4b074800a2</A>
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="037243.html">[openssl/openssl] e0c4e4: BIO_sendmmsg/BIO_recvmmsg (API only)
</A></li>
	<LI>Next message (by thread): <A HREF="037245.html">[openssl/openssl] 6a9255: Update gitignore
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#37244">[ date ]</a>
              <a href="thread.html#37244">[ thread ]</a>
              <a href="subject.html#37244">[ subject ]</a>
              <a href="author.html#37244">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
