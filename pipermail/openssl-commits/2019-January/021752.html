<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2019-January/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1548948080.329522.26026.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021750.html">
   <LINK REL="Next"  HREF="021753.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  master update</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1548948080.329522.26026.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  master update">levitte at openssl.org
       </A><BR>
    <I>Thu Jan 31 15:21:20 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="021750.html">[openssl-commits] [openssl]  master update
</A></li>
        <LI>Next message: <A HREF="021753.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21752">[ date ]</a>
              <a href="thread.html#21752">[ thread ]</a>
              <a href="subject.html#21752">[ subject ]</a>
              <a href="author.html#21752">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  a17089b0d750732d1b9d19ad924b3f8a2d7c3111 (commit)
       via  fb3637d9ae260fa49615f4442127473d0ce27ebf (commit)
       via  da7e31e0c7be390d37b84c6200afd802def700c5 (commit)
       via  77adb75e16142cd4da2af8814090a4f2c2bd5aea (commit)
       via  77550dbf7af4d31b915d076ee968cfc75e14a411 (commit)
      from  d1dd5d6f4c2f13478aa45557b4546febd51f0cb3 (commit)


- Log -----------------------------------------------------------------
commit a17089b0d750732d1b9d19ad924b3f8a2d7c3111
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Wed Jan 30 19:25:01 2019 +0100

    Configure: clean away unused variables and double assignments
    
    Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/8125">https://github.com/openssl/openssl/pull/8125</A>)

commit fb3637d9ae260fa49615f4442127473d0ce27ebf
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Wed Jan 30 19:12:38 2019 +0100

    Build: clean away RENAME and SHARED_NAME
    
    Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/8125">https://github.com/openssl/openssl/pull/8125</A>)

commit da7e31e0c7be390d37b84c6200afd802def700c5
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Wed Jan 30 19:10:26 2019 +0100

    Build: remove EXTRA
    
    We never used it for anything
    
    Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/8125">https://github.com/openssl/openssl/pull/8125</A>)

commit 77adb75e16142cd4da2af8814090a4f2c2bd5aea
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Wed Jan 30 18:58:01 2019 +0100

    Build: Remove BEGINRAW / ENDRAW / OVERRIDE
    
    It was an ugly hack to avoid certain problems that are no more.
    
    Also added GENERATE lines for perlasm scripts that didn't have that
    explicitly.
    
    Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/8125">https://github.com/openssl/openssl/pull/8125</A>)

commit 77550dbf7af4d31b915d076ee968cfc75e14a411
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Wed Jan 30 18:18:34 2019 +0100

    Build cleanup: Remove the VMS hack from test/build.info
    
    There was a hack specifically for VMS, which involved setting a make
    variable to indicate that test/libtestutil contains a 'main'.
    
    Instead, we use the new attributes 'has_main' to indicate this, and
    let the VMS build file template fend with it appropriately.
    
    Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/8125">https://github.com/openssl/openssl/pull/8125</A>)

-----------------------------------------------------------------------

Summary of changes:
 Configurations/README           | 43 -----------------------------------------
 Configurations/README.design    | 11 -----------
 Configurations/common.tmpl      |  4 ----
 Configurations/descrip.mms.tmpl | 39 ++++++++++++++++++++++++-------------
 Configure                       | 43 ++---------------------------------------
 crypto/aes/build.info           | 11 +----------
 crypto/build.info               |  3 ---
 crypto/chacha/build.info        |  9 ++-------
 crypto/ec/build.info            |  5 -----
 crypto/modes/build.info         |  7 +------
 crypto/poly1305/build.info      |  7 ++-----
 crypto/rc4/build.info           |  8 ++------
 crypto/sha/build.info           | 22 +++++++++++----------
 test/build.info                 |  9 +--------
 14 files changed, 49 insertions(+), 172 deletions(-)

diff --git a/Configurations/README b/Configurations/README
index c1f80fe..1e4d545 100644
--- a/Configurations/README
+++ b/Configurations/README
@@ -413,7 +413,6 @@ variables:
     LIBS=libsomething
     ENGINES=libeng
     SCRIPTS=myhack
-    EXTRA=file1 file2
 
 Note that the files mentioned for PROGRAMS, LIBS and ENGINES *must* be
 without extensions.  The build file templates will figure them out.
@@ -486,48 +485,6 @@ be used in that case:
 
 NOTE: GENERATE lines are limited to one command only per GENERATE.
 
-As a last resort, it's possible to have raw build file lines, between
-BEGINRAW and ENDRAW lines as follows:
-
-    BEGINRAW[Makefile(unix)]
-    haha.h: {- $builddir -}/Makefile
-        echo &quot;/* haha */&quot; &gt; haha.h
-    ENDRAW[Makefile(unix)]
-
-The word within square brackets is the build_file configuration item
-or the build_file configuration item followed by the second word in the
-build_scheme configuration item for the configured target within
-parenthesis as shown above.  For example, with the following relevant
-configuration items:
-
-   build_file   =&gt; &quot;build.ninja&quot;
-   build_scheme =&gt; [ &quot;unified&quot;, &quot;unix&quot; ]
-
-... these lines will be considered:
-
-   BEGINRAW[build.ninja]
-   build haha.h: echo &quot;/* haha */&quot; &gt; haha.h
-   ENDRAW[build.ninja]
-
-   BEGINRAW[build.ninja(unix)]
-   build hoho.h: echo &quot;/* hoho */&quot; &gt; hoho.h
-   ENDRAW[build.ninja(unix)]
-
-Should it be needed because the recipes within a RAW section might
-clash with those generated by Configure, it's possible to tell it
-not to generate them with the use of OVERRIDES, for example:
-
-    SOURCE[libfoo]=foo.c bar.c
-    
-    OVERRIDES=bar.o
-    BEGINRAW[Makefile(unix)]
-    bar.o: bar.c
-    	$(CC) $(CFLAGS) -DSPECIAL -c -o $@ $&lt;
-    ENDRAW[Makefile(unix)]
-
-See the documentation further up for more information on configuration
-items.
-
 Finally, you can have some simple conditional use of the build.info
 information, looking like this:
 
diff --git a/Configurations/README.design b/Configurations/README.design
index c0b05bd..43b6a66 100644
--- a/Configurations/README.design
+++ b/Configurations/README.design
@@ -112,9 +112,6 @@ Two things are worth an extra note:
 'DEPEND[cversion.o]' mentions an object file.  DEPEND indexes is the
 only location where it's valid to mention them
 
-Lines in 'BEGINRAW'..'ENDRAW' sections must always mention files as
-seen from the top directory, no exception.
-
     # ssl/build.info
     LIBS=../libssl
     SOURCE[../libssl]=tls.c
@@ -234,11 +231,6 @@ indexes:
   programs  =&gt; a list of programs.  These are directly inferred from
                the PROGRAMS variable in build.info files.
 
-  rawlines  =&gt; a list of build-file lines.  These are a direct copy of
-               the BEGINRAW..ENDRAW lines in build.info files.  Note:
-               only the BEGINRAW..ENDRAW section for the current
-               platform are copied, the rest are ignored.
-
   scripts   =&gt; a list of scripts.  There are directly inferred from
                the SCRIPTS variable in build.info files.
 
@@ -352,9 +344,6 @@ section above would be digested into a %unified_info table:
             [
                 &quot;apps/openssl&quot;,
             ],
-        &quot;rawlines&quot; =&gt;
-            [
-            ],
         &quot;sources&quot; =&gt;
             {
                 &quot;apps/openssl&quot; =&gt;
diff --git a/Configurations/common.tmpl b/Configurations/common.tmpl
index 53384c7..a15971e 100644
--- a/Configurations/common.tmpl
+++ b/Configurations/common.tmpl
@@ -217,8 +217,4 @@
  foreach (@{$unified_info{scripts}})   { doscript($_); }
 
  foreach (sort keys %{$unified_info{dirinfo}})  { dodir($_); }
-
- # Finally, should there be any applicable BEGINRAW/ENDRAW sections,
- # they are added here.
- $OUT .= $_.&quot;\n&quot; foreach @{$unified_info{rawlines}};
 -}
diff --git a/Configurations/descrip.mms.tmpl b/Configurations/descrip.mms.tmpl
index acb5997..46b9ffc 100644
--- a/Configurations/descrip.mms.tmpl
+++ b/Configurations/descrip.mms.tmpl
@@ -698,7 +698,10 @@ reconfigure reconf :
       # Depending on shared libraries:
       # On Windows POSIX layers, we depend on {libname}.dll.a
       # On Unix platforms, we depend on {shlibname}.so
-      return map { platform-&gt;sharedlib($_) // platform-&gt;staticlib($_) } @_;
+      return map {
+          { lib   =&gt; platform-&gt;sharedlib($_) // platform-&gt;staticlib($_),
+            attrs =&gt; $unified_info{attributes}-&gt;{$_} }
+      } @_;
   }
 
   # Helper function to deal with inclusion directory specs.
@@ -968,7 +971,7 @@ EOF
                  @{$args{objs}};
       my @deps = compute_lib_depends(@{$args{deps}});
       die &quot;More than one symbol vector&quot; if scalar @defs &gt; 1;
-      my $deps = join(&quot;, -\n\t\t&quot;, @objs, @defs, @deps);
+      my $deps = join(&quot;, -\n\t\t&quot;, @objs, @defs, map { $_-&gt;{lib} } @deps);
       my $shlib_target = $disabled{shared} ? &quot;&quot; : $target{shared_target};
       my $translatesyms_pl = abs2rel(rel2abs(catfile($config{sourcedir},
                                                      &quot;VMS&quot;, &quot;translatesyms.pl&quot;)),
@@ -982,7 +985,8 @@ EOF
                                  &quot;WRITE OPT_FILE \&quot;$x&quot; } @objs).
           &quot;\&quot;&quot;;
       my $write_opt2 =
-          join(&quot;\n\t&quot;, map { my $x = $_ =~ /\[/ ? $_ : &quot;[]&quot;.$_;
+          join(&quot;\n\t&quot;, map { my $x = $_-&gt;{lib} =~ /\[/
+                                 ? $_-&gt;{lib} : &quot;[]&quot;.$_-&gt;{lib};
                              $x =~ s|(\.EXE)|$1/SHARE|;
                              $x =~ s|(\.OLB)|$1/LIB|;
                              &quot;WRITE OPT_FILE \&quot;$x\&quot;&quot; } @deps)
@@ -1015,7 +1019,7 @@ EOF
                  grep { platform-&gt;isdef($_) }
                  @{$args{objs}};
       my @deps = compute_lib_depends(@{$args{deps}});
-      my $deps = join(&quot;, -\n\t\t&quot;, @objs, @defs, @deps);
+      my $deps = join(&quot;, -\n\t\t&quot;, @objs, @defs, map { $_-&gt;{lib} } @deps);
       die &quot;More than one symbol vector&quot; if scalar @defs &gt; 1;
       my $shlib_target = $disabled{shared} ? &quot;&quot; : $target{shared_target};
       # The &quot;[]&quot; hack is because in .OPT files, each line inherits the
@@ -1027,7 +1031,8 @@ EOF
                                  &quot;WRITE OPT_FILE \&quot;$x&quot; } @objs).
           &quot;\&quot;&quot;;
       my $write_opt2 =
-          join(&quot;\n\t&quot;, map { my $x = $_ =~ /\[/ ? $_ : &quot;[]&quot;.$_;
+          join(&quot;\n\t&quot;, map { my $x = $_-&gt;{lib} =~ /\[/
+                                 ? $_-&gt;{lib} : &quot;[]&quot;.$_-&gt;{lib};
                              $x =~ s|(\.EXE)|$1/SHARE|;
                              $x =~ s|(\.OLB)|$1/LIB|;
                              &quot;WRITE OPT_FILE \&quot;$x\&quot;&quot; } @deps)
@@ -1071,9 +1076,9 @@ EOF
                  @{$args{objs}};
       my $objs = join(&quot;,&quot;, @objs);
       my @deps = compute_lib_depends(@{$args{deps}});
-      my $deps = join(&quot;, -\n\t\t&quot;, @objs, @deps);
+      my $deps = join(&quot;, -\n\t\t&quot;, @objs, map { $_-&gt;{lib} } @deps);
 
-      my $olb_count = scalar grep(m|\.OLB$|, @deps);
+      my $olb_count = scalar grep(m|\.OLB$|, map { $_-&gt;{lib} } @deps);
       my $analyse_objs = &quot;@ !&quot;;
       if ($olb_count &gt; 0) {
           my $analyse_quals =
@@ -1089,16 +1094,24 @@ EOF
                                  &quot;\@ WRITE OPT_FILE \&quot;$x&quot; } @objs).
           &quot;\&quot;&quot;;
       my $write_opt2 =
-          join(&quot;\n\t&quot;, map { my @lines = (
-                                 &quot;\ WRITE OPT_FILE \&quot;CASE_SENSITIVE=YES\&quot;&quot;
-                             );
-                             my $x = $_ =~ /\[/ ? $_ : &quot;[]&quot;.$_;
+          join(&quot;\n\t&quot;, &quot;WRITE OPT_FILE \&quot;CASE_SENSITIVE=YES\&quot;&quot;,
+                       map { my @lines = ();
+                             use Data::Dumper;
+                             print STDERR &quot;DEBUG: &quot;,Dumper($_);
+                             my $x = $_-&gt;{lib} =~ /\[/
+                                 ? $_-&gt;{lib} : &quot;[]&quot;.$_-&gt;{lib};
+                             print STDERR &quot;DEBUG: &quot;,Dumper($x);
                              if ($x =~ m|\.EXE$|) {
                                  push @lines, &quot;\@ WRITE OPT_FILE \&quot;$x/SHARE\&quot;&quot;;
                              } elsif ($x =~ m|\.OLB$|) {
-                                 (my $l = $x) =~ s/\W/_/g;
+                                 # Special hack to include the MAIN object
+                                 # module explicitly.  This will only be done
+                                 # if there isn't a 'main' in the program's
+                                 # object modules already.
+                                 my $main = $_-&gt;{attrs}-&gt;{has_main}
+                                     ? '/INCLUDE=main' : '';
                                  push @lines, 
-                                     &quot;\@ IF nomain THEN WRITE OPT_FILE \&quot;$x/LIB\$(INCLUDE_MAIN_$l)\&quot;&quot;,
+                                     &quot;\@ IF nomain THEN WRITE OPT_FILE \&quot;$x/LIB$main\&quot;&quot;,
                                      &quot;\@ IF .NOT. nomain THEN WRITE OPT_FILE \&quot;$x/LIB\&quot;&quot;
                              }
                              @lines
diff --git a/Configure b/Configure
index 53460fe..8a178df 100755
--- a/Configure
+++ b/Configure
@@ -1713,10 +1713,6 @@ if ($builder eq &quot;unified&quot;) {
         my @libraries = ();
         my @engines = ();
         my @scripts = ();
-        my @extra = ();
-        my @overrides = ();
-        my @intermediates = ();
-        my @rawlines = ();
 
         my %attributes = ();
         my %sources = ();
@@ -1806,7 +1802,6 @@ if ($builder eq &quot;unified&quot;) {
                             $attributes{$p}-&gt;{$ak} = $av;
                         }
                     }
-                    push @programs, @p;
                 }
             },
             qr/^\s*LIBS(?:{([\w=]+(?:\s*,\s*[\w=]+)*)})?\s*=\s*(.*)\s*$/
@@ -1826,7 +1821,6 @@ if ($builder eq &quot;unified&quot;) {
                             $attributes{$l}-&gt;{$ak} = $av;
                         }
                     }
-                    push @libraries, @l;
                 }
             },
             qr/^\s*ENGINES(?:{([\w=]+(?:\s*,\s*[\w=]+)*)})?\s*=\s*(.*)\s*$/
@@ -1846,7 +1840,6 @@ if ($builder eq &quot;unified&quot;) {
                             $attributes{$e}-&gt;{$ak} = $av;
                         }
                     }
-                    push @engines, @e;
                 }
             },
             qr/^\s*SCRIPTS(?:{([\w=]+(?:\s*,\s*[\w=]+)*)})?\s*=\s*(.*)\s*$/
@@ -1866,15 +1859,8 @@ if ($builder eq &quot;unified&quot;) {
                             $attributes{$s}-&gt;{$ak} = $av;
                         }
                     }
-                    push @scripts, @s;
                 }
             },
-            qr/^\s*EXTRA\s*=\s*(.*)\s*$/
-            =&gt; sub { push @extra, tokenize($1)
-                         if !@skip || $skip[$#skip] &gt; 0 },
-            qr/^\s*OVERRIDES\s*=\s*(.*)\s*$/
-            =&gt; sub { push @overrides, tokenize($1)
-                         if !@skip || $skip[$#skip] &gt; 0 },
 
             qr/^\s*ORDINALS\[((?:\\.|[^\\\]])+)\]\s*=\s*(.*)\s*$/,
             =&gt; sub { push @{$ordinals{$1}}, tokenize($2)
@@ -1897,27 +1883,6 @@ if ($builder eq &quot;unified&quot;) {
             qr/^\s*GENERATE\[((?:\\.|[^\\\]])+)\]\s*=\s*(.*)\s*$/
             =&gt; sub { push @{$generate{$1}}, $2
                          if !@skip || $skip[$#skip] &gt; 0 },
-            qr/^\s*RENAME\[((?:\\.|[^\\\]])+)\]\s*=\s*(.*)\s*$/
-            =&gt; sub { warn &quot;RENAME is no longer supported\n&quot; },
-             qr/^\s*SHARED_NAME\[((?:\\.|[^\\\]])+)\]\s*=\s*(.*)\s*$/
-            =&gt; sub { warn &quot;SHARED_NAME is no longer supported\n&quot; },
-            qr/^\s*BEGINRAW\[((?:\\.|[^\\\]])+)\]\s*$/
-            =&gt; sub {
-                my $lineiterator = shift;
-                my $target_kind = $1;
-                while (defined $lineiterator-&gt;()) {
-                    s|\R$||;
-                    if (/^\s*ENDRAW\[((?:\\.|[^\\\]])+)\]\s*$/) {
-                        die &quot;ENDRAW doesn't match BEGINRAW&quot;
-                            if $1 ne $target_kind;
-                        last;
-                    }
-                    next if @skip &amp;&amp; $skip[$#skip] &lt;= 0;
-                    push @rawlines,  $_
-                        if ($target_kind eq $target{build_file}
-                            || $target_kind eq $target{build_file}.&quot;(&quot;.$builder_platform.&quot;)&quot;);
-                }
-            },
             qr/^\s*(?:#.*)?$/ =&gt; sub { },
             &quot;OTHERWISE&quot; =&gt; sub { die &quot;Something wrong with this line:\n$_\nat $sourced/$f&quot; },
             &quot;BEFORE&quot; =&gt; sub {
@@ -1952,9 +1917,7 @@ EOF
             my %infos = ( programs  =&gt; [ @programs  ],
                           libraries =&gt; [ @libraries ],
                           engines   =&gt; [ @engines   ],
-                          scripts   =&gt; [ @scripts   ],
-                          extra     =&gt; [ @extra     ],
-                          overrides =&gt; [ @overrides ] );
+                          scripts   =&gt; [ @scripts   ] );
             foreach my $k (keys %infos) {
                 foreach (@{$infos{$k}}) {
                     my $item = cleanfile($buildd, $_, $blddir);
@@ -1963,8 +1926,6 @@ EOF
             }
         }
 
-        push @{$unified_info{rawlines}}, @rawlines;
-
         # Check that we haven't defined any library as both shared and
         # explicitly static.  That is forbidden.
         my @doubles = ();
@@ -2259,7 +2220,7 @@ EOF
 
     ### Make unified_info a bit more efficient
     # One level structures
-    foreach ((&quot;programs&quot;, &quot;libraries&quot;, &quot;engines&quot;, &quot;scripts&quot;, &quot;extra&quot;, &quot;overrides&quot;)) {
+    foreach ((&quot;programs&quot;, &quot;libraries&quot;, &quot;engines&quot;, &quot;scripts&quot;)) {
         $unified_info{$_} = [ sort keys %{$unified_info{$_}} ];
     }
     # Two level structures
diff --git a/crypto/aes/build.info b/crypto/aes/build.info
index 0f04863..1aa7a18 100644
--- a/crypto/aes/build.info
+++ b/crypto/aes/build.info
@@ -52,13 +52,4 @@ INCLUDE[bsaes-armv7.o]=..
 GENERATE[aes-s390x.S]=asm/aes-s390x.pl $(PERLASM_SCHEME)
 INCLUDE[aes-s390x.o]=..
 
-BEGINRAW[Makefile]
-##### AES assembler implementations
-
-# GNU make &quot;catch all&quot;
-{- $builddir -}/aes-%.S:	{- $sourcedir -}/asm/aes-%.pl
-	CC=&quot;$(CC)&quot; $(PERL) $&lt; $(PERLASM_SCHEME) $@
-{- $builddir -}/bsaes-%.S:	{- $sourcedir -}/asm/bsaes-%.pl
-	CC=&quot;$(CC)&quot; $(PERL) $&lt; $(PERLASM_SCHEME) $@
-
-ENDRAW[Makefile]
+GENERATE[aes-c64xplus.S]=asm/aes-c64xplus.pl $(PERLASM_SCHEME)
diff --git a/crypto/build.info b/crypto/build.info
index e014e03..5e879ea 100644
--- a/crypto/build.info
+++ b/crypto/build.info
@@ -14,9 +14,6 @@ SOURCE[../libcrypto]=\
         threads_pthread.c threads_win.c threads_none.c getenv.c \
         o_init.c o_fips.c mem_sec.c init.c {- $target{cpuid_asm_src} -} \
         {- $target{uplink_aux_src} -}
-EXTRA=  ../ms/uplink-x86.pl ../ms/uplink.c ../ms/applink.c \
-        x86cpuid.pl x86_64cpuid.pl ia64cpuid.S \
-        ppccpuid.pl pariscid.pl alphacpuid.pl arm64cpuid.pl armv4cpuid.pl
 
 DEPEND[cversion.o]=buildinf.h
 GENERATE[buildinf.h]=../util/mkbuildinf.pl &quot;$(CC) $(LIB_CFLAGS) $(CPPFLAGS_Q)&quot; &quot;$(PLATFORM)&quot;
diff --git a/crypto/chacha/build.info b/crypto/chacha/build.info
index e1d6116..bbd9ca8 100644
--- a/crypto/chacha/build.info
+++ b/crypto/chacha/build.info
@@ -10,10 +10,5 @@ INCLUDE[chacha-armv4.o]=..
 GENERATE[chacha-armv8.S]=asm/chacha-armv8.pl $(PERLASM_SCHEME)
 INCLUDE[chacha-armv8.o]=..
 INCLUDE[chacha-s390x.o]=..
-
-BEGINRAW[Makefile(unix)]
-##### CHACHA assembler implementations
-
-{- $builddir -}/chacha-%.S:	{- $sourcedir -}/asm/chacha-%.pl
-	CC=&quot;$(CC)&quot; $(PERL) $&lt; $(PERLASM_SCHEME) $@
-ENDRAW[Makefile(unix)]
+GENERATE[chacha-c64xplus.S]=asm/chacha-c64xplus.pl $(PERLASM_SCHEME)
+GENERATE[chacha-s390x.S]=asm/chacha-s390x.pl $(PERLASM_SCHEME)
diff --git a/crypto/ec/build.info b/crypto/ec/build.info
index a1e673e..dd1c891 100644
--- a/crypto/ec/build.info
+++ b/crypto/ec/build.info
@@ -29,11 +29,6 @@ GENERATE[ecp_nistz256-ppc64.s]=asm/ecp_nistz256-ppc64.pl $(PERLASM_SCHEME)
 GENERATE[x25519-x86_64.s]=asm/x25519-x86_64.pl $(PERLASM_SCHEME)
 GENERATE[x25519-ppc64.s]=asm/x25519-ppc64.pl $(PERLASM_SCHEME)
 
-BEGINRAW[Makefile]
-{- $builddir -}/ecp_nistz256-%.S:	{- $sourcedir -}/asm/ecp_nistz256-%.pl
-	CC=&quot;$(CC)&quot; $(PERL) $&lt; $(PERLASM_SCHEME) $@
-ENDRAW[Makefile]
-
 INCLUDE[curve448/arch_32/f_impl.o]=curve448/arch_32 curve448
 INCLUDE[curve448/f_generic.o]=curve448/arch_32 curve448
 INCLUDE[curve448/scalar.o]=curve448/arch_32 curve448
diff --git a/crypto/modes/build.info b/crypto/modes/build.info
index 1820ab2..f015a4c 100644
--- a/crypto/modes/build.info
+++ b/crypto/modes/build.info
@@ -22,9 +22,4 @@ GENERATE[ghashv8-armx.S]=asm/ghashv8-armx.pl $(PERLASM_SCHEME)
 INCLUDE[ghashv8-armx.o]=..
 GENERATE[ghash-s390x.S]=asm/ghash-s390x.pl $(PERLASM_SCHEME)
 INCLUDE[ghash-s390x.o]=..
-
-BEGINRAW[Makefile]
-# GNU make &quot;catch all&quot;
-{- $builddir -}/ghash-%.S:	{- $sourcedir -}/asm/ghash-%.pl
-	CC=&quot;$(CC)&quot; $(PERL) $&lt; $(PERLASM_SCHEME) $@
-ENDRAW[Makefile]
+GENERATE[ghash-c64xplus.S]=asm/ghash-c64xplus.pl $(PERLASM_SCHEME)
diff --git a/crypto/poly1305/build.info b/crypto/poly1305/build.info
index 363d62e..de44bb8 100644
--- a/crypto/poly1305/build.info
+++ b/crypto/poly1305/build.info
@@ -17,8 +17,5 @@ GENERATE[poly1305-armv8.S]=asm/poly1305-armv8.pl $(PERLASM_SCHEME)
 INCLUDE[poly1305-armv8.o]=..
 GENERATE[poly1305-mips.S]=asm/poly1305-mips.pl $(PERLASM_SCHEME)
 INCLUDE[poly1305-mips.o]=..
-
-BEGINRAW[Makefile(unix)]
-{- $builddir -}/poly1305-%.S:	{- $sourcedir -}/asm/poly1305-%.pl
-	CC=&quot;$(CC)&quot; $(PERL) $&lt; $(PERLASM_SCHEME) $@
-ENDRAW[Makefile(unix)]
+GENERATE[poly1305-c64xplus.S]=asm/poly1305-c64xplus.pl $(PERLASM_SCHEME)
+GENERATE[poly1305-s390x.S]=asm/poly1305-s390x.pl $(PERLASM_SCHEME)
diff --git a/crypto/rc4/build.info b/crypto/rc4/build.info
index 46ee66b..9941e6e 100644
--- a/crypto/rc4/build.info
+++ b/crypto/rc4/build.info
@@ -10,9 +10,5 @@ GENERATE[rc4-x86_64.s]=asm/rc4-x86_64.pl $(PERLASM_SCHEME)
 GENERATE[rc4-md5-x86_64.s]=asm/rc4-md5-x86_64.pl $(PERLASM_SCHEME)
 
 GENERATE[rc4-parisc.s]=asm/rc4-parisc.pl $(PERLASM_SCHEME)
-
-BEGINRAW[Makefile]
-# GNU make &quot;catch all&quot;
-{- $builddir -}/rc4-%.s:	{- $sourcedir -}/asm/rc4-%.pl
-	CC=&quot;$(CC)&quot; $(PERL) $&lt; $(PERLASM_SCHEME) $@
-ENDRAW[Makefile]
+GENERATE[rc4-c64xplus.S]=asm/rc4-c64xplus.pl $(PERLASM_SCHEME)
+GENERATE[rc4-s390x.S]=asm/rc4-s390x.pl $(PERLASM_SCHEME)
diff --git a/crypto/sha/build.info b/crypto/sha/build.info
index 5dd5a99..58d15bb 100644
--- a/crypto/sha/build.info
+++ b/crypto/sha/build.info
@@ -26,6 +26,7 @@ GENERATE[sha256-mb-x86_64.s]=asm/sha256-mb-x86_64.pl $(PERLASM_SCHEME)
 GENERATE[sha512-x86_64.s]=asm/sha512-x86_64.pl $(PERLASM_SCHEME)
 GENERATE[keccak1600-x86_64.s]=asm/keccak1600-x86_64.pl $(PERLASM_SCHEME)
 
+GENERATE[sha1-sparcv9a.S]=asm/sha1-sparcv9a.pl $(PERLASM_SCHEME)
 GENERATE[sha1-sparcv9.S]=asm/sha1-sparcv9.pl $(PERLASM_SCHEME)
 INCLUDE[sha1-sparcv9.o]=..
 GENERATE[sha256-sparcv9.S]=asm/sha512-sparcv9.pl $(PERLASM_SCHEME)
@@ -76,14 +77,15 @@ GENERATE[sha512-s390x.S]=asm/sha512-s390x.pl $(PERLASM_SCHEME)
 INCLUDE[sha512-s390x.o]=..
 GENERATE[keccak1600-s390x.S]=asm/keccak1600-s390x.pl $(PERLASM_SCHEME)
 
-BEGINRAW[Makefile(unix)]
-##### SHA assembler implementations
+GENERATE[sha1-c64xplus.S]=asm/sha1-c64xplus.pl $(PERLASM_SCHEME)
+GENERATE[sha256-c64xplus.S]=asm/sha256-c64xplus.pl $(PERLASM_SCHEME)
+GENERATE[sha512-c64xplus.S]=asm/sha512-c64xplus.pl $(PERLASM_SCHEME)
+GENERATE[keccak1600-c64x.S]=asm/keccak1600-c64x.pl $(PERLASM_SCHEME)
 
-# GNU make &quot;catch all&quot;
-{- $builddir -}/sha1-%.S:	{- $sourcedir -}/asm/sha1-%.pl
-	CC=&quot;$(CC)&quot; $(PERL) $&lt; $(PERLASM_SCHEME) $@
-{- $builddir -}/sha256-%.S:	{- $sourcedir -}/asm/sha512-%.pl
-	CC=&quot;$(CC)&quot; $(PERL) $&lt; $(PERLASM_SCHEME) $@
-{- $builddir -}/sha512-%.S:	{- $sourcedir -}/asm/sha512-%.pl
-	CC=&quot;$(CC)&quot; $(PERL) $&lt; $(PERLASM_SCHEME) $@
-ENDRAW[Makefile(unix)]
+# These are not yet used
+GENERATE[keccak1600-avx2.S]=asm/keccak1600-avx2.pl $(PERLASM_SCHEME)
+GENERATE[keccak1600-avx512.S]=asm/keccak1600-avx512.pl $(PERLASM_SCHEME)
+GENERATE[keccak1600-avx512vl.S]=asm/keccak1600-avx512vl.pl $(PERLASM_SCHEME)
+GENERATE[keccak1600-mmx.S]=asm/keccak1600-mmx.pl $(PERLASM_SCHEME)
+GENERATE[keccak1600p8-ppc.S]=asm/keccak1600p8-ppc.pl $(PERLASM_SCHEME)
+GENERATE[sha1-thumb.S]=asm/sha1-thumb.pl $(PERLASM_SCHEME)
diff --git a/test/build.info b/test/build.info
index a7d31d4..c2be761 100644
--- a/test/build.info
+++ b/test/build.info
@@ -9,7 +9,7 @@ SUBDIRS=ossl_shim
      &quot;&quot;
 -}
 IF[{- !$disabled{tests} -}]
-  LIBS{noinst}=libtestutil.a
+  LIBS{noinst,has_main}=libtestutil.a
   SOURCE[libtestutil.a]=testutil/basic_output.c testutil/output_helpers.c \
           testutil/driver.c testutil/tests.c testutil/cb.c testutil/stanza.c \
           testutil/format_output.c testutil/tap_bio.c \
@@ -17,13 +17,6 @@ IF[{- !$disabled{tests} -}]
   INCLUDE[libtestutil.a]=../include
   DEPEND[libtestutil.a]=../libcrypto
 
-  # Special hack for descrip.mms to include the MAIN object module
-  # explicitly.  This will only be done if there isn't a 'main' in the
-  # program's object modules already.
-  BEGINRAW[descrip.mms]
-INCLUDE_MAIN___test_libtestutil_OLB = /INCLUDE=main
-  ENDRAW[descrip.mms]
-
   PROGRAMS{noinst}=\
           versions \
           aborttest test_test \
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021750.html">[openssl-commits] [openssl]  master update
</A></li>
	<LI>Next message: <A HREF="021753.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21752">[ date ]</a>
              <a href="thread.html#21752">[ thread ]</a>
              <a href="subject.html#21752">[ subject ]</a>
              <a href="author.html#21752">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
