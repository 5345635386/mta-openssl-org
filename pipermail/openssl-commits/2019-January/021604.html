<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2019-January/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1546677718.057270.22619.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021602.html">
   <LINK REL="Next"  HREF="021605.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  master update</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1546677718.057270.22619.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  master update">levitte at openssl.org
       </A><BR>
    <I>Sat Jan  5 08:41:58 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="021602.html">[openssl-commits] [openssl]  master update
</A></li>
        <LI>Next message: <A HREF="021605.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21604">[ date ]</a>
              <a href="thread.html#21604">[ thread ]</a>
              <a href="subject.html#21604">[ subject ]</a>
              <a href="author.html#21604">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  f760137b2144740916afd9ff381451fa16c710de (commit)
       via  c66bb88cb08adbc848271dd388aa9695c7e200be (commit)
      from  de2debc524e8de89a9e4e8cd890af3882cf1aaab (commit)


- Log -----------------------------------------------------------------
commit f760137b2144740916afd9ff381451fa16c710de
Author: Patrick Steuer &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">patrick.steuer at de.ibm.com</A>&gt;
Date:   Sat Aug 4 00:10:06 2018 +0200

    crypto/chacha/asm/chacha-s390x.pl: add vx code path.
    
    Signed-off-by: Patrick Steuer &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">patrick.steuer at de.ibm.com</A>&gt;
    
    Reviewed-by: Tim Hudson &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tjh at openssl.org</A>&gt;
    Reviewed-by: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/6919">https://github.com/openssl/openssl/pull/6919</A>)

commit c66bb88cb08adbc848271dd388aa9695c7e200be
Author: Patrick Steuer &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">patrick.steuer at de.ibm.com</A>&gt;
Date:   Wed Dec 7 12:58:34 2016 +0100

    s390x assembly pack: perlasm support.
    
    Added crypto/perlasm/s390x.pm Perl module. Its primary use is to be
    independent of binutils version, that is to write byte codes of
    instructions that are not part of the base instruction set.
    Currently only gas format is supported.
    
    Signed-off-by: Patrick Steuer &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">patrick.steuer at de.ibm.com</A>&gt;
    
    Reviewed-by: Tim Hudson &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tjh at openssl.org</A>&gt;
    Reviewed-by: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/6919">https://github.com/openssl/openssl/pull/6919</A>)

-----------------------------------------------------------------------

Summary of changes:
 crypto/chacha/asm/chacha-s390x.pl |  816 ++++++----
 crypto/chacha/build.info          |    1 +
 crypto/perlasm/s390x.pm           | 3060 +++++++++++++++++++++++++++++++++++++
 3 files changed, 3618 insertions(+), 259 deletions(-)
 create mode 100644 crypto/perlasm/s390x.pm

diff --git a/crypto/chacha/asm/chacha-s390x.pl b/crypto/chacha/asm/chacha-s390x.pl
index 1b13a41..005c810 100755
--- a/crypto/chacha/asm/chacha-s390x.pl
+++ b/crypto/chacha/asm/chacha-s390x.pl
@@ -1,5 +1,5 @@
 #! /usr/bin/env perl
-# Copyright 2016 The OpenSSL Project Authors. All Rights Reserved.
+# Copyright 2016-2019 The OpenSSL Project Authors. All Rights Reserved.
 #
 # Licensed under the Apache License 2.0 (the &quot;License&quot;).  You may not use
 # this file except in compliance with the License.  You can obtain a copy
@@ -20,41 +20,46 @@
 #
 # 3 times faster than compiler-generated code.
 
-$flavour = shift;
+#
+# August 2018
+#
+# Add vx code path.
+#
+# Copyright IBM Corp. 2018
+# Author: Patrick Steuer &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">patrick.steuer at de.ibm.com</A>&gt;
 
+use strict;
+use FindBin qw($Bin);
+use lib &quot;$Bin/../..&quot;;
+use perlasm::s390x qw(:DEFAULT :VX AUTOLOAD LABEL INCLUDE);
+
+my $flavour = shift;
+
+my ($z,$SIZE_T);
 if ($flavour =~ /3[12]/) {
+	$z=0;	# S/390 ABI
 	$SIZE_T=4;
-	$g=&quot;&quot;;
 } else {
+	$z=1;	# zSeries ABI
 	$SIZE_T=8;
-	$g=&quot;g&quot;;
 }
 
+my $output;
 while (($output=shift) &amp;&amp; ($output!~/\w[\w\-]*\.\w+$/)) {}
-open STDOUT,&quot;&gt;$output&quot;;
-
-sub AUTOLOAD()		# thunk [simplified] x86-style perlasm
-{ my $opcode = $AUTOLOAD; $opcode =~ s/.*:://;
-    $code .= &quot;\t$opcode\t&quot;.join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>).&quot;\n&quot;;
-}
 
 my $sp=&quot;%r15&quot;;
-
 my $stdframe=16*$SIZE_T+4*8;
-my $frame=$stdframe+4*20;
-
-my ($out,$inp,$len,$key,$counter)=map(&quot;%r$_&quot;,(2..6));
 
 my @x=map(&quot;%r$_&quot;,(0..7,&quot;x&quot;,&quot;x&quot;,&quot;x&quot;,&quot;x&quot;,(10..13)));
 my @t=map(&quot;%r$_&quot;,(8,9));
+my @v=map(&quot;%v$_&quot;,(16..31));
 
 sub ROUND {
 my ($a0,$b0,$c0,$d0)=@_;
 my ($a1,$b1,$c1,$d1)=map(($_&amp;~3)+(($_+1)&amp;3),($a0,$b0,$c0,$d0));
 my ($a2,$b2,$c2,$d2)=map(($_&amp;~3)+(($_+1)&amp;3),($a1,$b1,$c1,$d1));
 my ($a3,$b3,$c3,$d3)=map(($_&amp;~3)+(($_+1)&amp;3),($a2,$b2,$c2,$d2));
-my ($xc,$xc_)=map(&quot;\&quot;$_\&quot;&quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>);
-my @x=map(&quot;\&quot;$_\&quot;&quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>);
+my ($xc,$xc_)=map(&quot;$_&quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>);
 
 	# Consider order in which variables are addressed by their
 	# index:
@@ -78,249 +83,542 @@ my @x=map(&quot;\&quot;$_\&quot;&quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>);
 	# 'c' stores and loads in the middle, but none in the beginning
 	# or end.
 
-	(
-	&quot;&amp;alr	(@x[$a0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b0])&quot;,	# Q1
-	 &quot;&amp;alr	(@x[$a1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b1])&quot;,	# Q2
-	&quot;&amp;xr	(@x[$d0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a0])&quot;,
-	 &quot;&amp;xr	(@x[$d1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a1])&quot;,
-	&quot;&amp;rll	(@x[$d0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d0],16)&quot;,
-	 &quot;&amp;rll	(@x[$d1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d1],16)&quot;,
-
-	&quot;&amp;alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc, at x</A>[$d0])&quot;,
-	 &quot;&amp;alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc_, at x</A>[$d1])&quot;,
-	&quot;&amp;xr	(@x[$b0],$xc)&quot;,
-	 &quot;&amp;xr	(@x[$b1],$xc_)&quot;,
-	&quot;&amp;rll	(@x[$b0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b0],12)&quot;,
-	 &quot;&amp;rll	(@x[$b1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b1],12)&quot;,
-
-	&quot;&amp;alr	(@x[$a0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b0])&quot;,
-	 &quot;&amp;alr	(@x[$a1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b1])&quot;,
-	&quot;&amp;xr	(@x[$d0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a0])&quot;,
-	 &quot;&amp;xr	(@x[$d1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a1])&quot;,
-	&quot;&amp;rll	(@x[$d0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d0],8)&quot;,
-	 &quot;&amp;rll	(@x[$d1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d1],8)&quot;,
-
-	&quot;&amp;alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc, at x</A>[$d0])&quot;,
-	 &quot;&amp;alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc_, at x</A>[$d1])&quot;,
-	&quot;&amp;xr	(@x[$b0],$xc)&quot;,
-	 &quot;&amp;xr	(@x[$b1],$xc_)&quot;,
-	&quot;&amp;rll	(@x[$b0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b0],7)&quot;,
-	 &quot;&amp;rll	(@x[$b1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b1],7)&quot;,
-
-	&quot;&amp;stm	($xc,$xc_,'$stdframe+4*8+4*$c0($sp)')&quot;,	# reload pair of 'c's
-	&quot;&amp;lm	($xc,$xc_,'$stdframe+4*8+4*$c2($sp)')&quot;,
-
-	&quot;&amp;alr	(@x[$a2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b2])&quot;,	# Q3
-	 &quot;&amp;alr	(@x[$a3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b3])&quot;,	# Q4
-	&quot;&amp;xr	(@x[$d2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a2])&quot;,
-	 &quot;&amp;xr	(@x[$d3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a3])&quot;,
-	&quot;&amp;rll	(@x[$d2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d2],16)&quot;,
-	 &quot;&amp;rll	(@x[$d3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d3],16)&quot;,
-
-	&quot;&amp;alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc, at x</A>[$d2])&quot;,
-	 &quot;&amp;alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc_, at x</A>[$d3])&quot;,
-	&quot;&amp;xr	(@x[$b2],$xc)&quot;,
-	 &quot;&amp;xr	(@x[$b3],$xc_)&quot;,
-	&quot;&amp;rll	(@x[$b2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b2],12)&quot;,
-	 &quot;&amp;rll	(@x[$b3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b3],12)&quot;,
-
-	&quot;&amp;alr	(@x[$a2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b2])&quot;,
-	 &quot;&amp;alr	(@x[$a3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b3])&quot;,
-	&quot;&amp;xr	(@x[$d2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a2])&quot;,
-	 &quot;&amp;xr	(@x[$d3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a3])&quot;,
-	&quot;&amp;rll	(@x[$d2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d2],8)&quot;,
-	 &quot;&amp;rll	(@x[$d3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d3],8)&quot;,
-
-	&quot;&amp;alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc, at x</A>[$d2])&quot;,
-	 &quot;&amp;alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc_, at x</A>[$d3])&quot;,
-	&quot;&amp;xr	(@x[$b2],$xc)&quot;,
-	 &quot;&amp;xr	(@x[$b3],$xc_)&quot;,
-	&quot;&amp;rll	(@x[$b2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b2],7)&quot;,
-	 &quot;&amp;rll	(@x[$b3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b3],7)&quot;
-	);
+	alr	(@x[$a0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b0]);	# Q1
+	 alr	(@x[$a1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b1]);	# Q2
+	xr	(@x[$d0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a0]);
+	 xr	(@x[$d1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a1]);
+	rll	(@x[$d0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d0],16);
+	 rll	(@x[$d1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d1],16);
+
+	alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc, at x</A>[$d0]);
+	 alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc_, at x</A>[$d1]);
+	xr	(@x[$b0],$xc);
+	 xr	(@x[$b1],$xc_);
+	rll	(@x[$b0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b0],12);
+	 rll	(@x[$b1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b1],12);
+
+	alr	(@x[$a0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b0]);
+	 alr	(@x[$a1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b1]);
+	xr	(@x[$d0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a0]);
+	 xr	(@x[$d1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a1]);
+	rll	(@x[$d0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d0],8);
+	 rll	(@x[$d1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d1],8);
+
+	alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc, at x</A>[$d0]);
+	 alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc_, at x</A>[$d1]);
+	xr	(@x[$b0],$xc);
+	 xr	(@x[$b1],$xc_);
+	rll	(@x[$b0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b0],7);
+	 rll	(@x[$b1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b1],7);
+
+	stm	($xc,$xc_,&quot;$stdframe+4*8+4*$c0($sp)&quot;);	# reload pair of 'c's
+	lm	($xc,$xc_,&quot;$stdframe+4*8+4*$c2($sp)&quot;);
+
+	alr	(@x[$a2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b2]);	# Q3
+	 alr	(@x[$a3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b3]);	# Q4
+	xr	(@x[$d2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a2]);
+	 xr	(@x[$d3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a3]);
+	rll	(@x[$d2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d2],16);
+	 rll	(@x[$d3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d3],16);
+
+	alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc, at x</A>[$d2]);
+	 alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc_, at x</A>[$d3]);
+	xr	(@x[$b2],$xc);
+	 xr	(@x[$b3],$xc_);
+	rll	(@x[$b2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b2],12);
+	 rll	(@x[$b3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b3],12);
+
+	alr	(@x[$a2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b2]);
+	 alr	(@x[$a3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b3]);
+	xr	(@x[$d2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a2]);
+	 xr	(@x[$d3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$a3]);
+	rll	(@x[$d2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d2],8);
+	 rll	(@x[$d3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$d3],8);
+
+	alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc, at x</A>[$d2]);
+	 alr	($<A HREF="../../../mailman/listinfo/openssl-commits.html">xc_, at x</A>[$d3]);
+	xr	(@x[$b2],$xc);
+	 xr	(@x[$b3],$xc_);
+	rll	(@x[$b2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b2],7);
+	 rll	(@x[$b3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[$b3],7);
+}
+
+sub VX_ROUND {
+my ($a0,$b0,$c0,$d0)=@_;
+my ($a1,$b1,$c1,$d1)=map(($_&amp;~3)+(($_+1)&amp;3),($a0,$b0,$c0,$d0));
+my ($a2,$b2,$c2,$d2)=map(($_&amp;~3)+(($_+1)&amp;3),($a1,$b1,$c1,$d1));
+my ($a3,$b3,$c3,$d3)=map(($_&amp;~3)+(($_+1)&amp;3),($a2,$b2,$c2,$d2));
+
+	vaf	(@v[$a0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b0]);
+	vaf	(@v[$a1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b1]);
+	vaf	(@v[$a2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b2]);
+	vaf	(@v[$a3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b3]);
+	vx	(@v[$d0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a0]);
+	vx	(@v[$d1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a1]);
+	vx	(@v[$d2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a2]);
+	vx	(@v[$d3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a3]);
+	verllf	(@v[$d0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d0],16);
+	verllf	(@v[$d1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d1],16);
+	verllf	(@v[$d2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d2],16);
+	verllf	(@v[$d3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d3],16);
+
+	vaf	(@v[$c0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d0]);
+	vaf	(@v[$c1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d1]);
+	vaf	(@v[$c2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d2]);
+	vaf	(@v[$c3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d3]);
+	vx	(@v[$b0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c0]);
+	vx	(@v[$b1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c1]);
+	vx	(@v[$b2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c2]);
+	vx	(@v[$b3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c3]);
+	verllf	(@v[$b0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b0],12);
+	verllf	(@v[$b1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b1],12);
+	verllf	(@v[$b2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b2],12);
+	verllf	(@v[$b3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b3],12);
+
+	vaf	(@v[$a0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b0]);
+	vaf	(@v[$a1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b1]);
+	vaf	(@v[$a2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b2]);
+	vaf	(@v[$a3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b3]);
+	vx	(@v[$d0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a0]);
+	vx	(@v[$d1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a1]);
+	vx	(@v[$d2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a2]);
+	vx	(@v[$d3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$a3]);
+	verllf	(@v[$d0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d0],8);
+	verllf	(@v[$d1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d1],8);
+	verllf	(@v[$d2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d2],8);
+	verllf	(@v[$d3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d3],8);
+
+	vaf	(@v[$c0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d0]);
+	vaf	(@v[$c1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d1]);
+	vaf	(@v[$c2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d2]);
+	vaf	(@v[$c3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$d3]);
+	vx	(@v[$b0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c0]);
+	vx	(@v[$b1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c1]);
+	vx	(@v[$b2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c2]);
+	vx	(@v[$b3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$c3]);
+	verllf	(@v[$b0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b0],7);
+	verllf	(@v[$b1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b1],7);
+	verllf	(@v[$b2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b2],7);
+	verllf	(@v[$b3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$b3],7);
+}
+
+PERLASM_BEGIN($output);
+
+INCLUDE	(&quot;s390x_arch.h&quot;);
+TEXT	();
+
+################
+# void ChaCha20_ctr32(unsigned char *out, const unsigned char *inp, size_t len,
+#                     const unsigned int key[8], const unsigned int counter[4])
+{
+my ($out,$inp,$len,$key,$counter)=map(&quot;%r$_&quot;,(2..6));
+
+# VX CODE PATH
+{
+my $off=$z*8*16+8;	# offset(initial state)
+my $frame=$stdframe+4*16+$off;
+
+GLOBL	(&quot;ChaCha20_ctr32&quot;);
+TYPE	(&quot;ChaCha20_ctr32&quot;,&quot;\@function&quot;);
+ALIGN	(32);
+LABEL	(&quot;ChaCha20_ctr32&quot;);
+	larl	(&quot;%r1&quot;,&quot;OPENSSL_s390xcap_P&quot;);
+
+	lghi	(&quot;%r0&quot;,64);
+&amp;{$z?	\&amp;cgr:\&amp;cr}	($len,&quot;%r0&quot;);
+	jle	(&quot;_s390x_chacha_novx&quot;);
+
+	lg	(&quot;%r0&quot;,&quot;S390X_STFLE+16(%r1)&quot;);
+	tmhh	(&quot;%r0&quot;,0x4000);	# check for vector facility
+	jz	(&quot;_s390x_chacha_novx&quot;);
+
+if (!$z) {
+	llgfr   ($len,$len);
+	std	(&quot;%f4&quot;,&quot;16*$SIZE_T+2*8($sp)&quot;);
+	std	(&quot;%f6&quot;,&quot;16*$SIZE_T+3*8($sp)&quot;);
 }
+&amp;{$z?	\&amp;stmg:\&amp;stm}	(&quot;%r6&quot;,&quot;%r7&quot;,&quot;6*$SIZE_T($sp)&quot;);
+
+	lghi	(&quot;%r1&quot;,-$frame);
+	lgr	(&quot;%r0&quot;,$sp);
+	la	($sp,&quot;0(%r1,$sp)&quot;);	# allocate stack frame
+
+	larl	(&quot;%r7&quot;,&quot;.Lsigma&quot;);
+&amp;{$z?	\&amp;stg:\&amp;st}	(&quot;%r0&quot;,&quot;0($sp)&quot;);	# backchain
+
+	vstm	(&quot;%v8&quot;,&quot;%v15&quot;,&quot;8($sp)&quot;) if ($z);
+
+	vlm	(&quot;%v1&quot;,&quot;%v2&quot;,&quot;0($key)&quot;);	# load key
+	vl	(&quot;%v0&quot;,&quot;0(%r7)&quot;);	# load sigma constant
+	vl	(&quot;%v3&quot;,&quot;0($counter)&quot;);	# load iv (counter||nonce)
+	l	(&quot;%r0&quot;,&quot;0($counter)&quot;);	# load counter
+	vstm	(&quot;%v0&quot;,&quot;%v3&quot;,&quot;$off($sp)&quot;);	# copy initial state to stack
+
+	srlg	(&quot;%r1&quot;,$len,8);
+	ltgr	(&quot;%r1&quot;,&quot;%r1&quot;);
+	jz	(&quot;.Lvx_4x_done&quot;);
+
+ALIGN	(16);	# process 4 64-byte blocks
+LABEL	(&quot;.Lvx_4x&quot;);
+	vlrepf	(&quot;%v$_&quot;,($_*4).&quot;+$off($sp)&quot;) for (0..15);	# load initial
+								#  state
+	vl	(&quot;%v31&quot;,&quot;16(%r7)&quot;);
+	vaf	(&quot;%v12&quot;,&quot;%v12&quot;,&quot;%v31&quot;);	# increment counter
+
+	vlr	(@v[$_],&quot;%v$_&quot;) for (0..15);	# copy initial state
+
+	lhi	(&quot;%r6&quot;,10);
+	j	(&quot;.Loop_vx_4x&quot;);
+
+ALIGN	(16);
+LABEL	(&quot;.Loop_vx_4x&quot;);
+	VX_ROUND( 0, 4, 8,12);	# column round
+	VX_ROUND( 0, 5,10,15);	# diagonal round
+	brct	(&quot;%r6&quot;,&quot;.Loop_vx_4x&quot;);
+
+	vaf	(@v[$_]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_],&quot;%v$_&quot;) for (0..15);	# state += initial
+							#  state (mod 32)
+	vlm	(&quot;%v6&quot;,&quot;%v7&quot;,&quot;32(%r7)&quot;);	# load vperm operands
+
+for (0..3) {	# blocks 1,2
+	vmrhf	(&quot;%v0&quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+1]);	# ks = serialize(state)
+	vmrhf	(&quot;%v1&quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+3]);
+	vperm	(&quot;%v&quot;.($_+ 8),&quot;%v0&quot;,&quot;%v1&quot;,&quot;%v6&quot;);
+	vperm	(&quot;%v&quot;.($_+12),&quot;%v0&quot;,&quot;%v1&quot;,&quot;%v7&quot;);
+}
+	vlm	(&quot;%v0&quot;,&quot;%v7&quot;,&quot;0($inp)&quot;);	# load in
+	vx	(&quot;%v$_&quot;,&quot;%v$_&quot;,&quot;%v&quot;.($_+8)) for (0..7);	# out = in ^ ks
+	vstm	(&quot;%v0&quot;,&quot;%v7&quot;,&quot;0($out)&quot;);	# store out
+
+	vlm	(&quot;%v6&quot;,&quot;%v7&quot;,&quot;32(%r7)&quot;);	# restore vperm operands
+
+for (0..3) {	# blocks 2,3
+	vmrlf	(&quot;%v0&quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+1]);	# ks = serialize(state)
+	vmrlf	(&quot;%v1&quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+3]);
+	vperm	(&quot;%v&quot;.($_+ 8),&quot;%v0&quot;,&quot;%v1&quot;,&quot;%v6&quot;);
+	vperm	(&quot;%v&quot;.($_+12),&quot;%v0&quot;,&quot;%v1&quot;,&quot;%v7&quot;);
+}
+	vlm	(&quot;%v0&quot;,&quot;%v7&quot;,&quot;128($inp)&quot;);	# load in
+	vx	(&quot;%v$_&quot;,&quot;%v$_&quot;,&quot;%v&quot;.($_+8)) for (0..7);	# out = in ^ ks
+	vstm	(&quot;%v0&quot;,&quot;%v7&quot;,&quot;128($out)&quot;);	# store out
+
+	ahi	(&quot;%r0&quot;,4);
+	st	(&quot;%r0&quot;,&quot;48+$off($sp)&quot;);	# update initial state
+
+	la	($inp,&quot;256($inp)&quot;);
+	la	($out,&quot;256($out)&quot;);
+	brctg	(&quot;%r1&quot;,&quot;.Lvx_4x&quot;);
+
+ALIGN	(16);
+LABEL	(&quot;.Lvx_4x_done&quot;);
+	lghi	(&quot;%r1&quot;,0xff);
+	ngr	($len,&quot;%r1&quot;);
+	jnz	(&quot;.Lvx_rem&quot;);
+
+ALIGN	(16);
+LABEL	(&quot;.Lvx_done&quot;);
+	vzero	(&quot;%v$_&quot;) for (16..31);	# wipe ks and key copy
+	vstm	(&quot;%v16&quot;,&quot;%v17&quot;,&quot;16+$off($sp)&quot;);
+	vlm	(&quot;%v8&quot;,&quot;%v15&quot;,&quot;8($sp)&quot;) if ($z);
+
+	la	($sp,&quot;$frame($sp)&quot;);
+&amp;{$z?	\&amp;lmg:\&amp;lm}	(&quot;%r6&quot;,&quot;%r7&quot;,&quot;6*$SIZE_T($sp)&quot;);
+
+if (!$z) {
+	ld	(&quot;%f4&quot;,&quot;16*$SIZE_T+2*8($sp)&quot;);
+	ld	(&quot;%f6&quot;,&quot;16*$SIZE_T+3*8($sp)&quot;);
+	vzero	(&quot;%v$_&quot;) for (8..15);
+}
+	br	(&quot;%r14&quot;);
+ALIGN	(16);
+LABEL	(&quot;.Lvx_rem&quot;);
+	lhi	(&quot;%r0&quot;,64);
+
+	sr	($len,&quot;%r0&quot;);
+	brc	(2,&quot;.Lvx_rem_g64&quot;);	# cc==2?
+
+	lghi	(&quot;%r1&quot;,-$stdframe);
+
+	la	($counter,&quot;48+$off($sp)&quot;);	# load updated iv
+	ar	($len,&quot;%r0&quot;);	# restore len
+
+	lgr	(&quot;%r7&quot;,$counter);
+&amp;{$z?	\&amp;stg:\&amp;st}	(&quot;%r14&quot;,&quot;14*$SIZE_T+$frame($sp)&quot;);
+	la	($sp,&quot;0(%r1,$sp)&quot;);
+
+	bras	(&quot;%r14&quot;,&quot;_s390x_chacha_novx&quot;);
+
+	la	($sp,&quot;$stdframe($sp)&quot;);
+&amp;{$z?	\&amp;lg:\&amp;l}	(&quot;%r14&quot;,&quot;14*$SIZE_T+$frame($sp)&quot;);
+	lgr	($counter,&quot;%r7&quot;);
+	j	(&quot;.Lvx_done&quot;);
+
+ALIGN	(16);
+LABEL	(&quot;.Lvx_rem_g64&quot;);
+	vlrepf	(&quot;%v$_&quot;,($_*4).&quot;+$off($sp)&quot;) for (0..15);	# load initial
+								#  state
+	vl	(&quot;%v31&quot;,&quot;16(%r7)&quot;);
+	vaf	(&quot;%v12&quot;,&quot;%v12&quot;,&quot;%v31&quot;);	# increment counter
 
-$code.=&lt;&lt;___;
-.text
-
-.globl	ChaCha20_ctr32
-.type	ChaCha20_ctr32,\@function
-.align	32
-ChaCha20_ctr32:
-	lt${g}r	$len,$len			# $len==0?
-	bzr	%r14
-	a${g}hi	$len,-64
-	l${g}hi	%r1,-$frame
-	stm${g}	%r6,%r15,`6*$SIZE_T`($sp)
-	sl${g}r	$out,$inp			# difference
-	la	$len,0($inp,$len)		# end of input minus 64
-	larl	%r7,.Lsigma
-	lgr	%r0,$sp
-	la	$sp,0(%r1,$sp)
-	st${g}	%r0,0($sp)
-
-	lmg	%r8,%r11,0($key)		# load key
-	lmg	%r12,%r13,0($counter)		# load counter
-	lmg	%r6,%r7,0(%r7)			# load sigma constant
-
-	la	%r14,0($inp)
-	st${g}	$out,$frame+3*$SIZE_T($sp)
-	st${g}	$len,$frame+4*$SIZE_T($sp)
-	stmg	%r6,%r13,$stdframe($sp)		# copy key schedule to stack
-	srlg	@x[12],%r12,32			# 32-bit counter value
-	j	.Loop_outer
-
-.align	16
-.Loop_outer:
-	lm	@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[7],$stdframe+4*0($sp)		# load x[0]-x[7]
-	lm	@t[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>[1],$stdframe+4*10($sp)		# load x[10]-x[11]
-	lm	@x[13]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[15],$stdframe+4*13($sp)	# load x[13]-x[15]
-	stm	@t[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>[1],$stdframe+4*8+4*10($sp)	# offload x[10]-x[11]
-	lm	@t[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>[1],$stdframe+4*8($sp)		# load x[8]-x[9]
-	st	@x[12],$stdframe+4*12($sp)		# save counter
-	st${g}	%r14,$frame+2*$SIZE_T($sp)		# save input pointer
-	lhi	%r14,10
-	j	.Loop
-
-.align	4
-.Loop:
-___
-	foreach (&amp;ROUND(0, 4, 8,12)) { eval; }
-	foreach (&amp;ROUND(0, 5,10,15)) { eval; }
-$code.=&lt;&lt;___;
-	brct	%r14,.Loop
-
-	l${g}	%r14,$frame+2*$SIZE_T($sp)		# pull input pointer
-	stm	@t[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>[1],$stdframe+4*8+4*8($sp)	# offload x[8]-x[9]
-	lm${g}	@t[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>[1],$frame+3*$SIZE_T($sp)
-
-	al	@x[0],$stdframe+4*0($sp)	# accumulate key schedule
-	al	@x[1],$stdframe+4*1($sp)
-	al	@x[2],$stdframe+4*2($sp)
-	al	@x[3],$stdframe+4*3($sp)
-	al	@x[4],$stdframe+4*4($sp)
-	al	@x[5],$stdframe+4*5($sp)
-	al	@x[6],$stdframe+4*6($sp)
-	al	@x[7],$stdframe+4*7($sp)
-	lrvr	@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[0]
-	lrvr	@x[1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[1]
-	lrvr	@x[2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[2]
-	lrvr	@x[3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[3]
-	lrvr	@x[4]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[4]
-	lrvr	@x[5]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[5]
-	lrvr	@x[6]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[6]
-	lrvr	@x[7]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[7]
-	al	@x[12],$stdframe+4*12($sp)
-	al	@x[13],$stdframe+4*13($sp)
-	al	@x[14],$stdframe+4*14($sp)
-	al	@x[15],$stdframe+4*15($sp)
-	lrvr	@x[12]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[12]
-	lrvr	@x[13]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[13]
-	lrvr	@x[14]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[14]
-	lrvr	@x[15]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[15]
-
-	la	@t[0],0(@t[0],%r14)		# reconstruct output pointer
-	cl${g}r	%<A HREF="../../../mailman/listinfo/openssl-commits.html">r14, at t</A>[1]
-	jh	.Ltail
-
-	x	@x[0],4*0(%r14)			# xor with input
-	x	@x[1],4*1(%r14)
-	st	@x[0],4*0(@t[0])		# store output
-	x	@x[2],4*2(%r14)
-	st	@x[1],4*1(@t[0])
-	x	@x[3],4*3(%r14)
-	st	@x[2],4*2(@t[0])
-	x	@x[4],4*4(%r14)
-	st	@x[3],4*3(@t[0])
-	 lm	@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[3],$stdframe+4*8+4*8($sp)	# load x[8]-x[11]
-	x	@x[5],4*5(%r14)
-	st	@x[4],4*4(@t[0])
-	x	@x[6],4*6(%r14)
-	 al	@x[0],$stdframe+4*8($sp)
-	st	@x[5],4*5(@t[0])
-	x	@x[7],4*7(%r14)
-	 al	@x[1],$stdframe+4*9($sp)
-	st	@x[6],4*6(@t[0])
-	x	@x[12],4*12(%r14)
-	 al	@x[2],$stdframe+4*10($sp)
-	st	@x[7],4*7(@t[0])
-	x	@x[13],4*13(%r14)
-	 al	@x[3],$stdframe+4*11($sp)
-	st	@x[12],4*12(@t[0])
-	x	@x[14],4*14(%r14)
-	st	@x[13],4*13(@t[0])
-	x	@x[15],4*15(%r14)
-	st	@x[14],4*14(@t[0])
-	 lrvr	@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[0]
-	st	@x[15],4*15(@t[0])
-	 lrvr	@x[1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[1]
-	 lrvr	@x[2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[2]
-	 lrvr	@x[3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[3]
-	lhi	@x[12],1
-	 x	@x[0],4*8(%r14)
-	al	@x[12],$stdframe+4*12($sp)	# increment counter
-	 x	@x[1],4*9(%r14)
-	 st	@x[0],4*8(@t[0])
-	 x	@x[2],4*10(%r14)
-	 st	@x[1],4*9(@t[0])
-	 x	@x[3],4*11(%r14)
-	 st	@x[2],4*10(@t[0])
-	 st	@x[3],4*11(@t[0])
-
-	cl${g}r	%<A HREF="../../../mailman/listinfo/openssl-commits.html">r14, at t</A>[1]			# done yet?
-	la	%r14,64(%r14)
-	jl	.Loop_outer
-
-.Ldone:
-	xgr	%r0,%r0
-	xgr	%r1,%r1
-	xgr	%r2,%r2
-	xgr	%r3,%r3
-	stmg	%r0,%r3,$stdframe+4*4($sp)	# wipe key copy
-	stmg	%r0,%r3,$stdframe+4*12($sp)
-
-	lm${g}	%r6,%r15,`$frame+6*$SIZE_T`($sp)
-	br	%r14
-
-.align	16
-.Ltail:
-	la	@t[1],64($t[1])
-	stm	@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[7],$stdframe+4*0($sp)
-	sl${g}r	@t[1],%r14
-	lm	@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[3],$stdframe+4*8+4*8($sp)
-	l${g}hi	@x[6],0
-	stm	@x[12]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[15],$stdframe+4*12($sp)
-	al	@x[0],$stdframe+4*8($sp)
-	al	@x[1],$stdframe+4*9($sp)
-	al	@x[2],$stdframe+4*10($sp)
-	al	@x[3],$stdframe+4*11($sp)
-	lrvr	@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[0]
-	lrvr	@x[1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[1]
-	lrvr	@x[2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[2]
-	lrvr	@x[3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[3]
-	stm	@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[3],$stdframe+4*8($sp)
-
-.Loop_tail:
-	llgc	@x[4],0(@x[6],%r14)
-	llgc	@x[5],$stdframe(@x[6],$sp)
-	xr	@x[5]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[4]
-	stc	@x[5],0(@x[6]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>[0])
-	la	@x[6],1(@x[6])
-	brct	@t[1],.Loop_tail
-
-	j	.Ldone
-.size	ChaCha20_ctr32,.-ChaCha20_ctr32
-
-.align	32
-.Lsigma:
-.long	0x61707865,0x3320646e,0x79622d32,0x6b206574	# endian-neutral
-.asciz	&quot;ChaCha20 for s390x, CRYPTOGAMS by &lt;appro\@openssl.org&gt;&quot;
-.align	4
-___
-
-foreach (split(&quot;\n&quot;,$code)) {
-	s/\`([^\`]*)\`/eval $1/ge;
-
-	print $_,&quot;\n&quot;;
+	vlr	(@v[$_],&quot;%v$_&quot;) for (0..15);	# state = initial state
+
+	lhi	(&quot;%r6&quot;,10);
+	j	(&quot;.Loop_vx_rem&quot;);
+
+ALIGN	(16);
+LABEL	(&quot;.Loop_vx_rem&quot;);
+	VX_ROUND( 0, 4, 8,12);	# column round
+	VX_ROUND( 0, 5,10,15);	# diagonal round
+	brct	(&quot;%r6&quot;,&quot;.Loop_vx_rem&quot;);
+
+	vaf	(@v[$_]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_],&quot;%v$_&quot;) for (0..15);	# state += initial
+							#  state (mod 32)
+	vlm	(&quot;%v6&quot;,&quot;%v7&quot;,&quot;32(%r7)&quot;);	# load vperm operands
+
+for (0..3) {	# blocks 1,2
+	vmrhf	(&quot;%v0&quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+1]);	# ks = serialize(state)
+	vmrhf	(&quot;%v1&quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+3]);
+	vperm	(&quot;%v&quot;.($_+8),&quot;%v0&quot;,&quot;%v1&quot;,&quot;%v6&quot;);
+	vperm	(&quot;%v&quot;.($_+12),&quot;%v0&quot;,&quot;%v1&quot;,&quot;%v7&quot;);
+}
+	vlm	(&quot;%v0&quot;,&quot;%v3&quot;,&quot;0($inp)&quot;);	# load in
+	vx	(&quot;%v$_&quot;,&quot;%v$_&quot;,&quot;%v&quot;.($_+8)) for (0..3);	# out = in ^ ks
+	vstm	(&quot;%v0&quot;,&quot;%v3&quot;,&quot;0($out)&quot;);	# store out
+
+	la	($inp,&quot;64($inp)&quot;);
+	la	($out,&quot;64($out)&quot;);
+
+	sr	($len,&quot;%r0&quot;);
+	brc	(4,&quot;.Lvx_tail&quot;);	# cc==4?
+
+	vlm	(&quot;%v0&quot;,&quot;%v3&quot;,&quot;0($inp)&quot;);	# load in
+	vx	(&quot;%v$_&quot;,&quot;%v$_&quot;,&quot;%v&quot;.($_+12)) for (0..3);	# out = in ^ ks
+	vstm	(&quot;%v0&quot;,&quot;%v3&quot;,&quot;0($out)&quot;);	# store out
+	jz	(&quot;.Lvx_done&quot;);
+
+for (0..3) {	# blocks 3,4
+	vmrlf	(&quot;%v0&quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+1]);	# ks = serialize(state)
+	vmrlf	(&quot;%v1&quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at v</A>[$_*4+3]);
+	vperm	(&quot;%v&quot;.($_+12),&quot;%v0&quot;,&quot;%v1&quot;,&quot;%v6&quot;);
+	vperm	(&quot;%v&quot;.($_+8),&quot;%v0&quot;,&quot;%v1&quot;,&quot;%v7&quot;);
+}
+	la	($inp,&quot;64($inp)&quot;);
+	la	($out,&quot;64($out)&quot;);
+
+	sr	($len,&quot;%r0&quot;);
+	brc	(4,&quot;.Lvx_tail&quot;);	# cc==4?
+
+	vlm	(&quot;%v0&quot;,&quot;%v3&quot;,&quot;0($inp)&quot;);	# load in
+	vx	(&quot;%v$_&quot;,&quot;%v$_&quot;,&quot;%v&quot;.($_+12)) for (0..3);	# out = in ^ ks
+	vstm	(&quot;%v0&quot;,&quot;%v3&quot;,&quot;0($out)&quot;);	# store out
+	jz	(&quot;.Lvx_done&quot;);
+
+	la	($inp,&quot;64($inp)&quot;);
+	la	($out,&quot;64($out)&quot;);
+
+	sr	($len,&quot;%r0&quot;);
+	vlr	(&quot;%v&quot;.($_+4),&quot;%v$_&quot;) for (8..11);
+	j	(&quot;.Lvx_tail&quot;);
+
+ALIGN	(16);
+LABEL	(&quot;.Lvx_tail&quot;);
+	ar	($len,&quot;%r0&quot;);	# restore $len
+	ahi	($len,-1);
+
+	lhi	(&quot;%r0&quot;,16);
+for (0..2) {
+	vll	(&quot;%v0&quot;,$len,($_*16).&quot;($inp)&quot;);
+	vx	(&quot;%v0&quot;,&quot;%v0&quot;,&quot;%v&quot;.($_+12));
+	vstl	(&quot;%v0&quot;,$len,($_*16).&quot;($out)&quot;);
+	sr	($len,&quot;%r0&quot;);
+	brc	(4,&quot;.Lvx_done&quot;);	# cc==4?
+}
+	vll	(&quot;%v0&quot;,$len,&quot;3*16($inp)&quot;);
+	vx	(&quot;%v0&quot;,&quot;%v0&quot;,&quot;%v15&quot;);
+	vstl	(&quot;%v0&quot;,$len,&quot;3*16($out)&quot;);
+	j	(&quot;.Lvx_done&quot;);
+SIZE	(&quot;ChaCha20_ctr32&quot;,&quot;.-ChaCha20_ctr32&quot;);
+}
+
+# NOVX CODE PATH
+{
+my $frame=$stdframe+4*20;
+
+TYPE	(&quot;_s390x_chacha_novx&quot;,&quot;\@function&quot;);
+ALIGN	(32);
+LABEL	(&quot;_s390x_chacha_novx&quot;);
+&amp;{$z?	\&amp;ltgr:\&amp;ltr}	($len,$len);	# $len==0?
+	bzr	(&quot;%r14&quot;);
+&amp;{$z?	\&amp;aghi:\&amp;ahi}	($len,-64);
+&amp;{$z?	\&amp;lghi:\&amp;lhi}	(&quot;%r1&quot;,-$frame);
+&amp;{$z?	\&amp;stmg:\&amp;stm}	(&quot;%r6&quot;,&quot;%r15&quot;,&quot;6*$SIZE_T($sp)&quot;);
+&amp;{$z?	\&amp;slgr:\&amp;slr}	($out,$inp);	# difference
+	la	($len,&quot;0($inp,$len)&quot;);	# end of input minus 64
+	larl	(&quot;%r7&quot;,&quot;.Lsigma&quot;);
+	lgr	(&quot;%r0&quot;,$sp);
+	la	($sp,&quot;0(%r1,$sp)&quot;);
+&amp;{$z?	\&amp;stg:\&amp;st}	(&quot;%r0&quot;,&quot;0($sp)&quot;);
+
+	lmg	(&quot;%r8&quot;,&quot;%r11&quot;,&quot;0($key)&quot;);	# load key
+	lmg	(&quot;%r12&quot;,&quot;%r13&quot;,&quot;0($counter)&quot;);	# load counter
+	lmg	(&quot;%r6&quot;,&quot;%r7&quot;,&quot;0(%r7)&quot;);	# load sigma constant
+
+	la	(&quot;%r14&quot;,&quot;0($inp)&quot;);
+&amp;{$z?	\&amp;stg:\&amp;st}	($out,&quot;$frame+3*$SIZE_T($sp)&quot;);
+&amp;{$z?	\&amp;stg:\&amp;st}	($len,&quot;$frame+4*$SIZE_T($sp)&quot;);
+	stmg	(&quot;%r6&quot;,&quot;%r13&quot;,&quot;$stdframe($sp)&quot;);# copy key schedule to stack
+	srlg	(@x[12],&quot;%r12&quot;,32);	# 32-bit counter value
+	j	(&quot;.Loop_outer&quot;);
+
+ALIGN	(16);
+LABEL	(&quot;.Loop_outer&quot;);
+	lm	(@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[7],&quot;$stdframe+4*0($sp)&quot;);	# load x[0]-x[7]
+	lm	(@t[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>[1],&quot;$stdframe+4*10($sp)&quot;);	# load x[10]-x[11]
+	lm	(@x[13]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[15],&quot;$stdframe+4*13($sp)&quot;);	# load x[13]-x[15]
+	stm	(@t[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>[1],&quot;$stdframe+4*8+4*10($sp)&quot;);# offload x[10]-x[11]
+	lm	(@t[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>[1],&quot;$stdframe+4*8($sp)&quot;);	# load x[8]-x[9]
+	st	(@x[12],&quot;$stdframe+4*12($sp)&quot;);	# save counter
+&amp;{$z?	\&amp;stg:\&amp;st}	(&quot;%r14&quot;,&quot;$frame+2*$SIZE_T($sp)&quot;);# save input pointer
+	lhi	(&quot;%r14&quot;,10);
+	j	(&quot;.Loop&quot;);
+
+ALIGN	(4);
+LABEL	(&quot;.Loop&quot;);
+	ROUND	(0, 4, 8,12);
+	ROUND	(0, 5,10,15);
+	brct	(&quot;%r14&quot;,&quot;.Loop&quot;);
+
+&amp;{$z?	\&amp;lg:\&amp;l}	(&quot;%r14&quot;,&quot;$frame+2*$SIZE_T($sp)&quot;);# pull input pointer
+	stm	(@t[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>[1],&quot;$stdframe+4*8+4*8($sp)&quot;);	# offload x[8]-x[9]
+&amp;{$z?	\&amp;lmg:\&amp;lm}	(@t[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>[1],&quot;$frame+3*$SIZE_T($sp)&quot;);
+
+	al	(@x[0],&quot;$stdframe+4*0($sp)&quot;);	# accumulate key schedule
+	al	(@x[1],&quot;$stdframe+4*1($sp)&quot;);
+	al	(@x[2],&quot;$stdframe+4*2($sp)&quot;);
+	al	(@x[3],&quot;$stdframe+4*3($sp)&quot;);
+	al	(@x[4],&quot;$stdframe+4*4($sp)&quot;);
+	al	(@x[5],&quot;$stdframe+4*5($sp)&quot;);
+	al	(@x[6],&quot;$stdframe+4*6($sp)&quot;);
+	al	(@x[7],&quot;$stdframe+4*7($sp)&quot;);
+	lrvr	(@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[0]);
+	lrvr	(@x[1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[1]);
+	lrvr	(@x[2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[2]);
+	lrvr	(@x[3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[3]);
+	lrvr	(@x[4]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[4]);
+	lrvr	(@x[5]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[5]);
+	lrvr	(@x[6]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[6]);
+	lrvr	(@x[7]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[7]);
+	al	(@x[12],&quot;$stdframe+4*12($sp)&quot;);
+	al	(@x[13],&quot;$stdframe+4*13($sp)&quot;);
+	al	(@x[14],&quot;$stdframe+4*14($sp)&quot;);
+	al	(@x[15],&quot;$stdframe+4*15($sp)&quot;);
+	lrvr	(@x[12]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[12]);
+	lrvr	(@x[13]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[13]);
+	lrvr	(@x[14]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[14]);
+	lrvr	(@x[15]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[15]);
+
+	la	(@t[0],&quot;0(@t[0],%r14)&quot;);	# reconstruct output pointer
+&amp;{$z?	\&amp;clgr:\&amp;clr}	(&quot;%r14&quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>[1]);
+	jh	(&quot;.Ltail&quot;);
+
+	x	(@x[0],&quot;4*0(%r14)&quot;);	# xor with input
+	x	(@x[1],&quot;4*1(%r14)&quot;);
+	st	(@x[0],&quot;4*0(@t[0])&quot;);	# store output
+	x	(@x[2],&quot;4*2(%r14)&quot;);
+	st	(@x[1],&quot;4*1(@t[0])&quot;);
+	x	(@x[3],&quot;4*3(%r14)&quot;);
+	st	(@x[2],&quot;4*2(@t[0])&quot;);
+	x	(@x[4],&quot;4*4(%r14)&quot;);
+	st	(@x[3],&quot;4*3(@t[0])&quot;);
+	 lm	(@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[3],&quot;$stdframe+4*8+4*8($sp)&quot;);	# load x[8]-x[11]
+	x	(@x[5],&quot;4*5(%r14)&quot;);
+	st	(@x[4],&quot;4*4(@t[0])&quot;);
+	x	(@x[6],&quot;4*6(%r14)&quot;);
+	 al	(@x[0],&quot;$stdframe+4*8($sp)&quot;);
+	st	(@x[5],&quot;4*5(@t[0])&quot;);
+	x	(@x[7],&quot;4*7(%r14)&quot;);
+	 al	(@x[1],&quot;$stdframe+4*9($sp)&quot;);
+	st	(@x[6],&quot;4*6(@t[0])&quot;);
+	x	(@x[12],&quot;4*12(%r14)&quot;);
+	 al	(@x[2],&quot;$stdframe+4*10($sp)&quot;);
+	st	(@x[7],&quot;4*7(@t[0])&quot;);
+	x	(@x[13],&quot;4*13(%r14)&quot;);
+	 al	(@x[3],&quot;$stdframe+4*11($sp)&quot;);
+	st	(@x[12],&quot;4*12(@t[0])&quot;);
+	x	(@x[14],&quot;4*14(%r14)&quot;);
+	st	(@x[13],&quot;4*13(@t[0])&quot;);
+	x	(@x[15],&quot;4*15(%r14)&quot;);
+	st	(@x[14],&quot;4*14(@t[0])&quot;);
+	 lrvr	(@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[0]);
+	st	(@x[15],&quot;4*15(@t[0])&quot;);
+	 lrvr	(@x[1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[1]);
+	 lrvr	(@x[2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[2]);
+	 lrvr	(@x[3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[3]);
+	lhi	(@x[12],1);
+	 x	(@x[0],&quot;4*8(%r14)&quot;);
+	al	(@x[12],&quot;$stdframe+4*12($sp)&quot;);	# increment counter
+	 x	(@x[1],&quot;4*9(%r14)&quot;);
+	 st	(@x[0],&quot;4*8(@t[0])&quot;);
+	 x	(@x[2],&quot;4*10(%r14)&quot;);
+	 st	(@x[1],&quot;4*9(@t[0])&quot;);
+	 x	(@x[3],&quot;4*11(%r14)&quot;);
+	 st	(@x[2],&quot;4*10(@t[0])&quot;);
+	 st	(@x[3],&quot;4*11(@t[0])&quot;);
+
+&amp;{$z?	\&amp;clgr:\&amp;clr}	(&quot;%r14&quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>[1]);	# done yet?
+	la	(&quot;%r14&quot;,&quot;64(%r14)&quot;);
+	jl	(&quot;.Loop_outer&quot;);
+
+LABEL	(&quot;.Ldone&quot;);
+	xgr	(&quot;%r0&quot;,&quot;%r0&quot;);
+	xgr	(&quot;%r1&quot;,&quot;%r1&quot;);
+	xgr	(&quot;%r2&quot;,&quot;%r2&quot;);
+	xgr	(&quot;%r3&quot;,&quot;%r3&quot;);
+	stmg	(&quot;%r0&quot;,&quot;%r3&quot;,&quot;$stdframe+4*4($sp)&quot;);	# wipe key copy
+	stmg	(&quot;%r0&quot;,&quot;%r3&quot;,&quot;$stdframe+4*12($sp)&quot;);
+
+&amp;{$z?	\&amp;lmg:\&amp;lm}	(&quot;%r6&quot;,&quot;%r15&quot;,&quot;$frame+6*$SIZE_T($sp)&quot;);
+	br	(&quot;%r14&quot;);
+
+ALIGN	(16);
+LABEL	(&quot;.Ltail&quot;);
+	la	(@t[1],&quot;64($t[1])&quot;);
+	stm	(@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[7],&quot;$stdframe+4*0($sp)&quot;);
+&amp;{$z?	\&amp;slgr:\&amp;slr}	(@t[1],&quot;%r14&quot;);
+	lm	(@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[3],&quot;$stdframe+4*8+4*8($sp)&quot;);
+&amp;{$z?	\&amp;lghi:\&amp;lhi}	(@x[6],0);
+	stm	(@x[12]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[15],&quot;$stdframe+4*12($sp)&quot;);
+	al	(@x[0],&quot;$stdframe+4*8($sp)&quot;);
+	al	(@x[1],&quot;$stdframe+4*9($sp)&quot;);
+	al	(@x[2],&quot;$stdframe+4*10($sp)&quot;);
+	al	(@x[3],&quot;$stdframe+4*11($sp)&quot;);
+	lrvr	(@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[0]);
+	lrvr	(@x[1]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[1]);
+	lrvr	(@x[2]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[2]);
+	lrvr	(@x[3]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[3]);
+	stm	(@x[0]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[3],&quot;$stdframe+4*8($sp)&quot;);
+
+LABEL	(&quot;.Loop_tail&quot;);
+	llgc	(@x[4],&quot;0(@x[6],%r14)&quot;);
+	llgc	(@x[5],&quot;$stdframe(@x[6],$sp)&quot;);
+	xr	(@x[5]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at x</A>[4]);
+	stc	(@x[5],&quot;0(@x[6]<A HREF="../../../mailman/listinfo/openssl-commits.html">, at t</A>[0])&quot;);
+	la	(@x[6],&quot;1(@x[6])&quot;);
+	brct	(@t[1],&quot;.Loop_tail&quot;);
+
+	j	(&quot;.Ldone&quot;);
+SIZE	(&quot;_s390x_chacha_novx&quot;,&quot;.-_s390x_chacha_novx&quot;);
+}
 }
-close STDOUT;
+################
+
+ALIGN	(64);
+LABEL	(&quot;.Lsigma&quot;);
+LONG	(0x61707865,0x3320646e,0x79622d32,0x6b206574);	# endian-neutral sigma
+LONG	(0x00000000,0x00000001,0x00000002,0x00000003);	# vaf counter increment
+LONG	(0x03020100,0x07060504,0x13121110,0x17161514);	# vperm serialization
+LONG	(0x0b0a0908,0x0f0e0d0c,0x1b1a1918,0x1f1e1d1c);	# vperm serialization
+ASCIZ	(&quot;\&quot;ChaCha20 for s390x, CRYPTOGAMS by &lt;appro\@openssl.org&gt;\&quot;&quot;);
+ALIGN	(4);
+
+PERLASM_END();
diff --git a/crypto/chacha/build.info b/crypto/chacha/build.info
index 02f8e51..e1d6116 100644
--- a/crypto/chacha/build.info
+++ b/crypto/chacha/build.info
@@ -9,6 +9,7 @@ GENERATE[chacha-armv4.S]=asm/chacha-armv4.pl $(PERLASM_SCHEME)
 INCLUDE[chacha-armv4.o]=..
 GENERATE[chacha-armv8.S]=asm/chacha-armv8.pl $(PERLASM_SCHEME)
 INCLUDE[chacha-armv8.o]=..
+INCLUDE[chacha-s390x.o]=..
 
 BEGINRAW[Makefile(unix)]
 ##### CHACHA assembler implementations
diff --git a/crypto/perlasm/s390x.pm b/crypto/perlasm/s390x.pm
new file mode 100644
index 0000000..5f3a49d
--- /dev/null
+++ b/crypto/perlasm/s390x.pm
@@ -0,0 +1,3060 @@
+#!/usr/bin/env perl
+# Copyright 2018 The OpenSSL Project Authors. All Rights Reserved.
+#
+# Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
+# this file except in compliance with the License.  You can obtain a copy
+# in the file LICENSE in the source distribution or at
+# <A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>
+
+# Copyright IBM Corp. 2018
+# Author: Patrick Steuer &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">patrick.steuer at de.ibm.com</A>&gt;
+
+package perlasm::s390x;
+
+use strict;
+use warnings;
+use Carp qw(confess);
+use Exporter qw(import);
+
+our @EXPORT=qw(PERLASM_BEGIN PERLASM_END);
+our @EXPORT_OK=qw(AUTOLOAD LABEL INCLUDE stfle);
+our %EXPORT_TAGS=(
+	MSA =&gt; [qw(kmac km kmc kimd klmd)],
+	MSA4 =&gt; [qw(kmf kmo pcc kmctr)],
+	MSA5 =&gt; [qw(ppno prno)],
+	MSA8 =&gt; [qw(kma)],
+	VX =&gt; [qw(vgef vgeg vgbm vzero vone vgm vgmb vgmh vgmf vgmg
+	    vl vlr vlrep vlrepb vlreph vlrepf vlrepg vleb vleh vlef vleg vleib
+	    vleih vleif vleig vlgv vlgvb vlgvh vlgvf vlgvg vllez vllezb vllezh
+	    vllezf vllezg vlm vlbb vlvg vlvgb vlvgh vlvgf vlvgg vlvgp
+	    vll vmrh vmrhb vmrhh vmrhf vmrhg vmrl vmrlb vmrlh vmrlf vmrlg vpk
+	    vpkh vpkf vpkg vpks vpksh vpksf vpksg vpkshs vpksfs vpksgs vpkls
+	    vpklsh vpklsf vpklsg vpklshs vpklsfs vpklsgs vperm vpdi vrep vrepb
+	    vreph vrepf vrepg vrepi vrepib vrepih vrepif vrepig vscef vsceg
+	    vsel vseg vsegb vsegh vsegf vst vsteb vsteh vstef vsteg vstm vstl
+	    vuph vuphb vuphh vuphf vuplh vuplhb vuplhh vuplhf vupl vuplb vuplhw
+	    vuplf vupll vupllb vupllh vupllf va vab vah vaf vag vaq vacc vaccb
+	    vacch vaccf vaccg vaccq vac vacq vaccc vacccq vn vnc vavg vavgb
+	    vavgh vavgf vavgg vavgl vavglb vavglh vavglf vavglg vcksm vec_ vecb
+	    vech vecf vecg vecl veclb veclh veclf veclg vceq vceqb vceqh vceqf
+	    vceqg vceqbs vceqhs vceqfs vceqgs vch vchb vchh vchf vchg vchbs
+	    vchhs vchfs vchgs vchl vchlb vchlh vchlf vchlg vchlbs vchlhs vchlfs
+	    vchlgs vclz vclzb vclzh vclzf vclzg vctz vctzb vctzh vctzf vctzg
+	    vx vgfm vgfmb vgfmh vgfmf vgfmg vgfma vgfmab vgfmah vgfmaf vgfmag
+	    vlc vlcb vlch vlcf vlcg vlp vlpb vlph vlpf vlpg vmx vmxb vmxh vmxf
+	    vmxg vmxl vmxlb vmxlh vmxlf vmxlg vmn vmnb vmnh vmnf vmng vmnl
+	    vmnlb vmnlh vmnlf vmnlg vmal vmalb vmalhw vmalf vmah vmahb vmahh
+	    vmahf vmalh vmalhb vmalhh vmalhf vmae vmaeb vmaeh vmaef vmale
+	    vmaleb vmaleh vmalef vmao vmaob vmaoh vmaof vmalo vmalob vmaloh
+	    vmalof vmh vmhb vmhh vmhf vmlh vmlhb vmlhh vmlhf vml vmlb vmlhw
+	    vmlf vme vmeb vmeh vmef vmle vmleb vmleh vmlef vmo vmob vmoh vmof
+	    vmlo vmlob vmloh vmlof vno vnot vo vpopct verllv verllvb verllvh
+	    verllvf verllvg verll verllb verllh verllf verllg verim verimb
+	    verimh verimf verimg veslv veslvb veslvh veslvf veslvg vesl veslb
+	    veslh veslf veslg vesrav vesravb vesravh vesravf vesravg vesra
+	    vesrab vesrah vesraf vesrag vesrlv vesrlvb vesrlvh vesrlvf vesrlvg
+	    vesrl vesrlb vesrlh vesrlf vesrlg vsl vslb vsldb vsra vsrab vsrl
+	    vsrlb vs vsb vsh vsf vsg vsq vscbi vscbib vscbih vscbif vscbig
+	    vscbiq vsbi vsbiq vsbcbi vsbcbiq vsumg vsumgh vsumgf vsumq vsumqf
+	    vsumqg vsum vsumb vsumh vtm vfae vfaeb vfaeh vfaef vfaebs vfaehs
+	    vfaefs vfaezb vfaezh vfaezf vfaezbs vfaezhs vfaezfs vfee vfeeb
+	    vfeeh vfeef vfeebs vfeehs vfeefs vfeezb vfeezh vfeezf vfeezbs
+	    vfeezhs vfeezfs vfene vfeneb vfeneh vfenef vfenebs vfenehs vfenefs
+	    vfenezb vfenezh vfenezf vfenezbs vfenezhs vfenezfs vistr vistrb
+	    vistrh vistrf vistrbs vistrhs vistrfs vstrc vstrcb vstrch vstrcf
+	    vstrcbs vstrchs vstrcfs vstrczb vstrczh vstrczf vstrczbs vstrczhs
+	    vstrczfs vfa vfadb wfadb wfc wfcdb wfk wfkdb vfce vfcedb wfcedb
+	    vfcedbs wfcedbs vfch vfchdb wfchdb vfchdbs wfchdbs vfche vfchedb
+	    wfchedb vfchedbs wfchedbs vcdg vcdgb wcdgb vcdlg vcdlgb wcdlgb vcgd
+	    vcgdb wcgdb vclgd vclgdb wclgdb vfd vfddb wfddb vfi vfidb wfidb
+	    vlde vldeb wldeb vled vledb wledb vfm vfmdb wfmdb vfma vfmadb
+	    wfmadb vfms vfmsdb wfmsdb vfpso vfpsodb wfpsodb vflcdb wflcdb
+	    vflndb wflndb vflpdb wflpdb vfsq vfsqdb wfsqdb vfs vfsdb wfsdb
+	    vftci vftcidb wftcidb)],
+	VXE =&gt; [qw(vbperm vllezlf vmsl vmslg vnx vnn voc vpopctb vpopcth
+	    vpopctf vpopctg vfasb wfasb wfaxb wfcsb wfcxb wfksb wfkxb vfcesb
+	    vfcesbs wfcesb wfcesbs wfcexb wfcexbs vfchsb vfchsbs wfchsb wfchsbs
+	    wfchxb wfchxbs vfchesb vfchesbs wfchesb wfchesbs wfchexb wfchexbs
+	    vfdsb wfdsb wfdxb vfisb wfisb wfixb vfll vflls wflls wflld vflr
+	    vflrd wflrd wflrx vfmax vfmaxsb vfmaxdb wfmaxsb wfmaxdb wfmaxxb
+	    vfmin vfminsb vfmindb wfminsb wfmindb wfminxb vfmsb wfmsb wfmxb
+	    vfnma vfnms vfmasb wfmasb wfmaxb vfmssb wfmssb wfmsxb vfnmasb
+	    vfnmadb wfnmasb wfnmadb wfnmaxb vfnmssb vfnmsdb wfnmssb wfnmsdb
+	    wfnmsxb vfpsosb wfpsosb vflcsb wflcsb vflnsb wflnsb vflpsb wflpsb
+	    vfpsoxb wfpsoxb vflcxb wflcxb vflnxb wflnxb vflpxb wflpxb vfsqsb
+	    wfsqsb wfsqxb vfssb wfssb wfsxb vftcisb wftcisb wftcixb)],
+	VXD =&gt; [qw(vlrlr vlrl vstrlr vstrl vap vcp vcvb vcvbg vcvd vcvdg vdp
+	    vlip vmp vmsp vpkz vpsop vrp vsdp vsrp vsp vtp vupkz)],
+);
+Exporter::export_ok_tags(qw(MSA MSA4 MSA5 MSA8 VX VXE VXD));
+
+our $AUTOLOAD;
+
+my $GR='(?:%r)?([0-9]|1[0-5])';
+my $VR='(?:%v)?([0-9]|1[0-9]|2[0-9]|3[0-1])';
+
+my ($file,$out);
+
+sub PERLASM_BEGIN
+{
+	($file,$out)=(shift,&quot;&quot;);
+}
+sub PERLASM_END
+{
+	if (defined($file)) {
+		open(my $fd,'&gt;',$file)||die(&quot;can't open $file: $!&quot;);
+		print({$fd}$out);
+		close($fd);
+	} else {
+		print($out);
+	}
+}
+
+sub AUTOLOAD {
+	confess(err(&quot;PARSE&quot;)) if (grep(!defined($_)<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>));
+	my $token;
+	for ($AUTOLOAD) {
+		$token=&quot;.$1&quot; if (/^.*::([A-Z_]+)$/);	# uppercase: directive
+		$token=&quot;\t$1&quot; if (/^.*::([a-z]+)$/);	# lowercase: mnemonic
+		confess(err(&quot;PARSE&quot;)) if (!defined($token));
+	}
+	$token.=&quot;\t&quot; if ($#_&gt;=0);
+	$out.=$token.join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>).&quot;\n&quot;;
+}
+
+sub LABEL {						# label directive
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=0);
+	my ($label)=@_;
+	$out.=&quot;$label:\n&quot;;
+}
+
+sub INCLUDE {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=0);
+	my ($file)=@_;
+	$out.=&quot;#include \&quot;$file\&quot;\n&quot;;
+}
+
+#
+# Mnemonics
+#
+
+sub stfle {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=0);
+	S(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xb2b0, at _</A>);
+}
+
+# MSA
+
+sub kmac {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	RRE(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xb91e, at _</A>);
+}
+
+sub km {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	RRE(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xb92e, at _</A>);
+}
+
+sub kmc {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	RRE(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xb92f, at _</A>);
+}
+
+sub kimd {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	RRE(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xb93e, at _</A>);
+}
+
+sub klmd {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	RRE(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xb93f, at _</A>);
+}
+
+# MSA4
+
+sub kmf {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	RRE(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xb92a, at _</A>);
+}
+
+sub kmo {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	RRE(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xb92b, at _</A>);
+}
+
+sub pcc {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=-1);
+	RRE(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xb92c, at _</A>);
+}
+
+sub kmctr {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	RRFb(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xb92d, at _</A>);
+}
+
+# MSA5
+
+sub prno {
+	ppno(@_);
+}
+
+sub ppno {						# deprecated, use prno
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	RRE(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xb93c, at _</A>);
+}
+
+# MSA8
+
+sub kma {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	RRFb(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xb929, at _</A>);
+}
+
+# VX - Support Instructions
+
+sub vgef {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRV(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe713, at _</A>);
+}
+sub vgeg {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRV(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe712, at _</A>);
+}
+
+sub vgbm {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	VRIa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe744, at _</A>);
+}
+sub vzero {
+	vgbm(@_,0);
+}
+sub vone {
+	vgbm(@_,0xffff);
+}
+
+sub vgm {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRIb(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe746, at _</A>);
+}
+sub vgmb {
+	vgm(@_,0);
+}
+sub vgmh {
+	vgm(@_,1);
+}
+sub vgmf {
+	vgm(@_,2);
+}
+sub vgmg {
+	vgm(@_,3);
+}
+
+sub vl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	VRX(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe706, at _</A>);
+}
+
+sub vlr {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe756, at _</A>);
+}
+
+sub vlrep {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRX(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe705, at _</A>);
+}
+sub vlrepb {
+	vlrep(@_,0);
+}
+sub vlreph {
+	vlrep(@_,1);
+}
+sub vlrepf {
+	vlrep(@_,2);
+}
+sub vlrepg {
+	vlrep(@_,3);
+}
+
+sub vleb {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRX(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe700, at _</A>);
+}
+sub vleh {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRX(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe701, at _</A>);
+}
+sub vlef {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRX(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe703, at _</A>);
+}
+sub vleg {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRX(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe702, at _</A>);
+}
+
+sub vleib {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRIa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe740, at _</A>);
+}
+sub vleih {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRIa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe741, at _</A>);
+}
+sub vleif {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRIa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe743, at _</A>);
+}
+sub vleig {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRIa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe742, at _</A>);
+}
+
+sub vlgv {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRSc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe721, at _</A>);
+}
+sub vlgvb {
+	vlgv(@_,0);
+}
+sub vlgvh {
+	vlgv(@_,1);
+}
+sub vlgvf {
+	vlgv(@_,2);
+}
+sub vlgvg {
+	vlgv(@_,3);
+}
+
+sub vllez {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRX(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe704, at _</A>);
+}
+sub vllezb {
+	vllez(@_,0);
+}
+sub vllezh {
+	vllez(@_,1);
+}
+sub vllezf {
+	vllez(@_,2);
+}
+sub vllezg {
+	vllez(@_,3);
+}
+
+sub vlm {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRSa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe736, at _</A>);
+}
+
+sub vlbb {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRX(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe707, at _</A>);
+}
+
+sub vlvg {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRSb(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe722, at _</A>);
+}
+sub vlvgb {
+	vlvg(@_,0);
+}
+sub vlvgh {
+	vlvg(@_,1);
+}
+sub vlvgf {
+	vlvg(@_,2);
+}
+sub vlvgg {
+	vlvg(@_,3);
+}
+
+sub vlvgp {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRf(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe762, at _</A>);
+}
+
+sub vll {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRSb(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe737, at _</A>);
+}
+
+sub vmrh {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe761, at _</A>);
+}
+sub vmrhb {
+	vmrh(@_,0);
+}
+sub vmrhh {
+	vmrh(@_,1);
+}
+sub vmrhf {
+	vmrh(@_,2);
+}
+sub vmrhg {
+	vmrh(@_,3);
+}
+
+sub vmrl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe760, at _</A>);
+}
+sub vmrlb {
+	vmrl(@_,0);
+}
+sub vmrlh {
+	vmrl(@_,1);
+}
+sub vmrlf {
+	vmrl(@_,2);
+}
+sub vmrlg {
+	vmrl(@_,3);
+}
+
+sub vpk {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe794, at _</A>);
+}
+sub vpkh {
+	vpk(@_,1);
+}
+sub vpkf {
+	vpk(@_,2);
+}
+sub vpkg {
+	vpk(@_,3);
+}
+
+sub vpks {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRb(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe797, at _</A>);
+}
+sub vpksh {
+	vpks(@_,1,0);
+}
+sub vpksf {
+	vpks(@_,2,0);
+}
+sub vpksg {
+	vpks(@_,3,0);
+}
+sub vpkshs {
+	vpks(@_,1,1);
+}
+sub vpksfs {
+	vpks(@_,2,1);
+}
+sub vpksgs {
+	vpks(@_,3,1);
+}
+
+sub vpkls {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRb(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe795, at _</A>);
+}
+sub vpklsh {
+	vpkls(@_,1,0);
+}
+sub vpklsf {
+	vpkls(@_,2,0);
+}
+sub vpklsg {
+	vpkls(@_,3,0);
+}
+sub vpklshs {
+	vpkls(@_,1,1);
+}
+sub vpklsfs {
+	vpkls(@_,2,1);
+}
+sub vpklsgs {
+	vpkls(@_,3,1);
+}
+
+sub vperm {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRe(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe78c, at _</A>);
+}
+
+sub vpdi {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe784, at _</A>);
+}
+
+sub vrep {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRIc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe74d, at _</A>);
+}
+sub vrepb {
+	vrep(@_,0);
+}
+sub vreph {
+	vrep(@_,1);
+}
+sub vrepf {
+	vrep(@_,2);
+}
+sub vrepg {
+	vrep(@_,3);
+}
+
+sub vrepi {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRIa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe745, at _</A>);
+}
+sub vrepib {
+	vrepi(@_,0);
+}
+sub vrepih {
+	vrepi(@_,1);
+}
+sub vrepif {
+	vrepi(@_,2);
+}
+sub vrepig {
+	vrepi(@_,3);
+}
+
+sub vscef {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRV(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe71b, at _</A>);
+}
+sub vsceg {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRV(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe71a, at _</A>);
+}
+
+sub vsel {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRe(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe78d, at _</A>);
+}
+
+sub vseg {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe75f, at _</A>);
+}
+sub vsegb {
+	vseg(@_,0);
+}
+sub vsegh {
+	vseg(@_,1);
+}
+sub vsegf {
+	vseg(@_,2);
+}
+
+sub vst {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	VRX(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe70e, at _</A>);
+}
+
+sub vsteb {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRX(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe708, at _</A>);
+}
+sub vsteh {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRX(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe709, at _</A>);
+}
+sub vstef {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRX(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe70b, at _</A>);
+}
+sub vsteg {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRX(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe70a, at _</A>);
+}
+
+sub vstm {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRSa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe73e, at _</A>);
+}
+
+sub vstl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRSb(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe73f, at _</A>);
+}
+
+sub vuph {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7d7, at _</A>);
+}
+sub vuphb {
+	vuph(@_,0);
+}
+sub vuphh {
+	vuph(@_,1);
+}
+sub vuphf {
+	vuph(@_,2);
+}
+
+sub vuplh {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7d5, at _</A>);
+}
+sub vuplhb {
+	vuplh(@_,0);
+}
+sub vuplhh {
+	vuplh(@_,1);
+}
+sub vuplhf {
+	vuplh(@_,2);
+}
+
+sub vupl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7d6, at _</A>);
+}
+sub vuplb {
+	vupl(@_,0);
+}
+sub vuplhw {
+	vupl(@_,1);
+}
+sub vuplf {
+	vupl(@_,2);
+}
+
+sub vupll {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7d4, at _</A>);
+}
+sub vupllb {
+	vupll(@_,0);
+}
+sub vupllh {
+	vupll(@_,1);
+}
+sub vupllf {
+	vupll(@_,2);
+}
+
+# VX - Integer Instructions
+
+sub va {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7f3, at _</A>);
+}
+sub vab {
+	va(@_,0);
+}
+sub vah {
+	va(@_,1);
+}
+sub vaf {
+	va(@_,2);
+}
+sub vag {
+	va(@_,3);
+}
+sub vaq {
+	va(@_,4);
+}
+
+sub vacc {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7f1, at _</A>);
+}
+sub vaccb {
+	vacc(@_,0);
+}
+sub vacch {
+	vacc(@_,1);
+}
+sub vaccf {
+	vacc(@_,2);
+}
+sub vaccg {
+	vacc(@_,3);
+}
+sub vaccq {
+	vacc(@_,4);
+}
+
+sub vac {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7bb, at _</A>);
+}
+sub vacq {
+	vac(@_,4);
+}
+
+sub vaccc {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7b9, at _</A>);
+}
+sub vacccq {
+	vaccc(@_,4);
+}
+
+sub vn {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe768, at _</A>);
+}
+
+sub vnc {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe769, at _</A>);
+}
+
+sub vavg {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7f2, at _</A>);
+}
+sub vavgb {
+	vavg(@_,0);
+}
+sub vavgh {
+	vavg(@_,1);
+}
+sub vavgf {
+	vavg(@_,2);
+}
+sub vavgg {
+	vavg(@_,3);
+}
+
+sub vavgl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7f0, at _</A>);
+}
+sub vavglb {
+	vavgl(@_,0);
+}
+sub vavglh {
+	vavgl(@_,1);
+}
+sub vavglf {
+	vavgl(@_,2);
+}
+sub vavglg {
+	vavgl(@_,3);
+}
+
+sub vcksm {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe766, at _</A>);
+}
+
+sub vec_ {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7db, at _</A>);
+}
+sub vecb {
+	vec_(@_,0);
+}
+sub vech {
+	vec_(@_,1);
+}
+sub vecf {
+	vec_(@_,2);
+}
+sub vecg {
+	vec_(@_,3);
+}
+
+sub vecl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7d9, at _</A>);
+}
+sub veclb {
+	vecl(@_,0);
+}
+sub veclh {
+	vecl(@_,1);
+}
+sub veclf {
+	vecl(@_,2);
+}
+sub veclg {
+	vecl(@_,3);
+}
+
+sub vceq {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRb(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7f8, at _</A>);
+}
+sub vceqb {
+	vceq(@_,0,0);
+}
+sub vceqh {
+	vceq(@_,1,0);
+}
+sub vceqf {
+	vceq(@_,2,0);
+}
+sub vceqg {
+	vceq(@_,3,0);
+}
+sub vceqbs {
+	vceq(@_,0,1);
+}
+sub vceqhs {
+	vceq(@_,1,1);
+}
+sub vceqfs {
+	vceq(@_,2,1);
+}
+sub vceqgs {
+	vceq(@_,3,1);
+}
+
+sub vch {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRb(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7fb, at _</A>);
+}
+sub vchb {
+	vch(@_,0,0);
+}
+sub vchh {
+	vch(@_,1,0);
+}
+sub vchf {
+	vch(@_,2,0);
+}
+sub vchg {
+	vch(@_,3,0);
+}
+sub vchbs {
+	vch(@_,0,1);
+}
+sub vchhs {
+	vch(@_,1,1);
+}
+sub vchfs {
+	vch(@_,2,1);
+}
+sub vchgs {
+	vch(@_,3,1);
+}
+
+sub vchl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRb(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7f9, at _</A>);
+}
+sub vchlb {
+	vchl(@_,0,0);
+}
+sub vchlh {
+	vchl(@_,1,0);
+}
+sub vchlf {
+	vchl(@_,2,0);
+}
+sub vchlg {
+	vchl(@_,3,0);
+}
+sub vchlbs {
+	vchl(@_,0,1);
+}
+sub vchlhs {
+	vchl(@_,1,1);
+}
+sub vchlfs {
+	vchl(@_,2,1);
+}
+sub vchlgs {
+	vchl(@_,3,1);
+}
+
+sub vclz {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe753, at _</A>);
+}
+sub vclzb {
+	vclz(@_,0);
+}
+sub vclzh {
+	vclz(@_,1);
+}
+sub vclzf {
+	vclz(@_,2);
+}
+sub vclzg {
+	vclz(@_,3);
+}
+
+sub vctz {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe752, at _</A>);
+}
+sub vctzb {
+	vctz(@_,0);
+}
+sub vctzh {
+	vctz(@_,1);
+}
+sub vctzf {
+	vctz(@_,2);
+}
+sub vctzg {
+	vctz(@_,3);
+}
+
+sub vx {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe76d, at _</A>);
+}
+
+sub vgfm {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7b4, at _</A>);
+}
+sub vgfmb {
+	vgfm(@_,0);
+}
+sub vgfmh {
+	vgfm(@_,1);
+}
+sub vgfmf {
+	vgfm(@_,2);
+}
+sub vgfmg {
+	vgfm(@_,3);
+}
+
+sub vgfma {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7bc, at _</A>);
+}
+sub vgfmab {
+	vgfma(@_,0);
+}
+sub vgfmah {
+	vgfma(@_,1);
+}
+sub vgfmaf {
+	vgfma(@_,2);
+}
+sub vgfmag {
+	vgfma(@_,3);
+}
+
+sub vlc {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7de, at _</A>);
+}
+sub vlcb {
+	vlc(@_,0);
+}
+sub vlch {
+	vlc(@_,1);
+}
+sub vlcf {
+	vlc(@_,2);
+}
+sub vlcg {
+	vlc(@_,3);
+}
+
+sub vlp {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7df, at _</A>);
+}
+sub vlpb {
+	vlp(@_,0);
+}
+sub vlph {
+	vlp(@_,1);
+}
+sub vlpf {
+	vlp(@_,2);
+}
+sub vlpg {
+	vlp(@_,3);
+}
+
+sub vmx {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7ff, at _</A>);
+}
+sub vmxb {
+	vmx(@_,0);
+}
+sub vmxh {
+	vmx(@_,1);
+}
+sub vmxf {
+	vmx(@_,2);
+}
+sub vmxg {
+	vmx(@_,3);
+}
+
+sub vmxl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7fd, at _</A>);
+}
+sub vmxlb {
+	vmxl(@_,0);
+}
+sub vmxlh {
+	vmxl(@_,1);
+}
+sub vmxlf {
+	vmxl(@_,2);
+}
+sub vmxlg {
+	vmxl(@_,3);
+}
+
+sub vmn {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7fe, at _</A>);
+}
+sub vmnb {
+	vmn(@_,0);
+}
+sub vmnh {
+	vmn(@_,1);
+}
+sub vmnf {
+	vmn(@_,2);
+}
+sub vmng {
+	vmn(@_,3);
+}
+
+sub vmnl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7fc, at _</A>);
+}
+sub vmnlb {
+	vmnl(@_,0);
+}
+sub vmnlh {
+	vmnl(@_,1);
+}
+sub vmnlf {
+	vmnl(@_,2);
+}
+sub vmnlg {
+	vmnl(@_,3);
+}
+
+sub vmal {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7aa, at _</A>);
+}
+sub vmalb {
+	vmal(@_,0);
+}
+sub vmalhw {
+	vmal(@_,1);
+}
+sub vmalf {
+	vmal(@_,2);
+}
+
+sub vmah {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7ab, at _</A>);
+}
+sub vmahb {
+	vmah(@_,0);
+}
+sub vmahh {
+	vmah(@_,1);
+}
+sub vmahf {
+	vmah(@_,2);
+}
+
+sub vmalh {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7a9, at _</A>);
+}
+sub vmalhb {
+	vmalh(@_,0);
+}
+sub vmalhh {
+	vmalh(@_,1);
+}
+sub vmalhf {
+	vmalh(@_,2);
+}
+
+sub vmae {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7ae, at _</A>);
+}
+sub vmaeb {
+	vmae(@_,0);
+}
+sub vmaeh {
+	vmae(@_,1);
+}
+sub vmaef {
+	vmae(@_,2);
+}
+
+sub vmale {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7ac, at _</A>);
+}
+sub vmaleb {
+	vmale(@_,0);
+}
+sub vmaleh {
+	vmale(@_,1);
+}
+sub vmalef {
+	vmale(@_,2);
+}
+
+sub vmao {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7af, at _</A>);
+}
+sub vmaob {
+	vmao(@_,0);
+}
+sub vmaoh {
+	vmao(@_,1);
+}
+sub vmaof {
+	vmao(@_,2);
+}
+
+sub vmalo {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7ad, at _</A>);
+}
+sub vmalob {
+	vmalo(@_,0);
+}
+sub vmaloh {
+	vmalo(@_,1);
+}
+sub vmalof {
+	vmalo(@_,2);
+}
+
+sub vmh {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7a3, at _</A>);
+}
+sub vmhb {
+	vmh(@_,0);
+}
+sub vmhh {
+	vmh(@_,1);
+}
+sub vmhf {
+	vmh(@_,2);
+}
+
+sub vmlh {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7a1, at _</A>);
+}
+sub vmlhb {
+	vmlh(@_,0);
+}
+sub vmlhh {
+	vmlh(@_,1);
+}
+sub vmlhf {
+	vmlh(@_,2);
+}
+
+sub vml {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7a2, at _</A>);
+}
+sub vmlb {
+	vml(@_,0);
+}
+sub vmlhw {
+	vml(@_,1);
+}
+sub vmlf {
+	vml(@_,2);
+}
+
+sub vme {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7a6, at _</A>);
+}
+sub vmeb {
+	vme(@_,0);
+}
+sub vmeh {
+	vme(@_,1);
+}
+sub vmef {
+	vme(@_,2);
+}
+
+sub vmle {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7a4, at _</A>);
+}
+sub vmleb {
+	vmle(@_,0);
+}
+sub vmleh {
+	vmle(@_,1);
+}
+sub vmlef {
+	vmle(@_,2);
+}
+
+sub vmo {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7a7, at _</A>);
+}
+sub vmob {
+	vmo(@_,0);
+}
+sub vmoh {
+	vmo(@_,1);
+}
+sub vmof {
+	vmo(@_,2);
+}
+
+sub vmlo {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7a5, at _</A>);
+}
+sub vmlob {
+	vmlo(@_,0);
+}
+sub vmloh {
+	vmlo(@_,1);
+}
+sub vmlof {
+	vmlo(@_,2);
+}
+
+sub vno {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe76b, at _</A>);
+}
+sub vnot {
+	vno(@_,$_[1]);
+}
+
+sub vo {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe76a, at _</A>);
+}
+
+sub vpopct {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe750, at _</A>);
+}
+
+sub verllv {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe773, at _</A>);
+}
+sub verllvb {
+	verllv(@_,0);
+}
+sub verllvh {
+	verllv(@_,1);
+}
+sub verllvf {
+	verllv(@_,2);
+}
+sub verllvg {
+	verllv(@_,3);
+}
+
+sub verll {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRSa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe733, at _</A>);
+}
+sub verllb {
+	verll(@_,0);
+}
+sub verllh {
+	verll(@_,1);
+}
+sub verllf {
+	verll(@_,2);
+}
+sub verllg {
+	verll(@_,3);
+}
+
+sub verim {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRId(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe772, at _</A>);
+}
+sub verimb {
+	verim(@_,0);
+}
+sub verimh {
+	verim(@_,1);
+}
+sub verimf {
+	verim(@_,2);
+}
+sub verimg {
+	verim(@_,3);
+}
+
+sub veslv {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe770, at _</A>);
+}
+sub veslvb {
+	veslv(@_,0);
+}
+sub veslvh {
+	veslv(@_,1);
+}
+sub veslvf {
+	veslv(@_,2);
+}
+sub veslvg {
+	veslv(@_,3);
+}
+
+sub vesl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRSa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe730, at _</A>);
+}
+sub veslb {
+	vesl(@_,0);
+}
+sub veslh {
+	vesl(@_,1);
+}
+sub veslf {
+	vesl(@_,2);
+}
+sub veslg {
+	vesl(@_,3);
+}
+
+sub vesrav {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe77a, at _</A>);
+}
+sub vesravb {
+	vesrav(@_,0);
+}
+sub vesravh {
+	vesrav(@_,1);
+}
+sub vesravf {
+	vesrav(@_,2);
+}
+sub vesravg {
+	vesrav(@_,3);
+}
+
+sub vesra {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRSa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe73a, at _</A>);
+}
+sub vesrab {
+	vesra(@_,0);
+}
+sub vesrah {
+	vesra(@_,1);
+}
+sub vesraf {
+	vesra(@_,2);
+}
+sub vesrag {
+	vesra(@_,3);
+}
+
+sub vesrlv {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe778, at _</A>);
+}
+sub vesrlvb {
+	vesrlv(@_,0);
+}
+sub vesrlvh {
+	vesrlv(@_,1);
+}
+sub vesrlvf {
+	vesrlv(@_,2);
+}
+sub vesrlvg {
+	vesrlv(@_,3);
+}
+
+sub vesrl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRSa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe738, at _</A>);
+}
+sub vesrlb {
+	vesrl(@_,0);
+}
+sub vesrlh {
+	vesrl(@_,1);
+}
+sub vesrlf {
+	vesrl(@_,2);
+}
+sub vesrlg {
+	vesrl(@_,3);
+}
+
+sub vsl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe774, at _</A>);
+}
+
+sub vslb {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe775, at _</A>);
+}
+
+sub vsldb {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRId(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe777, at _</A>);
+}
+
+sub vsra {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe77e, at _</A>);
+}
+
+sub vsrab {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe77f, at _</A>);
+}
+
+sub vsrl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe77c, at _</A>);
+}
+
+sub vsrlb {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe77d, at _</A>);
+}
+
+sub vs {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7f7, at _</A>);
+}
+sub vsb {
+	vs(@_,0);
+}
+sub vsh {
+	vs(@_,1);
+}
+sub vsf {
+	vs(@_,2);
+}
+sub vsg {
+	vs(@_,3);
+}
+sub vsq {
+	vs(@_,4);
+}
+
+sub vscbi {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7f5, at _</A>);
+}
+sub vscbib {
+	vscbi(@_,0);
+}
+sub vscbih {
+	vscbi(@_,1);
+}
+sub vscbif {
+	vscbi(@_,2);
+}
+sub vscbig {
+	vscbi(@_,3);
+}
+sub vscbiq {
+	vscbi(@_,4);
+}
+
+sub vsbi {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7bf, at _</A>);
+}
+sub vsbiq {
+	vsbi(@_,4);
+}
+
+sub vsbcbi {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7bd, at _</A>);
+}
+sub vsbcbiq {
+	vsbcbi(@_,4);
+}
+
+sub vsumg {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe765, at _</A>);
+}
+sub vsumgh {
+	vsumg(@_,1);
+}
+sub vsumgf {
+	vsumg(@_,2);
+}
+
+sub vsumq {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe767, at _</A>);
+}
+sub vsumqf {
+	vsumq(@_,2);
+}
+sub vsumqg {
+	vsumq(@_,3);
+}
+
+sub vsum {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe764, at _</A>);
+}
+sub vsumb {
+	vsum(@_,0);
+}
+sub vsumh {
+	vsum(@_,1);
+}
+
+sub vtm {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7d8, at _</A>);
+}
+
+# VX - String Instructions
+
+sub vfae {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;3||$#_&gt;4);
+	VRRb(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe782, at _</A>);
+}
+sub vfaeb {
+	vfae(@_[0..2],0,$_[3]);
+}
+sub vfaeh {
+	vfae(@_[0..2],1,$_[3]);
+}
+sub vfaef {
+	vfae(@_[0..2],2,$_[3]);
+}
+sub vfaebs {
+	$_[3]=0 if (!defined($_[3]));
+	vfae(@_[0..2],0,0x1|$_[3]);
+}
+sub vfaehs {
+	$_[3]=0 if (!defined($_[3]));
+	vfae(@_[0..2],1,0x1|$_[3]);
+}
+sub vfaefs {
+	$_[3]=0 if (!defined($_[3]));
+	vfae(@_[0..2],2,0x1|$_[3]);
+}
+sub vfaezb {
+	$_[3]=0 if (!defined($_[3]));
+	vfae(@_[0..2],0,0x2|$_[3]);
+}
+sub vfaezh {
+	$_[3]=0 if (!defined($_[3]));
+	vfae(@_[0..2],1,0x2|$_[3]);
+}
+sub vfaezf {
+	$_[3]=0 if (!defined($_[3]));
+	vfae(@_[0..2],2,0x2|$_[3]);
+}
+sub vfaezbs {
+	$_[3]=0 if (!defined($_[3]));
+	vfae(@_[0..2],0,0x3|$_[3]);
+}
+sub vfaezhs {
+	$_[3]=0 if (!defined($_[3]));
+	vfae(@_[0..2],1,0x3|$_[3]);
+}
+sub vfaezfs {
+	$_[3]=0 if (!defined($_[3]));
+	vfae(@_[0..2],2,0x3|$_[3]);
+}
+
+sub vfee {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;3||$#_&gt;4);
+	VRRb(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe780, at _</A>);
+}
+sub vfeeb {
+	vfee(@_[0..2],0,$_[3]);
+}
+sub vfeeh {
+	vfee(@_[0..2],1,$_[3]);
+}
+sub vfeef {
+	vfee(@_[0..2],2,$_[3]);
+}
+sub vfeebs {
+	vfee(@_,0,1);
+}
+sub vfeehs {
+	vfee(@_,1,1);
+}
+sub vfeefs {
+	vfee(@_,2,1);
+}
+sub vfeezb {
+	vfee(@_,0,2);
+}
+sub vfeezh {
+	vfee(@_,1,2);
+}
+sub vfeezf {
+	vfee(@_,2,2);
+}
+sub vfeezbs {
+	vfee(@_,0,3);
+}
+sub vfeezhs {
+	vfee(@_,1,3);
+}
+sub vfeezfs {
+	vfee(@_,2,3);
+}
+
+sub vfene {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;3||$#_&gt;4);
+	VRRb(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe781, at _</A>);
+}
+sub vfeneb {
+	vfene(@_[0..2],0,$_[3]);
+}
+sub vfeneh {
+	vfene(@_[0..2],1,$_[3]);
+}
+sub vfenef {
+	vfene(@_[0..2],2,$_[3]);
+}
+sub vfenebs {
+	vfene(@_,0,1);
+}
+sub vfenehs {
+	vfene(@_,1,1);
+}
+sub vfenefs {
+	vfene(@_,2,1);
+}
+sub vfenezb {
+	vfene(@_,0,2);
+}
+sub vfenezh {
+	vfene(@_,1,2);
+}
+sub vfenezf {
+	vfene(@_,2,2);
+}
+sub vfenezbs {
+	vfene(@_,0,3);
+}
+sub vfenezhs {
+	vfene(@_,1,3);
+}
+sub vfenezfs {
+	vfene(@_,2,3);
+}
+
+sub vistr {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;2||$#_&gt;3);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe75c, at _</A>[0..2],0,$_[3]);
+}
+sub vistrb {
+	vistr(@_[0..1],0,$_[2]);
+}
+sub vistrh {
+	vistr(@_[0..1],1,$_[2]);
+}
+sub vistrf {
+	vistr(@_[0..1],2,$_[2]);
+}
+sub vistrbs {
+	vistr(@_,0,1);
+}
+sub vistrhs {
+	vistr(@_,1,1);
+}
+sub vistrfs {
+	vistr(@_,2,1);
+}
+
+sub vstrc {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;4||$#_&gt;5);
+	VRRd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe78a, at _</A>);
+}
+sub vstrcb {
+	vstrc(@_[0..3],0,$_[4]);
+}
+sub vstrch {
+	vstrc(@_[0..3],1,$_[4]);
+}
+sub vstrcf {
+	vstrc(@_[0..3],2,$_[4]);
+}
+sub vstrcbs {
+	$_[4]=0 if (!defined($_[4]));
+	vstrc(@_[0..3],0,0x1|$_[4]);
+}
+sub vstrchs {
+	$_[4]=0 if (!defined($_[4]));
+	vstrc(@_[0..3],1,0x1|$_[4]);
+}
+sub vstrcfs {
+	$_[4]=0 if (!defined($_[4]));
+	vstrc(@_[0..3],2,0x1|$_[4]);
+}
+sub vstrczb {
+	$_[4]=0 if (!defined($_[4]));
+	vstrc(@_[0..3],0,0x2|$_[4]);
+}
+sub vstrczh {
+	$_[4]=0 if (!defined($_[4]));
+	vstrc(@_[0..3],1,0x2|$_[4]);
+}
+sub vstrczf {
+	$_[4]=0 if (!defined($_[4]));
+	vstrc(@_[0..3],2,0x2|$_[4]);
+}
+sub vstrczbs {
+	$_[4]=0 if (!defined($_[4]));
+	vstrc(@_[0..3],0,0x3|$_[4]);
+}
+sub vstrczhs {
+	$_[4]=0 if (!defined($_[4]));
+	vstrc(@_[0..3],1,0x3|$_[4]);
+}
+sub vstrczfs {
+	$_[4]=0 if (!defined($_[4]));
+	vstrc(@_[0..3],2,0x3|$_[4]);
+}
+
+# VX - Floating-point Instructions
+
+sub vfa {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7e3, at _</A>);
+}
+sub vfadb {
+	vfa(@_,3,0);
+}
+sub wfadb {
+	vfa(@_,3,8);
+}
+
+sub wfc {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7cb, at _</A>);
+}
+sub wfcdb {
+	wfc(@_,3,0);
+}
+
+sub wfk {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7ca, at _</A>);
+}
+sub wfksb {
+	wfk(@_,2,0);
+}
+sub wfkdb {
+	wfk(@_,3,0);
+}
+sub wfkxb {
+	wfk(@_,4,0);
+}
+
+sub vfce {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=5);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7e8, at _</A>);
+}
+sub vfcedb {
+	vfce(@_,3,0,0);
+}
+sub vfcedbs {
+	vfce(@_,3,0,1);
+}
+sub wfcedb {
+	vfce(@_,3,8,0);
+}
+sub wfcedbs {
+	vfce(@_,3,8,1);
+}
+
+sub vfch {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=5);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7eb, at _</A>);
+}
+sub vfchdb {
+	vfch(@_,3,0,0);
+}
+sub vfchdbs {
+	vfch(@_,3,0,1);
+}
+sub wfchdb {
+	vfch(@_,3,8,0);
+}
+sub wfchdbs {
+	vfch(@_,3,8,1);
+}
+
+sub vfche {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=5);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7ea, at _</A>);
+}
+sub vfchedb {
+	vfche(@_,3,0,0);
+}
+sub vfchedbs {
+	vfche(@_,3,0,1);
+}
+sub wfchedb {
+	vfche(@_,3,8,0);
+}
+sub wfchedbs {
+	vfche(@_,3,8,1);
+}
+
+sub vcdg {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7c3, at _</A>);
+}
+sub vcdgb {
+	vcdg(@_[0..1]<A HREF="../../../mailman/listinfo/openssl-commits.html">,3, at _</A>[2..3]);
+}
+sub wcdgb {
+	vcdg(@_[0..1],3,0x8|$_[2],$_[3]);
+}
+
+sub vcdlg {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7c1, at _</A>);
+}
+sub vcdlgb {
+	vcdlg(@_[0..1]<A HREF="../../../mailman/listinfo/openssl-commits.html">,3, at _</A>[2..3]);
+}
+sub wcdlgb {
+	vcdlg(@_[0..1],3,0x8|$_[2],$_[3]);
+}
+
+sub vcgd {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7c2, at _</A>);
+}
+sub vcgdb {
+	vcgd(@_[0..1]<A HREF="../../../mailman/listinfo/openssl-commits.html">,3, at _</A>[2..3]);
+}
+sub wcgdb {
+	vcgd(@_[0..1],3,0x8|$_[2],$_[3]);
+}
+
+sub vclgd {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7c0, at _</A>);
+}
+sub vclgdb {
+	vclgd(@_[0..1]<A HREF="../../../mailman/listinfo/openssl-commits.html">,3, at _</A>[2..3]);
+}
+sub wclgdb {
+	vclgd(@_[0..1],3,0x8|$_[2],$_[3]);
+}
+
+sub vfd {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7e5, at _</A>);
+}
+sub vfddb {
+	vfd(@_,3,0);
+}
+sub wfddb {
+	vfd(@_,3,8);
+}
+
+sub vfi {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7c7, at _</A>);
+}
+sub vfidb {
+	vfi(@_[0..1]<A HREF="../../../mailman/listinfo/openssl-commits.html">,3, at _</A>[2..3]);
+}
+sub wfidb {
+	vfi(@_[0..1],3,0x8|$_[2],$_[3]);
+}
+
+sub vlde {	# deprecated, use vfll
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7c4, at _</A>);
+}
+sub vldeb {	# deprecated, use vflls
+	vlde(@_,2,0);
+}
+sub wldeb {	# deprecated, use wflls
+	vlde(@_,2,8);
+}
+
+sub vled {	# deprecated, use vflr
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7c5, at _</A>);
+}
+sub vledb {	# deprecated, use vflrd
+	vled(@_[0..1]<A HREF="../../../mailman/listinfo/openssl-commits.html">,3, at _</A>[2..3]);
+}
+sub wledb {	# deprecated, use wflrd
+	vled(@_[0..1],3,0x8|$_[2],$_[3]);
+}
+
+sub vfm {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7e7, at _</A>);
+}
+sub vfmdb {
+	vfm(@_,3,0);
+}
+sub wfmdb {
+	vfm(@_,3,8);
+}
+
+sub vfma {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=5);
+	VRRe(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe78f, at _</A>);
+}
+sub vfmadb {
+	vfma(@_,0,3);
+}
+sub wfmadb {
+	vfma(@_,8,3);
+}
+
+sub vfms {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=5);
+	VRRe(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe78e, at _</A>);
+}
+sub vfmsdb {
+	vfms(@_,0,3);
+}
+sub wfmsdb {
+	vfms(@_,8,3);
+}
+
+sub vfpso {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7cc, at _</A>);
+}
+sub vfpsodb {
+	vfpso(@_[0..1],3,0,$_[2]);
+}
+sub wfpsodb {
+	vfpso(@_[0..1],3,8,$_[2]);
+}
+sub vflcdb {
+	vfpso(@_,3,0,0);
+}
+sub wflcdb {
+	vfpso(@_,3,8,0);
+}
+sub vflndb {
+	vfpso(@_,3,0,1);
+}
+sub wflndb {
+	vfpso(@_,3,8,1);
+}
+sub vflpdb {
+	vfpso(@_,3,0,2);
+}
+sub wflpdb {
+	vfpso(@_,3,8,2);
+}
+
+sub vfsq {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRRa(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7ce, at _</A>);
+}
+sub vfsqdb {
+	vfsq(@_,3,0);
+}
+sub wfsqdb {
+	vfsq(@_,3,8);
+}
+
+sub vfs {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7e2, at _</A>);
+}
+sub vfsdb {
+	vfs(@_,3,0);
+}
+sub wfsdb {
+	vfs(@_,3,8);
+}
+
+sub vftci {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRIe(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe74a, at _</A>);
+}
+sub vftcidb {
+	vftci(@_,3,0);
+}
+sub wftcidb {
+	vftci(@_,3,8);
+}
+
+# VXE - Support Instructions
+
+sub vbperm {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe785, at _</A>);
+}
+
+sub vllezlf {
+	vllez(@_,6);
+}
+
+# VXE - Integer Instructions
+
+sub vmsl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=5);
+	VRRd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7b8, at _</A>);
+}
+sub vmslg {
+	vmsl(@_[0..3],3,$_[4]);
+}
+
+sub vnx {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe76c, at _</A>);
+}
+
+sub vnn {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe76e, at _</A>);
+}
+
+sub voc {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe76f, at _</A>);
+}
+
+sub vpopctb {
+	vpopct(@_,0);
+}
+sub vpopcth {
+	vpopct(@_,1);
+}
+sub vpopctf {
+	vpopct(@_,2);
+}
+sub vpopctg {
+	vpopct(@_,3);
+}
+
+# VXE - Floating-Point Instructions
+
+sub vfasb {
+	vfa(@_,2,0);
+}
+sub wfasb {
+	vfa(@_,2,8);
+}
+sub wfaxb {
+	vfa(@_,4,8);
+}
+
+sub wfcsb {
+	wfc(@_,2,0);
+}
+sub wfcxb {
+	wfc(@_,4,0);
+}
+
+sub vfcesb {
+	vfce(@_,2,0,0);
+}
+sub vfcesbs {
+	vfce(@_,2,0,1);
+}
+sub wfcesb {
+	vfce(@_,2,8,0);
+}
+sub wfcesbs {
+	vfce(@_,2,8,1);
+}
+sub wfcexb {
+	vfce(@_,4,8,0);
+}
+sub wfcexbs {
+	vfce(@_,4,8,1);
+}
+
+sub vfchsb {
+	vfch(@_,2,0,0);
+}
+sub vfchsbs {
+	vfch(@_,2,0,1);
+}
+sub wfchsb {
+	vfch(@_,2,8,0);
+}
+sub wfchsbs {
+	vfch(@_,2,8,1);
+}
+sub wfchxb {
+	vfch(@_,4,8,0);
+}
+sub wfchxbs {
+	vfch(@_,4,8,1);
+}
+
+sub vfchesb {
+	vfche(@_,2,0,0);
+}
+sub vfchesbs {
+	vfche(@_,2,0,1);
+}
+sub wfchesb {
+	vfche(@_,2,8,0);
+}
+sub wfchesbs {
+	vfche(@_,2,8,1);
+}
+sub wfchexb {
+	vfche(@_,4,8,0);
+}
+sub wfchexbs {
+	vfche(@_,4,8,1);
+}
+
+sub vfdsb {
+	vfd(@_,2,0);
+}
+sub wfdsb {
+	vfd(@_,2,8);
+}
+sub wfdxb {
+	vfd(@_,4,8);
+}
+
+sub vfisb {
+	vfi(@_[0..1]<A HREF="../../../mailman/listinfo/openssl-commits.html">,2, at _</A>[2..3]);
+}
+sub wfisb {
+	vfi(@_[0..1],2,0x8|$_[2],$_[3]);
+}
+sub wfixb {
+	vfi(@_[0..1],4,0x8|$_[2],$_[3]);
+}
+
+sub vfll {
+	vlde(@_);
+}
+sub vflls {
+	vfll(@_,2,0);
+}
+sub wflls {
+	vfll(@_,2,8);
+}
+sub wflld {
+	vfll(@_,3,8);
+}
+
+sub vflr {
+	vled(@_);
+}
+sub vflrd {
+	vflr(@_[0..1]<A HREF="../../../mailman/listinfo/openssl-commits.html">,3, at _</A>[2..3]);
+}
+sub wflrd {
+	vflr(@_[0..1],3,0x8|$_[2],$_[3]);
+}
+sub wflrx {
+	vflr(@_[0..1],4,0x8|$_[2],$_[3]);
+}
+
+sub vfmax {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=5);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7ef, at _</A>);
+}
+sub vfmaxsb {
+	vfmax(@_[0..2],2,0,$_[3]);
+}
+sub vfmaxdb {
+	vfmax(@_[0..2],3,0,$_[3]);
+}
+sub wfmaxsb {
+	vfmax(@_[0..2],2,8,$_[3]);
+}
+sub wfmaxdb {
+	vfmax(@_[0..2],3,8,$_[3]);
+}
+sub wfmaxxb {
+	vfmax(@_[0..2],4,8,$_[3]);
+}
+
+sub vfmin {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=5);
+	VRRc(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe7ee, at _</A>);
+}
+sub vfminsb {
+	vfmin(@_[0..2],2,0,$_[5]);
+}
+sub vfmindb {
+	vfmin(@_[0..2],3,0,$_[5]);
+}
+sub wfminsb {
+	vfmin(@_[0..2],2,8,$_[5]);
+}
+sub wfmindb {
+	vfmin(@_[0..2],3,8,$_[5]);
+}
+sub wfminxb {
+	vfmin(@_[0..2],4,8,$_[5]);
+}
+
+sub vfmsb {
+	vfm(@_,2,0);
+}
+sub wfmsb {
+	vfm(@_,2,8);
+}
+sub wfmxb {
+	vfm(@_,4,8);
+}
+
+sub vfmasb {
+	vfma(@_,0,2);
+}
+sub wfmasb {
+	vfma(@_,8,2);
+}
+sub wfmaxb {
+	vfma(@_,8,4);
+}
+
+sub vfmssb {
+	vfms(@_,0,2);
+}
+sub wfmssb {
+	vfms(@_,8,2);
+}
+sub wfmsxb {
+	vfms(@_,8,4);
+}
+
+sub vfnma {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=5);
+	VRRe(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe79f, at _</A>);
+}
+sub vfnmasb {
+	vfnma(@_,0,2);
+}
+sub vfnmadb {
+	vfnma(@_,0,3);
+}
+sub wfnmasb {
+	vfnma(@_,8,2);
+}
+sub wfnmadb {
+	vfnma(@_,8,3);
+}
+sub wfnmaxb {
+	vfnma(@_,8,4);
+}
+
+sub vfnms {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=5);
+	VRRe(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe79e, at _</A>);
+}
+sub vfnmssb {
+	vfnms(@_,0,2);
+}
+sub vfnmsdb {
+	vfnms(@_,0,3);
+}
+sub wfnmssb {
+	vfnms(@_,8,2);
+}
+sub wfnmsdb {
+	vfnms(@_,8,3);
+}
+sub wfnmsxb {
+	vfnms(@_,8,4);
+}
+
+sub vfpsosb {
+	vfpso(@_[0..1],2,0,$_[2]);
+}
+sub wfpsosb {
+	vfpso(@_[0..1],2,8,$_[2]);
+}
+sub vflcsb {
+	vfpso(@_,2,0,0);
+}
+sub wflcsb {
+	vfpso(@_,2,8,0);
+}
+sub vflnsb {
+	vfpso(@_,2,0,1);
+}
+sub wflnsb {
+	vfpso(@_,2,8,1);
+}
+sub vflpsb {
+	vfpso(@_,2,0,2);
+}
+sub wflpsb {
+	vfpso(@_,2,8,2);
+}
+sub vfpsoxb {
+	vfpso(@_[0..1],4,0,$_[2]);
+}
+sub wfpsoxb {
+	vfpso(@_[0..1],4,8,$_[2]);
+}
+sub vflcxb {
+	vfpso(@_,4,0,0);
+}
+sub wflcxb {
+	vfpso(@_,4,8,0);
+}
+sub vflnxb {
+	vfpso(@_,4,0,1);
+}
+sub wflnxb {
+	vfpso(@_,4,8,1);
+}
+sub vflpxb {
+	vfpso(@_,4,0,2);
+}
+sub wflpxb {
+	vfpso(@_,4,8,2);
+}
+
+sub vfsqsb {
+	vfsq(@_,2,0);
+}
+sub wfsqsb {
+	vfsq(@_,2,8);
+}
+sub wfsqxb {
+	vfsq(@_,4,8);
+}
+
+sub vfssb {
+	vfs(@_,2,0);
+}
+sub wfssb {
+	vfs(@_,2,8);
+}
+sub wfsxb {
+	vfs(@_,4,8);
+}
+
+sub vftcisb {
+	vftci(@_,2,0);
+}
+sub wftcisb {
+	vftci(@_,2,8);
+}
+sub wftcixb {
+	vftci(@_,4,8);
+}
+
+# VXD - Support Instructions
+
+sub vlrlr {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRSd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe637, at _</A>);
+}
+
+sub vlrl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VSI(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe635, at _</A>);
+}
+
+sub vstrlr {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRSd(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe63f, at _</A>);
+}
+
+sub vstrl {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VSI(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe63d, at _</A>);
+}
+
+sub vap {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRIf(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe671, at _</A>);
+}
+
+sub vcp {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRh(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe677, at _</A>);
+}
+
+sub vcvb {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRi(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe650, at _</A>);
+}
+
+sub vcvbg {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRRi(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe652, at _</A>);
+}
+
+sub vcvd {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRIi(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe658, at _</A>);
+}
+
+sub vcvdg {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	VRIi(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe65a, at _</A>);
+}
+
+sub vdp {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRIf(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe67a, at _</A>);
+}
+
+sub vlip {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VRIh(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe649, at _</A>);
+}
+
+sub vmp {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRIf(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe678, at _</A>);
+}
+
+sub vmsp {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRIf(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe679, at _</A>);
+}
+
+sub vpkz {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VSI(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe634, at _</A>);
+}
+
+sub vpsop {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRIg(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe65b, at _</A>);
+}
+
+sub vrp {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRIf(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe67b, at _</A>);
+}
+
+sub vsdp {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRIf(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe67e, at _</A>);
+}
+
+sub vsrp {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRIg(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe659, at _</A>);
+}
+
+sub vsp {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	VRIf(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe673, at _</A>);
+}
+
+sub vtp {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=0);
+	VRRg(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe65f, at _</A>);
+}
+
+sub vupkz {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=2);
+	VSI(<A HREF="../../../mailman/listinfo/openssl-commits.html">0xe63c, at _</A>);
+}
+
+#
+# Instruction Formats
+#
+
+sub RRE {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;0||2&lt;$#_);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$r1,$r2)=(shift,get_R(shift),get_R(shift));
+
+	$out.=&quot;\t.long\t&quot;.sprintf(&quot;%#010x&quot;,($opcode&lt;&lt;16|$r1&lt;&lt;4|$r2));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub RRFb {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;3||4&lt;$#_);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$r1,$r3,$r2,$m4)=(shift,get_R(shift),get_R(shift)
+	    ,get_R(shift),get_M(shift));
+
+	$out.=&quot;\t.long\t&quot;
+	    .sprintf(&quot;%#010x&quot;,($opcode&lt;&lt;16|$r3&lt;&lt;12|$m4&lt;&lt;8|$r1&lt;&lt;4|$r2));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub S {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;0||1&lt;$#_);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$d2,$b2)=(shift,get_DB(shift));
+
+	$out.=&quot;\t.long\t&quot;.sprintf(&quot;%#010x&quot;,($opcode&lt;&lt;16|$b2&lt;&lt;12|$d2));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRIa {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;2||3&lt;$#_);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$i2,$m3)=(shift,get_V(shift),get_I(shift,16),
+	    get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,$i2).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m3&lt;&lt;12|RXB($v1)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRIb {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$i2,$i3,$m4)=(shift,get_V(shift),get_I(shift,8),
+	    ,get_I(shift,8),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($i2&lt;&lt;8|$i3)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m4&lt;&lt;12|RXB($v1)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRIc {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$v3,$i2,$m4)=(shift,get_V(shift),get_V(shift),
+	    ,get_I(shift,16),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4)|($v3&amp;0xf)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,$i2).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m4&lt;&lt;12|RXB($v1,$v3)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRId {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;4||$#_&gt;5);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$v2,$v3,$i4,$m5)=(shift,get_V(shift),get_V(shift),
+	    ,get_V(shift),get_I(shift,8),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4)|($v2&amp;0xf)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(($v3&amp;0xf)&lt;&lt;12|$i4)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m5&lt;&lt;12|RXB($v1,$v2,$v3)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRIe {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=5);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$v2,$i3,$m4,$m5)=(shift,get_V(shift),get_V(shift),
+	    ,get_I(shift,12),get_M(shift),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4)|($v2&amp;0xf)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($i3&lt;&lt;4|$m5)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m4&lt;&lt;12|RXB($v1,$v2)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRIf {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=5);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$v2,$v3,$i4,$m5)=(shift,get_V(shift),get_V(shift),
+	    ,get_V(shift),get_I(shift,8),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4)|($v2&amp;0xf)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(($v3&amp;0xf)&lt;&lt;12|$m5&lt;&lt;4)|$i4&gt;&gt;4).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(($i4&amp;0xf)&lt;&lt;12|RXB($v1,$v2,$v3)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRIg {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=5);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$v2,$i3,$i4,$m5)=(shift,get_V(shift),get_V(shift),
+	    ,get_I(shift,8),get_I(shift,8),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4)|($v2&amp;0xf)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($i4&lt;&lt;8|$m5&lt;&lt;4|$i3&gt;&gt;4)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(($i3&amp;0xf)&lt;&lt;12|RXB($v1,$v2)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRIh {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$i2,$i3)=(shift,get_V(shift),get_I(shift,16),
+	    get_I(shift,4));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,$i2).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($i3&lt;&lt;12|RXB($v1)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRIi {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$r2,$i3,$m4)=(shift,get_V(shift),get_R(shift),
+	    ,get_I(shift,8),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4)|$r2).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m4&lt;&lt;4|$i3&gt;&gt;4)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(($i3&amp;0xf)&lt;&lt;12|RXB($v1)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRRa {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;2||5&lt;$#_);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$v2,$m3,$m4,$m5)=(shift,get_V(shift),get_V(shift),
+	    get_M(shift),get_M(shift),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4|($v2&amp;0xf))).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m5&lt;&lt;4|$m4)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m3&lt;&lt;12|RXB($v1,$v2)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRRb {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;3||5&lt;$#_);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$v2,$v3,$m4,$m5)=(shift,get_V(shift),get_V(shift),
+	    get_V(shift),get_M(shift),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4|($v2&amp;0xf))).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(($v3&amp;0xf)&lt;&lt;12|$m5&lt;&lt;4)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m4&lt;&lt;12|RXB($v1,$v2,$v3)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRRc {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;3||6&lt;$#_);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$v2,$v3,$m4,$m5,$m6)=(shift,get_V(shift),get_V(shift),
+	    get_V(shift),get_M(shift),get_M(shift),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4|($v2&amp;0xf))).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(($v3&amp;0xf)&lt;&lt;12|$m6&lt;&lt;4|$m5)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m4&lt;&lt;12|RXB($v1,$v2,$v3)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRRd {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;4||6&lt;$#_);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$v2,$v3,$v4,$m5,$m6)=(shift,get_V(shift),get_V(shift),
+	    get_V(shift),get_V(shift),get_M(shift),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4|($v2&amp;0xf))).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(($v3&amp;0xf)&lt;&lt;12|$m5&lt;&lt;8|$m6&lt;&lt;4)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(($v4&amp;0xf)&lt;&lt;12|RXB($v1,$v2,$v3,$v4)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRRe {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;4||6&lt;$#_);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$v2,$v3,$v4,$m5,$m6)=(shift,get_V(shift),get_V(shift),
+	    get_V(shift),get_V(shift),get_M(shift),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4|($v2&amp;0xf))).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(($v3&amp;0xf)&lt;&lt;12|$m6&lt;&lt;8|$m5)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(($v4&amp;0xf)&lt;&lt;12|RXB($v1,$v2,$v3,$v4)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRRf {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$r2,$r3)=(shift,get_V(shift),get_R(shift),
+	    get_R(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4|$r2)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($r3&lt;&lt;12)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(RXB($v1)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRRg {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1)=(shift,get_V(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf))).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,0x0000).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(RXB(0,$v1)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRRh {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;2||$#_&gt;3);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$v2,$m3)=(shift,get_V(shift),get_V(shift),
+	    get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf))).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(($v2&amp;0xf)&lt;&lt;12|$m3&lt;&lt;4)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(RXB(0,$v1,$v2)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRRi {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$r1,$v2,$m3)=(shift,get_R(shift),get_V(shift),
+	    get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|$r1&lt;&lt;4|($v2&amp;0xf))).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m3&lt;&lt;4)).&quot;\,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(RXB(0,$v2)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRSa {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;3||$#_&gt;4);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$v3,$d2,$b2,$m4)=(shift,get_V(shift),get_V(shift),
+	    get_DB(shift),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4|($v3&amp;0xf))).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($b2&lt;&lt;12|$d2)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m4&lt;&lt;12|RXB($v1,$v3)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRSb {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;3||$#_&gt;4);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$r3,$d2,$b2,$m4)=(shift,get_V(shift),get_R(shift),
+	    get_DB(shift),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4|$r3)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($b2&lt;&lt;12|$d2)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m4&lt;&lt;12|RXB($v1)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRSc {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=4);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$r1,$v3,$d2,$b2,$m4)=(shift,get_R(shift),get_V(shift),
+	    get_DB(shift),get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|$r1&lt;&lt;4|($v3&amp;0xf))).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($b2&lt;&lt;12|$d2)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m4&lt;&lt;12|RXB(0,$v3)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRSd {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$r3,$d2,$b2)=(shift,get_V(shift),get_R(shift),
+	    get_DB(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|$r3)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($b2&lt;&lt;12|$d2)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(($v1&amp;0xf)&lt;&lt;12|RXB(0,0,0,$v1)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRV {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;2||$#_&gt;3);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$d2,$v2,$b2,$m3)=(shift,get_V(shift),get_DVB(shift),
+	    get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4|($v2&amp;0xf))).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($b2&lt;&lt;12|$d2)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m3&lt;&lt;12|RXB($v1,$v2)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VRX {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;2||$#_&gt;3);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$d2,$x2,$b2,$m3)=(shift,get_V(shift),get_DXB(shift),
+	    get_M(shift));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|($v1&amp;0xf)&lt;&lt;4|($x2))).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($b2&lt;&lt;12|$d2)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($m3&lt;&lt;12|RXB($v1)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+sub VSI {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=3);
+	my $ops=join(','<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>[1..$#_]);
+	my $memn=(caller(1))[3];
+	$memn=~s/^.*:://;
+	my ($opcode,$v1,$d2,$b2,$i3)=(shift,get_V(shift),get_DB(shift),
+	    get_I(shift,8));
+
+	$out.=&quot;\t.word\t&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($opcode&amp;0xff00|$i3)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,($b2&lt;&lt;12|$d2)).&quot;,&quot;;
+	$out.=sprintf(&quot;%#06x&quot;,(($v1&amp;0xf)&lt;&lt;12|RXB(0,0,0,$v1)&lt;&lt;8|$opcode&amp;0xff));
+	$out.=&quot;\t# $memn\t$ops\n&quot;
+}
+
+#
+# Internal
+#
+
+sub get_R {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=0);
+	my $r;
+
+	for (shift) {
+		if (!defined) {
+			$r=0;
+		} elsif (/^$GR$/) {
+			$r=$1;
+		} else {
+			confess(err(&quot;PARSE&quot;));
+		}
+	}
+	confess(err(&quot;ARGRANGE&quot;)) if ($r&amp;~0xf);
+
+	return $r;
+}
+
+sub get_V {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=0);
+	my $v;
+
+	for (shift) {
+		if (!defined) {
+			$v=0;
+		} elsif (/^$VR$/) {
+			$v=$1;
+		} else {
+			confess(err(&quot;PARSE&quot;));
+		}
+	}
+	confess(err(&quot;ARGRANGE&quot;)) if ($v&amp;~0x1f);
+
+	return $v;
+}
+
+sub get_I {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=1);
+	my ($i,$bits)=(shift,shift);
+
+	$i=defined($i)?(eval($i)):(0);
+	confess(err(&quot;PARSE&quot;)) if (!defined($i));
+	confess(err(&quot;ARGRANGE&quot;)) if (abs($i)&amp;~(2**$bits-1));
+
+	return $i&amp;(2**$bits-1);
+}
+
+sub get_M {
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=0);
+	my $m=shift;
+
+	$m=defined($m)?(eval($m)):(0);
+	confess(err(&quot;PARSE&quot;)) if (!defined($m));
+	confess(err(&quot;ARGRANGE&quot;)) if ($m&amp;~0xf);
+
+	return $m;
+}
+
+sub get_DB
+{
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=0);
+	my ($d,$b);
+
+	for (shift) {
+		if (!defined) {
+			($d,$b)=(0,0);
+		} elsif (/^(.+)\($GR\)$/) {
+			($d,$b)=(eval($1),$2);
+			confess(err(&quot;PARSE&quot;)) if (!defined($d));
+		} elsif (/^(.+)$/) {
+			($d,$b)=(eval($1),0);
+			confess(err(&quot;PARSE&quot;)) if (!defined($d));
+		} else {
+			confess(err(&quot;PARSE&quot;));
+		}
+	}
+	confess(err(&quot;ARGRANGE&quot;)) if ($d&amp;~0xfff||$b&amp;~0xf);
+
+	return ($d,$b);
+}
+
+sub get_DVB
+{
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=0);
+	my ($d,$v,$b);
+
+	for (shift) {
+		if (!defined) {
+			($d,$v,$b)=(0,0,0);
+		} elsif (/^(.+)\($VR,$GR\)$/) {
+			($d,$v,$b)=(eval($1),$2,$3);
+			confess(err(&quot;PARSE&quot;)) if (!defined($d));
+		} elsif (/^(.+)\($GR\)$/) {
+			($d,$v,$b)=(eval($1),0,$2);
+			confess(err(&quot;PARSE&quot;)) if (!defined($d));
+		} elsif (/^(.+)$/) {
+			($d,$v,$b)=(eval($1),0,0);
+			confess(err(&quot;PARSE&quot;)) if (!defined($d));
+		} else {
+			confess(err(&quot;PARSE&quot;));
+		}
+	}
+	confess(err(&quot;ARGRANGE&quot;)) if ($d&amp;~0xfff||$v&amp;~0x1f||$b&amp;~0xf);
+
+	return ($d,$v,$b);
+}
+
+sub get_DXB
+{
+	confess(err(&quot;ARGNUM&quot;)) if ($#_!=0);
+	my ($d,$x,$b);
+
+	for (shift) {
+		if (!defined) {
+			($d,$x,$b)=(0,0,0);
+		} elsif (/^(.+)\($GR,$GR\)$/) {
+			($d,$x,$b)=(eval($1),$2,$3);
+			confess(err(&quot;PARSE&quot;)) if (!defined($d));
+		} elsif (/^(.+)\($GR\)$/) {
+			($d,$x,$b)=(eval($1),0,$2);
+			confess(err(&quot;PARSE&quot;)) if (!defined($d));
+		} elsif (/^(.+)$/) {
+			($d,$x,$b)=(eval($1),0,0);
+			confess(err(&quot;PARSE&quot;)) if (!defined($d));
+		} else {
+			confess(err(&quot;PARSE&quot;));
+		}
+	}
+	confess(err(&quot;ARGRANGE&quot;)) if ($d&amp;~0xfff||$x&amp;~0xf||$b&amp;~0xf);
+
+	return ($d,$x,$b);
+}
+
+sub RXB
+{
+	confess(err(&quot;ARGNUM&quot;)) if ($#_&lt;0||3&lt;$#_);
+	my $rxb=0;
+
+	$rxb|=0x08 if (defined($_[0])&amp;&amp;($_[0]&amp;0x10));
+	$rxb|=0x04 if (defined($_[1])&amp;&amp;($_[1]&amp;0x10));
+	$rxb|=0x02 if (defined($_[2])&amp;&amp;($_[2]&amp;0x10));
+	$rxb|=0x01 if (defined($_[3])&amp;&amp;($_[3]&amp;0x10));
+
+	return $rxb;
+}
+
+sub err {
+	my %ERR		=
+	(
+		ARGNUM	=&gt;	'Wrong number of arguments',
+		ARGRANGE=&gt;	'Argument out of range',
+		PARSE	=&gt;	'Parse error',
+	);
+	confess($ERR{ARGNUM}) if ($#_!=0);
+
+	return $ERR{$_[0]};
+}
+
+1;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021602.html">[openssl-commits] [openssl]  master update
</A></li>
	<LI>Next message: <A HREF="021605.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21604">[ date ]</a>
              <a href="thread.html#21604">[ thread ]</a>
              <a href="subject.html#21604">[ subject ]</a>
              <a href="author.html#21604">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
