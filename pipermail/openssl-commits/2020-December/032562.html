<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [tools]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2020-December/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Btools%5D%20%20master%20update&In-Reply-To=%3C1607441701.227400.13797.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="032508.html">
   <LINK REL="Next"  HREF="032563.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[tools]  master update</H1>
    <B>tmraz at fedoraproject.org</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Btools%5D%20%20master%20update&In-Reply-To=%3C1607441701.227400.13797.nullmailer%40dev.openssl.org%3E"
       TITLE="[tools]  master update">tmraz at fedoraproject.org
       </A><BR>
    <I>Tue Dec  8 15:35:01 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="032508.html">[tools]  master update
</A></li>
        <LI>Next message: <A HREF="032563.html">[tools]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32562">[ date ]</a>
              <a href="thread.html#32562">[ thread ]</a>
              <a href="subject.html#32562">[ subject ]</a>
              <a href="author.html#32562">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  7f0c30333ce9b6a8101c8aa01a8156c014182c16 (commit)
       via  67906aa38534940c02c1d4182bd981cc9e7801de (commit)
       via  f9bb1cac3f600a78d1b00770879aa7a6d5f133e2 (commit)
       via  4ed0a292ebf9c293f051a4f8b00280f3e7ad2717 (commit)
       via  3953ec2fe13961d35bd577c381a0680701c8bcbe (commit)
      from  96a195347859112c1520d1ef84690ec3109f1f49 (commit)


- Log -----------------------------------------------------------------
commit 7f0c30333ce9b6a8101c8aa01a8156c014182c16
Author: Dr. David von Oheimb &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">David.von.Oheimb at siemens.com</A>&gt;
Date:   Thu Dec 3 13:59:25 2020 +0100

    addrev: Remove tabs by space chars
    
    Reviewed-by: Paul Dale &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">paul.dale at oracle.com</A>&gt;
    Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tmraz at fedoraproject.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/79">https://github.com/openssl/openssl/pull/79</A>)

commit 67906aa38534940c02c1d4182bd981cc9e7801de
Author: Dr. David von Oheimb &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">David.von.Oheimb at siemens.com</A>&gt;
Date:   Thu Dec 3 12:55:19 2020 +0100

    addrev: Fix regression on parsing bare prnum; correct help output
    
    Reviewed-by: Paul Dale &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">paul.dale at oracle.com</A>&gt;
    Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tmraz at fedoraproject.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/79">https://github.com/openssl/openssl/pull/79</A>)

commit f9bb1cac3f600a78d1b00770879aa7a6d5f133e2
Author: Dr. David von Oheimb &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">David.von.Oheimb at siemens.com</A>&gt;
Date:   Wed Dec 2 17:22:14 2020 +0100

    ghmerge: Make pulling the latest REMOTE/REF work als for non-default REF
    
    This avoids potential git errors such as:
    
    You asked to pull from the remote 'upstream', but did not specify
    a branch. Because this is not the default configured remote
    for your current branch, you must specify a branch on the command line.
    
    Reviewed-by: Paul Dale &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">paul.dale at oracle.com</A>&gt;
    Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tmraz at fedoraproject.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/79">https://github.com/openssl/openssl/pull/79</A>)

commit 4ed0a292ebf9c293f051a4f8b00280f3e7ad2717
Author: Dr. David von Oheimb &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">David.von.Oheimb at siemens.com</A>&gt;
Date:   Thu Nov 19 11:21:04 2020 +0100

    ghmerge: improve doc of --remote and --ref options
    
    Reviewed-by: Paul Dale &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">paul.dale at oracle.com</A>&gt;
    Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tmraz at fedoraproject.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/79">https://github.com/openssl/openssl/pull/79</A>)

commit 3953ec2fe13961d35bd577c381a0680701c8bcbe
Author: Dr. David von Oheimb &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">David.von.Oheimb at siemens.com</A>&gt;
Date:   Thu Nov 19 10:35:28 2020 +0100

    addrev: re-enable use of singe-character review names
    
    Reviewed-by: Paul Dale &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">paul.dale at oracle.com</A>&gt;
    Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tmraz at fedoraproject.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/79">https://github.com/openssl/openssl/pull/79</A>)

-----------------------------------------------------------------------

Summary of changes:
 review-tools/addrev  | 52 +++++++++++++++++++++++++---------------------------
 review-tools/ghmerge | 13 +++++++------
 2 files changed, 32 insertions(+), 33 deletions(-)

diff --git a/review-tools/addrev b/review-tools/addrev
index 473ad46..aa5215a 100755
--- a/review-tools/addrev
+++ b/review-tools/addrev
@@ -14,9 +14,12 @@ my $useself = 1;
 my $my_email;
 
 foreach (@ARGV) {
-    if (/^\@.+$/) {
+    if (/^(--prnum=)?(\d{1,6}+)$/) {
+        $args .= &quot;--prnum=$2 &quot;;
+        $haveprnum = 1;
+    } elsif (/^\@.+$/) {
         $args .= &quot;--reviewer=$_ &quot;;
-    } elsif (/^\w[-\w]+$/) {
+    } elsif (/^\w[-\w]*$/) {
         if (/^[0-9a-f]{7,}+/) {
             print &quot;Warning: overriding previous filter args $filterargs\n&quot; if $filterargs ne &quot;&quot;;
             $filterargs = $_;
@@ -40,21 +43,18 @@ foreach (@ARGV) {
     } elsif (/^--myemail=(.+)$/) {
         $my_email = $1;
     } elsif (/^--nopr$/) {
-	$haveprnum = 1;
-    } elsif (/^(--prnum=)?(\d+)$/) {
-        $args .= &quot;--prnum=$2 &quot;;
-	$haveprnum = 1;
+        $haveprnum = 1;
     } elsif (/^--commit=(.+)$/) {
         $args .= &quot;--commit=$1 &quot;;
     } elsif (/^-(\d+)$/) {
         print &quot;Warning: overriding previous filter args $filterargs\n&quot; if $filterargs ne &quot;&quot;;
         $filterargs = &quot;HEAD~$1..&quot;;
     } elsif (/^--list$/) {
-	$list_reviewers = 1;
-	last;
+        $list_reviewers = 1;
+        last;
     } elsif (/^--help$/ || /^-h$/) {
-	$help = 1;
-	last;
+        $help = 1;
+        last;
     } else {
         print &quot;Warning: overriding previous filter args $filterargs\n&quot; if $filterargs ne &quot;&quot;;
         $filterargs = $_;
@@ -91,20 +91,18 @@ usage: addrev args...
 
 option style arguments:
 
---help			Print this help and exit
---list			List the known reviewers and exit (discards all other
-			arguments)
---verbose		Be a bit more verbose
---trivial		Do not require a CLA
---reviewer=&lt;reviewer&gt;	A reviewer to be added on a Reviewed-by: line
---rmreviewers		Remove all existing Reviewed-by: lines before adding
-			reviewers
---commit=&lt;id&gt;		Only apply to commit &lt;id&gt;
---myemail=&lt;email&gt;	Set email address.  Defaults to the result from
-			git configuration setting user.email
---nopr			Do not require a PR number
-[--prnum=]NNN           Add a reference to GitHub pull request NNN
--&lt;n&gt;			Change the last &lt;n&gt; commits.  Defaults to 1
+--help                 Print this help and exit
+--list                 List the known reviewers and exit (discards all other arguments)
+--verbose              Be a bit more verbose
+--trivial              Do not require a CLA
+--reviewer=&lt;reviewer&gt;  A reviewer to be added on a Reviewed-by: line
+--rmreviewers          Remove all existing Reviewed-by: lines before adding reviewers
+--commit=&lt;id&gt;          Only apply to commit &lt;id&gt;
+--myemail=&lt;email&gt;      Set email address.
+                       Defaults to the result from git configuration setting user.email
+--nopr                 Do not require a PR number
+[--prnum=]NNN          Add a reference to GitHub pull request NNN
+-&lt;n&gt;                   Change the last &lt;n&gt; commits.  Defaults to 1
 
 non-option style arguments can be:
 
@@ -117,8 +115,8 @@ HEAD^.. is assumed.
 
 Examples (all meaning the same thing):
 
-  addrev -2 steve levitte
-  addrev steve \@levitte HEAD^^..
-  addrev --reviewer=steve --reviewer=levitte\@openssl.org -2
+  addrev 12345 -2 steve levitte
+  addrev --prnum=12345 steve \@levitte HEAD^^..
+  addrev 12345 --reviewer=steve --reviewer=levitte\@openssl.org -2
 EOF
 }
diff --git a/review-tools/ghmerge b/review-tools/ghmerge
index 1384a89..02ab06e 100755
--- a/review-tools/ghmerge
+++ b/review-tools/ghmerge
@@ -10,8 +10,8 @@ Option style arguments:
 --help              Print this help and exit
 --tools             Merge a tools PR (rather than openssl PR)
 --web               Merge a web PR (rather than openssl PR)
---remote &lt;remote&gt;   Merge with given repo (rather than implicit upstream)
---ref &lt;branch&gt;      Merge with given branch (rather than impliict master)
+--remote &lt;remote&gt;   Repo to merge with (rather than git.openssl.org), usually 'upstream'
+--ref &lt;branch&gt;      Branch to merge with (rather than current branch), usually 'master'
 --cherry-pick       Use cherry-pick (rather than pull --rebase)
 --squash            Squash new commits non-interactively (allows editing msg)
 --noautosquash      Do not automatically squash fixups in interactive rebase
@@ -21,7 +21,8 @@ Examples:
 
   ghmerge 12345 mattcaswell
   ghmerge 12345 paulidale t8m --nobuild --myemail=<A HREF="../../../mailman/listinfo/openssl-commits.html">dev at ddvo.net</A>
-  ghmerge edd05b7^^^^..19692bb2c32 --squash -- 12345 levitte&quot;
+  ghmerge edd05b7^^^^..19692bb2c32 --squash -- 12345 levitte
+  ghmerge 12345 slontis --ref OpenSSL_1_1_1-stable&quot;
     exit 9
 }
 
@@ -117,7 +118,7 @@ while [ $# -ne 0 ]; do
 done
 ADDREVOPTS=${ADDREVOPTS# } # chop any leading ' '
 
-[ &quot;$REMOTE&quot; = &quot;&quot; ] &amp;&amp; REMOTE=`git remote -v | awk '/git.openssl.org.*(push)/{ print $1; }' | head -n 1`
+[ &quot;$REMOTE&quot; = &quot;&quot; ] &amp;&amp; REMOTE=`git remote -v | awk '/git.openssl.org.*(push)/{ print $1; }' | head -n 1` # usually this will be 'upstream'
 if [ &quot;$REMOTE&quot; = &quot;&quot; ] ; then
     echo Cannot find git remote with URL including 'git.openssl.org'
     exit 1
@@ -149,14 +150,14 @@ if [ -z &quot;$WHO&quot; -o -z &quot;$BRANCH&quot; -o -z &quot;$REPO&quot; ]; then
 fi
 
 if [ &quot;$REF&quot; = &quot;&quot; ]; then
-    REF=`git rev-parse --abbrev-ref HEAD` # usually will be 'HEAD' or e.g., OpenSSL_1_1_1-stable
+    REF=`git rev-parse --abbrev-ref HEAD` # usually this will be 'master' or, e.g., 'OpenSSL_1_1_1-stable'
 else
     echo -n &quot;Press Enter to checkout $REF: &quot;; read foo
     git checkout $REF
 fi
 
 echo -n &quot;Press Enter to pull the latest $REMOTE/$REF: &quot;; read foo
-git pull $REMOTE || (git rebase --abort; exit 1)
+git pull $REMOTE $REF || (git rebase --abort; exit 1)
 
 WORK=&quot;copy-of-${WHO}-${BRANCH}&quot;
 
</PRE>








































































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="032508.html">[tools]  master update
</A></li>
	<LI>Next message: <A HREF="032563.html">[tools]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32562">[ date ]</a>
              <a href="thread.html#32562">[ thread ]</a>
              <a href="subject.html#32562">[ subject ]</a>
              <a href="author.html#32562">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
