<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2021-March/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1616746988.920397.6028.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="033634.html">
   <LINK REL="Next"  HREF="033638.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl]  master update</H1>
    <B>Dr. Paul Dale</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1616746988.920397.6028.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl]  master update">pauli at openssl.org
       </A><BR>
    <I>Fri Mar 26 08:23:08 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="033634.html">[openssl]  master update
</A></li>
        <LI>Next message: <A HREF="033638.html">[openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33637">[ date ]</a>
              <a href="thread.html#33637">[ thread ]</a>
              <a href="subject.html#33637">[ subject ]</a>
              <a href="author.html#33637">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  4551763efc8c9d2e39f3d39430cb4657d155cde6 (commit)
       via  10b63e9756cf932cbaba5f725445a2a032a7f271 (commit)
       via  b0b63654e9da02a6f336c5660e659a87a29e916e (commit)
       via  632bc4dff3856374192052871c39b24032b17728 (commit)
       via  77d12ae049c21851b77ff6ee992a362b73a684c8 (commit)
       via  2e1a40d0374a2bfc7478e4da5dd6739f7a127a72 (commit)
       via  4aac71f705f5fff15c6cb0da44d9f8014f48901f (commit)
      from  8c63532002fdab11b437bc8d68012c2b05cf00ea (commit)


- Log -----------------------------------------------------------------
commit 4551763efc8c9d2e39f3d39430cb4657d155cde6
Author: Pauli &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">pauli at openssl.org</A>&gt;
Date:   Wed Mar 24 14:02:48 2021 +1000

    doc: life-cycle descritpion for MACs
    
    Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/14522">https://github.com/openssl/openssl/pull/14522</A>)

commit 10b63e9756cf932cbaba5f725445a2a032a7f271
Author: Pauli &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">pauli at openssl.org</A>&gt;
Date:   Wed Mar 24 13:38:57 2021 +1000

    doc: note that MAC lifecycle transitions will be enforced at some point
    
    Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/14522">https://github.com/openssl/openssl/pull/14522</A>)

commit b0b63654e9da02a6f336c5660e659a87a29e916e
Author: Pauli &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">pauli at openssl.org</A>&gt;
Date:   Wed Mar 24 13:35:41 2021 +1000

    doc: life-cycle descritpion for RANDs
    
    Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/14522">https://github.com/openssl/openssl/pull/14522</A>)

commit 632bc4dff3856374192052871c39b24032b17728
Author: Pauli &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">pauli at openssl.org</A>&gt;
Date:   Wed Mar 24 13:12:40 2021 +1000

    doc: note that RAND lifecycle transitions will be enforced at some point
    
    Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/14522">https://github.com/openssl/openssl/pull/14522</A>)

commit 77d12ae049c21851b77ff6ee992a362b73a684c8
Author: Pauli &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">ppzgs1 at gmail.com</A>&gt;
Date:   Fri Mar 12 09:46:56 2021 +1000

    doc: life-cycle description for KDFs/PRFs
    
    Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/14522">https://github.com/openssl/openssl/pull/14522</A>)

commit 2e1a40d0374a2bfc7478e4da5dd6739f7a127a72
Author: Pauli &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">ppzgs1 at gmail.com</A>&gt;
Date:   Fri Mar 12 09:46:05 2021 +1000

    doc: note that KDF/PRF transitions will be enforced at some future point
    
    Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/14522">https://github.com/openssl/openssl/pull/14522</A>)

commit 4aac71f705f5fff15c6cb0da44d9f8014f48901f
Author: Pauli &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">ppzgs1 at gmail.com</A>&gt;
Date:   Fri Mar 12 08:46:55 2021 +1000

    doc: add life-cycle source files
    
    Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/14522">https://github.com/openssl/openssl/pull/14522</A>)

-----------------------------------------------------------------------

Summary of changes:
 doc/build.info                 |  18 ++++
 doc/life-cycles/Makefile       |  26 +++++
 doc/life-cycles/README.md      |  18 ++++
 doc/life-cycles/cipher.dot     |  72 ++++++++++++++
 doc/life-cycles/digest.dot     |  31 ++++++
 doc/life-cycles/kdf.dot        |  14 +++
 doc/life-cycles/lifecycles.ods | Bin 0 -&gt; 16408 bytes
 doc/life-cycles/mac.dot        |  24 +++++
 doc/life-cycles/pkey.dot       |  48 ++++++++++
 doc/life-cycles/rand.dot       |  15 +++
 doc/man3/EVP_KDF.pod           |   9 +-
 doc/man3/EVP_MAC.pod           |  11 ++-
 doc/man3/EVP_RAND.pod          |   7 +-
 doc/man7/kdf.png               | Bin 0 -&gt; 29120 bytes
 doc/man7/life_cycle-kdf.pod    | 165 ++++++++++++++++++++++++++++++++
 doc/man7/life_cycle-mac.pod    | 210 +++++++++++++++++++++++++++++++++++++++++
 doc/man7/life_cycle-rand.pod   | 193 +++++++++++++++++++++++++++++++++++++
 doc/man7/mac.png               | Bin 0 -&gt; 50554 bytes
 doc/man7/provider-kdf.pod      |   8 +-
 doc/man7/provider-mac.pod      |  10 +-
 doc/man7/provider-rand.pod     |  10 +-
 doc/man7/rand.png              | Bin 0 -&gt; 41597 bytes
 22 files changed, 882 insertions(+), 7 deletions(-)
 create mode 100644 doc/life-cycles/Makefile
 create mode 100644 doc/life-cycles/README.md
 create mode 100644 doc/life-cycles/cipher.dot
 create mode 100644 doc/life-cycles/digest.dot
 create mode 100644 doc/life-cycles/kdf.dot
 create mode 100644 doc/life-cycles/lifecycles.ods
 create mode 100644 doc/life-cycles/mac.dot
 create mode 100644 doc/life-cycles/pkey.dot
 create mode 100644 doc/life-cycles/rand.dot
 create mode 100644 doc/man7/kdf.png
 create mode 100644 doc/man7/life_cycle-kdf.pod
 create mode 100644 doc/man7/life_cycle-mac.pod
 create mode 100644 doc/man7/life_cycle-rand.pod
 create mode 100644 doc/man7/mac.png
 create mode 100644 doc/man7/rand.png

diff --git a/doc/build.info b/doc/build.info
index 8294725dd2..48730cf945 100644
--- a/doc/build.info
+++ b/doc/build.info
@@ -4202,6 +4202,18 @@ DEPEND[html/man7/evp.html]=man7/evp.pod
 GENERATE[html/man7/evp.html]=man7/evp.pod
 DEPEND[man/man7/evp.7]=man7/evp.pod
 GENERATE[man/man7/evp.7]=man7/evp.pod
+DEPEND[html/man7/life_cycle-kdf.html]=man7/life_cycle-kdf.pod
+GENERATE[html/man7/life_cycle-kdf.html]=man7/life_cycle-kdf.pod
+DEPEND[man/man7/life_cycle-kdf.7]=man7/life_cycle-kdf.pod
+GENERATE[man/man7/life_cycle-kdf.7]=man7/life_cycle-kdf.pod
+DEPEND[html/man7/life_cycle-mac.html]=man7/life_cycle-mac.pod
+GENERATE[html/man7/life_cycle-mac.html]=man7/life_cycle-mac.pod
+DEPEND[man/man7/life_cycle-mac.7]=man7/life_cycle-mac.pod
+GENERATE[man/man7/life_cycle-mac.7]=man7/life_cycle-mac.pod
+DEPEND[html/man7/life_cycle-rand.html]=man7/life_cycle-rand.pod
+GENERATE[html/man7/life_cycle-rand.html]=man7/life_cycle-rand.pod
+DEPEND[man/man7/life_cycle-rand.7]=man7/life_cycle-rand.pod
+GENERATE[man/man7/life_cycle-rand.7]=man7/life_cycle-rand.pod
 DEPEND[html/man7/openssl-core.h.html]=man7/openssl-core.h.pod
 GENERATE[html/man7/openssl-core.h.html]=man7/openssl-core.h.pod
 DEPEND[man/man7/openssl-core.h.7]=man7/openssl-core.h.pod
@@ -4390,6 +4402,9 @@ html/man7/crypto.html \
 html/man7/ct.html \
 html/man7/des_modes.html \
 html/man7/evp.html \
+html/man7/life_cycle-kdf.html \
+html/man7/life_cycle-mac.html \
+html/man7/life_cycle-rand.html \
 html/man7/openssl-core.h.html \
 html/man7/openssl-core_dispatch.h.html \
 html/man7/openssl-core_names.h.html \
@@ -4489,6 +4504,9 @@ man/man7/crypto.7 \
 man/man7/ct.7 \
 man/man7/des_modes.7 \
 man/man7/evp.7 \
+man/man7/life_cycle-kdf.7 \
+man/man7/life_cycle-mac.7 \
+man/man7/life_cycle-rand.7 \
 man/man7/openssl-core.h.7 \
 man/man7/openssl-core_dispatch.h.7 \
 man/man7/openssl-core_names.h.7 \
diff --git a/doc/life-cycles/Makefile b/doc/life-cycles/Makefile
new file mode 100644
index 0000000000..4c12558e63
--- /dev/null
+++ b/doc/life-cycles/Makefile
@@ -0,0 +1,26 @@
+GRAPHS=cipher.dot digest.dot kdf.dot mac.dot pkey.dot rand.dot
+IMAGES=
+
+all: png txt
+png: $(subst .dot,.png,$(GRAPHS))
+txt: $(subst .dot,.txt,$(GRAPHS))
+	@echo
+	@echo Remember to check and manually fix the mistakes before merging
+	@echo into the man pages.
+	@echo
+
+# for the dot program:
+#	sudo apt install graphviz
+%.png: %.dot
+	dot -Tpng -O $&lt;
+	@mv $&lt;.png $@
+
+# for the graph-easy program:
+#	sudo apt install cpanminus
+#	sudo cpanm Graph::Easy
+%.txt: %.dot
+	graph-easy --from=dot --as_ascii &lt; $&lt; &gt; $@
+
+clean:
+	rm -f $(wildcard *.png) $(wildcard *.txt)
+
diff --git a/doc/life-cycles/README.md b/doc/life-cycles/README.md
new file mode 100644
index 0000000000..d504396545
--- /dev/null
+++ b/doc/life-cycles/README.md
@@ -0,0 +1,18 @@
+This directory contains the algorithm life-cycle diagram sources.
+
+The canonical life-cycles are in the spreadsheet.
+
+The various .dot files are graph descriptions for the
+[GraphViz](<A HREF="https://www.graphviz.org/">https://www.graphviz.org/</A>) tool.  These omit edges and should
+be used for guidance only.
+
+To generate the rendered images, you need to install:
+``` sh
+sudo apt install graphviz cpanminus
+sudo cpanm Graph::Easy
+```
+
+Running `make` will produce a number of `.txt` and `.png` files.
+These are the rendered `.dot` files.  The `.txt` files require
+additional editing before they can be added to the manual pages in
+`internal/man7/life_cycle-*.pod`.
diff --git a/doc/life-cycles/cipher.dot b/doc/life-cycles/cipher.dot
new file mode 100644
index 0000000000..6f1acb4026
--- /dev/null
+++ b/doc/life-cycles/cipher.dot
@@ -0,0 +1,72 @@
+digraph cipher {
+    begin [label=start, color=&quot;#deeaee&quot;, style=&quot;filled&quot;];
+    newed [fontcolor=&quot;#c94c4c&quot;, style=&quot;solid&quot;];
+
+    initialised [fontcolor=&quot;#c94c4c&quot;];
+    updated [fontcolor=&quot;#c94c4c&quot;];
+    finaled [fontcolor=&quot;#c94c4c&quot;];
+    end [label=&quot;freed&quot;, color=&quot;#deeaee&quot;, style=&quot;filled&quot;];
+
+    d_initialised [label=&quot;initialised\n(decryption)&quot;, fontcolor=&quot;#c94c4c&quot;];
+    d_updated [label=&quot;updated\n(decryption)&quot;, fontcolor=&quot;#c94c4c&quot;];
+    e_initialised [label=&quot;initialised\n(encryption)&quot;, fontcolor=&quot;#c94c4c&quot;];
+    e_updated [label=&quot;updated\n(encryption)&quot;, fontcolor=&quot;#c94c4c&quot;];
+
+    begin -&gt; newed [label=&quot;EVP_CIPHER_CTX_new&quot;];
+    newed -&gt; initialised [label=&quot;EVP_CipherInit&quot;];
+    initialised -&gt; initialised [label=&quot;EVP_CipherInit\n(not required but allowed)&quot;,
+                                style=dashed];
+    initialised -&gt; updated [label=&quot;EVP_CipherUpdate&quot;, weight=2];
+    updated -&gt; updated [label=&quot;EVP_CipherUpdate&quot;];
+    updated -&gt; finaled [label=&quot;EVP_CipherFinal&quot;];
+    finaled -&gt; finaled [label=&quot;EVP_CIPHER_CTX_get_params\n(AEAD encryption)&quot;,
+                        style=dashed];
+    finaled -&gt; end [label=&quot;EVP_CIPHER_CTX_free&quot;];
+    finaled -&gt; newed [label=&quot;EVP_CIPHER_CTX_reset&quot;, style=dashed,
+                      color=&quot;#034f84&quot;, fontcolor=&quot;#034f84&quot;];
+    updated -&gt; newed [label=&quot;EVP_CIPHER_CTX_reset&quot;, style=dashed,
+                      color=&quot;#034f84&quot;, fontcolor=&quot;#034f84&quot;];
+    newed -&gt; d_initialised [label=&quot;EVP_DecryptInit&quot;];
+    d_initialised -&gt; d_initialised [label=&quot;EVP_DecryptInit\n(not required but allowed)&quot;,
+                                style=dashed];
+    d_initialised -&gt; d_updated [label=&quot;EVP_DecryptUpdate&quot;, weight=2];
+    d_updated -&gt; d_updated [label=&quot;EVP_DecryptUpdate&quot;];
+    d_updated -&gt; finaled [label=&quot;EVP_DecryptFinal&quot;];
+    d_updated -&gt; newed [label=&quot;EVP_CIPHER_CTX_reset&quot;, style=dashed,
+                      color=&quot;#034f84&quot;, fontcolor=&quot;#034f84&quot;];
+    newed -&gt; e_initialised [label=&quot;EVP_EncryptInit&quot;];
+    e_initialised -&gt; e_initialised [label=&quot;EVP_EncryptInit\n(not required but allowed)&quot;,
+                                style=dashed];
+    e_initialised -&gt; e_updated [label=&quot;EVP_EncryptUpdate&quot;, weight=2];
+    e_updated -&gt; e_updated [label=&quot;EVP_EncryptUpdate&quot;];
+    e_updated -&gt; finaled [label=&quot;EVP_EncryptFinal&quot;];
+    e_updated -&gt; newed [label=&quot;EVP_CIPHER_CTX_reset&quot;, style=dashed,
+                      color=&quot;#034f84&quot;, fontcolor=&quot;#034f84&quot;];
+}
+
+/* This is a version with a single flavour which is easier to comprehend
+digraph cipher {
+    begin [label=start, color=&quot;#deeaee&quot;, style=&quot;filled&quot;];
+    newed [fontcolor=&quot;#c94c4c&quot;, style=&quot;solid&quot;];
+    initialised [fontcolor=&quot;#c94c4c&quot;];
+    updated [fontcolor=&quot;#c94c4c&quot;];
+    finaled [fontcolor=&quot;#c94c4c&quot;];
+    end [label=&quot;freed&quot;, color=&quot;#deeaee&quot;, style=&quot;filled&quot;];
+
+    begin -&gt; newed [label=&quot;EVP_CIPHER_CTX_new&quot;];
+    newed -&gt; initialised [label=&quot;EVP_CipherInit&quot;];
+    initialised -&gt; initialised [label=&quot;EVP_CipherInit\n(not required but allowed)&quot;,
+                                style=dashed];
+    initialised -&gt; updated [label=&quot;EVP_CipherUpdate&quot;, weight=2];
+    updated -&gt; updated [label=&quot;EVP_CipherUpdate&quot;];
+    updated -&gt; finaled [label=&quot;EVP_CipherFinal&quot;];
+    finaled -&gt; finaled [label=&quot;EVP_CIPHER_CTX_get_params\n(AEAD encryption)&quot;,
+                        style=dashed];
+    finaled -&gt; end [label=&quot;EVP_CIPHER_CTX_free&quot;];
+    finaled -&gt; newed [label=&quot;EVP_CIPHER_CTX_reset&quot;, style=dashed,
+                      color=&quot;#034f84&quot;, fontcolor=&quot;#034f84&quot;];
+    updated -&gt; newed [label=&quot;EVP_CIPHER_CTX_reset&quot;, style=dashed,
+                      color=&quot;#034f84&quot;, fontcolor=&quot;#034f84&quot;];
+}
+*/
+
diff --git a/doc/life-cycles/digest.dot b/doc/life-cycles/digest.dot
new file mode 100644
index 0000000000..989342fd10
--- /dev/null
+++ b/doc/life-cycles/digest.dot
@@ -0,0 +1,31 @@
+digraph digest {
+    begin [label=start, color=&quot;#deeaee&quot;, style=&quot;filled&quot;];
+    newed [label=newed, fontcolor=&quot;#c94c4c&quot;, style=&quot;solid&quot;];
+    initialised [label=initialised, fontcolor=&quot;#c94c4c&quot;];
+    updated [label=updated, fontcolor=&quot;#c94c4c&quot;];
+    finaled [label=&quot;finaled&quot;, fontcolor=&quot;#c94c4c&quot;];
+    end [label=&quot;freed&quot;, color=&quot;#deeaee&quot;, style=&quot;filled&quot;];
+
+    begin -&gt; newed [label=&quot;EVP_MD_CTX_new&quot;];
+    newed -&gt; initialised [label=&quot;EVP_DigestInit&quot;];
+    initialised -&gt; updated [label=&quot;EVP_DigestUpdate&quot;, weight=3];
+    updated -&gt; updated [label=&quot;EVP_DigestUpdate&quot;];
+    updated -&gt; finaled [label=&quot;EVP_DigestFinal&quot;];
+    updated -&gt; finaled [label=&quot;EVP_DigestFinalXOF&quot;,
+                        fontcolor=&quot;#808080&quot;, color=&quot;#808080&quot;];
+    /* Once this works it should go back in:
+    finaled -&gt; finaled [taillabel=&quot;EVP_DigestFinalXOF&quot;,
+                        labeldistance=9, labelangle=345,
+                        labelfontcolor=&quot;#808080&quot;, color=&quot;#808080&quot;];
+    */
+    finaled -&gt; end [label=&quot;EVP_MD_CTX_free&quot;];
+    finaled -&gt; newed [label=&quot;EVP_MD_CTX_reset&quot;, style=dashed, weight=2,
+                      color=&quot;#034f84&quot;, fontcolor=&quot;#034f84&quot;];
+    updated -&gt; newed [label=&quot;EVP_MD_CTX_reset&quot;, style=dashed,
+                      color=&quot;#034f84&quot;, fontcolor=&quot;#034f84&quot;];
+    updated -&gt; initialised [label=&quot;EVP_DigestInit&quot;, weight=0, style=dashed,
+                            color=&quot;#034f84&quot;, fontcolor=&quot;#034f84&quot;];
+    finaled -&gt; initialised [label=&quot;EVP_DigestInit&quot;, style=dashed,
+                            color=&quot;#034f84&quot;, fontcolor=&quot;#034f84&quot;];
+}
+ 
diff --git a/doc/life-cycles/kdf.dot b/doc/life-cycles/kdf.dot
new file mode 100644
index 0000000000..4729dcdeba
--- /dev/null
+++ b/doc/life-cycles/kdf.dot
@@ -0,0 +1,14 @@
+strict digraph kdf {
+    begin [label=start, color=&quot;#deeaee&quot;, style=&quot;filled&quot;];
+    newed [label=&quot;newed&quot;, fontcolor=&quot;#c94c4c&quot;, style=&quot;solid&quot;];
+    deriving [label=&quot;deriving&quot;, fontcolor=&quot;#c94c4c&quot;];
+    end [label=&quot;freed&quot;, color=&quot;#deeaee&quot;, style=&quot;filled&quot;];
+
+    begin -&gt; newed [label=&quot;EVP_KDF_CTX_new&quot;];
+    newed -&gt; deriving [label=&quot;EVP_KDF_derive&quot;];
+    deriving -&gt; deriving [label=&quot;EVP_KDF_derive&quot;, style=dashed];
+    deriving -&gt; end [label=&quot;EVP_KDF_CTX_free&quot;];
+    deriving -&gt; newed [label=&quot;EVP_KDF_CTX_reset&quot;, style=dashed,
+                      color=&quot;#034f84&quot;, fontcolor=&quot;#034f84&quot;];
+}
+ 
diff --git a/doc/life-cycles/lifecycles.ods b/doc/life-cycles/lifecycles.ods
new file mode 100644
index 0000000000..4f77f281e0
Binary files /dev/null and b/doc/life-cycles/lifecycles.ods differ
diff --git a/doc/life-cycles/mac.dot b/doc/life-cycles/mac.dot
new file mode 100644
index 0000000000..c52701742c
--- /dev/null
+++ b/doc/life-cycles/mac.dot
@@ -0,0 +1,24 @@
+digraph mac {
+    begin [label=start, color=&quot;#deeaee&quot;, style=&quot;filled&quot;];
+    newed [fontcolor=&quot;#c94c4c&quot;, style=&quot;solid&quot;];
+    initialised [fontcolor=&quot;#c94c4c&quot;];
+    updated [fontcolor=&quot;#c94c4c&quot;];
+    finaled [fontcolor=&quot;#c94c4c&quot;];
+    end [label=freed, color=&quot;#deeaee&quot;, style=&quot;filled&quot;];
+
+    begin -&gt; newed [label=&quot;EVP_MAC_CTX_new&quot;];
+    newed -&gt; initialised [label=&quot;EVP_MAC_init&quot;];
+    initialised -&gt; updated [label=&quot;EVP_MAC_update&quot;];
+    updated -&gt; updated [label=&quot;EVP_MAC_update&quot;];
+    updated -&gt; finaled [label=&quot;EVP_MAC_final&quot;];
+    /* Once this works it should go back in:
+    updated -&gt; finaled [label=&quot;EVP_MAC_final_XOF&quot;, style=dashed];
+    finaled -&gt; finaled [label=&quot;EVP_MAC_final_XOF&quot;, style=dashed];
+    */
+    finaled -&gt; end [label=&quot;EVP_MAC_CTX_free&quot;];
+    updated -&gt; initialised [label=&quot;EVP_MAC_init&quot;, style=dashed,
+                            color=&quot;#034f84&quot;, fontcolor=&quot;#034f84&quot;];
+    finaled -&gt; initialised [label=&quot;EVP_MAC_init&quot;, style=dashed,
+                            color=&quot;#034f84&quot;, fontcolor=&quot;#034f84&quot;];
+}
+ 
diff --git a/doc/life-cycles/pkey.dot b/doc/life-cycles/pkey.dot
new file mode 100644
index 0000000000..1662c4ef3d
--- /dev/null
+++ b/doc/life-cycles/pkey.dot
@@ -0,0 +1,48 @@
+strict digraph pkey {
+    layout=circo
+
+    begin [label=start, color=&quot;#deeaee&quot;, style=&quot;filled&quot;];
+    newed [fontcolor=&quot;#c94c4c&quot;, style=&quot;solid&quot;];
+    digestsign [label=&quot;digest sign&quot;, fontcolor=&quot;#AB3910&quot;, color=&quot;#AB3910&quot;]
+    verify [fontcolor=&quot;#F8CF2C&quot;, color=&quot;#F8CF2C&quot;]
+    verifyrecover [label=&quot;verify recover&quot;, fontcolor=&quot;#B19FF9&quot;, color=&quot;#B19FF9&quot;]
+    encrypt [fontcolor=&quot;#63AAC0&quot;, color=&quot;#63AAC0&quot;]
+    decrypt [fontcolor=&quot;#425F06&quot;, color=&quot;#425F06&quot;]
+    derive [fontcolor=&quot;#FEA303&quot;, color=&quot;#FEA303&quot;]
+    encapsulate [fontcolor=&quot;#D95980&quot;, color=&quot;#D95980&quot;]
+    decapsulate [fontcolor=&quot;#A16AE8&quot;, color=&quot;#A16AE8&quot;]
+    paramgen [label=&quot;parameter\ngeneration&quot;, fontcolor=&quot;#2879C0&quot;, color=&quot;#2879C0&quot;]
+    keygen [label=&quot;key\ngeneration&quot;, fontcolor=&quot;#2F7604&quot;, color=&quot;#2F7604&quot;]
+
+    begin -&gt; newed [label=&quot;EVP_PKEY_CTX_new&quot;];
+
+    newed -&gt; digestsign [label=&quot;EVP_PKEY_sign_init&quot;, color=&quot;#AB3910&quot;, fontcolor=&quot;#AB3910&quot;];
+    digestsign -&gt; digestsign [label=&quot;EVP_PKEY_sign&quot;, color=&quot;#AB3910&quot;, fontcolor=&quot;#AB3910&quot;];
+
+    newed -&gt; verify [label=&quot;EVP_PKEY_verify_init&quot;, fontcolor=&quot;#F8CF2C&quot;, color=&quot;#F8CF2C&quot;];
+    verify -&gt; verify [label=&quot;EVP_PKEY_verify&quot;, fontcolor=&quot;#F8CF2C&quot;, color=&quot;#F8CF2C&quot;];
+
+    newed -&gt; verifyrecover [label=&quot;EVP_PKEY_verify_recover_init&quot;, fontcolor=&quot;#B19FF9&quot;, color=&quot;#B19FF9&quot;];
+    verifyrecover -&gt; verifyrecover [label=&quot;EVP_PKEY_verify_recover&quot;, fontcolor=&quot;#B19FF9&quot;, color=&quot;#B19FF9&quot;];
+
+    newed -&gt; encrypt [label=&quot;EVP_PKEY_encrypt_init&quot;, fontcolor=&quot;#63AAC0&quot;, color=&quot;#63AAC0&quot;];
+    encrypt -&gt; encrypt [label=&quot;EVP_PKEY_encrypt&quot;, fontcolor=&quot;#63AAC0&quot;, color=&quot;#63AAC0&quot;];
+
+    newed -&gt; decrypt [label=&quot;EVP_PKEY_decrypt_init&quot;, fontcolor=&quot;#425F06&quot;, color=&quot;#425F06&quot;];
+    decrypt -&gt; decrypt [label=&quot;EVP_PKEY_decrypt&quot;, fontcolor=&quot;#425F06&quot;, color=&quot;#425F06&quot;];
+
+    newed -&gt; derive [label=&quot;EVP_PKEY_derive_init&quot;, fontcolor=&quot;#FEA303&quot;, color=&quot;#FEA303&quot;];
+    derive -&gt; derive [label=&quot;EVP_PKEY_derive\nEVP_PKEY_derive_set_peer&quot;, fontcolor=&quot;#FEA303&quot;, color=&quot;#FEA303&quot;];
+
+    newed -&gt; encapsulate [label=&quot;EVP_PKEY_encapsulate_init&quot;, fontcolor=&quot;#D95980&quot;, color=&quot;#D95980&quot;];
+    encapsulate -&gt; encapsulate [label=&quot;EVP_PKEY_encapsulate&quot;, fontcolor=&quot;#D95980&quot;, color=&quot;#D95980&quot;];
+
+    newed -&gt; decapsulate [label=&quot;EVP_PKEY_decapsulate_init&quot;, fontcolor=&quot;#A16AE8&quot;, color=&quot;#A16AE8&quot;];
+    decapsulate -&gt; decapsulate [label=&quot;EVP_PKEY_decapsulate&quot;, fontcolor=&quot;#A16AE8&quot;, color=&quot;#A16AE8&quot;];
+
+    newed -&gt; paramgen [label=&quot;EVP_PKEY_paramgen_init&quot;, fontcolor=&quot;#2879C0&quot;, color=&quot;#2879C0&quot;];
+    paramgen -&gt; paramgen [label=&quot;EVP_PKEY_paramgen\nEVP_PKEY_gen&quot;, fontcolor=&quot;#2879C0&quot;, color=&quot;#2879C0&quot;];
+
+    newed -&gt; keygen [label=&quot;EVP_PKEY_keygen_init&quot;, fontcolor=&quot;#2F7604&quot;, color=&quot;#2F7604&quot;];
+    keygen -&gt; keygen [label=&quot;EVP_PKEY_keygen\nEVP_PKEY_gen&quot;, fontcolor=&quot;#2F7604&quot;, color=&quot;#2F7604&quot;];
+}
diff --git a/doc/life-cycles/rand.dot b/doc/life-cycles/rand.dot
new file mode 100644
index 0000000000..5aa225f314
--- /dev/null
+++ b/doc/life-cycles/rand.dot
@@ -0,0 +1,15 @@
+strict digraph rand {
+    begin [label=start, color=&quot;#deeaee&quot;, style=&quot;filled&quot;];
+    newed [fontcolor=&quot;#c94c4c&quot;, style=&quot;solid&quot;];
+    instantiated [fontcolor=&quot;#c94c4c&quot;];
+    uninstantiated [fontcolor=&quot;#c94c4c&quot;];
+    end [label=&quot;freed&quot;, color=&quot;#deeaee&quot;, style=&quot;filled&quot;];
+
+    begin -&gt; newed [label=&quot;EVP_RAND_CTX_new&quot;];
+    newed -&gt; instantiated [label=&quot;EVP_RAND_instantiate&quot;];
+    instantiated -&gt; instantiated [label=&quot;EVP_RAND_generate&quot;];
+    instantiated -&gt; uninstantiated [label=&quot;EVP_RAND_uninstantiate&quot;];
+    uninstantiated -&gt; end [label=&quot;EVP_RAND_CTX_free&quot;];
+    uninstantiated -&gt; instantiated [label=&quot;EVP_RAND_instantiate&quot;, style=dashed, color=&quot;#034f84&quot;, fontcolor=&quot;#034f84&quot;];
+}
+ 
diff --git a/doc/man3/EVP_KDF.pod b/doc/man3/EVP_KDF.pod
index c5309dc430..5d7fa72b16 100644
--- a/doc/man3/EVP_KDF.pod
+++ b/doc/man3/EVP_KDF.pod
@@ -279,9 +279,16 @@ The remaining functions return 1 for success and 0 or a negative value for
 failure.  In particular, a return value of -2 indicates the operation is not
 supported by the KDF algorithm.
 
+=head1 NOTES
+
+The KDF life-cycle is described in L&lt;life_cycle-kdf(7)&gt;.  In the future,
+the transitions described there will be enforced.  When this is done, it will
+not be considered a breaking change to the API.
+
 =head1 SEE ALSO
 
-L&lt;OSSL_PROVIDER-default(7)/Key Derivation Function (KDF)&gt;
+L&lt;OSSL_PROVIDER-default(7)/Key Derivation Function (KDF)&gt;,
+L&lt;life_cycle-kdf(7)&gt;.
 
 =head1 HISTORY
 
diff --git a/doc/man3/EVP_MAC.pod b/doc/man3/EVP_MAC.pod
index 928ef52407..b4ad7209dd 100644
--- a/doc/man3/EVP_MAC.pod
+++ b/doc/man3/EVP_MAC.pod
@@ -304,6 +304,13 @@ EVP_MAC_init(), EVP_MAC_update() and EVP_MAC_final() for a full
 computation.
 Anything else may give undefined results.
 
+=head1 NOTES
+
+The MAC life-cycle is described in L&lt;life_cycle-mac(7)&gt;.  In the future,
+the transitions described there will be enforced.  When this is done, it will
+not be considered a breaking change to the API.
+
+
 =head1 RETURN VALUES
 
 EVP_MAC_fetch() returns a pointer to a newly fetched EVP_MAC, or
@@ -428,7 +435,9 @@ L&lt;EVP_MAC-GMAC(7)&gt;,
 L&lt;EVP_MAC-HMAC(7)&gt;,
 L&lt;EVP_MAC-KMAC(7)&gt;,
 L&lt;EVP_MAC-Siphash(7)&gt;,
-L&lt;EVP_MAC-Poly1305(7)&gt;
+L&lt;EVP_MAC-Poly1305(7)&gt;,
+L&lt;provider-mac(7)&gt;,
+L&lt;life_cycle-mac(7)&gt;
 
 =head1 HISTORY
 
diff --git a/doc/man3/EVP_RAND.pod b/doc/man3/EVP_RAND.pod
index 52cf5118d8..f550ec18e3 100644
--- a/doc/man3/EVP_RAND.pod
+++ b/doc/man3/EVP_RAND.pod
@@ -336,6 +336,10 @@ An B&lt;EVP_RAND_CTX&gt; needs to have locking enabled if it acts as the parent of
 more than one child and the children can be accessed concurrently.  This must
 be done by explicitly calling EVP_RAND_enable_locking().
 
+The RAND life-cycle is described in L&lt;life_cycle-rand(7)&gt;.  In the future,
+the transitions described there will be enforced.  When this is done, it will
+not be considered a breaking change to the API.
+
 =head1 RETURN VALUES
 
 EVP_RAND_fetch() returns a pointer to a newly fetched B&lt;EVP_RAND&gt;, or
@@ -382,7 +386,8 @@ L&lt;EVP_RAND-CTR-DRBG(7)&gt;,
 L&lt;EVP_RAND-HASH-DRBG(7)&gt;,
 L&lt;EVP_RAND-HMAC-DRBG(7)&gt;,
 L&lt;EVP_RAND-TEST-RAND(7)&gt;,
-L&lt;provider-rand(7)&gt;
+L&lt;provider-rand(7)&gt;,
+L&lt;life_cycle-rand(7)&gt;
 
 =head1 HISTORY
 
diff --git a/doc/man7/kdf.png b/doc/man7/kdf.png
new file mode 100644
index 0000000000..3a3d153af0
Binary files /dev/null and b/doc/man7/kdf.png differ
diff --git a/doc/man7/life_cycle-kdf.pod b/doc/man7/life_cycle-kdf.pod
new file mode 100644
index 0000000000..7237c4c13e
--- /dev/null
+++ b/doc/man7/life_cycle-kdf.pod
@@ -0,0 +1,165 @@
+=pod
+
+=head1 NAME
+
+life_cycle-kdf - The KDF algorithm life-cycle
+
+=head1 DESCRIPTION
+
+All key derivation functions (KDFs) and pseudo random functions (PRFs)
+go through a number of stages in their life-cycle:
+
+=over 4
+
+=item start
+
+This state represents the KDF/PRF before it has been allocated.  It is the
+starting state for any life-cycle transitions.
+
+=item newed
+
+This state represents the KDF/PRF after it has been allocated.
+
+=item deriving
+
+This state represents the KDF/PRF when it is set up and capable of generating
+output.
+
+=item freed
+
+This state is entered when the KDF/PRF is freed.  It is the terminal state
+for all life-cycle transitions.
+
+=back
+
+=head2 State Transition Diagram
+
+The usual life-cycle of a KDF/PRF is illustrated:
+
+=begin man
+
+                     +-------------------+
+                     |       start       |
+                     +-------------------+
+                       |
+                       | EVP_KDF_CTX_new
+                       v
+                     +-------------------+
+                     |       newed       | &lt;+
+                     +-------------------+  |
+                       |                    |
+                       | EVP_KDF_derive     |
+                       v                    | EVP_KDF_CTX_reset
+    EVP_KDF_derive   +-------------------+  |
+  + - - - - - - - -  |                   |  |
+  '                  |     deriving      |  |
+  + - - - - - - - -&gt; |                   | -+
+                     +-------------------+
+                       |
+                       | EVP_KDF_CTX_free
+                       v
+                     +-------------------+
+                     |       freed       |
+                     +-------------------+
+
+=end man
+
+=for html &lt;img src=&quot;kdf.png&quot;&gt;
+
+=head2 Formal State Transitions
+
+This section defines all of the legal state transitions.
+This is the canonical list.
+
+=begin man
+
+ Function Call                   ------------- Current State -------------
+                                 start       newed       deriving    freed
+ EVP_KDF_CTX_new                 newed           
+ EVP_KDF_derive                             deriving     deriving
+ EVP_KDF_CTX_free                freed       freed        freed
+ EVP_KDF_CTX_reset                           newed        newed
+ EVP_KDF_CTX_get_params                      newed       deriving
+ EVP_KDF_CTX_set_params                      newed       deriving
+ EVP_KDF_CTX_gettable_params                 newed       deriving
+ EVP_KDF_CTX_settable_params                 newed       deriving
+
+=end man
+
+=begin html
+
+&lt;table style=&quot;border:1px solid; border-collapse:collapse&quot;&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;Function Call&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; colspan=&quot;4&quot;&gt;Current State&lt;/th&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot;&gt;&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;start&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;deriving&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/th&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_KDF_CTX_new&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_KDF_derive&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;deriving&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_KDF_CTX_free&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;deriving&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_KDF_CTX_reset&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_KDF_CTX_get_params&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;deriving&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_KDF_CTX_set_params&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;deriving&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_KDF_CTX_gettable_params&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;deriving&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_KDF_CTX_settable_params&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;deriving&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;/table&gt;
+
+=end html
+
+=head1 NOTES
+
+At some point the EVP layer will begin enforcing the transitions described
+herein.
+
+=head1 SEE ALSO
+
+L&lt;provider-kdf(7)&gt;, L&lt;EVP_KDF(3)&gt;.
+
+=head1 HISTORY
+
+The provider KDF interface was introduced in OpenSSL 3.0.
+
+=head1 COPYRIGHT
+
+Copyright 2021 The OpenSSL Project Authors. All Rights Reserved.
+
+Licensed under the Apache License 2.0 (the &quot;License&quot;).  You may not use
+this file except in compliance with the License.  You can obtain a copy
+in the file LICENSE in the source distribution or at
+L&lt;<A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>&gt;.
+
+=cut
diff --git a/doc/man7/life_cycle-mac.pod b/doc/man7/life_cycle-mac.pod
new file mode 100644
index 0000000000..b9812f7cae
--- /dev/null
+++ b/doc/man7/life_cycle-mac.pod
@@ -0,0 +1,210 @@
+=pod
+
+=head1 NAME
+
+life_cycle-mac - The MAC algorithm life-cycle
+
+=head1 DESCRIPTION
+
+All message authentication codes (MACs)
+go through a number of stages in their life-cycle:
+
+=over 4
+
+=item start
+
+This state represents the MAC before it has been allocated.  It is the
+starting state for any life-cycle transitions.
+
+=item newed
+
+This state represents the MAC after it has been allocated.
+
+=item initialised
+
+This state represents the MAC when it is set up and capable of processing
+input.
+
+=item updated
+
+This state represents the MAC when it is set up and capable of processing
+additional input or generating output.
+
+=item finaled
+
+This state represents the MAC when it has generated output.
+
+=item freed
+
+This state is entered when the MAC is freed.  It is the terminal state
+for all life-cycle transitions.
+
+=back
+
+=head2 State Transition Diagram
+
+The usual life-cycle of a MAC is illustrated:
+
+=begin man
+
+                 +-------------------+
+                 |       start       |
+                 +-------------------+
+                   |
+                   | EVP_MAC_CTX_new
+                   v
+                 +-------------------+
+                 |       newed       |
+                 +-------------------+
+                   |
+                   | EVP_MAC_init
+                   v
+                 +-------------------+
+              +&gt; |    initialised    | &lt;+
+              |  +-------------------+  |
+              |    |                    |
+              |    | EVP_MAC_update     | EVP_MAC_init
+              |    v                    |
+ EVP_MAC_init |  +-------------------+  |
+              |  |      updated      | -+
+              |  +-------------------+
+              |    |
+              |    | EVP_MAC_final
+              |    v
+              |  +-------------------+
+              +- |      finaled      |
+                 +-------------------+
+                   |
+                   | EVP_MAC_CTX_free
+                   v
+                 +-------------------+
+                 |       freed       |
+                 +-------------------+
+
+=end man
+
+=for html &lt;img src=&quot;mac.png&quot;&gt;
+
+=head2 Formal State Transitions
+
+This section defines all of the legal state transitions.
+This is the canonical list.
+
+=begin man
+
+ Function Call                   ------------- Current State -------------
+                                 start   newed    initialised   updated     finaled   freed
+ EVP_MAC_CTX_new                 newed           
+ EVP_MAC_init                         initialised initialised initialised initialised
+ EVP_MAC_update                                     updated     updated
+ EVP_MAC_final                                                  finaled
+ EVP_MAC_CTX_free                freed   freed       freed       freed       freed
+ EVP_MAC_gettable_ctx_params             newed    initialised   updated    
+ EVP_MAC_settable_ctx_params             newed    initialised   updated
+ EVP_MAC_CTX_gettable_params             newed    initialised   updated
+ EVP_MAC_CTX_settable_params             newed    initialised   updated
+
+=end man
+
+=begin html
+
+&lt;table style=&quot;border:1px solid; border-collapse:collapse&quot;&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;Function Call&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; colspan=&quot;6&quot;&gt;Current State&lt;/th&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot;&gt;&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;start&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;initialised&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;updated&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;finaled&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/th&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_MAC_CTX_new&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_MAC_init&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;initialised&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;initialised&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;initialised&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;initialised&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_MAC_update&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;updated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;updated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_MAC_final&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;finaled&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_MAC_CTX_free&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_MAC_gettable_ctx_params&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;initialised&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;updated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_MAC_settable_ctx_params&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;initialised&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;updated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_MAC_CTX_gettable_params&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;initialised&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;updated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_MAC_CTX_settable_params&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;initialised&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;updated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;/table&gt;
+
+=end html
+
+=head1 NOTES
+
+At some point the EVP layer will begin enforcing the transitions described
+herein.
+
+=head1 SEE ALSO
+
+L&lt;provider-mac(7)&gt;, L&lt;EVP_MAC(3)&gt;.
+
+=head1 HISTORY
+
+The provider MAC interface was introduced in OpenSSL 3.0.
+
+=head1 COPYRIGHT
+
+Copyright 2021 The OpenSSL Project Authors. All Rights Reserved.
+
+Licensed under the Apache License 2.0 (the &quot;License&quot;).  You may not use
+this file except in compliance with the License.  You can obtain a copy
+in the file LICENSE in the source distribution or at
+L&lt;<A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>&gt;.
+
+=cut
diff --git a/doc/man7/life_cycle-rand.pod b/doc/man7/life_cycle-rand.pod
new file mode 100644
index 0000000000..b78b8484d2
--- /dev/null
+++ b/doc/man7/life_cycle-rand.pod
@@ -0,0 +1,193 @@
+=pod
+
+=head1 NAME
+
+life_cycle-rand - The RAND algorithm life-cycle
+
+=head1 DESCRIPTION
+
+All random number generator (RANDs)
+go through a number of stages in their life-cycle:
+
+=over 4
+
+=item start
+
+This state represents the RAND before it has been allocated.  It is the
+starting state for any life-cycle transitions.
+
+=item newed
+
+This state represents the RAND after it has been allocated but unable to
+generate any output.
+
+=item instantiated
+
+This state represents the RAND when it is set up and capable of generating
+output.
+
+=item uninstantiated
+
+This state represents the RAND when it has been shutdown and it is no longer
+capable of generating output.
+
+=item freed
+
+This state is entered when the RAND is freed.  It is the terminal state
+for all life-cycle transitions.
+
+=back
+
+=head2 State Transition Diagram
+
+The usual life-cycle of a RAND is illustrated:
+
+=begin man
+
+                        +-------------------------+
+                        |          start          |
+                        +-------------------------+
+                          |
+                          | EVP_RAND_CTX_new
+                          v
+                        +-------------------------+
+                        |          newed          |
+                        +-------------------------+
+                          |
+                          | EVP_RAND_instantiate
+                          v
+    EVP_RAND_generate   +-------------------------+
+  +-------------------- |                         |
+  |                     |      instantiated       |
+  +-------------------&gt; |                         | &lt;+
+                        +-------------------------+  '
+                          |                          '
+                          | EVP_RAND_uninstantiate   ' EVP_RAND_instantiate
+                          v                          '
+                        +-------------------------+  '
+                        |     uninstantiated      | -+
+                        +-------------------------+
+                          |
+                          | EVP_RAND_CTX_free
+                          v
+                        +-------------------------+
+                        |          freed          |
+                        +-------------------------+
+
+=end man
+
+=for html &lt;img src=&quot;rand.png&quot;&gt;
+
+=head2 Formal State Transitions
+
+This section defines all of the legal state transitions.
+This is the canonical list.
+
+=begin man
+
+ Function Call              ------------------ Current State ------------------
+                            start   newed   instantiated  uninstantiated  freed
+ EVP_RAND_CTX_new           newed       
+ EVP_RAND_instantiate            instantiated
+ EVP_RAND_generate                          instantiated
+ EVP_RAND_uninstantiate                    uninstantiated
+ EVP_RAND_CTX_free          freed   freed      freed          freed
+ EVP_RAND_get_ctx_params            newed   instantiated  uninstantiated  freed
+ EVP_RAND_set_ctx_params            newed   instantiated  uninstantiated  freed
+ EVP_RAND_CTX_gettable_params       newed   instantiated  uninstantiated  freed
+ EVP_RAND_CTX_settable_params       newed   instantiated  uninstantiated  freed
+
+=end man
+
+=begin html
+
+&lt;table style=&quot;border:1px solid; border-collapse:collapse&quot;&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;Function Call&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; colspan=&quot;5&quot;&gt;Current State&lt;/th&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot;&gt;&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;start&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;instantiated&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;uninstantiated&lt;/th&gt;
+    &lt;th style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/th&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_RAND_CTX_new&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_RAND_instantiate&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;instantiated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_RAND_generate&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;instantiated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_RAND_uninstantiate&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;uninstantiated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_RAND_CTX_free&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;freed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_RAND_get_ctx_params&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;instantiated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;uninstantiated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_RAND_set_ctx_params&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;instantiated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;uninstantiated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_RAND_CTX_gettable_params&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;instantiated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;uninstantiated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;tr&gt;&lt;th style=&quot;border:1px solid&quot; align=&quot;left&quot;&gt;EVP_RAND_CTX_settable_params&lt;/th&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;newed&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;instantiated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;uninstantiated&lt;/td&gt;
+    &lt;td style=&quot;border:1px solid&quot; align=&quot;center&quot;&gt;&lt;/td&gt;&lt;/tr&gt;
+&lt;/table&gt;
+
+=end html
+
+=head1 NOTES
+
+At some point the EVP layer will begin enforcing the transitions described
+herein.
+
+=head1 SEE ALSO
+
+L&lt;provider-rand(7)&gt;, L&lt;EVP_RAND(3)&gt;.
+
+=head1 HISTORY
+
+The provider RAND interface was introduced in OpenSSL 3.0.
+
+=head1 COPYRIGHT
+
+Copyright 2021 The OpenSSL Project Authors. All Rights Reserved.
+
+Licensed under the Apache License 2.0 (the &quot;License&quot;).  You may not use
+this file except in compliance with the License.  You can obtain a copy
+in the file LICENSE in the source distribution or at
+L&lt;<A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>&gt;.
+
+=cut
diff --git a/doc/man7/mac.png b/doc/man7/mac.png
new file mode 100644
index 0000000000..1c486e1ba4
Binary files /dev/null and b/doc/man7/mac.png differ
diff --git a/doc/man7/provider-kdf.pod b/doc/man7/provider-kdf.pod
index fb9e30a843..a13f3b108c 100644
--- a/doc/man7/provider-kdf.pod
+++ b/doc/man7/provider-kdf.pod
@@ -318,9 +318,15 @@ OSSL_FUNC_kdf_gettable_params(), OSSL_FUNC_kdf_gettable_ctx_params() and
 OSSL_FUNC_kdf_settable_ctx_params() should return a constant B&lt;OSSL_PARAM&gt;
 array, or NULL if none is offered.
 
+=head1 NOTES
+
+The KDF life-cycle is described in L&lt;life_cycle-kdf(7)&gt;.  Providers should
+ensure that the various transitions listed there are supported.  At some point
+the EVP layer will begin enforcing the listed transitions.
+
 =head1 SEE ALSO
 
-L&lt;provider(7)&gt;
+L&lt;provider(7)&gt;, L&lt;life_cycle-kdf(7)&gt;, L&lt;EVP_KDF(3)&gt;.
 
 =head1 HISTORY
 
diff --git a/doc/man7/provider-mac.pod b/doc/man7/provider-mac.pod
index 82bbdb9aa2..1f7810c16c 100644
--- a/doc/man7/provider-mac.pod
+++ b/doc/man7/provider-mac.pod
@@ -185,6 +185,12 @@ should have as well, see the documentation of the implementation.
 
 =back
 
+=head1 NOTES
+
+The MAC life-cycle is described in L&lt;life_cycle-rand(7)&gt;.  Providers should
+ensure that the various transitions listed there are supported.  At some point
+the EVP layer will begin enforcing the listed transitions.
+
 =head1 RETURN VALUES
 
 OSSL_FUNC_mac_newctx() and OSSL_FUNC_mac_dupctx() should return the newly created
@@ -203,8 +209,8 @@ array, or NULL if none is offered.
 L&lt;provider(7)&gt;,
 L&lt;EVP_MAC-BLAKE2(7)&gt;, L&lt;EVP_MAC-CMAC(7)&gt;, L&lt;EVP_MAC-GMAC(7)&gt;,
 L&lt;EVP_MAC-HMAC(7)&gt;, L&lt;EVP_MAC-KMAC(7)&gt;, L&lt;EVP_MAC-Poly1305(7)&gt;,
-L&lt;EVP_MAC-Siphash(7)&gt;
-
+L&lt;EVP_MAC-Siphash(7)&gt;,
+L&lt;life_cycle-mac(7)&gt;, L&lt;EVP_MAC(3)&gt;
 
 =head1 HISTORY
 
diff --git a/doc/man7/provider-rand.pod b/doc/man7/provider-rand.pod
index be81237610..951f483b60 100644
--- a/doc/man7/provider-rand.pod
+++ b/doc/man7/provider-rand.pod
@@ -272,11 +272,19 @@ error.
 
 All of the remaining functions should return 1 for success or 0 on error.
 
+=head1 NOTES
+
+The RAND life-cycle is described in L&lt;life_cycle-rand(7)&gt;.  Providers should
+ensure that the various transitions listed there are supported.  At some point
+the EVP layer will begin enforcing the listed transitions.
+
 =head1 SEE ALSO
 
 L&lt;provider(7)&gt;,
 L&lt;RAND(7)&gt;,
-L&lt;EVP_RAND(7)&gt;
+L&lt;EVP_RAND(7)&gt;,
+L&lt;life_cycle-rand(7)&gt;,
+L&lt;EVP_RAND(3)&gt;
 
 =head1 HISTORY
 
diff --git a/doc/man7/rand.png b/doc/man7/rand.png
new file mode 100644
index 0000000000..56d213f389
Binary files /dev/null and b/doc/man7/rand.png differ
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="033634.html">[openssl]  master update
</A></li>
	<LI>Next message: <A HREF="033638.html">[openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#33637">[ date ]</a>
              <a href="thread.html#33637">[ thread ]</a>
              <a href="subject.html#33637">[ subject ]</a>
              <a href="author.html#33637">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
