<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2015-March/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1427831987.971240.30320.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000829.html">
   <LINK REL="Next"  HREF="000831.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  master update</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1427831987.971240.30320.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  master update">levitte at openssl.org
       </A><BR>
    <I>Tue Mar 31 19:59:47 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000829.html">[openssl-commits] [openssl]  master update
</A></li>
        <LI>Next message: <A HREF="000831.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#830">[ date ]</a>
              <a href="thread.html#830">[ thread ]</a>
              <a href="subject.html#830">[ subject ]</a>
              <a href="author.html#830">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  5098c029cef9b81cbb7488ffc74e470bd79d0dac (commit)
      from  b9395187df44e630fbc90dcc530e55e37a920ed4 (commit)


- Log -----------------------------------------------------------------
commit 5098c029cef9b81cbb7488ffc74e470bd79d0dac
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Tue Mar 31 21:50:21 2015 +0200

    Remove SSL_TASK, the DECnet Based SSL Engine
    
    This engine is for VMS only, and isn't really part of the core OpenSSL
    but rather a side project of its own that just happens to have tagged
    along for a long time.  The reasons why it has remained within the
    OpenSSL source are long lost in history, and there not being any real
    reason for it to remain here, it's time for it to move out.
    
    This side project will appear as a project in its own right, the
    location of which will be announced later on.
    
    Reviewed-by: Tim Hudson &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tjh at openssl.org</A>&gt;

-----------------------------------------------------------------------

Summary of changes:
 crypto/bio/bss_rtcp.c | 321 -----------------------------------------
 crypto/crypto-lib.com |   2 +-
 makevms.com           |  35 +----
 ssl/ssl-lib.com       | 258 +--------------------------------
 ssl/ssl_task.c        | 389 --------------------------------------------------
 5 files changed, 3 insertions(+), 1002 deletions(-)
 delete mode 100644 crypto/bio/bss_rtcp.c
 delete mode 100644 ssl/ssl_task.c

diff --git a/crypto/bio/bss_rtcp.c b/crypto/bio/bss_rtcp.c
deleted file mode 100644
index 5c98a82..0000000
--- a/crypto/bio/bss_rtcp.c
+++ /dev/null
@@ -1,321 +0,0 @@
-/* crypto/bio/bss_rtcp.c */
-/* Copyright (C) 1995-1998 Eric Young (<A HREF="../../../mailman/listinfo/openssl-commits.html">eay at cryptsoft.com</A>)
- * All rights reserved.
- *
- * This package is an SSL implementation written
- * by Eric Young (<A HREF="../../../mailman/listinfo/openssl-commits.html">eay at cryptsoft.com</A>).
- * The implementation was written so as to conform with Netscapes SSL.
- *
- * This library is free for commercial and non-commercial use as long as
- * the following conditions are aheared to.  The following conditions
- * apply to all code found in this distribution, be it the RC4, RSA,
- * lhash, DES, etc., code; not just the SSL code.  The SSL documentation
- * included with this distribution is covered by the same copyright terms
- * except that the holder is Tim Hudson (<A HREF="../../../mailman/listinfo/openssl-commits.html">tjh at cryptsoft.com</A>).
- *
- * Copyright remains Eric Young's, and as such any Copyright notices in
- * the code are not to be removed.
- * If this package is used in a product, Eric Young should be given attribution
- * as the author of the parts of the library used.
- * This can be in the form of a textual message at program startup or
- * in documentation (online or textual) provided with the package.
- *
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following conditions
- * are met:
- * 1. Redistributions of source code must retain the copyright
- *    notice, this list of conditions and the following disclaimer.
- * 2. Redistributions in binary form must reproduce the above copyright
- *    notice, this list of conditions and the following disclaimer in the
- *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *    &quot;This product includes cryptographic software written by
- *     Eric Young (<A HREF="../../../mailman/listinfo/openssl-commits.html">eay at cryptsoft.com</A>)&quot;
- *    The word 'cryptographic' can be left out if the rouines from the library
- *    being used are not cryptographic related :-).
- * 4. If you include any Windows specific code (or a derivative thereof) from
- *    the apps directory (application code) you must include an acknowledgement:
- *    &quot;This product includes software written by Tim Hudson (<A HREF="../../../mailman/listinfo/openssl-commits.html">tjh at cryptsoft.com</A>)&quot;
- *
- * THIS SOFTWARE IS PROVIDED BY ERIC YOUNG ``AS IS'' AND
- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
- * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
- * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
- * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
- * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
- * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
- * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
- * SUCH DAMAGE.
- *
- * The licence and distribution terms for any publically available version or
- * derivative of this code cannot be changed.  i.e. this code cannot simply be
- * copied and put under another distribution licence
- * [including the GNU Public Licence.]
- */
-
-/*-
- * Written by David L. Jones &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">jonesd at kcgl1.eng.ohio-state.edu</A>&gt;
- * Date:   22-JUL-1996
- * Revised: 25-SEP-1997         Update for 0.8.1, BIO_CTRL_SET -&gt; BIO_C_SET_FD
- */
-/* VMS */
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;errno.h&gt;
-#include &quot;cryptlib.h&quot;
-#include &lt;openssl/bio.h&gt;
-
-#include &lt;iodef.h&gt;              /* VMS IO$_ definitions */
-#include &lt;starlet.h&gt;
-
-typedef unsigned short io_channel;
-/*************************************************************************/
-struct io_status {
-    short status, count;
-    long flags;
-};
-
-/* Should have member alignment inhibited */
-struct rpc_msg {
-    /* 'A'-app data. 'R'-remote client 'G'-global */
-    char channel;
-    /* 'G'-get, 'P'-put, 'C'-confirm, 'X'-close */
-    char function;
-    /* Amount of data returned or max to return */
-    unsigned short int length;
-    /* variable data */
-    char data[4092];
-};
-#define RPC_HDR_SIZE (sizeof(struct rpc_msg) - 4092)
-
-struct rpc_ctx {
-    int filled, pos;
-    struct rpc_msg msg;
-};
-
-static int rtcp_write(BIO *h, const char *buf, int num);
-static int rtcp_read(BIO *h, char *buf, int size);
-static int rtcp_puts(BIO *h, const char *str);
-static int rtcp_gets(BIO *h, char *str, int size);
-static long rtcp_ctrl(BIO *h, int cmd, long arg1, void *arg2);
-static int rtcp_new(BIO *h);
-static int rtcp_free(BIO *data);
-
-static BIO_METHOD rtcp_method = {
-    BIO_TYPE_FD,
-    &quot;RTCP&quot;,
-    rtcp_write,
-    rtcp_read,
-    rtcp_puts,
-    rtcp_gets,
-    rtcp_ctrl,
-    rtcp_new,
-    rtcp_free,
-    NULL,
-};
-
-BIO_METHOD *BIO_s_rtcp(void)
-{
-    return (&amp;rtcp_method);
-}
-
-/*****************************************************************************/
-/*
- * Decnet I/O routines.
- */
-
-#ifdef __DECC
-# pragma message save
-# pragma message disable DOLLARID
-#endif
-
-static int get(io_channel chan, char *buffer, int maxlen, int *length)
-{
-    int status;
-    struct io_status iosb;
-    status = sys$qiow(0, chan, IO$_READVBLK, &amp;iosb, 0, 0,
-                      buffer, maxlen, 0, 0, 0, 0);
-    if ((status &amp; 1) == 1)
-        status = iosb.status;
-    if ((status &amp; 1) == 1)
-        *length = iosb.count;
-    return status;
-}
-
-static int put(io_channel chan, char *buffer, int length)
-{
-    int status;
-    struct io_status iosb;
-    status = sys$qiow(0, chan, IO$_WRITEVBLK, &amp;iosb, 0, 0,
-                      buffer, length, 0, 0, 0, 0);
-    if ((status &amp; 1) == 1)
-        status = iosb.status;
-    return status;
-}
-
-#ifdef __DECC
-# pragma message restore
-#endif
-
-/***************************************************************************/
-
-static int rtcp_new(BIO *bi)
-{
-    struct rpc_ctx *ctx;
-    bi-&gt;init = 1;
-    bi-&gt;num = 0;
-    bi-&gt;flags = 0;
-    bi-&gt;ptr = OPENSSL_malloc(sizeof(struct rpc_ctx));
-    if (bi-&gt;ptr == NULL)
-        return (0);
-    ctx = (struct rpc_ctx *)bi-&gt;ptr;
-    ctx-&gt;filled = 0;
-    ctx-&gt;pos = 0;
-    return (1);
-}
-
-static int rtcp_free(BIO *a)
-{
-    if (a == NULL)
-        return (0);
-    if (a-&gt;ptr)
-        OPENSSL_free(a-&gt;ptr);
-    a-&gt;ptr = NULL;
-    return (1);
-}
-
-static int rtcp_read(BIO *b, char *out, int outl)
-{
-    int status, length;
-    struct rpc_ctx *ctx;
-    /*
-     * read data, return existing.
-     */
-    ctx = (struct rpc_ctx *)b-&gt;ptr;
-    if (ctx-&gt;pos &lt; ctx-&gt;filled) {
-        length = ctx-&gt;filled - ctx-&gt;pos;
-        if (length &gt; outl)
-            length = outl;
-        memmove(out, &amp;ctx-&gt;msg.data[ctx-&gt;pos], length);
-        ctx-&gt;pos += length;
-        return length;
-    }
-    /*
-     * Requst more data from R channel.
-     */
-    ctx-&gt;msg.channel = 'R';
-    ctx-&gt;msg.function = 'G';
-    ctx-&gt;msg.length = sizeof(ctx-&gt;msg.data);
-    status = put(b-&gt;num, (char *)&amp;ctx-&gt;msg, RPC_HDR_SIZE);
-    if ((status &amp; 1) == 0) {
-        return -1;
-    }
-    /*
-     * Read.
-     */
-    ctx-&gt;pos = ctx-&gt;filled = 0;
-    status = get(b-&gt;num, (char *)&amp;ctx-&gt;msg, sizeof(ctx-&gt;msg), &amp;length);
-    if ((status &amp; 1) == 0)
-        length = -1;
-    if (ctx-&gt;msg.channel != 'R' || ctx-&gt;msg.function != 'C') {
-        length = -1;
-    }
-    ctx-&gt;filled = length - RPC_HDR_SIZE;
-
-    if (ctx-&gt;pos &lt; ctx-&gt;filled) {
-        length = ctx-&gt;filled - ctx-&gt;pos;
-        if (length &gt; outl)
-            length = outl;
-        memmove(out, ctx-&gt;msg.data, length);
-        ctx-&gt;pos += length;
-        return length;
-    }
-
-    return length;
-}
-
-static int rtcp_write(BIO *b, const char *in, int inl)
-{
-    int status, i, segment, length;
-    struct rpc_ctx *ctx;
-    /*
-     * Output data, send in chunks no larger that sizeof(ctx-&gt;msg.data).
-     */
-    ctx = (struct rpc_ctx *)b-&gt;ptr;
-    for (i = 0; i &lt; inl; i += segment) {
-        segment = inl - i;
-        if (segment &gt; sizeof(ctx-&gt;msg.data))
-            segment = sizeof(ctx-&gt;msg.data);
-        ctx-&gt;msg.channel = 'R';
-        ctx-&gt;msg.function = 'P';
-        ctx-&gt;msg.length = segment;
-        memmove(ctx-&gt;msg.data, &amp;in[i], segment);
-        status = put(b-&gt;num, (char *)&amp;ctx-&gt;msg, segment + RPC_HDR_SIZE);
-        if ((status &amp; 1) == 0) {
-            i = -1;
-            break;
-        }
-
-        status = get(b-&gt;num, (char *)&amp;ctx-&gt;msg, sizeof(ctx-&gt;msg), &amp;length);
-        if (((status &amp; 1) == 0) || (length &lt; RPC_HDR_SIZE)) {
-            i = -1;
-            break;
-        }
-        if ((ctx-&gt;msg.channel != 'R') || (ctx-&gt;msg.function != 'C')) {
-            printf(&quot;unexpected response when confirming put %c %c\n&quot;,
-                   ctx-&gt;msg.channel, ctx-&gt;msg.function);
-
-        }
-    }
-    return (i);
-}
-
-static long rtcp_ctrl(BIO *b, int cmd, long num, void *ptr)
-{
-    long ret = 1;
-
-    switch (cmd) {
-    case BIO_CTRL_RESET:
-    case BIO_CTRL_EOF:
-        ret = 1;
-        break;
-    case BIO_C_SET_FD:
-        b-&gt;num = num;
-        ret = 1;
-        break;
-    case BIO_CTRL_SET_CLOSE:
-    case BIO_CTRL_FLUSH:
-    case BIO_CTRL_DUP:
-        ret = 1;
-        break;
-    case BIO_CTRL_GET_CLOSE:
-    case BIO_CTRL_INFO:
-    case BIO_CTRL_GET:
-    case BIO_CTRL_PENDING:
-    case BIO_CTRL_WPENDING:
-    default:
-        ret = 0;
-        break;
-    }
-    return (ret);
-}
-
-static int rtcp_gets(BIO *bp, char *buf, int size)
-{
-    return (0);
-}
-
-static int rtcp_puts(BIO *bp, const char *str)
-{
-    int length;
-    if (str == NULL)
-        return (0);
-    length = strlen(str);
-    if (length == 0)
-        return (0);
-    return rtcp_write(bp, str, length);
-}
diff --git a/crypto/crypto-lib.com b/crypto/crypto-lib.com
index 0514821..9495599 100644
--- a/crypto/crypto-lib.com
+++ b/crypto/crypto-lib.com
@@ -285,7 +285,7 @@ $ LIB_BIO = &quot;bio_lib,bio_cb,bio_err,&quot;+ -
 	&quot;bf_null,bf_buff,b_print,b_dump,&quot;+ -
 	&quot;b_sock,bss_acpt,bf_nbio,bss_log,bss_bio,&quot;+ -
 	&quot;bss_dgram,&quot;+ -
-	&quot;bf_lbuf,bss_rtcp&quot;	! The last two are VMS specific
+	&quot;bf_lbuf&quot;	! The last one is VMS specific
 $ LIB_STACK = &quot;stack&quot;
 $ LIB_LHASH = &quot;lhash,lh_stats&quot;
 $ LIB_RAND = &quot;md_rand,randfile,rand_lib,rand_err,rand_egd,&quot;+ -
diff --git a/makevms.com b/makevms.com
index 0f403db..fc7c0a4 100755
--- a/makevms.com
+++ b/makevms.com
@@ -26,7 +26,6 @@ $!      CRYPTO    Just build the &quot;[.xxx.EXE.CRYPTO]LIBCRYPTO.OLB&quot; library.
 $!      CRYPTO/x  Just build the x part of the
 $!                &quot;[.xxx.EXE.CRYPTO]LIBCRYPTO.OLB&quot; library.
 $!      SSL       Just build the &quot;[.xxx.EXE.SSL]LIBSSL.OLB&quot; library.
-$!      SSL_TASK  Just build the &quot;[.xxx.EXE.SSL]SSL_TASK.EXE&quot; program.
 $!      TEST      Just build the &quot;[.xxx.EXE.TEST]&quot; test programs for OpenSSL.
 $!      APPS      Just build the &quot;[.xxx.EXE.APPS]&quot; application programs for OpenSSL.
 $!      ENGINES   Just build the &quot;[.xxx.EXE.ENGINES]&quot; application programs for OpenSSL.
@@ -158,10 +157,6 @@ $!  Build The [.xxx.EXE.SSL]LIBSSL.OLB Library.
 $!
 $   GOSUB SSL
 $!
-$!  Build The [.xxx.EXE.SSL]SSL_TASK.EXE DECNet SSL Engine.
-$!
-$   GOSUB SSL_TASK
-$!
 $!  Build The [.xxx.EXE.TEST] OpenSSL Test Utilities.
 $!
 $   GOSUB TEST
@@ -920,33 +915,6 @@ $! Time To Return.
 $!
 $ RETURN
 $!
-$! Build The &quot;[.xxx.EXE.SSL]SSL_TASK.EXE&quot; Program.
-$!
-$ SSL_TASK:
-$!
-$! Tell The User What We Are Doing.
-$!
-$ WRITE SYS$OUTPUT &quot;&quot;
-$ WRITE SYS$OUTPUT -
-   &quot;Building DECNet Based SSL Engine, [.&quot;,ARCHD,&quot;.EXE.SSL]SSL_TASK.EXE&quot;
-$!
-$! Go To The [.SSL] Directory.
-$!
-$ SET DEFAULT SYS$DISK:[.SSL]
-$!
-$! Build The [.xxx.EXE.SSL]SSL_TASK.EXE
-$!
-$ @SSL-LIB SSL_TASK 'DEBUGGER' &quot;''COMPILER'&quot; &quot;''TCPIP_TYPE'&quot; -
-   &quot;''ISSEVEN'&quot; &quot;''POINTER_SIZE'&quot; &quot;''ZLIB'&quot;
-$!
-$! Go Back To The Main Directory.
-$!
-$ SET DEFAULT [-]
-$!
-$! That's All, Time To RETURN.
-$!
-$ RETURN
-$!
 $! Build The OpenSSL Test Programs.
 $!
 $ TEST:
@@ -1057,7 +1025,7 @@ $!
 $   IF (P1.EQS.&quot;CONFIG&quot;).OR.(P1.EQS.&quot;BUILDINF&quot;).OR.(P1.EQS.&quot;SOFTLINKS&quot;) -
        .OR.(P1.EQS.&quot;BUILDALL&quot;) -
        .OR.(P1.EQS.&quot;CRYPTO&quot;).OR.(P1.EQS.&quot;SSL&quot;) -
-       .OR.(P1.EQS.&quot;SSL_TASK&quot;).OR.(P1.EQS.&quot;TEST&quot;).OR.(P1.EQS.&quot;APPS&quot;) -
+       .OR.(P1.EQS.&quot;TEST&quot;).OR.(P1.EQS.&quot;APPS&quot;) -
        .OR.(P1.EQS.&quot;ENGINES&quot;)
 $   THEN
 $!
@@ -1087,7 +1055,6 @@ $     WRITE SYS$OUTPUT &quot;    CRYPTO   :  To Build Just The [.xxx.EXE.CRYPTO]LIBCR
 $     WRITE SYS$OUTPUT &quot;    CRYPTO/x :  To Build Just The x Part Of The&quot;
 $     WRITE SYS$OUTPUT &quot;                [.xxx.EXE.CRYPTO]LIBCRYPTO.OLB Library.&quot;
 $     WRITE SYS$OUTPUT &quot;    SSL      :  To Build Just The [.xxx.EXE.SSL]LIBSSL.OLB Library.&quot;
-$     WRITE SYS$OUTPUT &quot;    SSL_TASK :  To Build Just The [.xxx.EXE.SSL]SSL_TASK.EXE Program.&quot;
 $     WRITE SYS$OUTPUT &quot;    TEST     :  To Build Just The OpenSSL Test Programs.&quot;
 $     WRITE SYS$OUTPUT &quot;    APPS     :  To Build Just The OpenSSL Application Programs.&quot;
 $     WRITE SYS$OUTPUT &quot;    ENGINES  :  To Build Just The ENGINES&quot;
diff --git a/ssl/ssl-lib.com b/ssl/ssl-lib.com
index b160a0a..0df80f0 100644
--- a/ssl/ssl-lib.com
+++ b/ssl/ssl-lib.com
@@ -19,7 +19,6 @@ $!  Specify the following as P1 to build just that part or ALL to just
 $!  build everything.
 $!
 $!    		LIBRARY    To just compile the [.xxx.EXE.SSL]LIBSSL.OLB Library.
-$!    		SSL_TASK   To just compile the [.xxx.EXE.SSL]SSL_TASK.EXE
 $!
 $!  Specify DEBUG or NODEBUG as P2 to compile with or without debugger
 $!  information.
@@ -162,10 +161,6 @@ $! Define The CRYPTO-LIB We Are To Use.
 $!
 $ CRYPTO_LIB := SYS$DISK:[-.'ARCHD'.EXE.CRYPTO]SSL_LIBCRYPTO'LIB32'.OLB
 $!
-$! Set up exceptional compilations.
-$!
-$ CC5_SHOWN = 0
-$!
 $! Check To See What We Are To Do.
 $!
 $ IF (BUILDALL.EQS.&quot;TRUE&quot;)
@@ -174,7 +169,6 @@ $!
 $!  Since Nothing Special Was Specified, Do Everything.
 $!
 $   GOSUB LIBRARY
-$   GOSUB SSL_TASK
 $!
 $! Else...
 $!
@@ -223,8 +217,6 @@ $ LIB_SSL = &quot;s3_meth,  s3_srvr, s3_clnt, s3_lib, s3_enc,s3_pkt,s3_both,s3_cbc,&quot;+
 	    &quot;ssl_asn1,ssl_txt,ssl_algs,ssl_conf,&quot;+ -
 	    &quot;bio_ssl,ssl_err,kssl,t1_reneg,tls_srp,t1_trce,ssl_utst&quot;
 $!
-$ COMPILEWITH_CC5 = &quot;&quot;
-$!
 $! Tell The User That We Are Compiling The Library.
 $!
 $ WRITE SYS$OUTPUT &quot;Building The &quot;,SSL_LIB,&quot; Library.&quot;
@@ -309,251 +301,6 @@ $!
 $! Time To RETURN.
 $!
 $ RETURN
-$ SSL_TASK:
-$!
-$! Check To See If We Have The Proper Libraries.
-$!
-$ GOSUB LIB_CHECK
-$!
-$! Check To See If We Have A Linker Option File.
-$!
-$ GOSUB CHECK_OPT_FILE
-$!
-$! Check To See If The File We Want To Compile Is Actually There.
-$!
-$ IF (F$SEARCH(&quot;SYS$DISK:[]SSL_TASK.C&quot;).EQS.&quot;&quot;)
-$ THEN
-$!
-$!  Tell The User That The File Dosen't Exist.
-$!
-$   WRITE SYS$OUTPUT &quot;&quot;
-$   WRITE SYS$OUTPUT &quot;The File SSL_TASK.C Dosen't Exist.&quot;
-$   WRITE SYS$OUTPUT &quot;&quot;
-$!
-$!  Exit The Build.
-$!
-$   EXIT
-$!
-$! End The SSL_TASK.C File Check.
-$!
-$ ENDIF
-$!
-$ COMPILEWITH_CC5 = &quot;&quot; !!! &quot;,ssl_task,&quot;
-$!
-$! Tell The User We Are Creating The SSL_TASK.
-$!
-$! Tell The User We Are Creating The SSL_TASK.
-$!
-$ WRITE SYS$OUTPUT &quot;Creating SSL_TASK OSU HTTP SSL Engine.&quot;	
-$!
-$!  Tell The User What File We Are Compiling.
-$!
-$ FILE_NAME = &quot;ssl_task&quot;
-$ WRITE SYS$OUTPUT &quot;	&quot;,FILE_NAME,&quot;.c&quot;
-$!
-$! Compile The File.
-$!
-$ ON ERROR THEN GOTO SSL_TASK_END
-$!
-$ FILE_NAME0 = &quot;,&quot;+ F$ELEMENT(0,&quot;.&quot;,FILE_NAME)+ &quot;,&quot;
-$ IF COMPILEWITH_CC5 - FILE_NAME0 .NES. COMPILEWITH_CC5
-$ THEN
-$   if (.not. CC5_SHOWN)
-$   then
-$     CC5_SHOWN = 1
-$     write sys$output &quot;        \Using special rule (5)&quot;
-$     x = &quot;    &quot;+ CC5
-$     write /symbol sys$output x
-$   endif
-$   CC5 /OBJECT='OBJ_DIR''FILE_NAME'.OBJ SYS$DISK:[]'FILE_NAME'.C
-$ ELSE
-$   CC /OBJECT='OBJ_DIR''FILE_NAME'.OBJ SYS$DISK:[]'FILE_NAME'.C
-$ ENDIF
-$!
-$! Link The Program.
-$!
-$ LINK /'DEBUGGER' /'LINKMAP' /'TRACEBACK' /EXE='EXE_DIR'SSL_TASK.EXE -
-   'OBJ_DIR'SSL_TASK.OBJ, -
-   'SSL_LIB'/LIBRARY, -
-   'CRYPTO_LIB'/LIBRARY -
-   'TCPIP_LIB' -
-   'ZLIB_LIB' -
-   ,'OPT_FILE' /OPTIONS
-$!
-$! Time To Return.
-$!
-$SSL_TASK_END:
-$ RETURN
-$!
-$! Check For The Link Option FIle.
-$!
-$ CHECK_OPT_FILE:
-$!
-$! Check To See If We Need To Make A VAX C Option File.
-$!
-$ IF (COMPILER.EQS.&quot;VAXC&quot;)
-$ THEN
-$!
-$!  Check To See If We Already Have A VAX C Linker Option File.
-$!
-$   IF (F$SEARCH(OPT_FILE).EQS.&quot;&quot;)
-$   THEN
-$!
-$!    We Need A VAX C Linker Option File.
-$!
-$     CREATE 'OPT_FILE'
-$DECK
-!
-! Default System Options File To Link Against 
-! The Sharable VAX C Runtime Library.
-!
-SYS$SHARE:VAXCRTL.EXE/SHARE
-$EOD
-$!
-$!  End The Option File Check.
-$!
-$   ENDIF
-$!
-$! End The VAXC Check.
-$!
-$ ENDIF
-$!
-$! Check To See If We Need A GNU C Option File.
-$!
-$ IF (COMPILER.EQS.&quot;GNUC&quot;)
-$ THEN
-$!
-$!  Check To See If We Already Have A GNU C Linker Option File.
-$!
-$   IF (F$SEARCH(OPT_FILE).EQS.&quot;&quot;)
-$   THEN
-$!
-$!    We Need A GNU C Linker Option File.
-$!
-$     CREATE 'OPT_FILE'
-$DECK
-!
-! Default System Options File To Link Against 
-! The Sharable C Runtime Library.
-!
-GNU_CC:[000000]GCCLIB/LIBRARY
-SYS$SHARE:VAXCRTL/SHARE
-$EOD
-$!
-$!  End The Option File Check.
-$!
-$   ENDIF
-$!
-$! End The GNU C Check.
-$!
-$ ENDIF
-$!
-$! Check To See If We Need A DEC C Option File.
-$!
-$ IF (COMPILER.EQS.&quot;DECC&quot;)
-$ THEN
-$!
-$!  Check To See If We Already Have A DEC C Linker Option File.
-$!
-$   IF (F$SEARCH(OPT_FILE).EQS.&quot;&quot;)
-$   THEN
-$!
-$!    Figure Out If We Need A non-VAX Or A VAX Linker Option File.
-$!
-$     IF (ARCH.EQS.&quot;VAX&quot;)
-$     THEN
-$!
-$!      We Need A DEC C Linker Option File For VAX.
-$!
-$       CREATE 'OPT_FILE'
-$DECK
-!
-! Default System Options File To Link Against 
-! The Sharable DEC C Runtime Library.
-!
-SYS$SHARE:DECC$SHR.EXE/SHARE
-$EOD
-$!
-$!    Else...
-$!
-$     ELSE
-$!
-$!      Create The non-VAX Linker Option File.
-$!
-$       CREATE 'OPT_FILE'
-$DECK
-!
-! Default System Options File For non-VAX To Link Against 
-! The Sharable C Runtime Library.
-!
-SYS$SHARE:CMA$OPEN_LIB_SHR/SHARE
-SYS$SHARE:CMA$OPEN_RTL/SHARE
-$EOD
-$!
-$!    End The DEC C Option File Check.
-$!
-$     ENDIF
-$!
-$!  End The Option File Search.
-$!
-$   ENDIF
-$!
-$! End The DEC C Check.
-$!
-$ ENDIF
-$!
-$!  Tell The User What Linker Option File We Are Using.
-$!
-$ WRITE SYS$OUTPUT &quot;Using Linker Option File &quot;,OPT_FILE,&quot;.&quot;	
-$!
-$! Time To RETURN.
-$!
-$ RETURN
-$ LIB_CHECK:
-$!
-$! Look For The VAX Library LIBSSL.OLB.
-$!
-$ IF (F$SEARCH(SSL_LIB).EQS.&quot;&quot;)
-$ THEN
-$!
-$!  Tell The User We Can't Find The LIBSSL.OLB Library.
-$!
-$   WRITE SYS$OUTPUT &quot;&quot;
-$   WRITE SYS$OUTPUT &quot;Can't Find The Library &quot;,SSL_LIB,&quot;.&quot;
-$   WRITE SYS$OUTPUT &quot;We Can't Link Without It.&quot;
-$   WRITE SYS$OUTPUT &quot;&quot;
-$!
-$!  Since We Can't Link Without It, Exit.
-$!
-$   EXIT
-$!
-$! End The LIBSSL.OLB Library Check.
-$!
-$ ENDIF
-$!
-$! Look For The Library LIBCRYPTO.OLB.
-$!
-$ IF (F$SEARCH(CRYPTO_LIB).EQS.&quot;&quot;)
-$ THEN
-$!
-$!  Tell The User We Can't Find The LIBCRYPTO.OLB Library.
-$!
-$   WRITE SYS$OUTPUT &quot;&quot;
-$   WRITE SYS$OUTPUT &quot;Can't Find The Library &quot;,CRYPTO_LIB,&quot;.&quot;
-$   WRITE SYS$OUTPUT &quot;We Can't Link Without It.&quot;
-$   WRITE SYS$OUTPUT &quot;&quot;
-$!
-$!  Since We Can't Link Without It, Exit.
-$!
-$   EXIT
-$!
-$! End The LIBCRYPTO.OLB Library Check.
-$!
-$ ENDIF
-$!
-$! Time To Return.
-$!
-$ RETURN
 $!
 $! Check The User's Options.
 $!
@@ -574,7 +321,7 @@ $ ELSE
 $!
 $!  Else, Check To See If P1 Has A Valid Argument.
 $!
-$   IF (P1.EQS.&quot;LIBRARY&quot;).OR.(P1.EQS.&quot;SSL_TASK&quot;)
+$   IF (P1.EQS.&quot;LIBRARY&quot;)
 $   THEN
 $!
 $!    A Valid Argument.
@@ -592,7 +339,6 @@ $     WRITE SYS$OUTPUT &quot;The Option &quot;,P1,&quot; Is Invalid.  The Valid Options Are:&quot;
 $     WRITE SYS$OUTPUT &quot;&quot;
 $     WRITE SYS$OUTPUT &quot;    ALL      :  Just Build Everything.&quot;
 $     WRITE SYS$OUTPUT &quot;    LIBRARY  :  To Compile Just The [.xxx.EXE.SSL]LIBSSL.OLB Library.&quot;
-$     WRITE SYS$OUTPUT &quot;    SSL_TASK :  To Compile Just The [.xxx.EXE.SSL]SSL_TASK.EXE Program.&quot;
 $     WRITE SYS$OUTPUT &quot;&quot;
 $     WRITE SYS$OUTPUT &quot; Where 'xxx' Stands For:&quot;
 $     WRITE SYS$OUTPUT &quot;&quot;
@@ -1039,10 +785,8 @@ $   CC = CC + &quot; /DEFINE=(&quot; + CCDEFS + &quot;)&quot; + CCDISABLEWARNINGS
 $   IF COMPILER .EQS. &quot;DECC&quot;
 $   THEN
 $     CC4 = CC - CCDISABLEWARNINGS + CC4DISABLEWARNINGS
-$     CC5 = CC3 - CCDISABLEWARNINGS + CC4DISABLEWARNINGS
 $   ELSE
 $     CC4 = CC
-$     CC5 = CC3
 $   ENDIF
 $!
 $!  Show user the result
diff --git a/ssl/ssl_task.c b/ssl/ssl_task.c
deleted file mode 100644
index d5ca89f..0000000
--- a/ssl/ssl_task.c
+++ /dev/null
@@ -1,389 +0,0 @@
-/* ssl/ssl_task.c */
-/* Copyright (C) 1995-1998 Eric Young (<A HREF="../../../mailman/listinfo/openssl-commits.html">eay at cryptsoft.com</A>)
- * All rights reserved.
- *
- * This package is an SSL implementation written
- * by Eric Young (<A HREF="../../../mailman/listinfo/openssl-commits.html">eay at cryptsoft.com</A>).
- * The implementation was written so as to conform with Netscapes SSL.
- *
- * This library is free for commercial and non-commercial use as long as
- * the following conditions are aheared to.  The following conditions
- * apply to all code found in this distribution, be it the RC4, RSA,
- * lhash, DES, etc., code; not just the SSL code.  The SSL documentation
- * included with this distribution is covered by the same copyright terms
- * except that the holder is Tim Hudson (<A HREF="../../../mailman/listinfo/openssl-commits.html">tjh at cryptsoft.com</A>).
- *
- * Copyright remains Eric Young's, and as such any Copyright notices in
- * the code are not to be removed.
- * If this package is used in a product, Eric Young should be given attribution
- * as the author of the parts of the library used.
- * This can be in the form of a textual message at program startup or
- * in documentation (online or textual) provided with the package.
- *
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following conditions
- * are met:
- * 1. Redistributions of source code must retain the copyright
- *    notice, this list of conditions and the following disclaimer.
- * 2. Redistributions in binary form must reproduce the above copyright
- *    notice, this list of conditions and the following disclaimer in the
- *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *    &quot;This product includes cryptographic software written by
- *     Eric Young (<A HREF="../../../mailman/listinfo/openssl-commits.html">eay at cryptsoft.com</A>)&quot;
- *    The word 'cryptographic' can be left out if the rouines from the library
- *    being used are not cryptographic related :-).
- * 4. If you include any Windows specific code (or a derivative thereof) from
- *    the apps directory (application code) you must include an acknowledgement:
- *    &quot;This product includes software written by Tim Hudson (<A HREF="../../../mailman/listinfo/openssl-commits.html">tjh at cryptsoft.com</A>)&quot;
- *
- * THIS SOFTWARE IS PROVIDED BY ERIC YOUNG ``AS IS'' AND
- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
- * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
- * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
- * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
- * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
- * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
- * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
- * SUCH DAMAGE.
- *
- * The licence and distribution terms for any publically available version or
- * derivative of this code cannot be changed.  i.e. this code cannot simply be
- * copied and put under another distribution licence
- * [including the GNU Public Licence.]
- */
-
-/* VMS */
-/*-
- * DECnet object for servicing SSL.  We accept the inbound and speak a
- * simple protocol for multiplexing the 2 data streams (application and
- * ssl data) over this logical link.
- *
- * Logical names:
- *    SSL_CIPHER        Defines a list of cipher specifications the server
- *                      will support in order of preference.
- *    SSL_SERVER_CERTIFICATE
- *                      Points to PEM (privacy enhanced mail) file that
- *                      contains the server certificate and private password.
- *    SYS$NET           Logical created by netserver.exe as hook for completing
- *                      DECnet logical link.
- *
- * Each NSP message sent over the DECnet link has the following structure:
- *    struct rpc_msg {
- *      char channel;
- *      char function;
- *      short length;
- *      char data[MAX_DATA];
- *    } msg;
- *
- * The channel field designates the virtual data stream this message applies
- * to and is one of:
- *   A - Application data (payload).
- *   R - Remote client connection that initiated the SSL connection.  Encrypted
- *       data is sent over this connection.
- *   G - General data, reserved for future use.
- *
- * The data streams are half-duplex read/write and have following functions:
- *   G - Get, requests that up to msg.length bytes of data be returned.  The
- *       data is returned in the next 'C' function response that matches the
- *       requesting channel.
- *   P - Put, requests that the first msg.length bytes of msg.data be appended
- *       to the designated stream.
- *   C - Confirms a get or put.  Every get and put will get a confirm response,
- *       you cannot initiate another function on a channel until the previous
- *       operation has been confirmed.
- *
- *  The 2 channels may interleave their operations, for example:
- *        Server msg           Client msg
- *         A, Get, 4092          ----&gt;
- *                               &lt;----  R, get, 4092
- *         R, Confirm, {hello}   ----&gt;
- *                               &lt;----  R, put, {srv hello}
- *         R, Confirm, 0         ----&gt;
- *                               .              (SSL handshake completed)
- *                               .              (read first app data).
- *                               &lt;----  A, confirm, {http data}
- *         A, Put, {http data}   ----&gt;
- *                               &lt;----  A, confirm, 0
- *
- *  The length field is not permitted to be larger that 4092 bytes.
- *
- * Author: Dave Jones
- * Date:   22-JUL-1996
- */
-#include &lt;stdlib.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;iodef.h&gt;              /* VMS IO$_ definitions */
-#include &lt;descrip.h&gt;            /* VMS string descriptors */
-extern int SYS$QIOW(), SYS$ASSIGN();
-int LIB$INIT_TIMER(), LIB$SHOW_TIMER();
-
-#include &lt;string.h&gt;             /* from ssltest.c */
-#include &lt;errno.h&gt;
-
-#include &quot;e_os.h&quot;
-
-#include &lt;openssl/buffer.h&gt;
-#include &lt;openssl/x509.h&gt;
-#include &lt;openssl/err.h&gt;
-#include &quot;ssl_locl.h&quot;
-
-int verify_callback(int ok, X509 *xs, X509 *xi, int depth,
-		    int error);
-BIO *bio_err = NULL;
-BIO *bio_stdout = NULL;
-BIO_METHOD *BIO_s_rtcp();
-
-static char *cipher = NULL;
-int verbose = 1;
-#ifdef FIONBIO
-static int s_nbio = 0;
-#endif
-#define TEST_SERVER_CERT &quot;SSL_SERVER_CERTIFICATE&quot;
-/*************************************************************************/
-/* Should have member alignment inhibited */
-struct rpc_msg {
-    /* 'A'-app data. 'R'-remote client 'G'-global */
-    char channel;
-    /* 'G'-get, 'P'-put, 'C'-confirm, 'X'-close */
-    char function;
-    /* Amount of data returned or max to return */
-    unsigned short int length;
-    /* variable data */
-    char data[4092];
-};
-#define RPC_HDR_SIZE (sizeof(struct rpc_msg) - 4092)
-
-static $DESCRIPTOR(sysnet, &quot;SYS$NET&quot;);
-typedef unsigned short io_channel;
-
-struct io_status {
-    unsigned short status;
-    unsigned short count;
-    unsigned long stsval;
-};
-int doit(io_channel chan, SSL_CTX *s_ctx);
-/*****************************************************************************/
-/*
- * Decnet I/O routines.
- */
-static int get(io_channel chan, char *buffer, int maxlen, int *length)
-{
-    int status;
-    struct io_status iosb;
-    status = SYS$QIOW(0, chan, IO$_READVBLK, &amp;iosb, 0, 0,
-                      buffer, maxlen, 0, 0, 0, 0);
-    if ((status &amp; 1) == 1)
-        status = iosb.status;
-    if ((status &amp; 1) == 1)
-        *length = iosb.count;
-    return status;
-}
-
-static int put(io_channel chan, char *buffer, int length)
-{
-    int status;
-    struct io_status iosb;
-    status = SYS$QIOW(0, chan, IO$_WRITEVBLK, &amp;iosb, 0, 0,
-                      buffer, length, 0, 0, 0, 0);
-    if ((status &amp; 1) == 1)
-        status = iosb.status;
-    return status;
-}
-
-/***************************************************************************/
-/*
- * Handle operations on the 'G' channel.
- */
-static int general_request(io_channel chan, struct rpc_msg *msg, int length)
-{
-    return 48;
-}
-
-/***************************************************************************/
-int main(int argc, char **argv)
-{
-    int status, length;
-    io_channel chan;
-    struct rpc_msg msg;
-
-    char *CApath = NULL, *CAfile = NULL;
-    int badop = 0;
-    int ret = 1;
-    int client_auth = 0;
-    int server_auth = 0;
-    SSL_CTX *s_ctx = NULL;
-    /*
-     * Confirm logical link with initiating client.
-     */
-    LIB$INIT_TIMER();
-    status = SYS$ASSIGN(&amp;sysnet, &amp;chan, 0, 0, 0);
-    printf(&quot;status of assign to SYS$NET: %d\n&quot;, status);
-    /*
-     * Initialize standard out and error files.
-     */
-    if (bio_err == NULL)
-        if ((bio_err = BIO_new(BIO_s_file())) != NULL)
-            BIO_set_fp(bio_err, stderr, BIO_NOCLOSE);
-    if (bio_stdout == NULL)
-        if ((bio_stdout = BIO_new(BIO_s_file())) != NULL)
-            BIO_set_fp(bio_stdout, stdout, BIO_NOCLOSE);
-    /*
-     * get the preferred cipher list and other initialization
-     */
-    if (cipher == NULL)
-        cipher = getenv(&quot;SSL_CIPHER&quot;);
-    printf(&quot;cipher list: %s\n&quot;, cipher ? cipher : &quot;{undefined}&quot;);
-
-    SSL_load_error_strings();
-    OpenSSL_add_all_algorithms();
-
-    s_ctx = SSL_CTX_new(SSLv23_server_method());
-
-    if (s_ctx == NULL)
-        goto end;
-
-    SSL_CTX_use_certificate_file(s_ctx, TEST_SERVER_CERT, SSL_FILETYPE_PEM);
-    SSL_CTX_use_RSAPrivateKey_file(s_ctx, TEST_SERVER_CERT, SSL_FILETYPE_PEM);
-    printf(&quot;Loaded server certificate: '%s'\n&quot;, TEST_SERVER_CERT);
-
-    /*
-     * Take commands from client until bad status.
-     */
-    LIB$SHOW_TIMER();
-    status = doit(chan, s_ctx);
-    LIB$SHOW_TIMER();
-    /*
-     * do final cleanup and exit.
-     */
- end:
-    if (s_ctx != NULL)
-        SSL_CTX_free(s_ctx);
-    LIB$SHOW_TIMER();
-    return 1;
-}
-
-int doit(io_channel chan, SSL_CTX *s_ctx)
-{
-    int status, length, link_state;
-    struct rpc_msg msg;
-
-    SSL *s_ssl = NULL;
-    BIO *c_to_s = NULL;
-    BIO *s_to_c = NULL;
-    BIO *c_bio = NULL;
-    BIO *s_bio = NULL;
-    int i;
-    int done = 0;
-
-    s_ssl = SSL_new(s_ctx);
-    if (s_ssl == NULL)
-        goto err;
-
-    c_to_s = BIO_new(BIO_s_rtcp());
-    s_to_c = BIO_new(BIO_s_rtcp());
-    if ((s_to_c == NULL) || (c_to_s == NULL))
-        goto err;
-/*- original, DRM 24-SEP-1997
-    BIO_set_fd ( c_to_s, &quot;&quot;, chan );
-    BIO_set_fd ( s_to_c, &quot;&quot;, chan );
-*/
-    BIO_set_fd(c_to_s, 0, chan);
-    BIO_set_fd(s_to_c, 0, chan);
-
-    c_bio = BIO_new(BIO_f_ssl());
-    s_bio = BIO_new(BIO_f_ssl());
-    if ((c_bio == NULL) || (s_bio == NULL))
-        goto err;
-
-    SSL_set_accept_state(s_ssl);
-    SSL_set_bio(s_ssl, c_to_s, s_to_c);
-    BIO_set_ssl(s_bio, s_ssl, BIO_CLOSE);
-
-    /* We can always do writes */
-    printf(&quot;Begin doit main loop\n&quot;);
-    /*
-     * Link states: 0-idle, 1-read pending, 2-write pending, 3-closed.
-     */
-    for (link_state = 0; link_state &lt; 3;) {
-        /*
-         * Wait for remote end to request data action on A channel.
-         */
-        while (link_state == 0) {
-            status = get(chan, (char *)&amp;msg, sizeof(msg), &amp;length);
-            if ((status &amp; 1) == 0) {
-                printf(&quot;Error in main loop get: %d\n&quot;, status);
-                link_state = 3;
-                break;
-            }
-            if (length &lt; RPC_HDR_SIZE) {
-                printf(&quot;Error in main loop get size: %d\n&quot;, length);
-                break;
-                link_state = 3;
-            }
-            if (msg.channel != 'A') {
-                printf(&quot;Error in main loop, unexpected channel: %c\n&quot;,
-                       msg.channel);
-                break;
-                link_state = 3;
-            }
-            if (msg.function == 'G') {
-                link_state = 1;
-            } else if (msg.function == 'P') {
-                link_state = 2; /* write pending */
-            } else if (msg.function == 'X') {
-                link_state = 3;
-            } else {
-                link_state = 3;
-            }
-        }
-        if (link_state == 1) {
-            i = BIO_read(s_bio, msg.data, msg.length);
-            if (i &lt; 0)
-                link_state = 3;
-            else {
-                msg.channel = 'A';
-                msg.function = 'C'; /* confirm */
-                msg.length = i;
-                status = put(chan, (char *)&amp;msg, i + RPC_HDR_SIZE);
-                if ((status &amp; 1) == 0)
-                    break;
-                link_state = 0;
-            }
-        } else if (link_state == 2) {
-            i = BIO_write(s_bio, msg.data, msg.length);
-            if (i &lt; 0)
-                link_state = 3;
-            else {
-                msg.channel = 'A';
-                msg.function = 'C'; /* confirm */
-                msg.length = 0;
-                status = put(chan, (char *)&amp;msg, RPC_HDR_SIZE);
-                if ((status &amp; 1) == 0)
-                    break;
-                link_state = 0;
-            }
-        }
-    }
-    fprintf(stdout, &quot;DONE\n&quot;);
- err:
-    /*
-     * We have to set the BIO's to NULL otherwise they will be free()ed
-     * twice.  Once when th s_ssl is SSL_free()ed and again when c_ssl is
-     * SSL_free()ed. This is a hack required because s_ssl and c_ssl are
-     * sharing the same BIO structure and SSL_set_bio() and SSL_free()
-     * automatically BIO_free non NULL entries. You should not normally do
-     * this or be required to do this
-     */
-    s_ssl-&gt;rbio = NULL;
-    s_ssl-&gt;wbio = NULL;
-
-    BIO_free(c_to_s);
-    BIO_free(s_to_c);
-    BIO_free(c_bio);
-    BIO_free(s_bio);
-    return (0);
-}
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000829.html">[openssl-commits] [openssl]  master update
</A></li>
	<LI>Next message: <A HREF="000831.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#830">[ date ]</a>
              <a href="thread.html#830">[ thread ]</a>
              <a href="subject.html#830">[ subject ]</a>
              <a href="author.html#830">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
