<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2016-June/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1466282077.586959.4539.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008326.html">
   <LINK REL="Next"  HREF="008369.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  master update</H1>
    <B>Rich Salz</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1466282077.586959.4539.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  master update">rsalz at openssl.org
       </A><BR>
    <I>Sat Jun 18 20:34:37 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="008326.html">[openssl-commits] [openssl]  master update
</A></li>
        <LI>Next message: <A HREF="008369.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8338">[ date ]</a>
              <a href="thread.html#8338">[ thread ]</a>
              <a href="subject.html#8338">[ subject ]</a>
              <a href="author.html#8338">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  a8db2cfa4b293f3db9566a305a26109c4fde74b2 (commit)
       via  823146d65fe145eb6024d84ab50ed63ba9f8705c (commit)
       via  93b8981d894fbac19e0478f87ede72f1a1b813ce (commit)
       via  5ab0b7e6263ab0ff666133cefbf1e4d1f91e867d (commit)
       via  b1b1cba4e2ae76bc3b8390842c8482dc0b3358ca (commit)
      from  1dcb8ca2a4aa71964105b24fa7c6254a58b7ad35 (commit)


- Log -----------------------------------------------------------------
commit a8db2cfa4b293f3db9566a305a26109c4fde74b2
Author: FdaSilvaYY &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">fdasilvayy at gmail.com</A>&gt;
Date:   Fri Jun 10 22:37:32 2016 +0200

    Add a comment after some #endif at end of apps source code.
    
    Reviewed-by: Kurt Roeckx &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">kurt at openssl.org</A>&gt;
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/1168">https://github.com/openssl/openssl/pull/1168</A>)

commit 823146d65fe145eb6024d84ab50ed63ba9f8705c
Author: FdaSilvaYY &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">fdasilvayy at gmail.com</A>&gt;
Date:   Sun Jun 5 00:35:42 2016 +0200

    Useless header include of openssl/rand.h
    
    Reviewed-by: Kurt Roeckx &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">kurt at openssl.org</A>&gt;
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/1168">https://github.com/openssl/openssl/pull/1168</A>)

commit 93b8981d894fbac19e0478f87ede72f1a1b813ce
Author: FdaSilvaYY &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">fdasilvayy at gmail.com</A>&gt;
Date:   Fri Mar 25 20:04:12 2016 +0100

    Useless includes
    
    Reviewed-by: Kurt Roeckx &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">kurt at openssl.org</A>&gt;
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/1168">https://github.com/openssl/openssl/pull/1168</A>)

commit 5ab0b7e6263ab0ff666133cefbf1e4d1f91e867d
Author: FdaSilvaYY &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">fdasilvayy at gmail.com</A>&gt;
Date:   Sat Jun 4 00:14:52 2016 +0200

    Missing NULL check on OBJ_dup result in x509_name_canon
    
    Reviewed-by: Kurt Roeckx &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">kurt at openssl.org</A>&gt;
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/1168">https://github.com/openssl/openssl/pull/1168</A>)

commit b1b1cba4e2ae76bc3b8390842c8482dc0b3358ca
Author: FdaSilvaYY &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">fdasilvayy at gmail.com</A>&gt;
Date:   Tue May 10 22:20:23 2016 +0200

    Fix an MSVC warning.
    
    Reviewed-by: Kurt Roeckx &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">kurt at openssl.org</A>&gt;
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/1168">https://github.com/openssl/openssl/pull/1168</A>)

-----------------------------------------------------------------------

Summary of changes:
 apps/openssl.c                     | 1 -
 apps/s_client.c                    | 2 +-
 apps/s_server.c                    | 2 +-
 apps/ts.c                          | 2 +-
 crypto/bn/bn_depr.c                | 1 -
 crypto/bn/bn_prime.c               | 1 -
 crypto/cms/cms_env.c               | 1 -
 crypto/cms/cms_kari.c              | 1 -
 crypto/dh/dh_key.c                 | 1 -
 crypto/dsa/dsa_depr.c              | 1 -
 crypto/dsa/dsa_key.c               | 1 -
 crypto/dsa/dsa_ossl.c              | 1 -
 crypto/dsa/dsa_sign.c              | 1 -
 crypto/ec/ecdsa_sign.c             | 2 --
 crypto/ec/ecdsa_vrf.c              | 2 --
 crypto/evp/p_dec.c                 | 1 -
 crypto/evp/p_enc.c                 | 1 -
 crypto/include/internal/cryptlib.h | 1 +
 crypto/ocsp/ocsp_cl.c              | 1 -
 crypto/ocsp/ocsp_lib.c             | 1 -
 crypto/ocsp/ocsp_srv.c             | 1 -
 crypto/pem/pem_oth.c               | 1 -
 crypto/pem/pem_pk8.c               | 1 -
 crypto/pem/pem_pkey.c              | 1 -
 crypto/pem/pem_sign.c              | 1 -
 crypto/pkcs7/pk7_dgst.c            | 1 -
 crypto/pkcs7/pk7_enc.c             | 1 -
 crypto/pkcs7/pk7_mime.c            | 1 -
 crypto/rsa/rsa_lib.c               | 1 -
 crypto/rsa/rsa_none.c              | 1 -
 crypto/rsa/rsa_null.c              | 1 -
 crypto/rsa/rsa_ossl.c              | 1 -
 crypto/rsa/rsa_x931.c              | 1 -
 crypto/x509/x_name.c               | 2 ++
 ssl/record/rec_layer_d1.c          | 1 -
 ssl/statem/statem_dtls.c           | 1 -
 ssl/statem/statem_lib.c            | 1 -
 ssl/t1_lib.c                       | 1 -
 test/p5_crpt2_test.c               | 3 ---
 test/ssltest_old.c                 | 3 ---
 40 files changed, 6 insertions(+), 44 deletions(-)

diff --git a/apps/openssl.c b/apps/openssl.c
index f069277..78ed023 100644
--- a/apps/openssl.c
+++ b/apps/openssl.c
@@ -12,7 +12,6 @@
 #include &lt;stdlib.h&gt;
 #include &lt;openssl/bio.h&gt;
 #include &lt;openssl/crypto.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/lhash.h&gt;
 #include &lt;openssl/conf.h&gt;
 #include &lt;openssl/x509.h&gt;
diff --git a/apps/s_client.c b/apps/s_client.c
index 205f283..41fed85 100644
--- a/apps/s_client.c
+++ b/apps/s_client.c
@@ -2684,4 +2684,4 @@ static int ocsp_resp_cb(SSL *s, void *arg)
 }
 # endif
 
-#endif
+#endif  /* OPENSSL_NO_SOCK */
diff --git a/apps/s_server.c b/apps/s_server.c
index 9188ecf..45c128d 100644
--- a/apps/s_server.c
+++ b/apps/s_server.c
@@ -3304,4 +3304,4 @@ static void free_sessions(void)
     first = NULL;
 }
 
-#endif
+#endif  /* OPENSSL_NO_SOCK */
diff --git a/apps/ts.c b/apps/ts.c
index ec83aac..80f14bd 100644
--- a/apps/ts.c
+++ b/apps/ts.c
@@ -978,4 +978,4 @@ static int verify_cb(int ok, X509_STORE_CTX *ctx)
 {
     return ok;
 }
-#endif
+#endif  /* ndef OPENSSL_NO_TS */
diff --git a/crypto/bn/bn_depr.c b/crypto/bn/bn_depr.c
index de54d5e..7d89214 100644
--- a/crypto/bn/bn_depr.c
+++ b/crypto/bn/bn_depr.c
@@ -21,7 +21,6 @@ NON_EMPTY_TRANSLATION_UNIT
 # include &lt;time.h&gt;
 # include &quot;internal/cryptlib.h&quot;
 # include &quot;bn_lcl.h&quot;
-# include &lt;openssl/rand.h&gt;
 
 BIGNUM *BN_generate_prime(BIGNUM *ret, int bits, int safe,
                           const BIGNUM *add, const BIGNUM *rem,
diff --git a/crypto/bn/bn_prime.c b/crypto/bn/bn_prime.c
index 81c2391..df4f058 100644
--- a/crypto/bn/bn_prime.c
+++ b/crypto/bn/bn_prime.c
@@ -13,7 +13,6 @@
 #include &lt;time.h&gt;
 #include &quot;internal/cryptlib.h&quot;
 #include &quot;bn_lcl.h&quot;
-#include &lt;openssl/rand.h&gt;
 
 /*
  * The quick sieve algorithm approach to weeding out primes is Philip
diff --git a/crypto/cms/cms_env.c b/crypto/cms/cms_env.c
index b143a91..8d45943 100644
--- a/crypto/cms/cms_env.c
+++ b/crypto/cms/cms_env.c
@@ -13,7 +13,6 @@
 #include &lt;openssl/x509v3.h&gt;
 #include &lt;openssl/err.h&gt;
 #include &lt;openssl/cms.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/aes.h&gt;
 #include &quot;cms_lcl.h&quot;
 #include &quot;internal/asn1_int.h&quot;
diff --git a/crypto/cms/cms_kari.c b/crypto/cms/cms_kari.c
index 8f44c81..3bc46fe 100644
--- a/crypto/cms/cms_kari.c
+++ b/crypto/cms/cms_kari.c
@@ -13,7 +13,6 @@
 #include &lt;openssl/x509v3.h&gt;
 #include &lt;openssl/err.h&gt;
 #include &lt;openssl/cms.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/aes.h&gt;
 #include &quot;cms_lcl.h&quot;
 #include &quot;internal/asn1_int.h&quot;
diff --git a/crypto/dh/dh_key.c b/crypto/dh/dh_key.c
index 1644003..21dada3 100644
--- a/crypto/dh/dh_key.c
+++ b/crypto/dh/dh_key.c
@@ -9,7 +9,6 @@
 
 #include &lt;stdio.h&gt;
 #include &quot;internal/cryptlib.h&quot;
-#include &lt;openssl/rand.h&gt;
 #include &quot;dh_locl.h&quot;
 #include &quot;internal/bn_int.h&quot;
 
diff --git a/crypto/dsa/dsa_depr.c b/crypto/dsa/dsa_depr.c
index b852fc7..f51aea7 100644
--- a/crypto/dsa/dsa_depr.c
+++ b/crypto/dsa/dsa_depr.c
@@ -30,7 +30,6 @@ NON_EMPTY_TRANSLATION_UNIT
 # include &lt;openssl/evp.h&gt;
 # include &lt;openssl/bn.h&gt;
 # include &lt;openssl/dsa.h&gt;
-# include &lt;openssl/rand.h&gt;
 # include &lt;openssl/sha.h&gt;
 
 DSA *DSA_generate_parameters(int bits,
diff --git a/crypto/dsa/dsa_key.c b/crypto/dsa/dsa_key.c
index aa5d42c..31442b1 100644
--- a/crypto/dsa/dsa_key.c
+++ b/crypto/dsa/dsa_key.c
@@ -12,7 +12,6 @@
 #include &quot;internal/cryptlib.h&quot;
 #include &lt;openssl/bn.h&gt;
 #include &quot;dsa_locl.h&quot;
-#include &lt;openssl/rand.h&gt;
 
 static int dsa_builtin_keygen(DSA *dsa);
 
diff --git a/crypto/dsa/dsa_ossl.c b/crypto/dsa/dsa_ossl.c
index 9c97ef9..3c734ec 100644
--- a/crypto/dsa/dsa_ossl.c
+++ b/crypto/dsa/dsa_ossl.c
@@ -14,7 +14,6 @@
 #include &lt;openssl/bn.h&gt;
 #include &lt;openssl/sha.h&gt;
 #include &quot;dsa_locl.h&quot;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/asn1.h&gt;
 
 static DSA_SIG *dsa_do_sign(const unsigned char *dgst, int dlen, DSA *dsa);
diff --git a/crypto/dsa/dsa_sign.c b/crypto/dsa/dsa_sign.c
index 5692794..2e29d40 100644
--- a/crypto/dsa/dsa_sign.c
+++ b/crypto/dsa/dsa_sign.c
@@ -11,7 +11,6 @@
 
 #include &quot;internal/cryptlib.h&quot;
 #include &quot;dsa_locl.h&quot;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/bn.h&gt;
 
 DSA_SIG *DSA_do_sign(const unsigned char *dgst, int dlen, DSA *dsa)
diff --git a/crypto/ec/ecdsa_sign.c b/crypto/ec/ecdsa_sign.c
index 84a56a3..aee06e9 100644
--- a/crypto/ec/ecdsa_sign.c
+++ b/crypto/ec/ecdsa_sign.c
@@ -9,8 +9,6 @@
 
 #include &lt;openssl/ec.h&gt;
 #include &quot;ec_lcl.h&quot;
-#include &lt;openssl/engine.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/err.h&gt;
 
 ECDSA_SIG *ECDSA_do_sign(const unsigned char *dgst, int dlen, EC_KEY *eckey)
diff --git a/crypto/ec/ecdsa_vrf.c b/crypto/ec/ecdsa_vrf.c
index bc9ebf4..f61a200 100644
--- a/crypto/ec/ecdsa_vrf.c
+++ b/crypto/ec/ecdsa_vrf.c
@@ -9,8 +9,6 @@
 
 #include &lt;openssl/ec.h&gt;
 #include &quot;ec_lcl.h&quot;
-#include &lt;string.h&gt;
-#include &lt;openssl/engine.h&gt;
 #include &lt;openssl/err.h&gt;
 
 /*-
diff --git a/crypto/evp/p_dec.c b/crypto/evp/p_dec.c
index 6171bb9..6bec406 100644
--- a/crypto/evp/p_dec.c
+++ b/crypto/evp/p_dec.c
@@ -9,7 +9,6 @@
 
 #include &lt;stdio.h&gt;
 #include &quot;internal/cryptlib.h&quot;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/rsa.h&gt;
 #include &lt;openssl/evp.h&gt;
 #include &lt;openssl/objects.h&gt;
diff --git a/crypto/evp/p_enc.c b/crypto/evp/p_enc.c
index 645f973..3277fbb 100644
--- a/crypto/evp/p_enc.c
+++ b/crypto/evp/p_enc.c
@@ -9,7 +9,6 @@
 
 #include &lt;stdio.h&gt;
 #include &quot;internal/cryptlib.h&quot;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/rsa.h&gt;
 #include &lt;openssl/evp.h&gt;
 #include &lt;openssl/objects.h&gt;
diff --git a/crypto/include/internal/cryptlib.h b/crypto/include/internal/cryptlib.h
index f2377d1..05b8dc0 100644
--- a/crypto/include/internal/cryptlib.h
+++ b/crypto/include/internal/cryptlib.h
@@ -16,6 +16,7 @@
 # include &quot;e_os.h&quot;
 
 # ifdef OPENSSL_USE_APPLINK
+#  undef BIO_FLAGS_UPLINK
 #  define BIO_FLAGS_UPLINK 0x8000
 #  include &quot;ms/uplink.h&quot;
 # endif
diff --git a/crypto/ocsp/ocsp_cl.c b/crypto/ocsp/ocsp_cl.c
index 35f4b58..195d87c 100644
--- a/crypto/ocsp/ocsp_cl.c
+++ b/crypto/ocsp/ocsp_cl.c
@@ -11,7 +11,6 @@
 #include &lt;time.h&gt;
 #include &quot;internal/cryptlib.h&quot;
 #include &lt;openssl/objects.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/x509.h&gt;
 #include &lt;openssl/pem.h&gt;
 #include &lt;openssl/x509v3.h&gt;
diff --git a/crypto/ocsp/ocsp_lib.c b/crypto/ocsp/ocsp_lib.c
index ff04e46..5ff2f31 100644
--- a/crypto/ocsp/ocsp_lib.c
+++ b/crypto/ocsp/ocsp_lib.c
@@ -10,7 +10,6 @@
 #include &lt;stdio.h&gt;
 #include &quot;internal/cryptlib.h&quot;
 #include &lt;openssl/objects.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/x509.h&gt;
 #include &lt;openssl/pem.h&gt;
 #include &lt;openssl/x509v3.h&gt;
diff --git a/crypto/ocsp/ocsp_srv.c b/crypto/ocsp/ocsp_srv.c
index e3ef171..443161c 100644
--- a/crypto/ocsp/ocsp_srv.c
+++ b/crypto/ocsp/ocsp_srv.c
@@ -10,7 +10,6 @@
 #include &lt;stdio.h&gt;
 #include &quot;internal/cryptlib.h&quot;
 #include &lt;openssl/objects.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/x509.h&gt;
 #include &lt;openssl/pem.h&gt;
 #include &lt;openssl/x509v3.h&gt;
diff --git a/crypto/pem/pem_oth.c b/crypto/pem/pem_oth.c
index 036c8a6..cc7a8db 100644
--- a/crypto/pem/pem_oth.c
+++ b/crypto/pem/pem_oth.c
@@ -12,7 +12,6 @@
 #include &lt;openssl/buffer.h&gt;
 #include &lt;openssl/objects.h&gt;
 #include &lt;openssl/evp.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/x509.h&gt;
 #include &lt;openssl/pem.h&gt;
 
diff --git a/crypto/pem/pem_pk8.c b/crypto/pem/pem_pk8.c
index 1f6b640..993c595 100644
--- a/crypto/pem/pem_pk8.c
+++ b/crypto/pem/pem_pk8.c
@@ -12,7 +12,6 @@
 #include &lt;openssl/buffer.h&gt;
 #include &lt;openssl/objects.h&gt;
 #include &lt;openssl/evp.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/x509.h&gt;
 #include &lt;openssl/pkcs12.h&gt;
 #include &lt;openssl/pem.h&gt;
diff --git a/crypto/pem/pem_pkey.c b/crypto/pem/pem_pkey.c
index f3a45e4..6308622 100644
--- a/crypto/pem/pem_pkey.c
+++ b/crypto/pem/pem_pkey.c
@@ -12,7 +12,6 @@
 #include &lt;openssl/buffer.h&gt;
 #include &lt;openssl/objects.h&gt;
 #include &lt;openssl/evp.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/x509.h&gt;
 #include &lt;openssl/pkcs12.h&gt;
 #include &lt;openssl/pem.h&gt;
diff --git a/crypto/pem/pem_sign.c b/crypto/pem/pem_sign.c
index 0d8b62a..12ad974 100644
--- a/crypto/pem/pem_sign.c
+++ b/crypto/pem/pem_sign.c
@@ -9,7 +9,6 @@
 
 #include &lt;stdio.h&gt;
 #include &quot;internal/cryptlib.h&quot;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/evp.h&gt;
 #include &lt;openssl/objects.h&gt;
 #include &lt;openssl/x509.h&gt;
diff --git a/crypto/pkcs7/pk7_dgst.c b/crypto/pkcs7/pk7_dgst.c
index b0a6bd5..965fb37 100644
--- a/crypto/pkcs7/pk7_dgst.c
+++ b/crypto/pkcs7/pk7_dgst.c
@@ -10,7 +10,6 @@
 #include &lt;stdio.h&gt;
 #include &quot;internal/cryptlib.h&quot;
 #include &lt;openssl/evp.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/objects.h&gt;
 #include &lt;openssl/x509.h&gt;
 #include &lt;openssl/pkcs7.h&gt;
diff --git a/crypto/pkcs7/pk7_enc.c b/crypto/pkcs7/pk7_enc.c
index 6889a04..3c59f9c 100644
--- a/crypto/pkcs7/pk7_enc.c
+++ b/crypto/pkcs7/pk7_enc.c
@@ -10,7 +10,6 @@
 #include &lt;stdio.h&gt;
 #include &quot;internal/cryptlib.h&quot;
 #include &lt;openssl/evp.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/objects.h&gt;
 #include &lt;openssl/x509.h&gt;
 #include &lt;openssl/pkcs7.h&gt;
diff --git a/crypto/pkcs7/pk7_mime.c b/crypto/pkcs7/pk7_mime.c
index d44b3ad..97474cf 100644
--- a/crypto/pkcs7/pk7_mime.c
+++ b/crypto/pkcs7/pk7_mime.c
@@ -10,7 +10,6 @@
 #include &lt;stdio.h&gt;
 #include &lt;ctype.h&gt;
 #include &quot;internal/cryptlib.h&quot;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/x509.h&gt;
 #include &lt;openssl/asn1.h&gt;
 
diff --git a/crypto/rsa/rsa_lib.c b/crypto/rsa/rsa_lib.c
index 87a3261..9ba86d8 100644
--- a/crypto/rsa/rsa_lib.c
+++ b/crypto/rsa/rsa_lib.c
@@ -12,7 +12,6 @@
 #include &quot;internal/cryptlib.h&quot;
 #include &lt;openssl/lhash.h&gt;
 #include &quot;internal/bn_int.h&quot;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/engine.h&gt;
 #include &quot;rsa_locl.h&quot;
 
diff --git a/crypto/rsa/rsa_none.c b/crypto/rsa/rsa_none.c
index 006d3bd..b78756d 100644
--- a/crypto/rsa/rsa_none.c
+++ b/crypto/rsa/rsa_none.c
@@ -10,7 +10,6 @@
 #include &quot;internal/cryptlib.h&quot;
 #include &lt;openssl/bn.h&gt;
 #include &lt;openssl/rsa.h&gt;
-#include &lt;openssl/rand.h&gt;
 
 int RSA_padding_add_none(unsigned char *to, int tlen,
                          const unsigned char *from, int flen)
diff --git a/crypto/rsa/rsa_null.c b/crypto/rsa/rsa_null.c
index 7f15955..d339494 100644
--- a/crypto/rsa/rsa_null.c
+++ b/crypto/rsa/rsa_null.c
@@ -10,7 +10,6 @@
 #include &lt;stdio.h&gt;
 #include &quot;internal/cryptlib.h&quot;
 #include &lt;openssl/bn.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &quot;rsa_locl.h&quot;
 
 /*
diff --git a/crypto/rsa/rsa_ossl.c b/crypto/rsa/rsa_ossl.c
index d8af92d..7826066 100644
--- a/crypto/rsa/rsa_ossl.c
+++ b/crypto/rsa/rsa_ossl.c
@@ -9,7 +9,6 @@
 
 #include &quot;internal/cryptlib.h&quot;
 #include &quot;internal/bn_int.h&quot;
-#include &lt;openssl/rand.h&gt;
 #include &quot;rsa_locl.h&quot;
 
 #ifndef RSA_NULL
diff --git a/crypto/rsa/rsa_x931.c b/crypto/rsa/rsa_x931.c
index 428a1e7..b9301f3 100644
--- a/crypto/rsa/rsa_x931.c
+++ b/crypto/rsa/rsa_x931.c
@@ -11,7 +11,6 @@
 #include &quot;internal/cryptlib.h&quot;
 #include &lt;openssl/bn.h&gt;
 #include &lt;openssl/rsa.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/objects.h&gt;
 
 int RSA_padding_add_X931(unsigned char *to, int tlen,
diff --git a/crypto/x509/x_name.c b/crypto/x509/x_name.c
index 5c624cb..d5b12f1 100644
--- a/crypto/x509/x_name.c
+++ b/crypto/x509/x_name.c
@@ -322,6 +322,8 @@ static int x509_name_canon(X509_NAME *a)
         if (tmpentry == NULL)
             goto err;
         tmpentry-&gt;object = OBJ_dup(entry-&gt;object);
+        if (tmpentry-&gt;object == NULL)
+            goto err;
         if (!asn1_string_canon(tmpentry-&gt;value, entry-&gt;value))
             goto err;
         if (!sk_X509_NAME_ENTRY_push(entries, tmpentry))
diff --git a/ssl/record/rec_layer_d1.c b/ssl/record/rec_layer_d1.c
index 9e043f5..6699d2a 100644
--- a/ssl/record/rec_layer_d1.c
+++ b/ssl/record/rec_layer_d1.c
@@ -13,7 +13,6 @@
 #include &quot;../ssl_locl.h&quot;
 #include &lt;openssl/evp.h&gt;
 #include &lt;openssl/buffer.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &quot;record_locl.h&quot;
 
 int DTLS_RECORD_LAYER_new(RECORD_LAYER *rl)
diff --git a/ssl/statem/statem_dtls.c b/ssl/statem/statem_dtls.c
index d75483a..946dee0 100644
--- a/ssl/statem/statem_dtls.c
+++ b/ssl/statem/statem_dtls.c
@@ -13,7 +13,6 @@
 #include &quot;../ssl_locl.h&quot;
 #include &quot;statem_locl.h&quot;
 #include &lt;openssl/buffer.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/objects.h&gt;
 #include &lt;openssl/evp.h&gt;
 #include &lt;openssl/x509.h&gt;
diff --git a/ssl/statem/statem_lib.c b/ssl/statem/statem_lib.c
index eb3e591..85523da 100644
--- a/ssl/statem/statem_lib.c
+++ b/ssl/statem/statem_lib.c
@@ -19,7 +19,6 @@
 #include &quot;../ssl_locl.h&quot;
 #include &quot;statem_locl.h&quot;
 #include &lt;openssl/buffer.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/objects.h&gt;
 #include &lt;openssl/evp.h&gt;
 #include &lt;openssl/x509.h&gt;
diff --git a/ssl/t1_lib.c b/ssl/t1_lib.c
index 9250283..3e5e9fb 100644
--- a/ssl/t1_lib.c
+++ b/ssl/t1_lib.c
@@ -15,7 +15,6 @@
 #include &lt;openssl/ocsp.h&gt;
 #include &lt;openssl/conf.h&gt;
 #include &lt;openssl/x509v3.h&gt;
-#include &lt;openssl/rand.h&gt;
 #include &lt;openssl/dh.h&gt;
 #include &lt;openssl/bn.h&gt;
 #include &quot;ssl_locl.h&quot;
diff --git a/test/p5_crpt2_test.c b/test/p5_crpt2_test.c
index 5785519..4a40c26 100644
--- a/test/p5_crpt2_test.c
+++ b/test/p5_crpt2_test.c
@@ -14,9 +14,6 @@
 
 #include &lt;openssl/opensslconf.h&gt;
 #include &lt;openssl/evp.h&gt;
-#ifndef OPENSSL_NO_ENGINE
-# include &lt;openssl/engine.h&gt;
-#endif
 #include &lt;openssl/err.h&gt;
 #include &lt;openssl/conf.h&gt;
 
diff --git a/test/ssltest_old.c b/test/ssltest_old.c
index bc73380..74908b0 100644
--- a/test/ssltest_old.c
+++ b/test/ssltest_old.c
@@ -73,9 +73,6 @@
 #include &lt;openssl/x509.h&gt;
 #include &lt;openssl/x509v3.h&gt;
 #include &lt;openssl/ssl.h&gt;
-#ifndef OPENSSL_NO_ENGINE
-# include &lt;openssl/engine.h&gt;
-#endif
 #include &lt;openssl/err.h&gt;
 #include &lt;openssl/rand.h&gt;
 #ifndef OPENSSL_NO_RSA
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008326.html">[openssl-commits] [openssl]  master update
</A></li>
	<LI>Next message: <A HREF="008369.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8338">[ date ]</a>
              <a href="thread.html#8338">[ thread ]</a>
              <a href="subject.html#8338">[ subject ]</a>
              <a href="author.html#8338">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
