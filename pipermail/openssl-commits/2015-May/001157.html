<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  OpenSSL_1_0_0-stable update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2015-May/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20OpenSSL_1_0_0-stable%20update&In-Reply-To=%3C1432372837.721697.29287.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001150.html">
   <LINK REL="Next"  HREF="001159.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  OpenSSL_1_0_0-stable update</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20OpenSSL_1_0_0-stable%20update&In-Reply-To=%3C1432372837.721697.29287.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  OpenSSL_1_0_0-stable update">levitte at openssl.org
       </A><BR>
    <I>Sat May 23 09:20:37 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001150.html">[openssl-commits] [openssl]  OpenSSL_1_0_0-stable update
</A></li>
        <LI>Next message: <A HREF="001159.html">[openssl-commits] [openssl]  OpenSSL_1_0_0-stable update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1157">[ date ]</a>
              <a href="thread.html#1157">[ thread ]</a>
              <a href="subject.html#1157">[ subject ]</a>
              <a href="author.html#1157">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch OpenSSL_1_0_0-stable has been updated
       via  591c819c301bf9e02333852aabf55d55813ae721 (commit)
       via  439c1934135c1f41fbef55592781cf4899efad94 (commit)
       via  1b8403889b52be15a8de87054ad4605d79fafb08 (commit)
      from  e261cf5a2e3c12e9c6221a83a077c5523b85b979 (commit)


- Log -----------------------------------------------------------------
commit 591c819c301bf9e02333852aabf55d55813ae721
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Sat May 23 06:33:41 2015 +0200

    Fix update and depend in engines/
    
    The update: target in engines/ didn't recurse into engines/ccgost.
    The update: and depend: targets in engines/ccgost needed a fixup.
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;
    (cherry picked from commit 8b822d2566853ee5e313c37529f71336209b28ab)

commit 439c1934135c1f41fbef55592781cf4899efad94
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Fri May 22 19:23:43 2015 +0200

    Missed a couple of spots in the update change
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;
    (cherry picked from commit 6f45032f6730622e8d484d92e07c7fce7d1f88ac)
    
    Conflicts:
    	apps/Makefile

commit 1b8403889b52be15a8de87054ad4605d79fafb08
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Fri May 22 17:54:06 2015 +0200

    Fix the update target and remove duplicate file updates
    
    We had updates of certain header files in both Makefile.org and the
    Makefile in the directory the header file lived in.  This is error
    prone and also sometimes generates slightly different results (usually
    just a comment that differs) depending on which way the update was
    done.
    
    This removes the file update targets from the top level Makefile, adds
    an update: target in all Makefiles and has it depend on the depend: or
    local_depend: targets, whichever is appropriate, so we don't get a
    double run through the whole file tree.
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;
    (cherry picked from commit 0f539dc1a2f45580435c39dada44dd276e79cb88)
    
    Conflicts:
    	Makefile.org
    	apps/Makefile
    	test/Makefile
    	crypto/cmac/Makefile
    	crypto/srp/Makefile

-----------------------------------------------------------------------

Summary of changes:
 Makefile.org             | 19 +++----------------
 apps/Makefile            | 15 +++++++++------
 crypto/Makefile          | 11 ++++++++---
 crypto/aes/Makefile      |  2 ++
 crypto/asn1/Makefile     |  2 ++
 crypto/bf/Makefile       |  2 ++
 crypto/bio/Makefile      |  2 ++
 crypto/bn/Makefile       |  2 ++
 crypto/buffer/Makefile   |  2 ++
 crypto/camellia/Makefile |  2 ++
 crypto/cast/Makefile     |  2 ++
 crypto/cms/Makefile      |  2 ++
 crypto/comp/Makefile     |  2 ++
 crypto/conf/Makefile     |  2 ++
 crypto/des/Makefile      |  2 ++
 crypto/dh/Makefile       |  2 ++
 crypto/dsa/Makefile      |  2 ++
 crypto/dso/Makefile      |  2 ++
 crypto/ec/Makefile       |  2 ++
 crypto/ecdh/Makefile     |  2 ++
 crypto/ecdsa/Makefile    |  2 ++
 crypto/engine/Makefile   |  2 ++
 crypto/err/Makefile      |  2 ++
 crypto/evp/Makefile      |  2 ++
 crypto/hmac/Makefile     |  2 ++
 crypto/idea/Makefile     |  2 ++
 crypto/jpake/Makefile    |  2 ++
 crypto/krb5/Makefile     |  2 ++
 crypto/lhash/Makefile    |  2 ++
 crypto/md2/Makefile      |  2 ++
 crypto/md4/Makefile      |  2 ++
 crypto/md5/Makefile      |  2 ++
 crypto/mdc2/Makefile     |  2 ++
 crypto/modes/Makefile    |  2 ++
 crypto/objects/Makefile  |  2 ++
 crypto/ocsp/Makefile     |  2 ++
 crypto/pem/Makefile      |  2 ++
 crypto/pkcs12/Makefile   |  2 ++
 crypto/pkcs7/Makefile    |  2 ++
 crypto/pqueue/Makefile   |  2 ++
 crypto/rand/Makefile     |  2 ++
 crypto/rc2/Makefile      |  2 ++
 crypto/rc4/Makefile      |  2 ++
 crypto/rc5/Makefile      |  2 ++
 crypto/ripemd/Makefile   |  2 ++
 crypto/rsa/Makefile      |  2 ++
 crypto/seed/Makefile     |  2 ++
 crypto/sha/Makefile      |  2 ++
 crypto/stack/Makefile    |  2 ++
 crypto/store/Makefile    |  2 ++
 crypto/ts/Makefile       |  2 ++
 crypto/txt_db/Makefile   |  2 ++
 crypto/ui/Makefile       |  2 ++
 crypto/whrlpool/Makefile |  2 ++
 crypto/x509/Makefile     |  2 ++
 crypto/x509v3/Makefile   |  2 ++
 engines/Makefile         | 13 ++++++++-----
 engines/ccgost/Makefile  | 13 +++++++------
 ssl/Makefile             | 13 +++++++------
 test/Makefile            | 13 +++++++------
 tools/Makefile           |  2 ++
 61 files changed, 157 insertions(+), 48 deletions(-)

diff --git a/Makefile.org b/Makefile.org
index 808b99e..13ffc15 100644
--- a/Makefile.org
+++ b/Makefile.org
@@ -416,6 +416,9 @@ tests: rehash
 report:
 	@$(PERL) util/selftest.pl
 
+update: errors stacks util/libeay.num util/ssleay.num TABLE
+	@set -e; target=update; $(RECURSIVE_BUILD_CMD)
+
 depend:
 	@set -e; target=depend; $(RECURSIVE_BUILD_CMD)
 
@@ -440,26 +443,10 @@ util/libeay.num::
 util/ssleay.num::
 	$(PERL) util/mkdef.pl ssl update
 
-crypto/objects/obj_dat.h: crypto/objects/obj_dat.pl crypto/objects/obj_mac.h
-	$(PERL) crypto/objects/obj_dat.pl crypto/objects/obj_mac.h crypto/objects/obj_dat.h
-crypto/objects/obj_mac.h: crypto/objects/objects.pl crypto/objects/objects.txt crypto/objects/obj_mac.num
-	$(PERL) crypto/objects/objects.pl crypto/objects/objects.txt crypto/objects/obj_mac.num crypto/objects/obj_mac.h
-crypto/objects/obj_xref.h: crypto/objects/objxref.pl crypto/objects/obj_xref.txt crypto/objects/obj_mac.num
-	$(PERL) crypto/objects/objxref.pl crypto/objects/obj_mac.num crypto/objects/obj_xref.txt &gt;crypto/objects/obj_xref.h
-
-apps/openssl-vms.cnf: apps/openssl.cnf
-	$(PERL) VMS/VMSify-conf.pl &lt; apps/openssl.cnf &gt; apps/openssl-vms.cnf
-
-crypto/bn/bn_prime.h: crypto/bn/bn_prime.pl
-	$(PERL) crypto/bn/bn_prime.pl &gt;crypto/bn/bn_prime.h
-
-
 TABLE: Configure
 	(echo 'Output of `Configure TABLE'&quot;':&quot;; \
 	$(PERL) Configure TABLE) &gt; TABLE
 
-update: errors stacks util/libeay.num util/ssleay.num crypto/objects/obj_dat.h crypto/objects/obj_xref.h apps/openssl-vms.cnf crypto/bn/bn_prime.h TABLE depend
-
 # Build distribution tar-file. As the list of files returned by &quot;find&quot; is
 # pretty long, on several platforms a &quot;too many arguments&quot; error or similar
 # would occur. Therefore the list of files is temporarily stored into a file
diff --git a/apps/Makefile b/apps/Makefile
index fa32d2d..863144c 100644
--- a/apps/Makefile
+++ b/apps/Makefile
@@ -94,6 +94,9 @@ req: sreq.o $(A_OBJ) $(DLIBCRYPTO)
 sreq.o: req.c 
 	$(CC) -c $(INCLUDES) $(CFLAG) -o sreq.o req.c
 
+openssl-vms.cnf: openssl.cnf
+	$(PERL) $(TOP)/VMS/VMSify-conf.pl &lt; openssl.cnf &gt; openssl-vms.cnf
+
 files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
@@ -127,12 +130,12 @@ links:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
-depend:
-	@if [ -z &quot;$(THIS)&quot; ]; then \
-	    $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; \
-	else \
-	    $(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(SRC); \
-	fi
+update: openssl-vms.cnf local_depend
+
+depend: local_depend
+	@if [ -z &quot;$(THIS)&quot; ]; then $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; fi
+local_depend:
+	@[ -z &quot;$(THIS)&quot; ] || $(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(SRC); \
 
 dclean:
 	$(PERL) -pe 'if (/^# DO NOT DELETE THIS LINE/) {print; exit(0);}' $(MAKEFILE) &gt;Makefile.new
diff --git a/crypto/Makefile b/crypto/Makefile
index d6bc8e4..6524ad2 100644
--- a/crypto/Makefile
+++ b/crypto/Makefile
@@ -121,12 +121,17 @@ install:
 lint:
 	@target=lint; $(RECURSIVE_MAKE)
 
-depend:
+update: local_depend
+	@[ -z &quot;$(THIS)&quot; ] || (set -e; target=update; $(RECURSIVE_MAKE) )
+	@if [ -z &quot;$(THIS)&quot; ]; then $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; fi
+
+depend: local_depend
+	@[ -z &quot;$(THIS)&quot; ] || (set -e; target=depend; $(RECURSIVE_MAKE) )
+	@if [ -z &quot;$(THIS)&quot; ]; then $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; fi
+local_depend:
 	@[ -z &quot;$(THIS)&quot; -o -f buildinf.h ] || touch buildinf.h # fake buildinf.h if it does not exist
 	@[ -z &quot;$(THIS)&quot; ] || $(MAKEDEPEND) -- $(CFLAG) $(INCLUDE) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
 	@[ -z &quot;$(THIS)&quot; -o -s buildinf.h ] || rm buildinf.h
-	@[ -z &quot;$(THIS)&quot; ] || (set -e; target=depend; $(RECURSIVE_MAKE) )
-	@if [ -z &quot;$(THIS)&quot; ]; then $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; fi
 
 clean:
 	rm -f buildinf.h *.s *.o */*.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/aes/Makefile b/crypto/aes/Makefile
index c501a43..fb70030 100644
--- a/crypto/aes/Makefile
+++ b/crypto/aes/Makefile
@@ -87,6 +87,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/asn1/Makefile b/crypto/asn1/Makefile
index 160544e..6d874d6 100644
--- a/crypto/asn1/Makefile
+++ b/crypto/asn1/Makefile
@@ -93,6 +93,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by top Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/bf/Makefile b/crypto/bf/Makefile
index dd2c2c7..e0e4ee9 100644
--- a/crypto/bf/Makefile
+++ b/crypto/bf/Makefile
@@ -72,6 +72,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/bio/Makefile b/crypto/bio/Makefile
index c395d80..ef526f6 100644
--- a/crypto/bio/Makefile
+++ b/crypto/bio/Makefile
@@ -73,6 +73,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/bn/Makefile b/crypto/bn/Makefile
index aabc4f5..02c2e0d 100644
--- a/crypto/bn/Makefile
+++ b/crypto/bn/Makefile
@@ -142,6 +142,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: bn_prime.h depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/buffer/Makefile b/crypto/buffer/Makefile
index 9f3a88d..9355e70 100644
--- a/crypto/buffer/Makefile
+++ b/crypto/buffer/Makefile
@@ -61,6 +61,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/camellia/Makefile b/crypto/camellia/Makefile
index ff5fe4a..e8f166d 100644
--- a/crypto/camellia/Makefile
+++ b/crypto/camellia/Makefile
@@ -73,6 +73,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/cast/Makefile b/crypto/cast/Makefile
index 0acc38f..acce5a3 100644
--- a/crypto/cast/Makefile
+++ b/crypto/cast/Makefile
@@ -69,6 +69,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/cms/Makefile b/crypto/cms/Makefile
index 5837049..90da8e4 100644
--- a/crypto/cms/Makefile
+++ b/crypto/cms/Makefile
@@ -65,6 +65,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/comp/Makefile b/crypto/comp/Makefile
index efda832..a1e9464 100644
--- a/crypto/comp/Makefile
+++ b/crypto/comp/Makefile
@@ -64,6 +64,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(LIBSRC)
diff --git a/crypto/conf/Makefile b/crypto/conf/Makefile
index 78bb324..d5f5c58 100644
--- a/crypto/conf/Makefile
+++ b/crypto/conf/Makefile
@@ -64,6 +64,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(LIBSRC)
diff --git a/crypto/des/Makefile b/crypto/des/Makefile
index ae98226..035b836 100644
--- a/crypto/des/Makefile
+++ b/crypto/des/Makefile
@@ -94,6 +94,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/dh/Makefile b/crypto/dh/Makefile
index f23b4f7..6d574f4 100644
--- a/crypto/dh/Makefile
+++ b/crypto/dh/Makefile
@@ -63,6 +63,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/dsa/Makefile b/crypto/dsa/Makefile
index 8073c4e..682772a 100644
--- a/crypto/dsa/Makefile
+++ b/crypto/dsa/Makefile
@@ -63,6 +63,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/dso/Makefile b/crypto/dso/Makefile
index fb2709e..36b8ead 100644
--- a/crypto/dso/Makefile
+++ b/crypto/dso/Makefile
@@ -63,6 +63,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/ec/Makefile b/crypto/ec/Makefile
index db380ed..a5f7cad 100644
--- a/crypto/ec/Makefile
+++ b/crypto/ec/Makefile
@@ -66,6 +66,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/ecdh/Makefile b/crypto/ecdh/Makefile
index 65d8904..e456e96 100644
--- a/crypto/ecdh/Makefile
+++ b/crypto/ecdh/Makefile
@@ -62,6 +62,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/ecdsa/Makefile b/crypto/ecdsa/Makefile
index e89e0c0..4ce00e8 100644
--- a/crypto/ecdsa/Makefile
+++ b/crypto/ecdsa/Makefile
@@ -62,6 +62,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/engine/Makefile b/crypto/engine/Makefile
index 9c21482..fa27f3e 100644
--- a/crypto/engine/Makefile
+++ b/crypto/engine/Makefile
@@ -69,6 +69,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/err/Makefile b/crypto/err/Makefile
index 862b23b..b6f3ef1 100644
--- a/crypto/err/Makefile
+++ b/crypto/err/Makefile
@@ -61,6 +61,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/evp/Makefile b/crypto/evp/Makefile
index 82825e5..8fe3c02 100644
--- a/crypto/evp/Makefile
+++ b/crypto/evp/Makefile
@@ -84,6 +84,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(LIBSRC)
diff --git a/crypto/hmac/Makefile b/crypto/hmac/Makefile
index 0e91709..52e39e5 100644
--- a/crypto/hmac/Makefile
+++ b/crypto/hmac/Makefile
@@ -61,6 +61,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/idea/Makefile b/crypto/idea/Makefile
index b2e7add..3463d03 100644
--- a/crypto/idea/Makefile
+++ b/crypto/idea/Makefile
@@ -61,6 +61,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/jpake/Makefile b/crypto/jpake/Makefile
index 110c49c..5193fd9 100644
--- a/crypto/jpake/Makefile
+++ b/crypto/jpake/Makefile
@@ -32,6 +32,8 @@ install:
 	chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/include/openssl/$$i ); \
 	done;
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/krb5/Makefile b/crypto/krb5/Makefile
index 1407739..8b9a01a 100644
--- a/crypto/krb5/Makefile
+++ b/crypto/krb5/Makefile
@@ -62,6 +62,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(LIBSRC)
diff --git a/crypto/lhash/Makefile b/crypto/lhash/Makefile
index 82bddac..c7f4365 100644
--- a/crypto/lhash/Makefile
+++ b/crypto/lhash/Makefile
@@ -61,6 +61,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/md2/Makefile b/crypto/md2/Makefile
index 17f878a..b630110 100644
--- a/crypto/md2/Makefile
+++ b/crypto/md2/Makefile
@@ -61,6 +61,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/md4/Makefile b/crypto/md4/Makefile
index c94a139..c810182 100644
--- a/crypto/md4/Makefile
+++ b/crypto/md4/Makefile
@@ -62,6 +62,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/md5/Makefile b/crypto/md5/Makefile
index 9858d53..67d8ac6 100644
--- a/crypto/md5/Makefile
+++ b/crypto/md5/Makefile
@@ -76,6 +76,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/mdc2/Makefile b/crypto/mdc2/Makefile
index 1d064f1..28e8bc3 100644
--- a/crypto/mdc2/Makefile
+++ b/crypto/mdc2/Makefile
@@ -61,6 +61,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/modes/Makefile b/crypto/modes/Makefile
index 6c85861..20add64 100644
--- a/crypto/modes/Makefile
+++ b/crypto/modes/Makefile
@@ -62,6 +62,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/objects/Makefile b/crypto/objects/Makefile
index a8aedbd..f93d2f9 100644
--- a/crypto/objects/Makefile
+++ b/crypto/objects/Makefile
@@ -74,6 +74,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: obj_dat.h obj_mac.h obj_xref.h depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/ocsp/Makefile b/crypto/ocsp/Makefile
index 60c414c..96a1b15 100644
--- a/crypto/ocsp/Makefile
+++ b/crypto/ocsp/Makefile
@@ -64,6 +64,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(LIBSRC)
diff --git a/crypto/pem/Makefile b/crypto/pem/Makefile
index 2cc7801..7a930ee 100644
--- a/crypto/pem/Makefile
+++ b/crypto/pem/Makefile
@@ -64,6 +64,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(LIBSRC)
diff --git a/crypto/pkcs12/Makefile b/crypto/pkcs12/Makefile
index 3a7498f..be5f8c5 100644
--- a/crypto/pkcs12/Makefile
+++ b/crypto/pkcs12/Makefile
@@ -67,6 +67,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/pkcs7/Makefile b/crypto/pkcs7/Makefile
index effe05f..decf5e0 100644
--- a/crypto/pkcs7/Makefile
+++ b/crypto/pkcs7/Makefile
@@ -68,6 +68,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/pqueue/Makefile b/crypto/pqueue/Makefile
index fb36a0c..a59b5a9 100644
--- a/crypto/pqueue/Makefile
+++ b/crypto/pqueue/Makefile
@@ -61,6 +61,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/rand/Makefile b/crypto/rand/Makefile
index 27694aa..df44369 100644
--- a/crypto/rand/Makefile
+++ b/crypto/rand/Makefile
@@ -63,6 +63,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/rc2/Makefile b/crypto/rc2/Makefile
index 73eac34..2348ab8 100644
--- a/crypto/rc2/Makefile
+++ b/crypto/rc2/Makefile
@@ -61,6 +61,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/rc4/Makefile b/crypto/rc4/Makefile
index 264451a..f1a5d3a 100644
--- a/crypto/rc4/Makefile
+++ b/crypto/rc4/Makefile
@@ -84,6 +84,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/rc5/Makefile b/crypto/rc5/Makefile
index 8a8b00e..6ca0037 100644
--- a/crypto/rc5/Makefile
+++ b/crypto/rc5/Makefile
@@ -69,6 +69,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/ripemd/Makefile b/crypto/ripemd/Makefile
index d5b1067..464169d 100644
--- a/crypto/ripemd/Makefile
+++ b/crypto/ripemd/Makefile
@@ -69,6 +69,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/rsa/Makefile b/crypto/rsa/Makefile
index 7c6bc00..22c0793 100644
--- a/crypto/rsa/Makefile
+++ b/crypto/rsa/Makefile
@@ -67,6 +67,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/seed/Makefile b/crypto/seed/Makefile
index 4bc55e4..70d3d45 100644
--- a/crypto/seed/Makefile
+++ b/crypto/seed/Makefile
@@ -62,6 +62,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/sha/Makefile b/crypto/sha/Makefile
index e6eccb0..8439142 100644
--- a/crypto/sha/Makefile
+++ b/crypto/sha/Makefile
@@ -100,6 +100,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/stack/Makefile b/crypto/stack/Makefile
index 5327692..b069c93 100644
--- a/crypto/stack/Makefile
+++ b/crypto/stack/Makefile
@@ -61,6 +61,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/store/Makefile b/crypto/store/Makefile
index 0dcfd78..5bc7ca7 100644
--- a/crypto/store/Makefile
+++ b/crypto/store/Makefile
@@ -63,6 +63,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/ts/Makefile b/crypto/ts/Makefile
index c182345..cf991ef 100644
--- a/crypto/ts/Makefile
+++ b/crypto/ts/Makefile
@@ -73,6 +73,8 @@ tags:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(LIBSRC)
 
diff --git a/crypto/txt_db/Makefile b/crypto/txt_db/Makefile
index e6f3033..4f70b19 100644
--- a/crypto/txt_db/Makefile
+++ b/crypto/txt_db/Makefile
@@ -61,6 +61,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by top Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/ui/Makefile b/crypto/ui/Makefile
index a685659..b28fcca 100644
--- a/crypto/ui/Makefile
+++ b/crypto/ui/Makefile
@@ -65,6 +65,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/whrlpool/Makefile b/crypto/whrlpool/Makefile
index 566b996..308bbb0 100644
--- a/crypto/whrlpool/Makefile
+++ b/crypto/whrlpool/Makefile
@@ -74,6 +74,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/x509/Makefile b/crypto/x509/Makefile
index 72c8227..af3c255 100644
--- a/crypto/x509/Makefile
+++ b/crypto/x509/Makefile
@@ -71,6 +71,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/crypto/x509v3/Makefile b/crypto/x509v3/Makefile
index 556ef35..05125ab 100644
--- a/crypto/x509v3/Makefile
+++ b/crypto/x509v3/Makefile
@@ -71,6 +71,8 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
+update: depend
+
 depend:
 	@[ -n &quot;$(MAKEDEPEND)&quot; ] # should be set by upper Makefile...
 	$(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
diff --git a/engines/Makefile b/engines/Makefile
index 2fa9534..23bd2f3 100644
--- a/engines/Makefile
+++ b/engines/Makefile
@@ -146,12 +146,15 @@ lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 	@target=lint; $(RECURSIVE_MAKE)
 
-depend:
-	@if [ -z &quot;$(THIS)&quot; ]; then \
-	    $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; \
-	fi
-	@[ -z &quot;$(THIS)&quot; ] || $(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+update: local_depend
+	@if [ -z &quot;$(THIS)&quot; ]; then $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; fi
+	@[ -z &quot;$(THIS)&quot; ] || (set -e; target=update; $(RECURSIVE_MAKE) )
+
+depend: local_depend
+	@if [ -z &quot;$(THIS)&quot; ]; then $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; fi
 	@[ -z &quot;$(THIS)&quot; ] || (set -e; target=depend; $(RECURSIVE_MAKE) )
+local_depend:
+	@[ -z &quot;$(THIS)&quot; ] || $(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
 
 dclean:
 	$(PERL) -pe 'if (/^# DO NOT DELETE THIS LINE/) {print; exit(0);}' $(MAKEFILE) &gt;Makefile.new
diff --git a/engines/ccgost/Makefile b/engines/ccgost/Makefile
index dadb523..a6836b3 100644
--- a/engines/ccgost/Makefile
+++ b/engines/ccgost/Makefile
@@ -66,12 +66,13 @@ links:
 
 tests:
 
-depend:
-	@if [ -z &quot;$(THIS)&quot; ]; then \
-	    $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; \
-	else \
-	    $(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC); \
-	fi
+update: local_depend
+	@if [ -z &quot;$(THIS)&quot; ]; then $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; fi
+
+depend: local_depend
+	@if [ -z &quot;$(THIS)&quot; ]; then $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; fi
+local_depend:
+	@[ -z &quot;$(THIS)&quot; ] || $(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
 
 files:
 
diff --git a/ssl/Makefile b/ssl/Makefile
index cd0c37d..f429e3a 100644
--- a/ssl/Makefile
+++ b/ssl/Makefile
@@ -89,12 +89,13 @@ tests:
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
-depend:
-	@if [ -z &quot;$(THIS)&quot; ]; then \
-	    $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; \
-	else \
-	    $(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC); \
-	fi
+update: local_depend
+	@if [ -z &quot;$(THIS)&quot; ]; then $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; fi
+
+depend: local_depend
+	@if [ -z &quot;$(THIS)&quot; ]; then $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; fi
+local_depend:
+	@[ -z &quot;$(THIS)&quot; ] || $(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
 
 dclean:
 	$(PERL) -pe 'if (/^# DO NOT DELETE THIS LINE/) {print; exit(0);}' $(MAKEFILE) &gt;Makefile.new
diff --git a/test/Makefile b/test/Makefile
index 9566945..3fe5f19 100644
--- a/test/Makefile
+++ b/test/Makefile
@@ -321,12 +321,13 @@ test_constant_time: $(CONSTTIMETEST)$(EXE_EXT)
 lint:
 	lint -DLINT $(INCLUDES) $(SRC)&gt;fluff
 
-depend:
-	@if [ -z &quot;$(THIS)&quot; ]; then \
-	    $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; \
-	else \
-	    $(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(SRC); \
-	fi
+update: local_depend
+	@if [ -z &quot;$(THIS)&quot; ]; then $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; fi
+
+depend: local_depend
+	@if [ -z &quot;$(THIS)&quot; ]; then $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; fi
+local_depend:
+	@[ -z &quot;$(THIS)&quot; ] || $(MAKEDEPEND) -- $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(SRC)
 
 dclean:
 	$(PERL) -pe 'if (/^# DO NOT DELETE THIS LINE/) {print; exit(0);}' $(MAKEFILE) &gt;Makefile.new
diff --git a/tools/Makefile b/tools/Makefile
index bb6fb71..c1a2f6b 100644
--- a/tools/Makefile
+++ b/tools/Makefile
@@ -44,6 +44,8 @@ tags:
 
 errors:
 
+update: depend
+
 depend:
 
 dclean:
</PRE>



















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001150.html">[openssl-commits] [openssl]  OpenSSL_1_0_0-stable update
</A></li>
	<LI>Next message: <A HREF="001159.html">[openssl-commits] [openssl]  OpenSSL_1_0_0-stable update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1157">[ date ]</a>
              <a href="thread.html#1157">[ thread ]</a>
              <a href="subject.html#1157">[ subject ]</a>
              <a href="author.html#1157">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
