<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl/openssl] 7d7801: Configuration: only produce a new configdata.pm if...
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2022-May/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%207d7801%3A%20Configuration%3A%20only%20produce%20a%20new%0A%20configdata.pm%20if...&In-Reply-To=%3Copenssl/openssl/push/refs/heads/openssl-3.0/fa229d-ff3e71%40github.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036586.html">
   <LINK REL="Next"  HREF="036588.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl/openssl] 7d7801: Configuration: only produce a new configdata.pm if...</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%207d7801%3A%20Configuration%3A%20only%20produce%20a%20new%0A%20configdata.pm%20if...&In-Reply-To=%3Copenssl/openssl/push/refs/heads/openssl-3.0/fa229d-ff3e71%40github.openssl.org%3E"
       TITLE="[openssl/openssl] 7d7801: Configuration: only produce a new configdata.pm if...">noreply at reply.github.openssl.org
       </A><BR>
    <I>Sun May 22 15:45:44 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="036586.html">[openssl/openssl] 764cf5: Configuration: only produce a new configdata.pm if...
</A></li>
        <LI>Next message (by thread): <A HREF="036588.html">[openssl/openssl] 286053: tolower: refine the tolower code to avoid a memory...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36587">[ date ]</a>
              <a href="thread.html#36587">[ thread ]</a>
              <a href="subject.html#36587">[ subject ]</a>
              <a href="author.html#36587">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  Branch: refs/heads/openssl-3.0
  Home:   <A HREF="https://github.openssl.org/openssl/openssl">https://github.openssl.org/openssl/openssl</A>
  Commit: 7d78017bd88758cc4cc1337da282f5439c17719a
      <A HREF="https://github.openssl.org/openssl/openssl/commit/7d78017bd88758cc4cc1337da282f5439c17719a">https://github.openssl.org/openssl/openssl/commit/7d78017bd88758cc4cc1337da282f5439c17719a</A>
  Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
  Date:   2022-05-22 (Sun, 22 May 2022)

  Changed paths:
    M Configure
    M configdata.pm.in

  Log Message:
  -----------
  Configuration: only produce a new configdata.pm if it has changed contents

The goal is to avoid having too much of the OpenSSL source rebuilt
because configdata.pm got a new time stamp.  The conditions for
updating configdata.pm are now:

1.  its time stamp is older than Configure's, or...
2.  its contents has changed.

Fixes #16377

Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
Reviewed-by: Todd Short &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">todd.short at me.com</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/16378">https://github.com/openssl/openssl/pull/16378</A>)

(cherry picked from commit 764cf5b26306a8712e8b3d41599c44dc5ed07a25)


  Commit: 5cbd580be9012edb39a60dc303f9ea55c7e4d7bd
      <A HREF="https://github.openssl.org/openssl/openssl/commit/5cbd580be9012edb39a60dc303f9ea55c7e4d7bd">https://github.openssl.org/openssl/openssl/commit/5cbd580be9012edb39a60dc303f9ea55c7e4d7bd</A>
  Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
  Date:   2022-05-22 (Sun, 22 May 2022)

  Changed paths:
    M Configure
    M build.info
    M configdata.pm.in

  Log Message:
  -----------
  Configuration: produce include/openssl/configuration.h when configuring

The goal is to avoid having too much of the OpenSSL source rebuilt
because include/openssl/configuration.h, or even because it was a
Makefile target that was called upon (some make implementations
consider the use of a target as an update of that target, even if it
wasn't really updated).

To resolve this, we move the production of include/openssl/configuration.h
to configdata.pm, and only update it if there were any actual changes.

Fixes #16377

Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
Reviewed-by: Todd Short &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">todd.short at me.com</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/16378">https://github.com/openssl/openssl/pull/16378</A>)

(cherry picked from commit 2522889620446f1e56338367d1b6b028ea952bb4)


  Commit: ff3e71b33c3f0f2da189b102afe13e074c85646a
      <A HREF="https://github.openssl.org/openssl/openssl/commit/ff3e71b33c3f0f2da189b102afe13e074c85646a">https://github.openssl.org/openssl/openssl/commit/ff3e71b33c3f0f2da189b102afe13e074c85646a</A>
  Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
  Date:   2022-05-22 (Sun, 22 May 2022)

  Changed paths:
    M Configurations/gentemplate.pm
    M Configure
    M build.info

  Log Message:
  -----------
  Building: For the FIPS module checksum, keep track of configuration,h

The FIPS module checksum needs to know that configuration.h is
generated from configuration.h.in, so that information is conserved.
To make this possible, it's now possible to have attributes with the
GENERATE keyword, and the attribute &quot;skip&quot; is added to make a keyword
a no-op, which makes it informative only.

Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
Reviewed-by: Todd Short &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">todd.short at me.com</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/16378">https://github.com/openssl/openssl/pull/16378</A>)

(cherry picked from commit 4d02d500aac80c136e3d6582b908e0fab77bbf42)


Compare: <A HREF="https://github.openssl.org/openssl/openssl/compare/fa229d4e0726...ff3e71b33c3f">https://github.openssl.org/openssl/openssl/compare/fa229d4e0726...ff3e71b33c3f</A>
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="036586.html">[openssl/openssl] 764cf5: Configuration: only produce a new configdata.pm if...
</A></li>
	<LI>Next message (by thread): <A HREF="036588.html">[openssl/openssl] 286053: tolower: refine the tolower code to avoid a memory...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36587">[ date ]</a>
              <a href="thread.html#36587">[ thread ]</a>
              <a href="subject.html#36587">[ subject ]</a>
              <a href="author.html#36587">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
