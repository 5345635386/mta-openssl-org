<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2016-March/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1457371569.073767.17457.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004979.html">
   <LINK REL="Next"  HREF="004981.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  master update</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1457371569.073767.17457.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  master update">levitte at openssl.org
       </A><BR>
    <I>Mon Mar  7 17:26:09 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="004979.html">[openssl-commits] [openssl]  master update
</A></li>
        <LI>Next message: <A HREF="004981.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4980">[ date ]</a>
              <a href="thread.html#4980">[ thread ]</a>
              <a href="subject.html#4980">[ subject ]</a>
              <a href="author.html#4980">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  6bd7a4d96c47068c63cbd2ca93f501816dc453c1 (commit)
       via  8a67946e5bf1cd0fe0020e0f28cbf84642ec4132 (commit)
       via  66ddf178b4eaac6d65f8ba56821f69b598556cec (commit)
       via  ae4c7450754ea13265edd69e6ff74d87c89401cd (commit)
      from  667867cced0013c1cfd8d7a9efa43b8f2cebc942 (commit)


- Log -----------------------------------------------------------------
commit 6bd7a4d96c47068c63cbd2ca93f501816dc453c1
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Mon Mar 7 15:41:33 2016 +0100

    Unified - adapt the generation of bignum assembler to use GENERATE
    
    This gets rid of the BEGINRAW..ENDRAW sections in crypto/bn/build.info.
    
    This also moves the assembler generating perl scripts to take the
    output file name as last command line argument, where necessary.
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;

commit 8a67946e5bf1cd0fe0020e0f28cbf84642ec4132
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Mon Mar 7 14:50:37 2016 +0100

    Unified - Add the build.info command OVERRIDE, to avoid build file clashes
    
    Should it be needed because the recipes within a RAW section might
    clash with those generated by Configure, it's possible to tell it
    not to generate them with the use of OVERRIDES, for example:
    
        SOURCE[libfoo]=foo.c bar.c
    
        OVERRIDES=bar.o
        BEGINRAW[Makefile(unix)]
        bar.o: bar.c
            $(CC) $(CFLAGS) -DSPECIAL -c -o $@ $&lt;
        ENDRAW[Makefile(unix)]
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;

commit 66ddf178b4eaac6d65f8ba56821f69b598556cec
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Mon Mar 7 14:38:54 2016 +0100

    Unified - Adapt the Unix and VMS templates to support GENERATE
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;

commit ae4c7450754ea13265edd69e6ff74d87c89401cd
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Mon Mar 7 14:37:00 2016 +0100

    Unified - Add the build.info command GENERATE, to generate source files
    
    In some cases, one might want to generate some source files from
    others, that's done as follows:
    
        GENERATE[foo.s]=asm/something.pl $(CFLAGS)
        GENERATE[bar.s]=asm/bar.S
    
    The value of each GENERATE line is a command line or part of it.
    Configure places no rules on the command line, except the the first
    item muct be the generator file.  It is, however, entirely up to the
    build file template to define exactly how those command lines should
    be handled, how the output is captured and so on.
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;

-----------------------------------------------------------------------

Summary of changes:
 Configurations/README             |  50 +++++++++++++++-
 Configurations/README.design      |  16 ++---
 Configurations/common.tmpl        |  25 +++++++-
 Configurations/descrip.mms.tmpl   |  15 +++++
 Configurations/unix-Makefile.tmpl |  37 ++++++++++++
 Configure                         |  29 ++++++++-
 crypto/bn/Makefile.in             |  34 +++++------
 crypto/bn/asm/alpha-mont.pl       |   3 +
 crypto/bn/asm/bn-586.pl           |   6 +-
 crypto/bn/asm/co-586.pl           |   5 ++
 crypto/bn/asm/ia64-mont.pl        |   4 +-
 crypto/bn/asm/sparct4-mont.pl     |   3 +
 crypto/bn/asm/sparcv9-gf2m.pl     |   3 +
 crypto/bn/asm/sparcv9-mont.pl     |   3 +
 crypto/bn/asm/sparcv9a-mont.pl    |   3 +
 crypto/bn/asm/via-mont.pl         |   5 ++
 crypto/bn/asm/vis3-mont.pl        |   3 +
 crypto/bn/asm/x86-gf2m.pl         |   5 ++
 crypto/bn/asm/x86-mont.pl         |   5 ++
 crypto/bn/asm/x86.pl              |   4 ++
 crypto/bn/build.info              | 120 +++++++++++++++-----------------------
 21 files changed, 272 insertions(+), 106 deletions(-)

diff --git a/Configurations/README b/Configurations/README
index afc6004..5665d24 100644
--- a/Configurations/README
+++ b/Configurations/README
@@ -363,8 +363,22 @@ include paths the build of their source files should use:
 
     INCLUDE[foo]=include
 
-It's possible to have raw build file lines, between BEGINRAW and
-ENDRAW lines as follows:
+In some cases, one might want to generate some source files from
+others, that's done as follows:
+
+    GENERATE[foo.s]=asm/something.pl $(CFLAGS)
+    GENERATE[bar.s]=asm/bar.S
+
+The value of each GENERATE line is a command line or part of it.
+Configure places no rules on the command line, except the the first
+item muct be the generator file.  It is, however, entirely up to the
+build file template to define exactly how those command lines should
+be handled, how the output is captured and so on.
+
+NOTE: GENERATE lines are limited to one command only per GENERATE.
+
+As a last resort, it's possible to have raw build file lines, between
+BEGINRAW and ENDRAW lines as follows:
 
     BEGINRAW[Makefile(unix)]
     haha.h: {- $builddir -}/Makefile
@@ -390,6 +404,18 @@ configuration items:
    build hoho.h: echo &quot;/* hoho */&quot; &gt; hoho.h
    ENDRAW[build.ninja(unix)]
 
+Should it be needed because the recipes within a RAW section might
+clash with those generated by Configure, it's possible to tell it
+not to generate them with the use of OVERRIDES, for example:
+
+    SOURCE[libfoo]=foo.c bar.c
+    
+    OVERRIDES=bar.o
+    BEGINRAW[Makefile(unix)]
+    bar.o: bar.c
+    	$(CC) $(CFLAGS) -DSPECIAL -c -o $@ $&lt;
+    ENDRAW[Makefile(unix)]
+
 See the documentation further up for more information on configuration
 items.
 
@@ -461,6 +487,26 @@ The build-file template is expected to define at least the following
 perl functions in a perl code fragment enclosed with &quot;{-&quot; and &quot;-}&quot;.
 They are all expected to return a string with the lines they produce.
 
+    generatesrc - function that produces build file lines to generate
+                  a source file from some input.
+
+                  It's called like this:
+
+                        generatesrc(src =&gt; &quot;PATH/TO/tobegenerated&quot;,
+                                    generator =&gt; [ &quot;generatingfile&quot;, ... ]
+                                    deps =&gt; [ &quot;dep1&quot;, ... ],
+                                    intent =&gt; one of &quot;libs&quot;, &quot;dso&quot;, &quot;bin&quot; );
+
+                  'src' has the name of the file to be generated.
+                  'generator' is the command or part of command to
+                  generate the file, of which the first item is
+                  expected to be the file to generate from.
+                  generatesrc() is expected to analyse and figure out
+                  exactly how to apply that file and how to capture
+                  the result.  'deps' is a list of explicit
+                  dependencies.  'intent' indicates what the generated
+                  file is going to be used for.
+
     src2obj     - function that produces build file lines to build an
                   object file from source files and associated data.
 
diff --git a/Configurations/README.design b/Configurations/README.design
index 5a28ef3..5065960 100644
--- a/Configurations/README.design
+++ b/Configurations/README.design
@@ -89,11 +89,8 @@ depends on the library 'libssl' to function properly.
     SOURCE[../libcrypto]=aes.c evp.c cversion.c
     DEPEND[cversion.o]=buildinf.h
     
-    BEGINRAW[Makefile(unix)]
-    crypto/buildinf.h : Makefile
-    	perl util/mkbuildinf.h &quot;$(CC) $(CFLAGS)&quot; &quot;$(PLATFORM)&quot; \
-    	    &gt; crypto/buildinf.h
-    ENDRAW[Makefile(unix)]
+    GENERATE[buildinf.h]=../util/mkbuildinf.pl &quot;$(CC) $(CFLAGS)&quot; &quot;$(PLATFORM)&quot;
+    DEPEND[buildinf.h]=../Makefile
 
 This is the build.info file in 'crypto', and it tells us a little more
 about what's needed to produce 'libcrypto'.  LIBS is used again to
@@ -161,11 +158,8 @@ information comes down to this:
     DEPEND[engines/libossltest]=libcrypto
     INCLUDE[engines/libossltest]=include
     
-    BEGINRAW[Makefile(unix)]
-    crypto/buildinf.h : Makefile
-    	perl util/mkbuildinf.h &quot;$(CC) $(CFLAGS)&quot; &quot;$(PLATFORM)&quot; \
-    	    &gt; crypto/buildinf.h
-    ENDRAW[Makefile(unix)]
+    GENERATE[crypto/buildinf.h]=util/mkbuildinf.pl &quot;$(CC) $(CFLAGS)&quot; &quot;$(PLATFORM)&quot;
+    DEPEND[crypto/buildinf.h]=Makefile
 
 
 A few notes worth mentioning:
@@ -180,7 +174,7 @@ The indexes for SOURCE, INCLUDE and ORDINALS must only be end product
 files, such as libraries, programs or engines.  The values of SOURCE
 variables must only be source files (possibly generated)
 
-DEPEND shows a relationship between different end product files, such
+DEPEND shows a relationship between different produced files, such
 as a program depending on a library, or between an object file and
 some extra source file.
 
diff --git a/Configurations/common.tmpl b/Configurations/common.tmpl
index 7e452dd..c2362d0 100644
--- a/Configurations/common.tmpl
+++ b/Configurations/common.tmpl
@@ -32,6 +32,22 @@
      @newlist;
  }
 
+ sub dogenerate {
+     my $src = shift;
+     return &quot;&quot; if $cache{$src};
+     my %opts = @_;
+     if ($unified_info{generate}-&gt;{$src}) {
+         $OUT .= generatesrc(src =&gt; $src,
+                             generator =&gt; $unified_info{generate}-&gt;{$src},
+                             deps =&gt; $unified_info{depends}-&gt;{$src},
+                             %opts);
+         foreach (@{$unified_info{depends}-&gt;{$src}}) {
+             dogenerate($_, %opts);
+         }
+     }
+     $cache{$src} = 1;
+ }
+
  # doobj is responsible for producing all the recipes that build
  # object files as well as dependency files.
  sub doobj {
@@ -43,10 +59,14 @@
      if (@{$unified_info{sources}-&gt;{$obj}}) {
          $OUT .= src2obj(obj =&gt; $obj_no_o,
                          srcs =&gt; $unified_info{sources}-&gt;{$obj},
-                         deps =&gt; [ reducedepends(resolvedepends($obj)) ],
+                         deps =&gt; $unified_info{depends}-&gt;{$obj},
                          incs =&gt; [ @{$unified_info{includes}-&gt;{$bin}},
                                    @{$unified_info{includes}-&gt;{$obj}} ],
                          %opts);
+         foreach ((@{$unified_info{sources}-&gt;{$obj}},
+                   @{$unified_info{depends}-&gt;{$obj}})) {
+             dogenerate($_, %opts);
+         }
      }
      $cache{$obj} = 1;
  }
@@ -114,6 +134,9 @@
      $cache{$script} = 1;
  }
 
+ # Start with populating the cache with all the overrides
+ %cache = map { $_ =&gt; 1 } @{$unified_info{overrides}};
+
  # Build all known libraries, engines, programs and scripts.
  # Everything else will be handled as a consequence.
  map { dolib($_) } @{$unified_info{libraries}};
diff --git a/Configurations/descrip.mms.tmpl b/Configurations/descrip.mms.tmpl
index ef59d42..157ebb5 100644
--- a/Configurations/descrip.mms.tmpl
+++ b/Configurations/descrip.mms.tmpl
@@ -407,6 +407,21 @@ configdata.pm : {- join(&quot; &quot;, sourcefile(&quot;Configurations&quot;, &quot;descrip.mms.tmpl&quot;), s
 {-
   use File::Basename;
   use File::Spec::Functions qw/abs2rel rel2abs catfile catdir/;
+
+  sub generatesrc {
+      my %args = @_;
+      my $generator = join(&quot; &quot;, @{$args{generator}});
+
+      if ($args{src} !~ /\.[sS]$/) {
+          return &lt;&lt;&quot;EOF&quot;;
+$args{src} : $args{generator}-&gt;[0]
+	\$(PERL) $generator &gt; \$@
+EOF
+      } else {
+          die &quot;No method to generate assembler source present.\n&quot;;
+      }
+  }
+
   sub src2obj {
       my %args = @_;
       my $obj = $args{obj};
diff --git a/Configurations/unix-Makefile.tmpl b/Configurations/unix-Makefile.tmpl
index 50dafd2..226f5bd 100644
--- a/Configurations/unix-Makefile.tmpl
+++ b/Configurations/unix-Makefile.tmpl
@@ -816,6 +816,43 @@ configdata.pm: {- $config{build_file_template} -} $(SRCDIR)/Configurations/commo
       return map { shlib_simple($_) } @_;
   }
 
+  sub generatesrc {
+      my %args = @_;
+      my $generator = join(&quot; &quot;, @{$args{generator}});
+
+      if ($args{src} !~ /\.[sS]$/) {
+          return &lt;&lt;&quot;EOF&quot;;
+$args{src}: $args{generator}-&gt;[0]
+	\$(PERL) $generator &gt; \$@
+EOF
+      } else {
+          if ($args{generator}-&gt;[0] =~ /\.[sS]$/) {
+              return &lt;&lt;&quot;EOF&quot;;
+$args{src}: $args{generator}-&gt;[0]
+	\$(CC) \$(CFLAGS) -E \$&lt; &gt; \$@
+EOF
+          } elsif ($args{generator}-&gt;[0] =~ /\.pl$/) {
+             return &lt;&lt;&quot;EOF&quot;;
+$args{src}: $args{generator}-&gt;[0]
+	( trap &quot;rm -f \$@.S&quot; INT; \\
+	  CC=&quot;\$(CC)&quot; \$(PERL) $generator \$@.S; \\
+	  if grep '^#' \$@.S &gt;/dev/null; then \\
+	      \$(CC) -E -P \$@.S &gt; \$@ &amp;&amp; rm -f \$@.S; \\
+	  else \\
+	      mv \$@.S \$@; \\
+	  fi )
+EOF
+          } elsif ($args{generator}-&gt;[0] =~ /\.m4$/) {
+              return &lt;&lt;&quot;EOF&quot;;
+$args{src}: $args{generator}-&gt;[0]
+	m4 -B 8192 $generator &gt; \$@
+EOF
+          } else {
+              die &quot;Generator type for $args{src} unknown: $args{generator}\n&quot;;
+          }
+      }
+  }
+
   sub src2obj {
       my %args = @_;
       my $obj = $args{obj};
diff --git a/Configure b/Configure
index 174fe15..34926ab 100755
--- a/Configure
+++ b/Configure
@@ -1274,6 +1274,7 @@ if ($builder eq &quot;unified&quot;) {
         my @engines = ();
         my @scripts = ();
         my @extra = ();
+        my @overrides = ();
         my @intermediates = ();
         my @rawlines = ();
 
@@ -1283,6 +1284,7 @@ if ($builder eq &quot;unified&quot;) {
         my %depends = ();
         my %renames = ();
         my %sharednames = ();
+        my %generate = ();
 
         push @{$config{build_infos}}, catfile(abs2rel($sourced, $blddir), $f);
         my $template = Text::Template-&gt;new(TYPE =&gt; 'FILE',
@@ -1341,6 +1343,9 @@ if ($builder eq &quot;unified&quot;) {
             qr/^\s*EXTRA\s*=\s*(.*)\s*$/
             =&gt; sub { push @extra, split(/\s+/, $1)
                          if !@skip || $skip[$#skip] &gt; 0 },
+            qr/^\s*OVERRIDES\s*=\s*(.*)\s*$/
+            =&gt; sub { push @overrides, split(/\s+/, $1)
+                         if !@skip || $skip[$#skip] &gt; 0 },
 
             qr/^\s*ORDINALS\[((?:\\.|[^\\\]])+)\]\s*=\s*(.*)\s*$/,
             =&gt; sub { push @{$ordinals{$1}}, split(/\s+/, $2)
@@ -1354,6 +1359,9 @@ if ($builder eq &quot;unified&quot;) {
             qr/^\s*DEPEND\[((?:\\.|[^\\\]])+)\]\s*=\s*(.*)\s*$/
             =&gt; sub { push @{$depends{$1}}, split(/\s+/, $2)
                          if !@skip || $skip[$#skip] &gt; 0 },
+            qr/^\s*GENERATE\[((?:\\.|[^\\\]])+)\]\s*=\s*(.*)\s*$/
+            =&gt; sub { push @{$generate{$1}}, $2
+                         if !@skip || $skip[$#skip] &gt; 0 },
             qr/^\s*RENAME\[((?:\\.|[^\\\]])+)\]\s*=\s*(.*)\s*$/
             =&gt; sub { push @{$renames{$1}}, split(/\s+/, $2)
                          if !@skip || $skip[$#skip] &gt; 0 },
@@ -1436,6 +1444,11 @@ EOF
             $unified_info{extra}-&gt;{$extra} = 1;
         }
 
+        foreach (@overrides) {
+            my $override = cleanfile($buildd, $_, $blddir);
+            $unified_info{overrides}-&gt;{$override} = 1;
+        }
+
         push @{$unified_info{rawlines}}, @rawlines;
 
         unless ($disabled{shared}) {
@@ -1514,6 +1527,20 @@ EOF
             }
         }
 
+        foreach (keys %generate) {
+            my $dest = $_;
+            my $ddest = cleanfile($buildd, $_, $blddir);
+            if ($unified_info{rename}-&gt;{$ddest}) {
+                $ddest = $unified_info{rename}-&gt;{$ddest};
+            }
+            die &quot;more than one generator for $dest: &quot;
+                    ,join(&quot; &quot;, @{$generate{$_}}),&quot;\n&quot;
+                    if scalar @{$generate{$_}} &gt; 1;
+            my @generator = split /\s+/, $generate{$dest}-&gt;[0];
+            $generator[0] = cleanfile($sourced, $generator[0], $blddir),
+            $unified_info{generate}-&gt;{$ddest} = [ @generator ];
+        }
+
         foreach (keys %depends) {
             my $dest = $_;
             my $ddest = cleanfile($buildd, $_, $blddir);
@@ -1565,7 +1592,7 @@ EOF
 
     ### Make unified_info a bit more efficient
     # One level structures
-    foreach ((&quot;programs&quot;, &quot;libraries&quot;, &quot;engines&quot;, &quot;scripts&quot;, &quot;extra&quot;)) {
+    foreach ((&quot;programs&quot;, &quot;libraries&quot;, &quot;engines&quot;, &quot;scripts&quot;, &quot;extra&quot;, &quot;overrides&quot;)) {
         $unified_info{$_} = [ sort keys %{$unified_info{$_}} ];
     }
     # Two level structures
diff --git a/crypto/bn/Makefile.in b/crypto/bn/Makefile.in
index b14301a..594667f 100644
--- a/crypto/bn/Makefile.in
+++ b/crypto/bn/Makefile.in
@@ -58,28 +58,28 @@ lib:	$(LIBOBJ)
 	@touch lib
 
 bn-586.s:	asm/bn-586.pl ../perlasm/x86asm.pl
-	$(PERL) asm/bn-586.pl $(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR) &gt; $@
+	$(PERL) asm/bn-586.pl $(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR) $@
 co-586.s:	asm/co-586.pl ../perlasm/x86asm.pl
-	$(PERL) asm/co-586.pl $(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR) &gt; $@
+	$(PERL) asm/co-586.pl $(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR) $@
 x86-mont.s:	asm/x86-mont.pl ../perlasm/x86asm.pl
-	$(PERL) asm/x86-mont.pl $(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR) &gt; $@
+	$(PERL) asm/x86-mont.pl $(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR) $@
 x86-gf2m.s:	asm/x86-gf2m.pl ../perlasm/x86asm.pl
-	$(PERL) asm/x86-gf2m.pl $(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR) &gt; $@
+	$(PERL) asm/x86-gf2m.pl $(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR) $@
 
 sparcv8.o:	asm/sparcv8.S
 	$(CC) $(CFLAGS) -c asm/sparcv8.S
 bn-sparcv9.o:	asm/sparcv8plus.S
 	$(CC) $(CFLAGS) -c -o $@ asm/sparcv8plus.S
 sparcv9a-mont.s:	asm/sparcv9a-mont.pl
-	$(PERL) asm/sparcv9a-mont.pl $(CFLAGS) &gt; $@
+	$(PERL) asm/sparcv9a-mont.pl $(CFLAGS) $@
 sparcv9-mont.s:		asm/sparcv9-mont.pl
-	$(PERL) asm/sparcv9-mont.pl $(CFLAGS) &gt; $@
+	$(PERL) asm/sparcv9-mont.pl $(CFLAGS) $@
 vis3-mont.s:		asm/vis3-mont.pl
-	$(PERL) asm/vis3-mont.pl $(CFLAGS) &gt; $@
+	$(PERL) asm/vis3-mont.pl $(CFLAGS) $@
 sparct4-mont.S:	asm/sparct4-mont.pl
-	$(PERL) asm/sparct4-mont.pl $(CFLAGS) &gt; $@
+	$(PERL) asm/sparct4-mont.pl $(CFLAGS) $@
 sparcv9-gf2m.S:	asm/sparcv9-gf2m.pl
-	$(PERL) asm/sparcv9-gf2m.pl $(CFLAGS) &gt; $@
+	$(PERL) asm/sparcv9-gf2m.pl $(CFLAGS) $@
 
 bn-mips.s:	asm/mips.pl
 	$(PERL) asm/mips.pl $(PERLASM_SCHEME) $@
@@ -94,20 +94,20 @@ s390x-gf2m.s:	asm/s390x-gf2m.pl
 x86_64-gcc.o:	asm/x86_64-gcc.c
 	$(CC) $(CFLAGS) -c -o $@ asm/x86_64-gcc.c
 x86_64-mont.s:	asm/x86_64-mont.pl
-	$(PERL) asm/x86_64-mont.pl $(PERLASM_SCHEME) &gt; $@
+	$(PERL) asm/x86_64-mont.pl $(PERLASM_SCHEME) $@
 x86_64-mont5.s:	asm/x86_64-mont5.pl
-	$(PERL) asm/x86_64-mont5.pl $(PERLASM_SCHEME) &gt; $@
+	$(PERL) asm/x86_64-mont5.pl $(PERLASM_SCHEME) $@
 x86_64-gf2m.s:	asm/x86_64-gf2m.pl
-	$(PERL) asm/x86_64-gf2m.pl $(PERLASM_SCHEME) &gt; $@
+	$(PERL) asm/x86_64-gf2m.pl $(PERLASM_SCHEME) $@
 rsaz-x86_64.s:	asm/rsaz-x86_64.pl
-	$(PERL) asm/rsaz-x86_64.pl $(PERLASM_SCHEME) &gt; $@
+	$(PERL) asm/rsaz-x86_64.pl $(PERLASM_SCHEME) $@
 rsaz-avx2.s:	asm/rsaz-avx2.pl 
-	$(PERL) asm/rsaz-avx2.pl $(PERLASM_SCHEME) &gt; $@
+	$(PERL) asm/rsaz-avx2.pl $(PERLASM_SCHEME) $@
 
 bn-ia64.s:	asm/ia64.S
-	$(CC) $(CFLAGS) -E asm/ia64.S &gt; $@
+	$(CC) $(CFLAGS) -E asm/ia64.S $@
 ia64-mont.s:	asm/ia64-mont.pl
-	$(PERL) asm/ia64-mont.pl $@ $(CFLAGS)
+	$(PERL) asm/ia64-mont.pl $(CFLAGS) $@
 
 parisc-mont.s:	asm/parisc-mont.pl
 	$(PERL) asm/parisc-mont.pl $(PERLASM_SCHEME) $@
@@ -119,7 +119,7 @@ ppc64-mont.s:	asm/ppc64-mont.pl;$(PERL) asm/ppc64-mont.pl $(PERLASM_SCHEME) $@
 
 alpha-mont.s:	asm/alpha-mont.pl
 	(preproc=$$$$.$@.S; trap &quot;rm $$preproc&quot; INT; \
-	$(PERL) asm/alpha-mont.pl &gt; $$preproc &amp;&amp; \
+	$(PERL) asm/alpha-mont.pl $$preproc &amp;&amp; \
 	$(CC) -E -P $$preproc &gt; $@ &amp;&amp; rm $$preproc)
 
 # GNU make &quot;catch all&quot;
diff --git a/crypto/bn/asm/alpha-mont.pl b/crypto/bn/asm/alpha-mont.pl
index 03596e2..2ac3532 100644
--- a/crypto/bn/asm/alpha-mont.pl
+++ b/crypto/bn/asm/alpha-mont.pl
@@ -15,6 +15,9 @@
 # I.e. if you compare 1GHz 21264 and 2GHz Opteron, you'll observe ~2x
 # difference.
 
+$output=pop;
+open STDOUT,&quot;&gt;$output&quot;;
+
 # int bn_mul_mont(
 $rp=&quot;a0&quot;;	# BN_ULONG *rp,
 $ap=&quot;a1&quot;;	# const BN_ULONG *ap,
diff --git a/crypto/bn/asm/bn-586.pl b/crypto/bn/asm/bn-586.pl
index 332ef3e..3f34abe 100644
--- a/crypto/bn/asm/bn-586.pl
+++ b/crypto/bn/asm/bn-586.pl
@@ -4,6 +4,9 @@ $0 =~ m/(.*[\/\\])[^\/\\]+$/; $dir=$1;
 push(@INC,&quot;${dir}&quot;,&quot;${dir}../../perlasm&quot;);
 require &quot;x86asm.pl&quot;;
 
+$output = pop;
+open STDOUT,&quot;&gt;$output&quot;;
+
 &amp;asm_init($ARGV[0],$0);
 
 $sse2=0;
@@ -21,6 +24,8 @@ for (@ARGV) { $sse2=1 if (/-DOPENSSL_IA32_SSE2/); }
 
 &amp;asm_finish();
 
+close STDOUT;
+
 sub bn_mul_add_words
 	{
 	local($name)=@_;
@@ -771,4 +776,3 @@ sub bn_sub_part_words
 
 	&amp;function_end($name);
 	}
-
diff --git a/crypto/bn/asm/co-586.pl b/crypto/bn/asm/co-586.pl
index 57101a6..ec3ea34 100644
--- a/crypto/bn/asm/co-586.pl
+++ b/crypto/bn/asm/co-586.pl
@@ -4,6 +4,9 @@ $0 =~ m/(.*[\/\\])[^\/\\]+$/; $dir=$1;
 push(@INC,&quot;${dir}&quot;,&quot;${dir}../../perlasm&quot;);
 require &quot;x86asm.pl&quot;;
 
+$output = pop;
+open STDOUT,&quot;&gt;$output&quot;;
+
 &amp;asm_init($ARGV[0],$0);
 
 &amp;bn_mul_comba(&quot;bn_mul_comba8&quot;,8);
@@ -13,6 +16,8 @@ require &quot;x86asm.pl&quot;;
 
 &amp;asm_finish();
 
+close STDOUT;
+
 sub mul_add_c
 	{
 	local($a,$ai,$b,$bi,$c0,$c1,$c2,$pos,$i,$na,$nb)=@_;
diff --git a/crypto/bn/asm/ia64-mont.pl b/crypto/bn/asm/ia64-mont.pl
index e258658..710ca3c 100644
--- a/crypto/bn/asm/ia64-mont.pl
+++ b/crypto/bn/asm/ia64-mont.pl
@@ -60,6 +60,8 @@
 # hereafter less for longer keys, while verify - by 74-13%.
 # DSA performance improves by 115-30%.
 
+$output=pop;
+
 if ($^O eq &quot;hpux&quot;) {
     $ADDP=&quot;addp4&quot;;
     for (@ARGV) { $ADDP=&quot;add&quot; if (/[\+DD|\-mlp]64/); }
@@ -846,6 +848,6 @@ copyright:
 stringz	&quot;Montgomery multiplication for IA-64, CRYPTOGAMS by &lt;appro\@openssl.org&gt;&quot;
 ___
 
-$output=shift and open STDOUT,&quot;&gt;$output&quot;;
+open STDOUT,&quot;&gt;$output&quot; if $output;
 print $code;
 close STDOUT;
diff --git a/crypto/bn/asm/sparct4-mont.pl b/crypto/bn/asm/sparct4-mont.pl
index 71b4500..7ec83c2 100755
--- a/crypto/bn/asm/sparct4-mont.pl
+++ b/crypto/bn/asm/sparct4-mont.pl
@@ -76,6 +76,9 @@ $0 =~ m/(.*[\/\\])[^\/\\]+$/; $dir=$1;
 push(@INC,&quot;${dir}&quot;,&quot;${dir}../../perlasm&quot;);
 require &quot;sparcv9_modes.pl&quot;;
 
+$output = pop;
+open STDOUT,&quot;&gt;$output&quot;;
+
 $code.=&lt;&lt;___;
 #include &quot;sparc_arch.h&quot;
 
diff --git a/crypto/bn/asm/sparcv9-gf2m.pl b/crypto/bn/asm/sparcv9-gf2m.pl
index ab94cd9..c7bf9f2 100644
--- a/crypto/bn/asm/sparcv9-gf2m.pl
+++ b/crypto/bn/asm/sparcv9-gf2m.pl
@@ -18,6 +18,9 @@
 # ~100-230% faster than gcc-generated code and ~35-90% faster than
 # the pure SPARCv9 code path.
 
+$output = pop;
+open STDOUT,&quot;&gt;$output&quot;;
+
 $locals=16*8;
 
 $tab=&quot;%l0&quot;;
diff --git a/crypto/bn/asm/sparcv9-mont.pl b/crypto/bn/asm/sparcv9-mont.pl
index b8fb1e8..c08d822 100644
--- a/crypto/bn/asm/sparcv9-mont.pl
+++ b/crypto/bn/asm/sparcv9-mont.pl
@@ -42,6 +42,9 @@
 # module still have hidden potential [see TODO list there], which is
 # estimated to be larger than 20%...
 
+$output = pop;
+open STDOUT,&quot;&gt;$output&quot;;
+
 # int bn_mul_mont(
 $rp=&quot;%i0&quot;;	# BN_ULONG *rp,
 $ap=&quot;%i1&quot;;	# const BN_ULONG *ap,
diff --git a/crypto/bn/asm/sparcv9a-mont.pl b/crypto/bn/asm/sparcv9a-mont.pl
index 4cde041..433ec9e 100755
--- a/crypto/bn/asm/sparcv9a-mont.pl
+++ b/crypto/bn/asm/sparcv9a-mont.pl
@@ -55,6 +55,9 @@
 # key length, more for longer keys] on USI&amp;II cores and 30-80% - on
 # USIII&amp;IV.
 
+$output = pop;
+open STDOUT,&quot;&gt;$output&quot;;
+
 $fname=&quot;bn_mul_mont_fpu&quot;;
 $bits=32;
 for (@ARGV) { $bits=64 if (/\-m64/ || /\-xarch\=v9/); }
diff --git a/crypto/bn/asm/via-mont.pl b/crypto/bn/asm/via-mont.pl
index c046a51..8cf4dde 100644
--- a/crypto/bn/asm/via-mont.pl
+++ b/crypto/bn/asm/via-mont.pl
@@ -81,6 +81,9 @@ $0 =~ m/(.*[\/\\])[^\/\\]+$/; $dir=$1;
 push(@INC,&quot;${dir}&quot;,&quot;${dir}../../perlasm&quot;);
 require &quot;x86asm.pl&quot;;
 
+$output = pop;
+open STDOUT,&quot;&gt;$output&quot;;
+
 &amp;asm_init($ARGV[0],&quot;via-mont.pl&quot;);
 
 # int bn_mul_mont(BN_ULONG *rp, const BN_ULONG *ap, const BN_ULONG *bp, const BN_ULONG *np,const BN_ULONG *n0, int num);
@@ -240,3 +243,5 @@ $sp=&amp;DWP(28,&quot;esp&quot;);
 &amp;asciz(&quot;Padlock Montgomery Multiplication, CRYPTOGAMS by &lt;appro\@openssl.org&gt;&quot;);
 
 &amp;asm_finish();
+
+close STDOUT;
diff --git a/crypto/bn/asm/vis3-mont.pl b/crypto/bn/asm/vis3-mont.pl
index 1d8dc9e..8bab5a1 100644
--- a/crypto/bn/asm/vis3-mont.pl
+++ b/crypto/bn/asm/vis3-mont.pl
@@ -18,6 +18,9 @@
 # for reference purposes, because T4 has dedicated Montgomery
 # multiplication and squaring *instructions* that deliver even more.
 
+$output = pop;
+open STDOUT,&quot;&gt;$output&quot;;
+
 $bits=32;
 for (@ARGV)     { $bits=64 if (/\-m64/ || /\-xarch\=v9/); }
 if ($bits==64)  { $bias=2047; $frame=192; }
diff --git a/crypto/bn/asm/x86-gf2m.pl b/crypto/bn/asm/x86-gf2m.pl
index b579530..0292178 100644
--- a/crypto/bn/asm/x86-gf2m.pl
+++ b/crypto/bn/asm/x86-gf2m.pl
@@ -36,6 +36,9 @@ $0 =~ m/(.*[\/\\])[^\/\\]+$/; $dir=$1;
 push(@INC,&quot;${dir}&quot;,&quot;${dir}../../perlasm&quot;);
 require &quot;x86asm.pl&quot;;
 
+$output = pop;
+open STDOUT,&quot;&gt;$output&quot;;
+
 &amp;asm_init($ARGV[0],$0,$x86only = $ARGV[$#ARGV] eq &quot;386&quot;);
 
 $sse2=0;
@@ -311,3 +314,5 @@ if ($sse2) {
 &amp;asciz	(&quot;GF(2^m) Multiplication for x86, CRYPTOGAMS by &lt;appro\@openssl.org&gt;&quot;);
 
 &amp;asm_finish();
+
+close STDOUT;
diff --git a/crypto/bn/asm/x86-mont.pl b/crypto/bn/asm/x86-mont.pl
index 89f4de6..972de26 100755
--- a/crypto/bn/asm/x86-mont.pl
+++ b/crypto/bn/asm/x86-mont.pl
@@ -30,6 +30,9 @@ $0 =~ m/(.*[\/\\])[^\/\\]+$/; $dir=$1;
 push(@INC,&quot;${dir}&quot;,&quot;${dir}../../perlasm&quot;);
 require &quot;x86asm.pl&quot;;
 
+$output = pop;
+open STDOUT,&quot;&gt;$output&quot;;
+ 
 &amp;asm_init($ARGV[0],$0);
 
 $sse2=0;
@@ -606,3 +609,5 @@ $sbit=$num;
 &amp;asciz(&quot;Montgomery Multiplication for x86, CRYPTOGAMS by &lt;appro\@openssl.org&gt;&quot;);
 
 &amp;asm_finish();
+
+close STDOUT;
diff --git a/crypto/bn/asm/x86.pl b/crypto/bn/asm/x86.pl
index 1bc4f1b..c1cab72 100644
--- a/crypto/bn/asm/x86.pl
+++ b/crypto/bn/asm/x86.pl
@@ -11,6 +11,9 @@ require(&quot;x86/add.pl&quot;);
 require(&quot;x86/sub.pl&quot;);
 require(&quot;x86/comba.pl&quot;);
 
+$output = pop;
+open STDOUT,&quot;&gt;$output&quot;;
+
 &amp;asm_init($ARGV[0],$0);
 
 &amp;bn_mul_add_words(&quot;bn_mul_add_words&quot;);
@@ -26,3 +29,4 @@ require(&quot;x86/comba.pl&quot;);
 
 &amp;asm_finish();
 
+close STDOUT;
diff --git a/crypto/bn/build.info b/crypto/bn/build.info
index a6b94c4..e9cde75 100644
--- a/crypto/bn/build.info
+++ b/crypto/bn/build.info
@@ -9,32 +9,56 @@ SOURCE[../../libcrypto]=\
         bn_depr.c bn_const.c bn_x931p.c bn_intern.c bn_dh.c bn_srp.c
 INCLUDE[../../libcrypto]={- rel2abs(catdir($builddir,&quot;..&quot;,&quot;..&quot;,&quot;crypto&quot;,&quot;include&quot;)) -}
 
-BEGINRAW[Makefile]
-##### BN assembler implementations
+GENERATE[bn-586.s]=asm/bn-586.pl \
+	$(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR)
+DEPEND[bn-586.s]=../perlasm/x86asm.pl
+GENERATE[co-586.s]=asm/co-586.pl \
+	$(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR)
+DEPEND[co-586.s]=../perlasm/x86asm.pl
+GENERATE[x86-mont.s]=asm/x86-mont.pl \
+	$(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR)
+DEPEND[x86-mont.s]=../perlasm/x86asm.pl
+GENERATE[x86-gf2m.s]=asm/x86-gf2m.pl \
+	$(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR)
+DEPEND[x86-gf2m.s]=../perlasm/x86asm.pl
+
+GENERATE[sparcv9a-mont.s]=asm/sparcv9a-mont.pl $(CFLAGS)
+GENERATE[sparcv9-mont.s]=asm/sparcv9-mont.pl $(CFLAGS)
+GENERATE[vis3-mont.s]=asm/vis3-mont.pl $(CFLAGS)
+GENERATE[sparct4-mont.S]=asm/sparct4-mont.pl $(CFLAGS)
+GENERATE[sparcv9-gf2m.S]=asm/sparcv9-gf2m.pl $(CFLAGS)
+
+GENERATE[bn-mips.s]=asm/mips.pl $(PERLASM_SCHEME)
+GENERATE[mips-mont.s]=asm/mips-mont.pl $(PERLASM_SCHEME)
+
+GENERATE[s390x-mont.S]=asm/s390x-mont.pl $(PERLASM_SCHEME)
+GENERATE[s390x-gf2m.s]=asm/s390x-gf2m.pl $(PERLASM_SCHEME)
+
+GENERATE[x86_64-mont.s]=asm/x86_64-mont.pl $(PERLASM_SCHEME)
+GENERATE[x86_64-mont5.s]=asm/x86_64-mont5.pl $(PERLASM_SCHEME)
+GENERATE[x86_64-gf2m.s]=asm/x86_64-gf2m.pl $(PERLASM_SCHEME)
+GENERATE[rsaz-x86_64.s]=asm/rsaz-x86_64.pl $(PERLASM_SCHEME)
+GENERATE[rsaz-avx2.s]=asm/rsaz-avx2.pl $(PERLASM_SCHEME)
+
+GENERATE[bn-ia64.s]=asm/ia64.S
+GENERATE[ia64-mont.s]=asm/ia64-mont.pl $(CFLAGS)
+
+GENERATE[parisc-mont.s]=asm/parisc-mont.pl $(PERLASM_SCHEME)
+
+# ppc - AIX, Linux, MacOS X...
+GENERATE[bn-ppc.s]=asm/ppc.pl $(PERLASM_SCHEME)
+GENERATE[ppc-mont.s]=asm/ppc-mont.pl $(PERLASM_SCHEME)
+GENERATE[ppc64-mont.s]=asm/ppc64-mont.pl $(PERLASM_SCHEME)
+
+GENERATE[alpha-mont.s]=asm/alpha-mont.pl
 
-{- $builddir -}/bn-586.s:	{- $sourcedir -}/asm/bn-586.pl {- $sourcetop -}/crypto/perlasm/x86asm.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/bn-586.pl $(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR) &gt; $@
-{- $builddir -}/co-586.s:	{- $sourcedir -}/asm/co-586.pl {- $sourcetop -}/crypto/perlasm/x86asm.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/co-586.pl $(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR) &gt; $@
-{- $builddir -}/x86-mont.s:	{- $sourcedir -}/asm/x86-mont.pl {- $sourcetop -}/crypto/perlasm/x86asm.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/x86-mont.pl $(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR) &gt; $@
-{- $builddir -}/x86-gf2m.s:	{- $sourcedir -}/asm/x86-gf2m.pl {- $sourcetop -}/crypto/perlasm/x86asm.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/x86-gf2m.pl $(PERLASM_SCHEME) $(CFLAGS) $(PROCESSOR) &gt; $@
+GENERATE[armv4-mont.S]=asm/armv4-mont.pl $(PERLASM_SCHEME)
+GENERATE[armv4-gf2m.S]=asm/armv4-gf2m.pl $(PERLASM_SCHEME)
+GENERATE[armv8-mont.S]=asm/armv8-mont.pl $(PERLASM_SCHEME)
 
-{- $builddir -}/sparcv8.o:	{- $sourcedir -}/asm/sparcv8.S
-	$(CC) $(CFLAGS) -c {- $sourcedir -}/asm/sparcv8.S
-{- $builddir -}/bn-sparcv9.o:	{- $sourcedir -}/asm/sparcv8plus.S
-	$(CC) $(CFLAGS) -c -o $@ {- $sourcedir -}/asm/sparcv8plus.S
-{- $builddir -}/sparcv9a-mont.s:	{- $sourcedir -}/asm/sparcv9a-mont.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/sparcv9a-mont.pl $(CFLAGS) &gt; $@
-{- $builddir -}/sparcv9-mont.s:		{- $sourcedir -}/asm/sparcv9-mont.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/sparcv9-mont.pl $(CFLAGS) &gt; $@
-{- $builddir -}/vis3-mont.s:		{- $sourcedir -}/asm/vis3-mont.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/vis3-mont.pl $(CFLAGS) &gt; $@
-{- $builddir -}/sparct4-mont.S:	{- $sourcedir -}/asm/sparct4-mont.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/sparct4-mont.pl $(CFLAGS) &gt; $@
-{- $builddir -}/sparcv9-gf2m.S:	{- $sourcedir -}/asm/sparcv9-gf2m.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/sparcv9-gf2m.pl $(CFLAGS) &gt; $@
+OVERRIDES=bn-mips3.o pa-risc2W.o pa-risc2.c
+BEGINRAW[Makefile]
+##### BN assembler implementations
 
 {- $builddir -}/bn-mips3.o:	{- $sourcedir -}/asm/mips3.s
 	@if [ &quot;$(CC)&quot; = &quot;gcc&quot; ]; then \
@@ -42,32 +66,6 @@ BEGINRAW[Makefile]
 		as -$$ABI -O -o $@ {- $sourcedir -}/asm/mips3.s; \
 	else	$(CC) -c $(CFLAGS) -o $@ {- $sourcedir -}/asm/mips3.s; fi
 
-{- $builddir -}/bn-mips.s:	{- $sourcedir -}/asm/mips.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/mips.pl $(PERLASM_SCHEME) $@
-{- $builddir -}/mips-mont.s:	{- $sourcedir -}/asm/mips-mont.pl
-	CC=&quot;$(CC)&quot; $(PERL)	{- $sourcedir -}/asm/mips-mont.pl $(PERLASM_SCHEME) $@
-
-{- $builddir -}/bn-s390x.o:	{- $sourcedir -}/asm/s390x.S
-	$(CC) $(CFLAGS) -c -o $@ {- $sourcedir -}/asm/s390x.S
-{- $builddir -}/s390x-gf2m.s:	{- $sourcedir -}/asm/s390x-gf2m.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/s390x-gf2m.pl $(PERLASM_SCHEME) $@
-
-{- $builddir -}/x86_64-mont.s:	{- $sourcedir -}/asm/x86_64-mont.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/x86_64-mont.pl $(PERLASM_SCHEME) &gt; $@
-{- $builddir -}/x86_64-mont5.s:	{- $sourcedir -}/asm/x86_64-mont5.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/x86_64-mont5.pl $(PERLASM_SCHEME) &gt; $@
-{- $builddir -}/x86_64-gf2m.s:	{- $sourcedir -}/asm/x86_64-gf2m.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/x86_64-gf2m.pl $(PERLASM_SCHEME) &gt; $@
-{- $builddir -}/rsaz-x86_64.s:	{- $sourcedir -}/asm/rsaz-x86_64.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/rsaz-x86_64.pl $(PERLASM_SCHEME) &gt; $@
-{- $builddir -}/rsaz-avx2.s:	{- $sourcedir -}/asm/rsaz-avx2.pl 
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/rsaz-avx2.pl $(PERLASM_SCHEME) &gt; $@
-
-{- $builddir -}/bn-ia64.s:	{- $sourcedir -}/asm/ia64.S
-	$(CC) $(CFLAGS) -E {- $sourcedir -}/asm/ia64.S &gt; $@
-{- $builddir -}/ia64-mont.s:	{- $sourcedir -}/asm/ia64-mont.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/ia64-mont.pl $@ $(CFLAGS)
-
 # GNU assembler fails to compile PA-RISC2 modules, insist on calling
 # vendor assembler...
 {- $builddir -}/pa-risc2W.o: {- $sourcedir -}/asm/pa-risc2W.s
@@ -75,26 +73,4 @@ BEGINRAW[Makefile]
 {- $builddir -}/pa-risc2.o: {- $sourcedir -}/asm/pa-risc2.s
 	CC=&quot;$(CC)&quot; $(PERL) $(SRCDIR)/util/fipsas.pl $(SRCDIR) $&lt; /usr/ccs/bin/as -o pa-risc2.o {- $sourcedir -}/asm/pa-risc2.s
 
-{- $builddir -}/parisc-mont.s:	{- $sourcedir -}/asm/parisc-mont.pl
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/parisc-mont.pl $(PERLASM_SCHEME) $@
-
-# ppc - AIX, Linux, MacOS X...
-{- $builddir -}/bn-ppc.s:	{- $sourcedir -}/asm/ppc.pl;	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/ppc.pl $(PERLASM_SCHEME) $@
-{- $builddir -}/ppc-mont.s:	{- $sourcedir -}/asm/ppc-mont.pl;CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/ppc-mont.pl $(PERLASM_SCHEME) $@
-{- $builddir -}/ppc64-mont.s:	{- $sourcedir -}/asm/ppc64-mont.pl;CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/ppc64-mont.pl $(PERLASM_SCHEME) $@
-
-{- $builddir -}/alpha-mont.s:	{- $sourcedir -}/asm/alpha-mont.pl
-	(preproc=$$$$.$@.S; trap &quot;rm $$preproc&quot; INT; \
-	CC=&quot;$(CC)&quot; $(PERL) {- $sourcedir -}/asm/alpha-mont.pl &gt; $$preproc &amp;&amp; \
-	$(CC) -E -P $$preproc &gt; $@ &amp;&amp; rm $$preproc)
-
-# GNU make &quot;catch all&quot;
-{- $builddir -}/%-mont.S:	{- $sourcedir -}/asm/%-mont.pl
-	CC=&quot;$(CC)&quot; $(PERL) $&lt; $(PERLASM_SCHEME) $@
-{- $builddir -}/%-gf2m.S:	{- $sourcedir -}/asm/%-gf2m.pl
-	CC=&quot;$(CC)&quot; $(PERL) $&lt; $(PERLASM_SCHEME) $@
-
-{- $builddir -}/armv4-mont.o:	{- $builddir -}/armv4-mont.S
-{- $builddir -}/armv4-gf2m.o:	{- $builddir -}/armv4-gf2m.S
-{- $builddir -}/armv8-mont.o:	{- $builddir -}/armv8-mont.S
 ENDRAW[Makefile]
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004979.html">[openssl-commits] [openssl]  master update
</A></li>
	<LI>Next message: <A HREF="004981.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4980">[ date ]</a>
              <a href="thread.html#4980">[ thread ]</a>
              <a href="subject.html#4980">[ subject ]</a>
              <a href="author.html#4980">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
