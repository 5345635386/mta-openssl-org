<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2019-November/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1575017644.454264.2453.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026409.html">
   <LINK REL="Next"  HREF="026416.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl]  master update</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1575017644.454264.2453.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl]  master update">levitte at openssl.org
       </A><BR>
    <I>Fri Nov 29 08:54:04 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="026409.html">[openssl]  master update
</A></li>
        <LI>Next message: <A HREF="026416.html">[openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26410">[ date ]</a>
              <a href="thread.html#26410">[ thread ]</a>
              <a href="subject.html#26410">[ subject ]</a>
              <a href="author.html#26410">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  cff64af5532d3a1b0e2e9adf88454887efba01b2 (commit)
       via  b0940b33a60cbfab03153287181372d0066410a6 (commit)
       via  df8f116ecd6e25577eb1e47a213df17d64e87b4a (commit)
       via  829f86bb7b52e58c2db333b8e2eb7ad990724746 (commit)
      from  fbd03b1c5984d1dd42ef99e1a5da70ed587f3380 (commit)


- Log -----------------------------------------------------------------
commit cff64af5532d3a1b0e2e9adf88454887efba01b2
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Wed Nov 20 14:58:20 2019 +0100

    Configure: make it possible to have generated generators
    
    This makes it possible to chain GENERATOR statements, which allows
    constructs like this:
    
        GENERATE[something.html]=something.pod
        GENERATE[something.pod]=something.pod.in
    
    Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/6236">https://github.com/openssl/openssl/pull/6236</A>)

commit b0940b33a60cbfab03153287181372d0066410a6
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Wed Aug 31 22:57:25 2016 +0200

    Adapt *.tmpl to generate docs at build time
    
    Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/6236">https://github.com/openssl/openssl/pull/6236</A>)

commit df8f116ecd6e25577eb1e47a213df17d64e87b4a
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Wed Aug 31 22:56:02 2016 +0200

    Add doc/build.info to build the documentation
    
    This build.info is entirely generated when configuring
    
    Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/6236">https://github.com/openssl/openssl/pull/6236</A>)

commit 829f86bb7b52e58c2db333b8e2eb7ad990724746
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Wed Aug 31 22:54:39 2016 +0200

    Add the possibility to generate documentation at build time
    
    Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/6236">https://github.com/openssl/openssl/pull/6236</A>)

-----------------------------------------------------------------------

Summary of changes:
 .gitignore                           |   4 +
 Configurations/common.tmpl           |  35 ++++++-
 Configurations/descrip.mms.tmpl      |  53 ++++++++--
 Configurations/unix-Makefile.tmpl    | 192 ++++++++++++++++++++++++++++++++---
 Configurations/windows-makefile.tmpl |  46 +++++++--
 Configure                            |  52 ++++++++--
 INSTALL                              |  10 +-
 build.info                           |   2 +-
 doc/build.info                       |  66 ++++++++++++
 9 files changed, 416 insertions(+), 44 deletions(-)
 create mode 100644 doc/build.info

diff --git a/.gitignore b/.gitignore
index eb95e48bfe..0d02ecdf8f 100644
--- a/.gitignore
+++ b/.gitignore
@@ -157,6 +157,10 @@ doc/man1/openssl-x509.pod
 /test/fips_test_suite.c
 /test/shatest.c
 
+# Generated docs directories
+/doc/html
+/doc/man
+
 ##### Generic patterns
 # Auto generated assembly language source files
 *.s
diff --git a/Configurations/common.tmpl b/Configurations/common.tmpl
index a2591da727..5db3471fe2 100644
--- a/Configurations/common.tmpl
+++ b/Configurations/common.tmpl
@@ -151,10 +151,18 @@
                              generator_incs =&gt; $unified_info{includes}-&gt;{$script},
                              generator_deps =&gt; $unified_info{depends}-&gt;{$script},
                              deps =&gt; $unified_info{depends}-&gt;{$src},
-                             incs =&gt; [ @{$unified_info{includes}-&gt;{$obj}},
-                                       @{$unified_info{includes}-&gt;{$bin}} ],
-                             defs =&gt; [ @{$unified_info{defines}-&gt;{$obj}},
-                                       @{$unified_info{defines}-&gt;{$bin}} ],
+                             incs =&gt; [ defined $obj
+                                           ? @{$unified_info{includes}-&gt;{$obj}}
+                                           : (),
+                                       defined $bin
+                                           ? @{$unified_info{includes}-&gt;{$bin}}
+                                           : () ],
+                             defs =&gt; [ defined $obj
+                                           ? @{$unified_info{defines}-&gt;{$obj}}
+                                           : (),
+                                       defined $bin
+                                           ? @{$unified_info{defines}-&gt;{$bin}}
+                                           : () ],
                              %opts);
          foreach (@{$unified_info{depends}-&gt;{$src}}) {
              dogenerate($_, $obj, $bin, %opts);
@@ -436,6 +444,22 @@
      $cache{$dir} = 1;
  }
 
+ # dodocs is responsible for building documentation from .pods.
+ # It will call generatesrc.
+ sub dodocs {
+     my $type = shift;
+     my $section = shift;
+     foreach my $doc (@{$unified_info{&quot;${type}docs&quot;}-&gt;{$section}}) {
+         next if $cache{$doc};
+         $OUT .= generatesrc(src =&gt; $doc,
+                             generator =&gt; $unified_info{generate}-&gt;{$doc});
+         foreach ((@{$unified_info{depends}-&gt;{$doc}})) {
+             dogenerate($_, undef, undef, %opts);
+         }
+         $cache{$doc} = 1;
+     }
+ }
+
  # Start with populating the cache with all the overrides
  %cache = map { $_ =&gt; 1 } @{$unified_info{overrides}};
 
@@ -448,6 +472,7 @@
  foreach (@{$unified_info{modules}})   { domodule($_); }
  foreach (@{$unified_info{programs}})  { dobin($_);    }
  foreach (@{$unified_info{scripts}})   { doscript($_); }
-
+ foreach (sort keys %{$unified_info{htmldocs}}) { dodocs('html', $_); }
+ foreach (sort keys %{$unified_info{mandocs}})  { dodocs('man', $_); }
  foreach (sort keys %{$unified_info{dirinfo}})  { dodir($_); }
 -}
diff --git a/Configurations/descrip.mms.tmpl b/Configurations/descrip.mms.tmpl
index 28e7663a54..cb1fd9c5b5 100644
--- a/Configurations/descrip.mms.tmpl
+++ b/Configurations/descrip.mms.tmpl
@@ -143,6 +143,10 @@ INSTALL_ENGINES={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_.&quot;.EXE&quot; } @install_engines) -}
 INSTALL_PROGRAMS={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_.&quot;.EXE&quot; } @install_programs) -}
 BIN_SCRIPTS={- join(&quot;, &quot;, @install_bin_scripts) -}
 MISC_SCRIPTS={- join(&quot;, &quot;, @install_misc_scripts) -}
+HTMLDOCS1={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_ } @{$unified_info{htmldocs}-&gt;{man1}}) -}
+HTMLDOCS3={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_ } @{$unified_info{htmldocs}-&gt;{man3}}) -}
+HTMLDOCS5={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_ } @{$unified_info{htmldocs}-&gt;{man5}}) -}
+HTMLDOCS7={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_ } @{$unified_info{htmldocs}-&gt;{man7}}) -}
 
 APPS_OPENSSL={- use File::Spec::Functions;
                 catfile(&quot;apps&quot;,&quot;openssl&quot;) -}
@@ -405,7 +409,7 @@ NODEBUG=@
 
 # The main targets ###################################################
 
-{- dependmagic('all'); -} : build_libs_nodep, build_modules_nodep, build_programs_nodep
+{- dependmagic('build_sw'); -} : build_libs_nodep, build_modules_nodep, build_programs_nodep
 {- dependmagic('build_libs'); -} : build_libs_nodep
 {- dependmagic('build_modules'); -} : build_modules_nodep
 {- dependmagic('build_programs'); -} : build_programs_nodep
@@ -415,18 +419,23 @@ build_libs_nodep : $(LIBS), $(SHLIBS)
 build_modules_nodep : $(MODULES)
 build_programs_nodep : $(PROGRAMS), $(SCRIPTS)
 
+build_docs: build_html_docs
+build_html_docs: $(HTMLDOCS1) $(HTMLDOCS3) $(HTMLDOCS5) $(HTMLDOCS7)
+
 # Kept around for backward compatibility
 build_apps build_tests : build_programs
 
 # Convenience target to prebuild all generated files, not just the mandatory
 # ones
-build_all_generated : $(GENERATED_MANDATORY) $(GENERATED)
+build_all_generated : $(GENERATED_MANDATORY) $(GENERATED) build_docs
 	@ ! {- output_off() if $disabled{makedepend}; &quot;&quot; -}
 	@ WRITE SYS$OUTPUT &quot;Warning: consider configuring with no-makedepend, because if&quot;
 	@ WRITE SYS$OUTPUT &quot;         target system doesn't have $(PERL),&quot;
 	@ WRITE SYS$OUTPUT &quot;         then make will fail...&quot;
 	@ ! {- output_on() if $disabled{makedepend}; &quot;&quot; -}
 
+all : build_sw build_docs
+
 test : tests
 {- dependmagic('tests'); -} : build_programs_nodep, build_modules_nodep
         @ ! {- output_off() if $disabled{tests}; &quot;&quot; -}
@@ -459,7 +468,9 @@ list-tests :
         @ WRITE SYS$OUTPUT &quot;Tests are not supported with your chosen Configure options&quot;
         @ ! {- output_on() if !$disabled{tests}; &quot;&quot; -}
 
-install : install_sw install_ssldirs install_docs
+install : install_sw install_ssldirs install_docs install_final
+
+install_final :
         @ WRITE SYS$OUTPUT &quot;&quot;
         @ WRITE SYS$OUTPUT &quot;######################################################################&quot;
         @ WRITE SYS$OUTPUT &quot;&quot;
@@ -496,6 +507,10 @@ libclean :
         {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_.EXE;*,$_.MAP;*&quot; } @shlibs) || &quot;@ !&quot; -}
 
 clean : libclean
+        {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_;*&quot; } @{$unified_info{htmldocs}-&gt;{man1}}) || &quot;@ !&quot; -}
+        {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_;*&quot; } @{$unified_info{htmldocs}-&gt;{man3}}) || &quot;@ !&quot; -}
+        {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_;*&quot; } @{$unified_info{htmldocs}-&gt;{man5}}) || &quot;@ !&quot; -}
+        {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_;*&quot; } @{$unified_info{htmldocs}-&gt;{man7}}) || &quot;@ !&quot; -}
         {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_.EXE;*,$_.OPT;*&quot; } @{$unified_info{programs}}) || &quot;@ !&quot; -}
         {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_.EXE;*,$_.OPT;*&quot; } @{$unified_info{modules}}) || &quot;@ !&quot; -}
         {- join(&quot;\n\t&quot;, map { &quot;- DELETE $_;*&quot; } @{$unified_info{scripts}}) || &quot;@ !&quot; -}
@@ -659,11 +674,21 @@ vmsconfig.pm : configdata.pm
         WRITE CONFIG &quot;1;&quot;
         CLOSE CONFIG
 
-install_html_docs : check_INSTALLTOP
-        sourcedir = F$PARSE(&quot;{- $sourcedir -}A.;&quot;,&quot;[]&quot;) - &quot;]A.;&quot; + &quot;.DOC]&quot;
-        $(PERL) {- sourcefile(&quot;util&quot;, &quot;process_docs.pl&quot;) -} -
-                --sourcedir='sourcedir' --destdir=ossl_installroot:[HTML] -
-                --type=html
+install_html_docs : check_INSTALLTOP build_html_docs
+        @ WRITE SYS$OUTPUT &quot;*** Installing HTML docs&quot;
+        - CREATE/DIR ossl_installroot:[HTML.MAN1]
+        - CREATE/DIR ossl_installroot:[HTML.MAN3]
+        - CREATE/DIR ossl_installroot:[HTML.MAN5]
+        - CREATE/DIR ossl_installroot:[HTML.MAN7]
+        {- join(&quot;\n        &quot;,
+                ( map { &quot;COPY/PROT=W:RE $_ ossl_installroot:[HTML.MAN1]&quot; }
+                  @{$unified_info{htmldocs}-&gt;{man1}} ),
+                ( map { &quot;COPY/PROT=W:RE $_ ossl_installroot:[HTML.MAN3]&quot; }
+                  @{$unified_info{htmldocs}-&gt;{man3}} ),
+                ( map { &quot;COPY/PROT=W:RE $_ ossl_installroot:[HTML.MAN5]&quot; }
+                  @{$unified_info{htmldocs}-&gt;{man5}} ),
+                ( map { &quot;COPY/PROT=W:RE $_ ossl_installroot:[HTML.MAN7]&quot; }
+                  @{$unified_info{htmldocs}-&gt;{man7}} )) -}
 
 check_INSTALLTOP :
         @ IF &quot;$(INSTALLTOP)&quot; .EQS. &quot;&quot; THEN -
@@ -756,7 +781,17 @@ reconfigure reconf :
       my $generator_incs = join(&quot;&quot;, map { ' &quot;-I'.$_.'&quot;' } @{$args{generator_incs}});
       my $deps = join(&quot;, -\n\t\t&quot;, @{$args{generator_deps}}, @{$args{deps}});
 
-      if (platform-&gt;isdef($args{src})) {
+      if ($args{src} =~ /\.html$/) {
+	  my $title = basename($args{src}, &quot;.html&quot;);
+	  return &lt;&lt;&quot;EOF&quot;;
+$args{src}: $args{generator}-&gt;[0]
+	pipe pod2html &quot;--podroot=\$(SRCDIR)/doc&quot; --htmldir=.. -
+		       --podpath=man1:man3:man5:man7 &quot;--infile=\$&lt;&quot; -
+		      &quot;--title=$title&quot; -
+	| \$(PERL) -pe &quot;s|href=&quot;&quot;<A HREF="http://man\\.he\\.net/(man\d/[^">http://man\\.he\\.net/(man\d/[^</A>&quot;&quot;]+)(?:\\.html)?&quot;&quot;|href=&quot;&quot;../\$1.html|g;&quot; -
+	&gt; \$\@
+EOF
+      } elsif (platform-&gt;isdef($args{src})) {
           my $target = platform-&gt;def($args{src});
           my $mkdef = sourcefile('util', 'mkdef.pl');
           my $ord_ver = $args{intent} eq 'lib' ? ' --version $(VERSION)' : '';
diff --git a/Configurations/unix-Makefile.tmpl b/Configurations/unix-Makefile.tmpl
index 6113ab4a34..c3c83f95cd 100644
--- a/Configurations/unix-Makefile.tmpl
+++ b/Configurations/unix-Makefile.tmpl
@@ -162,6 +162,38 @@ MISC_SCRIPTS={-
                                &amp;&amp; $unified_info{attributes}-&gt;{scripts}-&gt;{$_}-&gt;{misc} }
                         @{$unified_info{scripts}}))
 -}
+HTMLDOCS1={-
+        join(&quot; \\\n&quot; . ' ' x 10,
+             fill_lines(&quot; &quot;, $COLUMNS - 10, map { platform-&gt;bin($_) }
+                        @{$unified_info{htmldocs}-&gt;{man1}})) -}
+HTMLDOCS3={-
+        join(&quot; \\\n&quot; . ' ' x 10,
+             fill_lines(&quot; &quot;, $COLUMNS - 10, map { platform-&gt;bin($_) }
+                        @{$unified_info{htmldocs}-&gt;{man3}})) -}
+HTMLDOCS5={-
+        join(&quot; \\\n&quot; . ' ' x 10,
+             fill_lines(&quot; &quot;, $COLUMNS - 10, map { platform-&gt;bin($_) }
+                        @{$unified_info{htmldocs}-&gt;{man5}})) -}
+HTMLDOCS7={-
+        join(&quot; \\\n&quot; . ' ' x 10,
+             fill_lines(&quot; &quot;, $COLUMNS - 10, map { platform-&gt;bin($_) }
+                        @{$unified_info{htmldocs}-&gt;{man7}})) -}
+MANDOCS1={-
+        join(&quot; \\\n&quot; . ' ' x 9,
+             fill_lines(&quot; &quot;, $COLUMNS - 9, map { platform-&gt;bin($_) }
+                        @{$unified_info{mandocs}-&gt;{man1}})) -}
+MANDOCS3={-
+        join(&quot; \\\n&quot; . ' ' x 9,
+             fill_lines(&quot; &quot;, $COLUMNS - 9, map { platform-&gt;bin($_) }
+                        @{$unified_info{mandocs}-&gt;{man3}})) -}
+MANDOCS5={-
+        join(&quot; \\\n&quot; . ' ' x 9,
+             fill_lines(&quot; &quot;, $COLUMNS - 9, map { platform-&gt;bin($_) }
+                        @{$unified_info{mandocs}-&gt;{man5}})) -}
+MANDOCS7={-
+        join(&quot; \\\n&quot; . ' ' x 9,
+             fill_lines(&quot; &quot;, $COLUMNS - 9, map { platform-&gt;bin($_) }
+                        @{$unified_info{mandocs}-&gt;{man7}})) -}
 
 APPS_OPENSSL={- use File::Spec::Functions;
                 catfile(&quot;apps&quot;,&quot;openssl&quot;) -}
@@ -387,11 +419,15 @@ LANG=C
 
 # The main targets ###################################################
 
-{- dependmagic('all'); -}: build_libs_nodep build_modules_nodep build_programs_nodep link-utils
+{- dependmagic('build_sw'); -}: build_libs_nodep build_modules_nodep build_programs_nodep link-utils
 {- dependmagic('build_libs'); -}: build_libs_nodep
 {- dependmagic('build_modules'); -}: build_modules_nodep
 {- dependmagic('build_programs'); -}: build_programs_nodep
 
+build_docs: build_man_docs build_html_docs
+build_man_docs: $(MANDOCS1) $(MANDOCS3) $(MANDOCS5) $(MANDOCS7)
+build_html_docs: $(HTMLDOCS1) $(HTMLDOCS3) $(HTMLDOCS5) $(HTMLDOCS7)
+
 build_generated: $(GENERATED_MANDATORY)
 build_libs_nodep: libcrypto.pc libssl.pc openssl.pc
 build_modules_nodep: $(MODULES)
@@ -402,13 +438,15 @@ build_apps build_tests: build_programs
 
 # Convenience target to prebuild all generated files, not just the mandatory
 # ones
-build_all_generated: $(GENERATED_MANDATORY) $(GENERATED)
+build_all_generated: $(GENERATED_MANDATORY) $(GENERATED) build_docs
 	@ : {- output_off() if $disabled{makedepend}; &quot;&quot; -}
 	@echo &quot;Warning: consider configuring with no-makedepend, because if&quot;
 	@echo &quot;         target system doesn't have $(PERL),&quot;
 	@echo &quot;         then make will fail...&quot;
 	@ : {- output_on() if $disabled{makedepend}; &quot;&quot; -}
 
+all: build_sw build_docs
+
 test: tests
 {- dependmagic('tests'); -}: build_programs_nodep build_modules_nodep link-utils
 	@ : {- output_off() if $disabled{tests}; &quot;&quot; -}
@@ -458,6 +496,8 @@ libclean:
 	$(RM) *{- platform-&gt;defext() -}
 
 clean: libclean
+	$(RM) $(HTMLDOCS1) $(HTMLDOCS3) $(HTMLDOCS5) $(HTMLDOCS7)
+	$(RM) $(MANDOCS1) $(MANDOCS3) $(MANDOCS5) $(MANDOCS7)
 	$(RM) $(PROGRAMS) $(TESTPROGS) $(MODULES) $(SCRIPTS)
 	$(RM) $(GENERATED_MANDATORY) $(GENERATED)
 	-$(RM) `find . -name '*{- platform-&gt;depext() -}' \! -name '.*' \! -type d -print`
@@ -764,29 +804,131 @@ uninstall_runtime_libs:
 	@ : {- output_on() unless windowsdll(); &quot;&quot; -}
 
 
-install_man_docs:
+install_man_docs: build_man_docs
 	@[ -n &quot;$(INSTALLTOP)&quot; ] || (echo INSTALLTOP should not be empty; exit 1)
+	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(MANDIR)/man1
+	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(MANDIR)/man3
+	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(MANDIR)/man5
+	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(MANDIR)/man7
 	@$(ECHO) &quot;*** Installing manpages&quot;
-	$(PERL) $(SRCDIR)/util/process_docs.pl \
-		--destdir=$(DESTDIR)$(MANDIR) --type=man --suffix=$(MANSUFFIX)
+	@set -e; for x in dummy $(MANDOCS1); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;install $$x -&gt; $(DESTDIR)$(MANDIR)/man1/$$fn&quot;; \
+		cp $$x $(DESTDIR)$(MANDIR)/man1/$$fn$(MANSUFFIX); \
+		chmod 755 $(DESTDIR)$(MANDIR)/man1/$$fn$(MANSUFFIX); \
+	done
+	@set -e; for x in dummy $(MANDOCS3); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;install $$x -&gt; $(DESTDIR)$(MANDIR)/man3/$$fn&quot;; \
+		cp $$x $(DESTDIR)$(MANDIR)/man3/$$fn$(MANSUFFIX); \
+		chmod 755 $(DESTDIR)$(MANDIR)/man3/$$fn$(MANSUFFIX); \
+	done
+	@set -e; for x in dummy $(MANDOCS5); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;install $$x -&gt; $(DESTDIR)$(MANDIR)/man5/$$fn&quot;; \
+		cp $$x $(DESTDIR)$(MANDIR)/man5/$$fn$(MANSUFFIX); \
+		chmod 755 $(DESTDIR)$(MANDIR)/man5/$$fn$(MANSUFFIX); \
+	done
+	@set -e; for x in dummy $(MANDOCS7); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;install $$x -&gt; $(DESTDIR)$(MANDIR)/man7/$$fn&quot;; \
+		cp $$x $(DESTDIR)$(MANDIR)/man7/$$fn$(MANSUFFIX); \
+		chmod 755 $(DESTDIR)$(MANDIR)/man7/$$fn$(MANSUFFIX); \
+	done
 
 uninstall_man_docs:
 	@$(ECHO) &quot;*** Uninstalling manpages&quot;
-	$(PERL) $(SRCDIR)/util/process_docs.pl \
-		--destdir=$(DESTDIR)$(MANDIR) --type=man --suffix=$(MANSUFFIX) \
-		--remove
+	@set -e; for x in dummy $(MANDOCS1); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;$(RM) $(DESTDIR)$(MANDIR)/man1/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(MANDIR)/man1/$$fn$(MANSUFFIX); \
+	done
+	@set -e; for x in dummy $(MANDOCS3); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;$(RM) $(DESTDIR)$(MANDIR)/man3/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(MANDIR)/man3/$$fn$(MANSUFFIX); \
+	done
+	@set -e; for x in dummy $(MANDOCS5); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;$(RM) $(DESTDIR)$(MANDIR)/man5/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(MANDIR)/man5/$$fn$(MANSUFFIX); \
+	done
+	@set -e; for x in dummy $(MANDOCS7); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;$(RM) $(DESTDIR)$(MANDIR)/man7/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(MANDIR)/man7/$$fn$(MANSUFFIX); \
+	done
 
-install_html_docs:
+install_html_docs: build_html_docs
 	@[ -n &quot;$(INSTALLTOP)&quot; ] || (echo INSTALLTOP should not be empty; exit 1)
+	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(HTMLDIR)/man1
+	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(HTMLDIR)/man3
+	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(HTMLDIR)/man5
+	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(HTMLDIR)/man7
 	@$(ECHO) &quot;*** Installing HTML manpages&quot;
-	$(PERL) $(SRCDIR)/util/process_docs.pl \
-		--destdir=$(DESTDIR)$(HTMLDIR) --type=html
+	@set -e; for x in dummy $(HTMLDOCS1); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;install $$x -&gt; $(DESTDIR)$(HTMLDIR)/man1/$$fn&quot;; \
+		cp $$x $(DESTDIR)$(HTMLDIR)/man1/$$fn; \
+		chmod 755 $(DESTDIR)$(HTMLDIR)/man1/$$fn; \
+	done
+	@set -e; for x in dummy $(HTMLDOCS3); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;install $$x -&gt; $(DESTDIR)$(HTMLDIR)/man3/$$fn&quot;; \
+		cp $$x $(DESTDIR)$(HTMLDIR)/man3/$$fn; \
+		chmod 755 $(DESTDIR)$(HTMLDIR)/man3/$$fn; \
+	done
+	@set -e; for x in dummy $(HTMLDOCS5); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;install $$x -&gt; $(DESTDIR)$(HTMLDIR)/man5/$$fn&quot;; \
+		cp $$x $(DESTDIR)$(HTMLDIR)/man5/$$fn; \
+		chmod 755 $(DESTDIR)$(HTMLDIR)/man5/$$fn; \
+	done
+	@set -e; for x in dummy $(HTMLDOCS7); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;install $$x -&gt; $(DESTDIR)$(HTMLDIR)/man7/$$fn&quot;; \
+		cp $$x $(DESTDIR)$(HTMLDIR)/man7/$$fn; \
+		chmod 755 $(DESTDIR)$(HTMLDIR)/man7/$$fn; \
+	done
 
 uninstall_html_docs:
-	@$(ECHO) &quot;*** Uninstalling manpages&quot;
-	$(PERL) $(SRCDIR)/util/process_docs.pl \
-		--destdir=$(DESTDIR)$(HTMLDIR) --type=html --remove
-
+	@$(ECHO) &quot;*** Uninstalling HTML manpages&quot;
+	@set -e; for x in dummy $(HTMLDOCS1); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;$(RM) $(DESTDIR)$(HTMLDIR)/man1/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(HTMLDIR)/man1/$$fn; \
+	done
+	@set -e; for x in dummy $(HTMLDOCS3); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;$(RM) $(DESTDIR)$(HTMLDIR)/man3/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(HTMLDIR)/man3/$$fn; \
+	done
+	@set -e; for x in dummy $(HTMLDOCS5); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;$(RM) $(DESTDIR)$(HTMLDIR)/man5/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(HTMLDIR)/man5/$$fn; \
+	done
+	@set -e; for x in dummy $(HTMLDOCS7); do \
+		if [ &quot;$$x&quot; = &quot;dummy&quot; ]; then continue; fi; \
+		fn=`basename $$x`; \
+		$(ECHO) &quot;$(RM) $(DESTDIR)$(HTMLDIR)/man7/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(HTMLDIR)/man7/$$fn; \
+	done
 
 # Developer targets (note: these are only available on Unix) #########
 
@@ -1027,7 +1169,25 @@ reconfigure reconf:
       my $defs = join(&quot;&quot;, map { &quot; -D&quot;.$_ } @{$args{defs}});
       my $deps = join(&quot; &quot;, @{$args{generator_deps}}, @{$args{deps}});
 
-      if (platform-&gt;isdef($args{src})) {
+      if ($args{src} =~ /\.html$/) {
+	  my $title = basename($args{src}, &quot;.html&quot;);
+	  return &lt;&lt;&quot;EOF&quot;;
+$args{src}: $args{generator}-&gt;[0]
+	pod2html &quot;--podroot=\$(SRCDIR)/doc&quot; --htmldir=.. \\
+		 --podpath=man1:man3:man5:man7 &quot;--infile=\$&lt;&quot; &quot;--title=$title&quot; \\
+	| \$(PERL) -pe 's|href=&quot;<A HREF="http://man\\.he\\.net/(man\\d/[^">http://man\\.he\\.net/(man\\d/[^</A>&quot;]+)(?:\\.html)?&quot;|href=&quot;../\$1.html|g;' \\
+	&gt; \$\@
+EOF
+      } elsif ($args{src} =~ /\.(\d)$/) {
+	  my $section = $1;
+	  my $name = uc basename($args{src}, &quot;.$section&quot;);
+	  return &lt;&lt;&quot;EOF&quot;;
+$args{src}: $args{generator}-&gt;[0]
+	pod2man --name=$name --section=$section --center=OpenSSL \\
+		--release=\$(VERSION) \$&lt; \\
+	&gt; \$\@
+EOF
+      } elsif (platform-&gt;isdef($args{src})) {
           my $target = platform-&gt;def($args{src});
           (my $mkdef_os = $target{shared_target}) =~ s|-shared$||;
           my $ord_ver = $args{intent} eq 'lib' ? ' --version $(VERSION)' : '';
diff --git a/Configurations/windows-makefile.tmpl b/Configurations/windows-makefile.tmpl
index d0bce73664..7bc09df78d 100644
--- a/Configurations/windows-makefile.tmpl
+++ b/Configurations/windows-makefile.tmpl
@@ -111,6 +111,10 @@ MISC_SCRIPTS={-
                          &amp;&amp; $unified_info{attributes}-&gt;{scripts}-&gt;{$_}-&gt;{misc} }
                   @{$unified_info{scripts}})
 -}
+HTMLDOCS1={- join(&quot; &quot;, @{$unified_info{htmldocs}-&gt;{man1}}) -}
+HTMLDOCS3={- join(&quot; &quot;, @{$unified_info{htmldocs}-&gt;{man3}}) -}
+HTMLDOCS5={- join(&quot; &quot;, @{$unified_info{htmldocs}-&gt;{man5}}) -}
+HTMLDOCS7={- join(&quot; &quot;, @{$unified_info{htmldocs}-&gt;{man7}}) -}
 
 APPS_OPENSSL={- use File::Spec::Functions;
                 &quot;\&quot;&quot;.catfile(&quot;apps&quot;,&quot;openssl&quot;).&quot;\&quot;&quot; -}
@@ -338,11 +342,14 @@ PROCESSOR= {- $config{processor} -}
 
 # The main targets ###################################################
 
-{- dependmagic('all'); -}: build_libs_nodep build_modules_nodep build_programs_nodep
+{- dependmagic('build_sw'); -}: build_libs_nodep build_modules_nodep build_programs_nodep
 {- dependmagic('build_libs'); -}: build_libs_nodep
 {- dependmagic('build_modules'); -}: build_modules_nodep
 {- dependmagic('build_programs'); -}: build_programs_nodep
 
+build_docs: build_html_docs
+build_html_docs: $(HTMLDOCS1) $(HTMLDOCS3) $(HTMLDOCS5) $(HTMLDOCS7)
+
 build_generated: $(GENERATED_MANDATORY)
 build_libs_nodep: $(LIBS) {- join(&quot; &quot;,map { platform-&gt;sharedlib_import($_) // () } @{$unified_info{libraries}}) -}
 build_modules_nodep: $(MODULES)
@@ -353,13 +360,15 @@ build_apps build_tests: build_programs
 
 # Convenience target to prebuild all generated files, not just the mandatory
 # ones
-build_all_generated: $(GENERATED_MANDATORY) $(GENERATED)
+build_all_generated: $(GENERATED_MANDATORY) $(GENERATED) build_docs
 	@{- output_off() if $disabled{makedepend}; &quot;&quot; -}
 	@$(ECHO) &quot;Warning: consider configuring with no-makedepend, because if&quot;
 	@$(ECHO) &quot;         target system doesn't have $(PERL),&quot;
 	@$(ECHO) &quot;         then make will fail...&quot;
 	@{- output_on() if $disabled{makedepend}; &quot;&quot; -}
 
+all: build_sw build_docs
+
 test: tests
 {- dependmagic('tests'); -}: build_programs_nodep build_modules_nodep
 	@{- output_off() if $disabled{tests}; &quot;&quot; -}
@@ -393,6 +402,10 @@ libclean:
 	-del /Q /F $(LIBS) libcrypto.* libssl.* ossl_static.pdb
 
 clean: libclean
+	-rmdir /Q /S $(HTMLDOCS1)
+	-rmdir /Q /S $(HTMLDOCS3)
+	-rmdir /Q /S $(HTMLDOCS5)
+	-rmdir /Q /S $(HTMLDOCS7)
 	{- join(&quot;\n\t&quot;, map { &quot;-del /Q /F $_&quot; } @PROGRAMS) -}
 	-del /Q /F $(MODULES)
 	-del /Q /F $(SCRIPTS)
@@ -496,9 +509,21 @@ install_programs: install_runtime_libs build_programs
 
 uninstall_runtime:
 
-install_html_docs:
-        &quot;$(PERL)&quot; &quot;$(SRCDIR)\util\process_docs.pl&quot; \
-                &quot;--destdir=$(INSTALLTOP)\html&quot; --type=html
+install_html_docs: build_html_docs
+	@if &quot;$(INSTALLTOP)&quot;==&quot;&quot; ( echo INSTALLTOP should not be empty &amp; exit 1 )
+	@echo *** Installing HTML docs
+	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\mkdir-p.pl&quot; &quot;$(INSTALLTOP)\html\man1&quot;
+	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\mkdir-p.pl&quot; &quot;$(INSTALLTOP)\html\man3&quot;
+	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\mkdir-p.pl&quot; &quot;$(INSTALLTOP)\html\man5&quot;
+	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\mkdir-p.pl&quot; &quot;$(INSTALLTOP)\html\man7&quot;
+	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(BLDDIR)\doc\html\man1\*.html \
+                                        &quot;$(INSTALLTOP)\html\man1&quot;
+	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(BLDDIR)\doc\html\man3\*.html \
+                                        &quot;$(INSTALLTOP)\html\man3&quot;
+	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(BLDDIR)\doc\html\man5\*.html \
+                                        &quot;$(INSTALLTOP)\html\man5&quot;
+	@&quot;$(PERL)&quot; &quot;$(SRCDIR)\util\copy.pl&quot; $(BLDDIR)\doc\html\man7\*.html \
+                                        &quot;$(INSTALLTOP)\html\man7&quot;
 
 uninstall_html_docs:
 
@@ -540,7 +565,16 @@ reconfigure reconf:
       my $deps = @{$args{deps}} ?
           '&quot;'.join('&quot; &quot;', @{$args{generator_deps}}, @{$args{deps}}).'&quot;' : '';
 
-      if (platform-&gt;isdef($args{src})) {
+      if ($args{src} =~ /\.html$/) {
+	  my $title = basename($args{src}, &quot;.html&quot;);
+	  return &lt;&lt;&quot;EOF&quot;;
+$args{src}: $args{generator}-&gt;[0]
+	pod2html &quot;--podroot=\$(SRCDIR)/doc&quot; --htmldir=.. \\
+		 --podpath=man1:man3:man5:man7 &quot;--infile=\$&lt;&quot; &quot;--title=$title&quot; \\
+	| \$(PERL) -pe &quot;s|href=\\&quot;<A HREF="http://man\\.he\\.net/(man\d/[^\\">http://man\\.he\\.net/(man\d/[^\\</A>&quot;]+)(?:\\.html)?\\&quot;|href=\\&quot;../\$1.html|g;&quot; \\
+	&gt; \$\@
+EOF
+      } elsif (platform-&gt;isdef($args{src})) {
           my $target = platform-&gt;def($args{src});
           my $mkdef = abs2rel(rel2abs(catfile($config{sourcedir},
                                               &quot;util&quot;, &quot;mkdef.pl&quot;)),
diff --git a/Configure b/Configure
index 8087da52e6..bad09ed8a3 100755
--- a/Configure
+++ b/Configure
@@ -1777,6 +1777,8 @@ if ($builder eq &quot;unified&quot;) {
         my %defines = ();
         my %depends = ();
         my %generate = ();
+        my %htmldocs = ();
+        my %mandocs = ();
 
         # Support for $variablename in build.info files.
         # Embedded perl code is the ultimate master, still.  If its output
@@ -1837,6 +1839,10 @@ if ($builder eq &quot;unified&quot;) {
         # don't use it if the build tree is different.
         my $src_configdata = cleanfile($srcdir, &quot;configdata.pm&quot;, $blddir);
 
+
+        if ($buildinfo_debug) {
+            print STDERR &quot;DEBUG: Reading &quot;,catfile($sourced, $f),&quot;\n&quot;;
+        }
         push @{$config{build_infos}}, catfile(abs2rel($sourced, $blddir), $f);
         my $template =
             Text::Template-&gt;new(TYPE =&gt; 'FILE',
@@ -1948,7 +1954,14 @@ if ($builder eq &quot;unified&quot;) {
                                          @s);
                 }
             },
-
+            qr/^\s* HTMLDOCS ${index_re} = ${value_re} $/x
+            =&gt; sub { push @{$htmldocs{$expand_variables-&gt;($+{INDEX})}},
+                         tokenize($expand_variables-&gt;($+{VALUE}))
+                         if !@skip || $skip[$#skip] &gt; 0 },
+            qr/^\s* MANDOCS ${index_re} = ${value_re} $/x
+            =&gt; sub { push @{$mandocs{$expand_variables-&gt;($+{INDEX})}},
+                         tokenize($expand_variables-&gt;($+{VALUE}))
+                         if !@skip || $skip[$#skip] &gt; 0 },
             qr/^\s* ORDINALS ${index_re} = ${value_re} $/x
             =&gt; sub { push @{$ordinals{$expand_variables-&gt;($+{INDEX})}},
                          tokenize($expand_variables-&gt;($+{VALUE}))
@@ -2111,10 +2124,18 @@ EOF
             my $dest = $_;
             my $ddest = cleanfile($buildd, $_, $blddir);
             die &quot;more than one generator for $dest: &quot;
-                    ,join(&quot; &quot;, @{$generate{$_}}),&quot;\n&quot;
-                    if scalar @{$generate{$_}} &gt; 1;
+                ,join(&quot; &quot;, @{$generate{$_}}),&quot;\n&quot;
+                if scalar @{$generate{$_}} &gt; 1;
             my @generator = split /\s+/, $generate{$dest}-&gt;[0];
-            $generator[0] = cleanfile($sourced, $generator[0], $blddir),
+            my $gen = $generator[0];
+            $generator[0] = cleanfile($sourced, $gen, $blddir);
+
+            # If the generator isn't in the source tree, we assume it's
+            # generated in the build tree
+            if ($generate{$gen}) {
+                $generator[0] = cleanfile($buildd, $gen, $blddir);
+            }
+
             $unified_info{generate}-&gt;{$ddest} = [ @generator ];
         }
 
@@ -2206,6 +2227,20 @@ EOF
                 }
             }
         }
+
+        foreach my $section (keys %htmldocs) {
+            foreach (@{$htmldocs{$section}}) {
+                my $htmldocs = cleanfile($buildd, $_, $blddir);
+                $unified_info{htmldocs}-&gt;{$section}-&gt;{$htmldocs} = 1;
+            }
+        }
+
+        foreach my $section (keys %mandocs) {
+            foreach (@{$mandocs{$section}}) {
+                my $mandocs = cleanfile($buildd, $_, $blddir);
+                $unified_info{mandocs}-&gt;{$section}-&gt;{$mandocs} = 1;
+            }
+        }
     }
 
     my $ordinals_text = join(', ', sort keys %ordinals);
@@ -2366,7 +2401,8 @@ EOF
         $unified_info{$_} = [ sort keys %{$unified_info{$_}} ];
     }
     # Two level structures
-    foreach my $l1 ((&quot;sources&quot;, &quot;shared_sources&quot;, &quot;ldadd&quot;, &quot;depends&quot;)) {
+    foreach my $l1 ((&quot;sources&quot;, &quot;shared_sources&quot;, &quot;ldadd&quot;, &quot;depends&quot;,
+                     &quot;htmldocs&quot;, &quot;mandocs&quot;)) {
         foreach my $l2 (sort keys %{$unified_info{$l1}}) {
             my @items =
                 sort
@@ -2412,7 +2448,11 @@ EOF
     my %loopinfo = ( &quot;lib&quot; =&gt; [ @{$unified_info{libraries}} ],
                      &quot;dso&quot; =&gt; [ @{$unified_info{modules}} ],
                      &quot;bin&quot; =&gt; [ @{$unified_info{programs}} ],
-                     &quot;script&quot; =&gt; [ @{$unified_info{scripts}} ] );
+                     &quot;script&quot; =&gt; [ @{$unified_info{scripts}} ],
+                     &quot;docs&quot; =&gt; [ (map { @{$unified_info{htmldocs}-&gt;{$_} // []} }
+                                  keys %{$unified_info{htmldocs} // {}}),
+                                 (map { @{$unified_info{mandocs}-&gt;{$_} // []} }
+                                  keys %{$unified_info{mandocs} // {}}) ] );
     foreach my $type (keys %loopinfo) {
         foreach my $product (@{$loopinfo{$type}}) {
             my %dirs = ();
diff --git a/INSTALL b/INSTALL
index 0bddf761a1..1c8b580114 100644
--- a/INSTALL
+++ b/INSTALL
@@ -1156,7 +1156,15 @@
  described here. Examine the Makefiles themselves for the full list.
 
  all
-                The default target to build all the software components.
+                The target to build all the software components and
+                documentation.
+
+ build_sw
+                Build all the software components.
+                THIS IS THE DEFAULT TARGET.
+
+ build_docs
+                Build all documentation components.
 
  clean
                 Remove all build artefacts and return the directory to a &quot;clean&quot;
diff --git a/build.info b/build.info
index a050ae9530..a28ddbe739 100644
--- a/build.info
+++ b/build.info
@@ -1,6 +1,6 @@
 # Note that some of these directories are filtered in Configure.  Look for
 # %skipdir there for further explanations.
-SUBDIRS=crypto ssl apps test util tools fuzz engines providers doc/man1
+SUBDIRS=crypto ssl apps test util tools fuzz engines providers doc
 
 LIBS=libcrypto libssl
 INCLUDE[libcrypto]=. include
diff --git a/doc/build.info b/doc/build.info
new file mode 100644
index 0000000000..47728fed56
--- /dev/null
+++ b/doc/build.info
@@ -0,0 +1,66 @@
+SUBDIRS = man1
+
+{-
+ use File::Spec::Functions qw(:DEFAULT abs2rel rel2abs);
+ use File::Basename;
+
+ foreach my $section ((1, 3, 5, 7)) {
+     my @htmlfiles = ();
+     my @manfiles = ();
+     my %podfiles =
+         map { $_ =&gt; 1 } glob catfile($sourcedir, &quot;man$section&quot;, &quot;*.pod&quot;);
+     my %podinfiles = 
+         map { $_ =&gt; 1 } glob catfile($sourcedir, &quot;man$section&quot;, &quot;*.pod.in&quot;);
+
+     foreach (keys %podinfiles) {
+         (my $p = $_) =~ s|\.in$||i;
+         $podfiles{$p} = 1;
+     }
+
+     foreach my $p (sort keys %podfiles) {
+         my $podfile = abs2rel($p, $sourcedir);
+         my $podname = basename($podfile, '.pod');
+         my $podinfile = $podinfiles{&quot;$p.in&quot;} ? &quot;$podfile.in&quot; : undef;
+
+         my $podname = basename($podfile, &quot;.pod&quot;);
+
+         my $htmlfile = abs2rel(catfile($buildtop, &quot;doc&quot;, &quot;html&quot;, &quot;man$section&quot;,
+                                        &quot;$podname.html&quot;),
+                                catdir($buildtop, &quot;doc&quot;));
+         my $manfile = abs2rel(catfile($buildtop, &quot;doc&quot;, &quot;man&quot;, &quot;man$section&quot;,
+                                       &quot;$podname.$section&quot;),
+                               catdir($buildtop, &quot;doc&quot;));
+
+         # The build.info format requires file specs to be in Unix format.
+         # Especially, since VMS file specs use [ and ], the build.info parser
+         # will otherwise get terribly confused.
+         if ($^O eq 'VMS') {
+             $htmlfile = VMS::Filespec::unixify($htmlfile);
+             $manfile = VMS::Filespec::unixify($manfile);
+             $podfile = VMS::Filespec::unixify($podfile);
+             $podinfile = VMS::Filespec::unixify($podinfile)
+                 if defined $podinfile;
+         } elsif ($^O eq 'MSWin32') {
+             $htmlfile =~ s|\\|/|g;
+             $manfile =~ s|\\|/|g;
+             $podfile =~ s|\\|/|g;
+             $podinfile =~ s|\\|/|g
+                 if defined $podinfile;
+         }
+         push @htmlfiles, $htmlfile;
+         push @manfiles, $manfile;
+         $OUT .= &lt;&lt; &quot;_____&quot;;
+DEPEND[$htmlfile]=$podfile
+GENERATE[$htmlfile]=$podfile
+DEPEND[$manfile]=$podfile
+GENERATE[$manfile]=$podfile
+_____
+         $OUT .= &lt;&lt; &quot;_____&quot; if $podinfile;
+DEPEND[$podfile]=$podinfile ../configdata.pm
+GENERATE[$podfile]=$podinfile
+_____
+     }
+     $OUT .= &quot;HTMLDOCS[man$section]=&quot; . join(&quot; \\\n&quot;, @htmlfiles) . &quot;\n&quot;;
+     $OUT .= &quot;MANDOCS[man$section]=&quot; . join(&quot; \\\n&quot;, @manfiles) . &quot;\n&quot;;
+ }
+ -}
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026409.html">[openssl]  master update
</A></li>
	<LI>Next message: <A HREF="026416.html">[openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26410">[ date ]</a>
              <a href="thread.html#26410">[ thread ]</a>
              <a href="subject.html#26410">[ subject ]</a>
              <a href="author.html#26410">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
