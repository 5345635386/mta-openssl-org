<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2018-June/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1529663235.149688.454.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019644.html">
   <LINK REL="Next"  HREF="019646.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  master update</H1>
    <B>matthias.st.pierre at ncp-e.com</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1529663235.149688.454.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  master update">matthias.st.pierre at ncp-e.com
       </A><BR>
    <I>Fri Jun 22 10:27:15 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="019644.html">[openssl-commits] [openssl]  master update
</A></li>
        <LI>Next message: <A HREF="019646.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19645">[ date ]</a>
              <a href="thread.html#19645">[ thread ]</a>
              <a href="subject.html#19645">[ subject ]</a>
              <a href="author.html#19645">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  34446a852457600fc1297edce81e14da4e287191 (commit)
      from  07e4dc341fa73e8521b7964a1eebdd811c96a160 (commit)


- Log -----------------------------------------------------------------
commit 34446a852457600fc1297edce81e14da4e287191
Author: Nicola Tuveri &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">nic.tuv at gmail.com</A>&gt;
Date:   Thu Jun 21 23:24:34 2018 +0300

    Remove __cplusplus preamble from internal headers
    
    These headers are internal and never exposed to a cpp compiler, hence no
    need for the preamble.
    
    Reviewed-by: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;
    Reviewed-by: Paul Dale &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">paul.dale at oracle.com</A>&gt;
    Reviewed-by: Matthias St. Pierre &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">Matthias.St.Pierre at ncp-e.com</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/6554">https://github.com/openssl/openssl/pull/6554</A>)

-----------------------------------------------------------------------

Summary of changes:
 crypto/bn/bn_lcl.h                    |  8 --------
 crypto/cms/cms_lcl.h                  |  7 -------
 crypto/engine/eng_int.h               |  8 --------
 crypto/hmac/hmac_lcl.h                | 11 -----------
 crypto/include/internal/aria.h        |  8 --------
 crypto/include/internal/bn_int.h      |  8 --------
 crypto/include/internal/chacha.h      |  7 -------
 crypto/include/internal/sm2.h         |  8 --------
 crypto/include/internal/sm2err.h      |  3 ---
 crypto/include/internal/store_int.h   |  7 -------
 crypto/seed/seed_locl.h               |  8 --------
 crypto/x509v3/v3_admis.h              |  7 -------
 e_os.h                                |  8 --------
 include/internal/conf.h               |  9 ---------
 include/internal/constant_time_locl.h |  8 --------
 include/internal/cryptlib.h           |  8 --------
 include/internal/dso.h                |  7 -------
 include/internal/dsoerr.h             |  3 ---
 include/internal/o_dir.h              |  8 --------
 ssl/packet_locl.h                     |  8 --------
 20 files changed, 149 deletions(-)

diff --git a/crypto/bn/bn_lcl.h b/crypto/bn/bn_lcl.h
index bab2c9d..f57c87d 100644
--- a/crypto/bn/bn_lcl.h
+++ b/crypto/bn/bn_lcl.h
@@ -23,10 +23,6 @@
 
 # include &quot;internal/bn_int.h&quot;
 
-#ifdef  __cplusplus
-extern &quot;C&quot; {
-#endif
-
 /*
  * These preprocessor symbols control various aspects of the bignum headers
  * and library code. They're not defined by any &quot;normal&quot; configuration, as
@@ -659,8 +655,4 @@ static ossl_inline BIGNUM *bn_expand(BIGNUM *a, int bits)
     return bn_expand2((a),(bits+BN_BITS2-1)/BN_BITS2);
 }
 
-#ifdef  __cplusplus
-}
-#endif
-
 #endif
diff --git a/crypto/cms/cms_lcl.h b/crypto/cms/cms_lcl.h
index c277f71..dd5a585 100644
--- a/crypto/cms/cms_lcl.h
+++ b/crypto/cms/cms_lcl.h
@@ -10,10 +10,6 @@
 #ifndef HEADER_CMS_LCL_H
 # define HEADER_CMS_LCL_H
 
-#ifdef __cplusplus
-extern &quot;C&quot; {
-#endif
-
 # include &lt;openssl/x509.h&gt;
 
 /*
@@ -438,7 +434,4 @@ DECLARE_ASN1_ITEM(CMS_RevocationInfoChoice)
 DECLARE_ASN1_ITEM(CMS_SignedData)
 DECLARE_ASN1_ITEM(CMS_CompressedData)
 
-#ifdef  __cplusplus
-}
-#endif
 #endif
diff --git a/crypto/engine/eng_int.h b/crypto/engine/eng_int.h
index 60fdf82..7c41da2 100644
--- a/crypto/engine/eng_int.h
+++ b/crypto/engine/eng_int.h
@@ -16,10 +16,6 @@
 # include &quot;internal/thread_once.h&quot;
 # include &quot;internal/refcount.h&quot;
 
-#ifdef  __cplusplus
-extern &quot;C&quot; {
-#endif
-
 extern CRYPTO_RWLOCK *global_engine_lock;
 
 /*
@@ -172,8 +168,4 @@ typedef struct st_engine_pile ENGINE_PILE;
 
 DEFINE_LHASH_OF(ENGINE_PILE);
 
-#ifdef  __cplusplus
-}
-#endif
-
 #endif                          /* HEADER_ENGINE_INT_H */
diff --git a/crypto/hmac/hmac_lcl.h b/crypto/hmac/hmac_lcl.h
index 4c156dc..7ba0aac 100644
--- a/crypto/hmac/hmac_lcl.h
+++ b/crypto/hmac/hmac_lcl.h
@@ -10,13 +10,6 @@
 #ifndef HEADER_HMAC_LCL_H
 # define HEADER_HMAC_LCL_H
 
-#ifdef  __cplusplus
-extern &quot;C&quot; {
-#endif
-#if 0                            /* emacs indentation fix */
-}
-#endif
-
 struct hmac_ctx_st {
     const EVP_MD *md;
     EVP_MD_CTX *md_ctx;
@@ -26,8 +19,4 @@ struct hmac_ctx_st {
     unsigned char key[HMAC_MAX_MD_CBLOCK];
 };
 
-#ifdef __cplusplus
-} /* extern &quot;C&quot; */
-#endif
-
 #endif
diff --git a/crypto/include/internal/aria.h b/crypto/include/internal/aria.h
index 0738271..e402b8e 100644
--- a/crypto/include/internal/aria.h
+++ b/crypto/include/internal/aria.h
@@ -25,10 +25,6 @@
 # define ARIA_BLOCK_SIZE    16  /* Size of each encryption/decryption block */
 # define ARIA_MAX_KEYS      17  /* Number of keys needed in the worst case  */
 
-# ifdef  __cplusplus
-extern &quot;C&quot; {
-# endif
-
 typedef union {
     unsigned char c[ARIA_BLOCK_SIZE];
     unsigned int u[ARIA_BLOCK_SIZE / sizeof(unsigned int)];
@@ -51,8 +47,4 @@ int aria_set_decrypt_key(const unsigned char *userKey, const int bits,
 void aria_encrypt(const unsigned char *in, unsigned char *out,
                   const ARIA_KEY *key);
 
-# ifdef  __cplusplus
-}
-# endif
-
 #endif
diff --git a/crypto/include/internal/bn_int.h b/crypto/include/internal/bn_int.h
index ac49d1e..9379951 100644
--- a/crypto/include/internal/bn_int.h
+++ b/crypto/include/internal/bn_int.h
@@ -13,10 +13,6 @@
 # include &lt;openssl/bn.h&gt;
 # include &lt;limits.h&gt;
 
-#ifdef  __cplusplus
-extern &quot;C&quot; {
-#endif
-
 BIGNUM *bn_wexpand(BIGNUM *a, int words);
 BIGNUM *bn_expand2(BIGNUM *a, int words);
 
@@ -64,8 +60,4 @@ void bn_set_static_words(BIGNUM *a, BN_ULONG *words, int size);
  */
 int bn_set_words(BIGNUM *a, BN_ULONG *words, int num_words);
 
-#ifdef  __cplusplus
-}
-#endif
-
 #endif
diff --git a/crypto/include/internal/chacha.h b/crypto/include/internal/chacha.h
index 7d4366e..119361d 100644
--- a/crypto/include/internal/chacha.h
+++ b/crypto/include/internal/chacha.h
@@ -12,10 +12,6 @@
 
 #include &lt;stddef.h&gt;
 
-#ifdef __cplusplus
-extern &quot;C&quot; {
-#endif
-
 /*
  * ChaCha20_ctr32 encrypts |len| bytes from |inp| with the given key and
  * nonce and writes the result to |out|, which may be equal to |inp|.
@@ -43,7 +39,4 @@ void ChaCha20_ctr32(unsigned char *out, const unsigned char *inp,
 #define CHACHA_CTR_SIZE		16
 #define CHACHA_BLK_SIZE		64
 
-#ifdef __cplusplus
-}
-#endif
 #endif
diff --git a/crypto/include/internal/sm2.h b/crypto/include/internal/sm2.h
index 613fa34..23e3895 100644
--- a/crypto/include/internal/sm2.h
+++ b/crypto/include/internal/sm2.h
@@ -15,10 +15,6 @@
 
 # ifndef OPENSSL_NO_SM2
 
-#  ifdef __cplusplus
-extern &quot;C&quot; {
-#  endif
-
 #  include &lt;openssl/ec.h&gt;
 
 /* The default user id as specified in GM/T 0009-2012 */
@@ -74,9 +70,5 @@ int sm2_decrypt(const EC_KEY *key,
                 const uint8_t *ciphertext,
                 size_t ciphertext_len, uint8_t *ptext_buf, size_t *ptext_len);
 
-#  ifdef __cplusplus
-}
-#  endif
-
 # endif /* OPENSSL_NO_SM2 */
 #endif
diff --git a/crypto/include/internal/sm2err.h b/crypto/include/internal/sm2err.h
index 9a7e2b6..f32d26c 100644
--- a/crypto/include/internal/sm2err.h
+++ b/crypto/include/internal/sm2err.h
@@ -15,9 +15,6 @@
 
 # ifndef OPENSSL_NO_SM2
 
-#  ifdef  __cplusplus
-extern &quot;C&quot;
-#  endif
 int ERR_load_SM2_strings(void);
 
 /*
diff --git a/crypto/include/internal/store_int.h b/crypto/include/internal/store_int.h
index 9966aef..0125aae 100644
--- a/crypto/include/internal/store_int.h
+++ b/crypto/include/internal/store_int.h
@@ -14,10 +14,6 @@
 # include &lt;openssl/store.h&gt;
 # include &lt;openssl/ui.h&gt;
 
-# ifdef  __cplusplus
-extern &quot;C&quot; {
-# endif
-
 /*
  * Two functions to read PEM data off an already opened BIO.  To be used
  * instead of OSSLSTORE_open() and OSSLSTORE_close().  Everything is done
@@ -27,7 +23,4 @@ OSSL_STORE_CTX *ossl_store_attach_pem_bio(BIO *bp, const UI_METHOD *ui_method,
                                           void *ui_data);
 int ossl_store_detach_pem_bio(OSSL_STORE_CTX *ctx);
 
-# ifdef  __cplusplus
-}
-# endif
 #endif
diff --git a/crypto/seed/seed_locl.h b/crypto/seed/seed_locl.h
index d4a03fc..97c43ef 100644
--- a/crypto/seed/seed_locl.h
+++ b/crypto/seed/seed_locl.h
@@ -45,10 +45,6 @@ typedef unsigned int seed_word;
 # endif
 
 
-#ifdef  __cplusplus
-extern &quot;C&quot; {
-#endif
-
 # define char2word(c, i)  \
         (i) = ((((seed_word)(c)[0]) &lt;&lt; 24) | (((seed_word)(c)[1]) &lt;&lt; 16) | (((seed_word)(c)[2]) &lt;&lt; 8) | ((seed_word)(c)[3]))
 
@@ -113,8 +109,4 @@ extern &quot;C&quot; {
         (X1) ^= (T0);                            \
         (X2) ^= (T1)
 
-#ifdef  __cplusplus
-}
-#endif
-
 #endif                          /* HEADER_SEED_LOCL_H */
diff --git a/crypto/x509v3/v3_admis.h b/crypto/x509v3/v3_admis.h
index 2f1e76d..fa23fc7 100644
--- a/crypto/x509v3/v3_admis.h
+++ b/crypto/x509v3/v3_admis.h
@@ -10,10 +10,6 @@
 #ifndef HEADER_V3_ADMISSION_H
 # define HEADER_V3_ADMISSION_H
 
-#ifdef __cplusplus
-extern &quot;C&quot; {
-#endif
-
 struct NamingAuthority_st {
     ASN1_OBJECT* namingAuthorityId;
     ASN1_IA5STRING* namingAuthorityUrl;
@@ -39,7 +35,4 @@ struct AdmissionSyntax_st {
     STACK_OF(ADMISSIONS)* contentsOfAdmissions;
 };
 
-#ifdef  __cplusplus
-}
-#endif
 #endif
diff --git a/e_os.h b/e_os.h
index 5071af6..5769029 100644
--- a/e_os.h
+++ b/e_os.h
@@ -22,10 +22,6 @@
  * outside; this file e_os.h is not part of the exported interface.
  */
 
-#ifdef  __cplusplus
-extern &quot;C&quot; {
-#endif
-
 # ifndef DEVRANDOM
 /*
  * set this to a comma-separated list of 'random' device files to try out. By
@@ -325,8 +321,4 @@ struct servent *getservbyname(const char *name, const char *proto);
 # define CRYPTO_memcmp memcmp
 #endif
 
-#ifdef  __cplusplus
-}
-#endif
-
 #endif
diff --git a/include/internal/conf.h b/include/internal/conf.h
index ada3f92..23a9c3b 100644
--- a/include/internal/conf.h
+++ b/include/internal/conf.h
@@ -12,11 +12,6 @@
 
 #include &lt;openssl/conf.h&gt;
 
-#ifdef __cplusplus
-extern &quot;C&quot; {
-#endif
-
-
 struct ossl_init_settings_st {
     char *appname;
 };
@@ -25,8 +20,4 @@ void openssl_config_int(const char *appname);
 void openssl_no_config_int(void);
 void conf_modules_free_int(void);
 
-#ifdef __cplusplus
-}
-#endif
-
 #endif
diff --git a/include/internal/constant_time_locl.h b/include/internal/constant_time_locl.h
index d23f515..82ff746 100644
--- a/include/internal/constant_time_locl.h
+++ b/include/internal/constant_time_locl.h
@@ -14,10 +14,6 @@
 # include &lt;string.h&gt;
 # include &lt;openssl/e_os2.h&gt;              /* For 'ossl_inline' */
 
-#ifdef __cplusplus
-extern &quot;C&quot; {
-#endif
-
 /*-
  * The boolean methods return a bitmask of all ones (0xff...f) for true
  * and 0 for false. This is useful for choosing a value based on the result
@@ -328,8 +324,4 @@ static ossl_inline void constant_time_lookup(void *out,
     }
 }
 
-#ifdef __cplusplus
-}
-#endif
-
 #endif                          /* HEADER_CONSTANT_TIME_LOCL_H */
diff --git a/include/internal/cryptlib.h b/include/internal/cryptlib.h
index 8a96de9..2808fe7 100644
--- a/include/internal/cryptlib.h
+++ b/include/internal/cryptlib.h
@@ -25,10 +25,6 @@
 # include &lt;openssl/err.h&gt;
 # include &quot;internal/nelem.h&quot;
 
-#ifdef  __cplusplus
-extern &quot;C&quot; {
-#endif
-
 #ifdef NDEBUG
 # define ossl_assert(x) ((x) != 0)
 #else
@@ -96,8 +92,4 @@ void *openssl_fopen(const char *filename, const char *mode);
 
 uint32_t OPENSSL_rdtsc(void);
 
-#ifdef  __cplusplus
-}
-#endif
-
 #endif
diff --git a/include/internal/dso.h b/include/internal/dso.h
index 402a76f..3e67d50 100644
--- a/include/internal/dso.h
+++ b/include/internal/dso.h
@@ -13,10 +13,6 @@
 # include &lt;openssl/crypto.h&gt;
 # include &quot;internal/dsoerr.h&quot;
 
-#ifdef __cplusplus
-extern &quot;C&quot; {
-#endif
-
 /* These values are used as commands to DSO_ctrl() */
 # define DSO_CTRL_GET_FLAGS      1
 # define DSO_CTRL_SET_FLAGS      2
@@ -166,7 +162,4 @@ void *DSO_global_lookup(const char *name);
 
 int ERR_load_DSO_strings(void);
 
-# ifdef  __cplusplus
-}
-# endif
 #endif
diff --git a/include/internal/dsoerr.h b/include/internal/dsoerr.h
index a54a185..ac6bdcd 100644
--- a/include/internal/dsoerr.h
+++ b/include/internal/dsoerr.h
@@ -15,9 +15,6 @@
 
 # ifndef OPENSSL_NO_DSO
 
-#  ifdef  __cplusplus
-extern &quot;C&quot;
-#  endif
 int ERR_load_DSO_strings(void);
 
 /*
diff --git a/include/internal/o_dir.h b/include/internal/o_dir.h
index f18fc67..f892687 100644
--- a/include/internal/o_dir.h
+++ b/include/internal/o_dir.h
@@ -39,10 +39,6 @@
 #ifndef O_DIR_H
 # define O_DIR_H
 
-#ifdef __cplusplus
-extern &quot;C&quot; {
-#endif
-
 typedef struct OPENSSL_dir_context_st OPENSSL_DIR_CTX;
 
 /*
@@ -53,8 +49,4 @@ const char *OPENSSL_DIR_read(OPENSSL_DIR_CTX **ctx, const char *directory);
 /* returns 1 on success, 0 on error */
 int OPENSSL_DIR_end(OPENSSL_DIR_CTX **ctx);
 
-#ifdef __cplusplus
-}
-#endif
-
 #endif                          /* LPDIR_H */
diff --git a/ssl/packet_locl.h b/ssl/packet_locl.h
index 8e553e6..fd32a64 100644
--- a/ssl/packet_locl.h
+++ b/ssl/packet_locl.h
@@ -18,10 +18,6 @@
 
 # include &quot;internal/numbers.h&quot;
 
-# ifdef __cplusplus
-extern &quot;C&quot; {
-# endif
-
 typedef struct {
     /* Pointer to where we are currently reading from */
     const unsigned char *curr;
@@ -875,8 +871,4 @@ unsigned char *WPACKET_get_curr(WPACKET *pkt);
 /* Release resources in a WPACKET if a failure has occurred. */
 void WPACKET_cleanup(WPACKET *pkt);
 
-# ifdef __cplusplus
-}
-# endif
-
 #endif                          /* HEADER_PACKET_LOCL_H */
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019644.html">[openssl-commits] [openssl]  master update
</A></li>
	<LI>Next message: <A HREF="019646.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19645">[ date ]</a>
              <a href="thread.html#19645">[ thread ]</a>
              <a href="subject.html#19645">[ subject ]</a>
              <a href="author.html#19645">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
