<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2020-September/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1600927671.084126.2926.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="030879.html">
   <LINK REL="Next"  HREF="030888.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl]  master update</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1600927671.084126.2926.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl]  master update">levitte at openssl.org
       </A><BR>
    <I>Thu Sep 24 06:07:51 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="030879.html">[openssl]  master update
</A></li>
        <LI>Next message: <A HREF="030888.html">[openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30880">[ date ]</a>
              <a href="thread.html#30880">[ thread ]</a>
              <a href="subject.html#30880">[ subject ]</a>
              <a href="author.html#30880">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  cdb5129e5c5fd8ad678c5efb1e87c91595d907b4 (commit)
       via  37fe90ad17fcaaeb33d01c660ed1c12db723d833 (commit)
       via  c60330cb0efcde5fea80113c110499d352b2abca (commit)
      from  3eb99601b148e0019905b660d344508cccfc6943 (commit)


- Log -----------------------------------------------------------------
commit cdb5129e5c5fd8ad678c5efb1e87c91595d907b4
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Mon Sep 21 13:14:26 2020 +0200

    Use OPENSSL_SYS_TANDEM instead of OPENSSL_SYSNAME_TANDEM
    
    This streamlines with all other config targets, and draws from the
    'sys_id' config attribute.
    
    Fixes #12858
    
    Reviewed-by: Tim Hudson &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tjh at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/12933">https://github.com/openssl/openssl/pull/12933</A>)

commit 37fe90ad17fcaaeb33d01c660ed1c12db723d833
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Mon Sep 21 13:13:25 2020 +0200

    Configure: Show 'enable' and 'disable' config attributes
    
    This makes a difference for './Configure HASH' and './Configure TABLE'
    
    Reviewed-by: Tim Hudson &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tjh at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/12933">https://github.com/openssl/openssl/pull/12933</A>)

commit c60330cb0efcde5fea80113c110499d352b2abca
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Mon Sep 21 13:11:28 2020 +0200

    Configuration: Streamline NonStop entries
    
    Because there are many combinations and much repetition, we add a large
    number of templates to cover all aspects, and make the actual config
    entries inherit from the templates combined.
    
    Fixes #12858
    
    Reviewed-by: Tim Hudson &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tjh at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/12933">https://github.com/openssl/openssl/pull/12933</A>)

-----------------------------------------------------------------------

Summary of changes:
 Configurations/50-nonstop.conf | 438 +++++++++++++++++++++++++----------------
 Configure                      |   2 +
 apps/ca.c                      |   2 +-
 apps/lib/apps.c                |   2 +-
 crypto/rand/rand_egd.c         |   6 +-
 include/internal/sockets.h     |   2 +-
 6 files changed, 275 insertions(+), 177 deletions(-)

diff --git a/Configurations/50-nonstop.conf b/Configurations/50-nonstop.conf
index 51034c70aa..e11bc77083 100644
--- a/Configurations/50-nonstop.conf
+++ b/Configurations/50-nonstop.conf
@@ -1,176 +1,272 @@
 #### Nonstop configurations
-    &quot;nonstop-common&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;BASE_unix&quot; ],
-        template         =&gt; 1,
-        cc               =&gt; &quot;c99&quot;,
-        cflags           =&gt; add_before(picker(debug   =&gt; &quot;-g -O0&quot;,
-                                              release =&gt; &quot;-g -O2&quot;) ,&quot;-Wextensions -Wnowarn=203,220,272,734,770,1506 -Wbuild_neutral_library&quot;),
-        perl             =&gt; &quot;/usr/bin/perl&quot;,
-        lflags           =&gt; &quot;-lrld&quot;,
-        shared_target    =&gt; &quot;self&quot;,
-        shared_cflag     =&gt; &quot;&quot;,
-        shared_ldflag    =&gt; &quot;-Wshared&quot;,
+    # Common for all
+    'nonstop-common' =&gt; {
+        inherit_from     =&gt; [ 'BASE_unix' ],
+        template         =&gt; 1,
+        cc               =&gt; 'c99',
+        cflags           =&gt; add_before(picker(debug   =&gt; '-g -O0',
+                                              release =&gt; '-g -O2'),
+                                       '-Wextensions',
+                                       '-Wnowarn=203,220,272,734,770,1506',
+                                       '-Wbuild_neutral_library',
+                                       '-Wverbose'),
+        defines          =&gt; add('OPENSSL_VPROC=$(OPENSSL_VPROC)',
+                                '_XOPEN_SOURCE',
+                                '_XOPEN_SOURCE_EXTENDED=1',
+                                '_TANDEM_SOURCE',
+                                'B_ENDIAN'),
+        perl             =&gt; '/usr/bin/perl',
+        shared_target    =&gt; 'self',
         shared_extension =&gt; &quot;.so&quot;,
-        enable           =&gt; [&quot;egd&quot;],
-        dso_scheme       =&gt; &quot;DLFCN&quot;,
-    },
-    &quot;nonstop-nsx&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -I/usr/local/include&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -I/usr/local/include&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lfloss -Wxld='-set floattype neutral_float' -Wsystype=oss&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lfloss -Wxld='-export_all -set floattype neutral_float -set systype oss' -Wsystype=oss&quot;) },
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;,&quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;, &quot;OPENSSL_TANDEM_FLOSS&quot;],
-        disable          =&gt; [&quot;threads&quot;],
-        bn_ops           =&gt; &quot;THIRTY_TWO_BIT&quot;,
-    },
-    &quot;nonstop-nsx_put&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lput&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wxld='-export_all -set floattype neutral_float -set systype oss' -lput -Wsystype=oss&quot;) },
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_REENTRANT&quot;, &quot;_PUT_MODEL_&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;,&quot;_ENABLE_FLOSS_THREADS&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;],
-        bn_ops           =&gt; &quot;THIRTY_TWO_BIT&quot;,
-    },
-    &quot;nonstop-nsx_64&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wlp64 -Wverbose&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wlp64 -Wverbose&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lfloss -Wlp64&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lfloss -Wxld='-export_all -set data_model lp64 -set floattype neutral_float -set systype oss' -Wlp64 -Wsystype=oss&quot;) },
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;, &quot;OPENSSL_TANDEM_FLOSS&quot;],
-        disable          =&gt; [&quot;threads&quot;],
-        bn_ops           =&gt; &quot;SIXTY_FOUR_BIT&quot;,
-    },
-    &quot;nonstop-nsx_64_put&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wlp64 -Wverbose -Wtarget=tns/x&quot;) },
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wlp64 -Wverbose -Wtarget=tns/x&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wxld='-set floattype neutral_float -set systype oss' -Wlp64 -lput -Wsystype=oss&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wxld='-export_all -set data_model lp64'&quot;) },
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_REENTRANT&quot;, &quot;_PUT_MODEL_&quot;,&quot;_TANDEM_ARCH=3&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;,&quot;_ENABLE_FLOSS_THREADS&quot;,&quot;__TANDEM&quot;, &quot;_TANDEM_SOURCE&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;],
-        bn_ops           =&gt; &quot;SIXTY_FOUR_BIT&quot;,
-    },
-    &quot;nonstop-nsx_spt&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/x&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/x&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lspt -Wextensions&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wxld='-export_all -set floattype neutral_float -set systype oss' -lspt -Wextensions -Wsystype=oss&quot;) },
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_REENTRANT&quot;, &quot;_SPT_MODEL_&quot;,&quot;_THREAD_SUPPORT_FUNCTIONS&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;,&quot;_TANDEM_SOURCE&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;],
-        bn_ops           =&gt; &quot;THIRTY_TWO_BIT&quot;,
-    },
-    &quot;nonstop-nsx_spt_floss&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-I/usr/local/include -Wverbose -Wtarget=tns/x&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-I/usr/local/include -Wverbose -Wtarget=tns/x&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lfloss -lspt -Wextensions&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lfloss -Wxld='-export_all -set floattype neutral_float -set systype oss' -lspt -Wextensions -Wsystype=oss&quot;) },
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_REENTRANT&quot;, &quot;_SPT_MODEL_&quot;,&quot;_THREAD_SUPPORT_FUNCTIONS&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;,&quot;_TANDEM_SOURCE&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;,&quot;OPENSSL_TANDEM_FLOSS&quot;],
-        bn_ops           =&gt; &quot;THIRTY_TWO_BIT&quot;,
-    },
-    &quot;nonstop-nsx_g&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/x&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/x&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wsystype=guardian -Wxld='-set systype guardian -set floattype neutral_float'&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wxld='-export_all -set floattype neutral_float -soname \$\(\@:lib%.so=%\)  -set systype guardian' -Wsystype=guardian&quot;) },
-        #shared_extension =&gt; &quot; &quot;,
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;, &quot;_TANDEM_SOURCE&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;, &quot;NO_GETPID&quot;],
-        disable          =&gt; [&quot;threads&quot;],
-        bn_ops           =&gt; &quot;THIRTY_TWO_BIT&quot;,
-    },
-    &quot;nonstop-nsx_g_tandem&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/x&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/x&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wsystype=guardian -Wxld='-set systype guardian -set floattype tandem_float'&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wxld='-export_all -set floattype tandem_float -soname \$\(\@:lib%.so=%\)  -set systype guardian' -Wsystype=guardian&quot;) },
-        #shared_extension =&gt; &quot; &quot;,
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;, &quot;_TANDEM_SOURCE&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;, &quot;NO_GETPID&quot;],
-        disable          =&gt; [&quot;threads&quot;],
-        bn_ops           =&gt; &quot;THIRTY_TWO_BIT&quot;,
-    },
-    &quot;nonstop-nsv&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-nsx&quot; ],
-    },
-    &quot;nonstop-nse&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/e -I/usr/local/include&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/e -I/usr/local/include&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lfloss&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lfloss -Weld='-export_all -set floattype neutral_float -set systype oss' -Wsystype=oss&quot;) },
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_TANDEM_ARCH=2&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;,&quot;__TANDEM&quot;, &quot;_TANDEM_SOURCE&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;, &quot;OPENSSL_TANDEM_FLOSS&quot;],
-        disable          =&gt; [&quot;threads&quot;],
-        bn_ops           =&gt; &quot;THIRTY_TWO_BIT&quot;,
-    },
-    &quot;nonstop-nse_put&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/e&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/e&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lput&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Weld='-export_all -set floattype neutral_float -set systype oss' -lput -Wsystype=oss&quot;) },
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_REENTRANT&quot;, &quot;_PUT_MODEL_&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;,&quot;_ENABLE_FLOSS_THREADS&quot;, &quot;_TANDEM_SOURCE&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;],
-        bn_ops           =&gt; &quot;THIRTY_TWO_BIT&quot;,
-    },
-    &quot;nonstop-nse_64&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wlp64 -Wverbose -Wtarget=tns/e&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wlp64 -Wverbose -Wtarget=tns/e&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lfloss -Wlp64&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lfloss -Weld='-export_all -set data_model lp64  -set floattype neutral_float -set systype oss' -Wlp64 -Wsystype=oss&quot;) },
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;,&quot;_TANDEM_SOURCE&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;, &quot;OPENSSL_TANDEM_FLOSS&quot;],
-        disable          =&gt; [&quot;threads&quot;],
-        bn_ops           =&gt; &quot;SIXTY_FOUR_BIT_LONG RC4_CHAR RC4_CHUNK DES_INT DES_UNROLL BF_PTR&quot;,
-    },
-    &quot;nonstop-nse_64_put&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wlp64 -Wverbose -Wtarget=tns/e&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wlp64 -Wverbose -Wtarget=tns/e&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lput -Wlp64&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Weld='-export_all -set data_model lp64 -set floattype neutral_float -set systype oss' -Wlp64 -lput -Wsystype=oss&quot;) },
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_REENTRANT&quot;, &quot;_PUT_MODEL_&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;,&quot;_ENABLE_FLOSS_THREADS&quot;, &quot;_TANDEM_SOURCE&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;],
-        bn_ops           =&gt; &quot;SIXTY_FOUR_BIT_LONG RC4_CHAR RC4_CHUNK DES_INT DES_UNROLL BF_PTR&quot;,
-    },
-    &quot;nonstop-nse_spt&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/e&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/e&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lspt -Wextensions&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Weld='-export_all -set floattype neutral_float -set systype oss' -lspt -Wextensions -Wsystype=oss&quot;) },
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_REENTRANT&quot;, &quot;_SPT_MODEL_&quot;,&quot;_THREAD_SUPPORT_FUNCTIONS&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;, &quot;_TANDEM_SOURCE&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;],
-        bn_ops           =&gt; &quot;THIRTY_TWO_BIT&quot;,
-    },
-    &quot;nonstop-nse_spt_floss&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/e&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/e&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lfloss -lspt -Wextensions&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-lfloss -Weld='-export_all -set floattype neutral_float -set systype oss' -lspt -Wextensions -Wsystype=oss&quot;) },
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_REENTRANT&quot;, &quot;_SPT_MODEL_&quot;,&quot;_THREAD_SUPPORT_FUNCTIONS&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;, &quot;_TANDEM_SOURCE&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;, &quot;OPENSSL_TANDEM_FLOSS&quot;],
-        bn_ops           =&gt; &quot;THIRTY_TWO_BIT&quot;,
-    },
-    &quot;nonstop-nse_g&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/e&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/e&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wsystype=guardian -Weld='-set systype guardian'&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Weld='-set systype guardian -export_all -set floattype neutral_float -soname \$\(\@:lib%.so=%\)' -Wsystype=guardian&quot;) },
-        #shared_extension =&gt; &quot; &quot;,
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;, &quot;_TANDEM_SOURCE&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;, &quot;NO_GETPID&quot;],
-        disable          =&gt; [&quot;threads&quot;],
-        bn_ops           =&gt; &quot;THIRTY_TWO_BIT&quot;,
+        ex_libs          =&gt; add('-lrld'),
+        enable           =&gt; ['egd'],
+        dso_scheme       =&gt; 'DLFCN',
+        sys_id           =&gt; 'TANDEM',
+    },
+
+    ######################################################################
+    # Additional variant settings, to be combined with nonstop-common
+    # Note that these do not inherit anything.  However, the diverse values
+    # are merged with other entries in an 'inherit_from'.
+    #
+    # These combine:
+    # - System architecture (MIPS, Itanium, or x86)
+    # - Execution environment (oss [default] or guardian)
+    #
+    # Unfortunately, they can't be separated into independent templates, because
+    # a number of the above are encoded as different linkers, and by consequence,
+    # different c99 linker flags (-Wld, -Weld, and -Wxld)
+    #
+    # In addition, the are modifiers for:
+    # - Size of long + pointer (ilp32 [default] and lp64)
+    # - Float type (neutral and tandem)
+    #
+    # Unfortunately, because the float types affect the linker settings, those
+    # are divided per system architecture
+    #
+    # MIPS + guardian (unused but present for convenience):
+    'nonstop-archenv-mips-guardian' =&gt; {
+        template         =&gt; 1,
+        defines          =&gt; ['NO_GETPID'],
+        cflags           =&gt; '-Wtarget=tns/r -Wsystype=guardian',
+        lflags           =&gt; '-Wld=&quot;-set systype guardian&quot;',
+        shared_ldflag    =&gt; '-Wshared -Wld=&quot;-export_all -soname $(@:lib%.so=%)&quot;',
+    },
+
+    # Itanium + guardian:
+    'nonstop-archenv-itanium-guardian' =&gt; {
+        template         =&gt; 1,
+        defines          =&gt; ['NO_GETPID', '_TANDEM_ARCH=2'],
+        cflags           =&gt; '-Wtarget=tns/e -Wsystype=guardian',
+        lflags           =&gt; '-Weld=&quot;-set systype guardian&quot;',
+        shared_ldflag    =&gt; '-Wshared -Weld=&quot;-export_all -soname $(@:lib%.so=%)&quot;',
+    },
+
+    # x86 + guardian:
+    'nonstop-archenv-x86_64-guardian' =&gt; {
+        template         =&gt; 1,
+        defines          =&gt; ['NO_GETPID', '_TANDEM_ARCH=3'],
+        cflags           =&gt; '-Wtarget=tns/x -Wsystype=guardian',
+        lflags           =&gt; '-Wxld=&quot;-set systype guardian&quot;',
+        shared_ldflag    =&gt; '-Wshared -Wxld=&quot;-export_all -soname $(@:lib%.so=%)&quot;',
+    },
+
+    # MIPS + oss (unused but present for convenience):
+    'nonstop-archenv-mips-oss' =&gt; {
+        template         =&gt; 1,
+        cflags           =&gt; '-Wtarget=tns/r -Wsystype=oss',
+        lflags           =&gt; '-Wld=&quot;-set systype oss&quot;',
+        shared_ldflag    =&gt; '-Wshared -Wld=&quot;-export_all&quot;',
+    },
+    # Itanium + oss:
+    'nonstop-archenv-itanium-oss' =&gt; {
+        template         =&gt; 1,
+        defines          =&gt; ['_TANDEM_ARCH=2'],
+        cflags           =&gt; '-Wtarget=tns/e -Wsystype=oss',
+        lflags           =&gt; '-Weld=&quot;-set systype oss&quot;',
+        shared_ldflag    =&gt; '-Wshared -Weld=&quot;-export_all&quot;',
+    },
+    # x86_64 + oss:
+    'nonstop-archenv-x86_64-oss' =&gt; {
+        template         =&gt; 1,
+        defines          =&gt; ['_TANDEM_ARCH=3'],
+        cflags           =&gt; '-Wtarget=tns/x -Wsystype=oss',
+        lflags           =&gt; '-Wxld=&quot;-set systype oss&quot;',
+        shared_ldflag    =&gt; '-Wshared -Wxld=&quot;-export_all&quot;',
+    },
+
+    # Size variants
+    'nonstop-ilp32' =&gt; {
+        template         =&gt; 1,
+        cflags           =&gt; '-Wilp32',
+        bn_ops           =&gt; 'THIRTY_TWO_BIT',
+    },
+    'nonstop-lp64-itanium' =&gt; {
+        template         =&gt; 1,
+        cflags           =&gt; '-Wlp64',
+        bn_ops           =&gt; 'SIXTY_FOUR_BIT_LONG RC4_CHAR RC4_CHUNK DES_INT DES_UNROLL BF_PTR',
+    },
+    'nonstop-lp64-x86_64' =&gt; {
+        template         =&gt; 1,
+        cflags           =&gt; '-Wlp64',
+        lflags           =&gt; '-Wxld=&quot;-set data_model lp64&quot;',
+        bn_ops           =&gt; 'SIXTY_FOUR_BIT',
+    },
+
+    # Float variants
+    'nonstop-nfloat-mips' =&gt; {
+        template         =&gt; 1,
+        lflags           =&gt; '-Wld=&quot;-set floattype neutral_float&quot;',
+    },
+    'nonstop-tfloat-mips' =&gt; {
+        template         =&gt; 1,
+        lflags           =&gt; '-Wld=&quot;-set floattype tandem_float&quot;',
+    },
+    'nonstop-nfloat-itanium' =&gt; {
+        template         =&gt; 1,
+        lflags           =&gt; '-Weld=&quot;-set floattype neutral_float&quot;',
+    },
+    'nonstop-tfloat-itanium' =&gt; {
+        template         =&gt; 1,
+        lflags           =&gt; '-Weld=&quot;-set floattype tandem_float&quot;',
+    },
+    'nonstop-nfloat-x86_64' =&gt; {
+        template         =&gt; 1,
+        lflags           =&gt; '-Wxld=&quot;-set floattype neutral_float&quot;',
+    },
+    'nonstop-tfloat-x86_64' =&gt; {
+        template         =&gt; 1,
+        lflags           =&gt; '-Wxld=&quot;-set floattype tandem_float&quot;',
+    },
+
+    ######################################################################
+    # Build models
+    'nonstop-model-put' =&gt; {
+        template         =&gt; 1,
+        defines          =&gt; ['_PUT_MODEL_',
+                             '_REENTRANT', '_ENABLE_FLOSS_THREADS'],
+        ex_libs          =&gt; '-lput',
+    },
+    'nonstop-model-spt' =&gt; {
+        template         =&gt; 1,
+        defines          =&gt; ['_SPT_MODEL_',
+                             '_REENTRANT', '_THREAD_SUPPORT_FUNCTIONS'],
+        ex_libs          =&gt; '-lspt',
+    },
+
+    # Additional floss model that can be combined with any of the other models.
+    # If used without any of the other models, the entry that does so must
+    # disable threads.
+    'nonstop-model-floss' =&gt; {
+        template         =&gt; 1,
+        defines          =&gt; ['OPENSSL_TANDEM_FLOSS'],
+        includes         =&gt; ['/usr/local/include'],
+        ex_libs          =&gt; '-lfloss',
+    },
+
+    ######################################################################
+    # Now for the entried themselves, let's combine things!
+    'nonstop-nsx' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-x86_64-oss',
+                              'nonstop-ilp32', 'nonstop-nfloat-x86_64',
+                              'nonstop-model-floss' ],
+        disable          =&gt; ['threads'],
+    },
+    'nonstop-nsx_put' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-x86_64-oss',
+                              'nonstop-ilp32', 'nonstop-nfloat-x86_64',
+                              'nonstop-model-put' ],
+    },
+    'nonstop-nsx_64' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-x86_64-oss',
+                              'nonstop-lp64-x86_64', 'nonstop-nfloat-x86_64',
+                              'nonstop-model-floss' ],
+        disable          =&gt; ['threads'],
+    },
+    'nonstop-nsx_64_put' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-x86_64-oss',
+                              'nonstop-lp64-x86_64', 'nonstop-nfloat-x86_64',
+                              'nonstop-model-put' ],
+    },
+    'nonstop-nsx_spt' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-x86_64-oss', 
+                              'nonstop-ilp32', 'nonstop-nfloat-x86_64',
+                              'nonstop-model-spt' ],
+    },
+    'nonstop-nsx_spt_floss' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-x86_64-oss',
+                              'nonstop-ilp32', 'nonstop-nfloat-x86_64',
+                              'nonstop-model-floss', 'nonstop-model-spt'],
+    },
+    'nonstop-nsx_g' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-x86_64-guardian',
+                              'nonstop-ilp32', 'nonstop-nfloat-x86_64' ],
+        disable          =&gt; ['threads'],
+    },
+    'nonstop-nsx_g_tandem' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-x86_64-guardian',
+                              'nonstop-ilp32', 'nonstop-tfloat-x86_64' ],
+        disable          =&gt; ['threads'],
+    },
+    'nonstop-nsv' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-nsx' ],
+    },
+    'nonstop-nse' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-itanium-oss',
+                              'nonstop-ilp32', 'nonstop-nfloat-itanium',
+                              'nonstop-model-floss' ],
+        disable          =&gt; ['threads'],
+    },
+    'nonstop-nse_put' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-itanium-oss',
+                              'nonstop-ilp32', 'nonstop-nfloat-itanium',
+                              'nonstop-model-put' ],
+    },
+    'nonstop-nse_64' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-itanium-oss',
+                              'nonstop-lp64-itanium', 'nonstop-nfloat-itanium',
+                              'nonstop-model-floss' ],
+        disable          =&gt; ['threads'],
+    },
+    'nonstop-nse_64_put' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-itanium-oss',
+                              'nonstop-lp64-itanium', 'nonstop-nfloat-itanium',
+                              'nonstop-model-put' ],
+    },
+    'nonstop-nse_spt' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-itanium-oss',
+                              'nonstop-ilp32', 'nonstop-nfloat-itanium',
+                              'nonstop-model-spt' ],
+    },
+    'nonstop-nse_spt_floss' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-itanium-oss',
+                              'nonstop-ilp32', 'nonstop-nfloat-itanium',
+                              'nonstop-model-floss', 'nonstop-model-spt' ],
+    },
+    'nonstop-nse_g' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-itanium-guardian',
+                              'nonstop-ilp32', 'nonstop-nfloat-itanium' ],
+        disable          =&gt; ['threads'],
     },
 
-    &quot;nonstop-nse_g_tandem&quot; =&gt; {
-        inherit_from     =&gt; [ &quot;nonstop-common&quot; ],
-        cflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/e&quot;) },
-        shared_cflag     =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wverbose -Wtarget=tns/e&quot;) },
-        lflags           =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wsystype=guardian -Weld='-set systype guardian -set floattype tandem_float'&quot;) },
-        shared_ldflag    =&gt; sub { join(&quot; &quot;<A HREF="../../../mailman/listinfo/openssl-commits.html">, at _</A>,&quot;-Wsystype=guardian -Weld='-set systype guardian -export_all -set floattype tandem_float -soname \$\(\@:lib%.so=%\)'&quot;) },
-        #shared_extension =&gt; &quot; &quot;,
-        defines          =&gt; [&quot;OPENSSL_VPROC=\$(OPENSSL_VPROC)&quot;,&quot;_XOPEN_SOURCE&quot;,&quot;_XOPEN_SOURCE_EXTENDED=1&quot;, &quot;_TANDEM_SOURCE&quot;, &quot;B_ENDIAN&quot;, &quot;OPENSSL_SYSNAME_TANDEM&quot;, &quot;NO_GETPID&quot;],
-        disable          =&gt; [&quot;threads&quot;],
-        bn_ops           =&gt; &quot;THIRTY_TWO_BIT&quot;,
+    'nonstop-nse_g_tandem' =&gt; {
+        inherit_from     =&gt; [ 'nonstop-common',
+                              'nonstop-archenv-itanium-guardian',
+                              'nonstop-ilp32', 'nonstop-tfloat-itanium' ],
+        disable          =&gt; ['threads'],
     },
diff --git a/Configure b/Configure
index 22c0ecdabd..6219e2e37e 100755
--- a/Configure
+++ b/Configure
@@ -3162,6 +3162,8 @@ sub print_table_entry
         &quot;loutflag&quot;,
         &quot;ex_libs&quot;,
         &quot;bn_ops&quot;,
+        &quot;enable&quot;,
+        &quot;disable&quot;,
         &quot;poly1035_asm_src&quot;,
         &quot;thread_scheme&quot;,
         &quot;perlasm_scheme&quot;,
diff --git a/apps/ca.c b/apps/ca.c
index 6ae52c2277..74113cdd67 100644
--- a/apps/ca.c
+++ b/apps/ca.c
@@ -26,7 +26,7 @@
 #ifndef W_OK
 # ifdef OPENSSL_SYS_VMS
 #  include &lt;unistd.h&gt;
-# elif !defined(OPENSSL_SYS_VXWORKS) &amp;&amp; !defined(OPENSSL_SYS_WINDOWS) &amp;&amp; !defined(OPENSSL_SYSNAME_TANDEM)
+# elif !defined(OPENSSL_SYS_VXWORKS) &amp;&amp; !defined(OPENSSL_SYS_WINDOWS) &amp;&amp; !defined(OPENSSL_SYS_TANDEM)
 #  include &lt;sys/file.h&gt;
 # endif
 #endif
diff --git a/apps/lib/apps.c b/apps/lib/apps.c
index 9c608e6582..c0c56d9c22 100644
--- a/apps/lib/apps.c
+++ b/apps/lib/apps.c
@@ -2410,7 +2410,7 @@ int raw_write_stdout(const void *buf, int siz)
     else
         return -1;
 }
-#elif defined(OPENSSL_SYSNAME_TANDEM) &amp;&amp; defined(OPENSSL_THREADS) &amp;&amp; defined(_SPT_MODEL_)
+#elif defined(OPENSSL_SYS_TANDEM) &amp;&amp; defined(OPENSSL_THREADS) &amp;&amp; defined(_SPT_MODEL_)
 # if defined(__TANDEM)
 #  if defined(OPENSSL_TANDEM_FLOSS)
 #   include &lt;floss.h(floss_write)&gt;
diff --git a/crypto/rand/rand_egd.c b/crypto/rand/rand_egd.c
index c6dcd87f04..dc1833169c 100644
--- a/crypto/rand/rand_egd.c
+++ b/crypto/rand/rand_egd.c
@@ -54,7 +54,7 @@ struct sockaddr_un {
 # include &lt;string.h&gt;
 # include &lt;errno.h&gt;
 
-# if defined(OPENSSL_SYSNAME_TANDEM)
+# if defined(OPENSSL_SYS_TANDEM)
 /*
  * HPNS:
  *
@@ -125,7 +125,7 @@ int RAND_query_egd_bytes(const char *path, unsigned char *buf, int bytes)
         return -1;
     strcpy(addr.sun_path, path);
     i = offsetof(struct sockaddr_un, sun_path) + strlen(path);
-#if defined(OPENSSL_SYSNAME_TANDEM)
+#if defined(OPENSSL_SYS_TANDEM)
     fd = hpns_socket(AF_UNIX, SOCK_STREAM, 0, AF_UNIX_COMPATIBILITY);
 #else
     fd = socket(AF_UNIX, SOCK_STREAM, 0);
@@ -158,7 +158,7 @@ int RAND_query_egd_bytes(const char *path, unsigned char *buf, int bytes)
             /* No error, try again */
             break;
         default:
-# if defined(OPENSSL_SYSNAME_TANDEM)
+# if defined(OPENSSL_SYS_TANDEM)
             if (hpns_connect_attempt == 0) {
                 /* try the other kind of AF_UNIX socket */
                 close(fd);
diff --git a/include/internal/sockets.h b/include/internal/sockets.h
index e3a6bd459b..e86ae8a09e 100644
--- a/include/internal/sockets.h
+++ b/include/internal/sockets.h
@@ -145,7 +145,7 @@ struct servent *PASCAL getservbyname(const char *, const char *);
 #  define closesocket(s)              close(s)
 #  define readsocket(s,b,n)           read((s),(b),(n))
 #  define writesocket(s,b,n)          write((s),(char *)(b),(n))
-# elif defined(OPENSSL_SYSNAME_TANDEM)
+# elif defined(OPENSSL_SYS_TANDEM)
 #  if defined(OPENSSL_TANDEM_FLOSS)
 #   include &lt;floss.h(floss_read, floss_write)&gt;
 #   define readsocket(s,b,n)       floss_read((s),(b),(n))
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="030879.html">[openssl]  master update
</A></li>
	<LI>Next message: <A HREF="030888.html">[openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#30880">[ date ]</a>
              <a href="thread.html#30880">[ thread ]</a>
              <a href="subject.html#30880">[ subject ]</a>
              <a href="author.html#30880">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
