<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2020-February/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1581905915.086774.4996.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027557.html">
   <LINK REL="Next"  HREF="027563.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl]  master update</H1>
    <B>Dr. Paul Dale</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1581905915.086774.4996.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl]  master update">pauli at openssl.org
       </A><BR>
    <I>Mon Feb 17 02:18:35 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="027557.html">[openssl]  master update
</A></li>
        <LI>Next message: <A HREF="027563.html">[openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27558">[ date ]</a>
              <a href="thread.html#27558">[ thread ]</a>
              <a href="subject.html#27558">[ subject ]</a>
              <a href="author.html#27558">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  a21314dbbc56cd30580123d74b3106a628540965 (commit)
      from  0eb154663478968137112441d16b593fdf2ebcf8 (commit)


- Log -----------------------------------------------------------------
commit a21314dbbc56cd30580123d74b3106a628540965
Author: David Benjamin &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">davidben at google.com</A>&gt;
Date:   Mon Feb 17 12:17:53 2020 +1000

    Also check for errors in x86_64-xlate.pl.
    
    In <A HREF="https://github.com/openssl/openssl/pull/10883,">https://github.com/openssl/openssl/pull/10883,</A> I'd meant to exclude
    the perlasm drivers since they aren't opening pipes and do not
    particularly need it, but I only noticed x86_64-xlate.pl, so
    arm-xlate.pl and ppc-xlate.pl got the change.
    
    That seems to have been fine, so be consistent and also apply the change
    to x86_64-xlate.pl. Checking for errors is generally a good idea.
    
    Reviewed-by: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
    Reviewed-by: David Benjamin &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">davidben at google.com</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/10930">https://github.com/openssl/openssl/pull/10930</A>)

-----------------------------------------------------------------------

Summary of changes:
 crypto/aes/asm/aes-586.pl               | 2 +-
 crypto/aes/asm/aes-armv4.pl             | 2 +-
 crypto/aes/asm/aes-c64xplus.pl          | 2 +-
 crypto/aes/asm/aes-mips.pl              | 2 +-
 crypto/aes/asm/aes-parisc.pl            | 2 +-
 crypto/aes/asm/aes-ppc.pl               | 2 +-
 crypto/aes/asm/aes-s390x.pl             | 2 +-
 crypto/aes/asm/aes-sparcv9.pl           | 2 +-
 crypto/aes/asm/aes-x86_64.pl            | 2 +-
 crypto/aes/asm/aesfx-sparcv9.pl         | 2 +-
 crypto/aes/asm/aesni-mb-x86_64.pl       | 2 +-
 crypto/aes/asm/aesni-sha1-x86_64.pl     | 2 +-
 crypto/aes/asm/aesni-sha256-x86_64.pl   | 2 +-
 crypto/aes/asm/aesni-x86.pl             | 2 +-
 crypto/aes/asm/aesni-x86_64.pl          | 2 +-
 crypto/aes/asm/aesp8-ppc.pl             | 2 +-
 crypto/aes/asm/aest4-sparcv9.pl         | 2 +-
 crypto/aes/asm/aesv8-armx.pl            | 2 +-
 crypto/aes/asm/bsaes-armv7.pl           | 2 +-
 crypto/aes/asm/bsaes-x86_64.pl          | 2 +-
 crypto/aes/asm/vpaes-armv8.pl           | 2 +-
 crypto/aes/asm/vpaes-ppc.pl             | 2 +-
 crypto/aes/asm/vpaes-x86.pl             | 2 +-
 crypto/aes/asm/vpaes-x86_64.pl          | 2 +-
 crypto/alphacpuid.pl                    | 2 +-
 crypto/arm64cpuid.pl                    | 2 +-
 crypto/armv4cpuid.pl                    | 2 +-
 crypto/bf/asm/bf-586.pl                 | 2 +-
 crypto/bn/asm/alpha-mont.pl             | 2 +-
 crypto/bn/asm/armv4-gf2m.pl             | 2 +-
 crypto/bn/asm/armv4-mont.pl             | 2 +-
 crypto/bn/asm/armv8-mont.pl             | 2 +-
 crypto/bn/asm/bn-586.pl                 | 2 +-
 crypto/bn/asm/c64xplus-gf2m.pl          | 2 +-
 crypto/bn/asm/co-586.pl                 | 2 +-
 crypto/bn/asm/ia64-mont.pl              | 2 +-
 crypto/bn/asm/mips-mont.pl              | 2 +-
 crypto/bn/asm/mips.pl                   | 2 +-
 crypto/bn/asm/parisc-mont.pl            | 2 +-
 crypto/bn/asm/ppc-mont.pl               | 2 +-
 crypto/bn/asm/ppc.pl                    | 2 +-
 crypto/bn/asm/ppc64-mont.pl             | 2 +-
 crypto/bn/asm/rsaz-avx2.pl              | 2 +-
 crypto/bn/asm/rsaz-x86_64.pl            | 2 +-
 crypto/bn/asm/s390x-gf2m.pl             | 2 +-
 crypto/bn/asm/s390x-mont.pl             | 2 +-
 crypto/bn/asm/sparct4-mont.pl           | 2 +-
 crypto/bn/asm/sparcv9-gf2m.pl           | 2 +-
 crypto/bn/asm/sparcv9-mont.pl           | 2 +-
 crypto/bn/asm/sparcv9a-mont.pl          | 2 +-
 crypto/bn/asm/via-mont.pl               | 2 +-
 crypto/bn/asm/vis3-mont.pl              | 2 +-
 crypto/bn/asm/x86-gf2m.pl               | 2 +-
 crypto/bn/asm/x86-mont.pl               | 2 +-
 crypto/bn/asm/x86_64-gf2m.pl            | 2 +-
 crypto/bn/asm/x86_64-mont.pl            | 2 +-
 crypto/bn/asm/x86_64-mont5.pl           | 2 +-
 crypto/c64xpluscpuid.pl                 | 2 +-
 crypto/camellia/asm/cmll-x86.pl         | 2 +-
 crypto/camellia/asm/cmll-x86_64.pl      | 2 +-
 crypto/camellia/asm/cmllt4-sparcv9.pl   | 2 +-
 crypto/cast/asm/cast-586.pl             | 2 +-
 crypto/chacha/asm/chacha-armv4.pl       | 2 +-
 crypto/chacha/asm/chacha-armv8.pl       | 2 +-
 crypto/chacha/asm/chacha-c64xplus.pl    | 2 +-
 crypto/chacha/asm/chacha-ia64.pl        | 2 +-
 crypto/chacha/asm/chacha-ppc.pl         | 2 +-
 crypto/chacha/asm/chacha-x86.pl         | 2 +-
 crypto/chacha/asm/chacha-x86_64.pl      | 2 +-
 crypto/des/asm/crypt586.pl              | 2 +-
 crypto/des/asm/des-586.pl               | 2 +-
 crypto/des/asm/dest4-sparcv9.pl         | 2 +-
 crypto/ec/asm/ecp_nistz256-armv4.pl     | 2 +-
 crypto/ec/asm/ecp_nistz256-armv8.pl     | 2 +-
 crypto/ec/asm/ecp_nistz256-avx2.pl      | 2 +-
 crypto/ec/asm/ecp_nistz256-ppc64.pl     | 2 +-
 crypto/ec/asm/ecp_nistz256-sparcv9.pl   | 2 +-
 crypto/ec/asm/ecp_nistz256-x86.pl       | 2 +-
 crypto/ec/asm/ecp_nistz256-x86_64.pl    | 2 +-
 crypto/ec/asm/x25519-ppc64.pl           | 2 +-
 crypto/ec/asm/x25519-x86_64.pl          | 2 +-
 crypto/md5/asm/md5-586.pl               | 2 +-
 crypto/md5/asm/md5-sparcv9.pl           | 2 +-
 crypto/md5/asm/md5-x86_64.pl            | 2 +-
 crypto/modes/asm/aes-gcm-armv8_64.pl    | 2 +-
 crypto/modes/asm/aesni-gcm-x86_64.pl    | 2 +-
 crypto/modes/asm/ghash-alpha.pl         | 2 +-
 crypto/modes/asm/ghash-armv4.pl         | 2 +-
 crypto/modes/asm/ghash-c64xplus.pl      | 2 +-
 crypto/modes/asm/ghash-ia64.pl          | 2 +-
 crypto/modes/asm/ghash-parisc.pl        | 2 +-
 crypto/modes/asm/ghash-s390x.pl         | 2 +-
 crypto/modes/asm/ghash-sparcv9.pl       | 2 +-
 crypto/modes/asm/ghash-x86.pl           | 2 +-
 crypto/modes/asm/ghash-x86_64.pl        | 2 +-
 crypto/modes/asm/ghashp8-ppc.pl         | 2 +-
 crypto/modes/asm/ghashv8-armx.pl        | 2 +-
 crypto/pariscid.pl                      | 2 +-
 crypto/perlasm/arm-xlate.pl             | 2 +-
 crypto/perlasm/ppc-xlate.pl             | 2 +-
 crypto/perlasm/x86_64-xlate.pl          | 2 +-
 crypto/poly1305/asm/poly1305-armv4.pl   | 2 +-
 crypto/poly1305/asm/poly1305-armv8.pl   | 2 +-
 crypto/poly1305/asm/poly1305-mips.pl    | 2 +-
 crypto/poly1305/asm/poly1305-ppc.pl     | 2 +-
 crypto/poly1305/asm/poly1305-ppcfp.pl   | 2 +-
 crypto/poly1305/asm/poly1305-sparcv9.pl | 2 +-
 crypto/poly1305/asm/poly1305-x86.pl     | 2 +-
 crypto/poly1305/asm/poly1305-x86_64.pl  | 2 +-
 crypto/ppccpuid.pl                      | 2 +-
 crypto/rc4/asm/rc4-586.pl               | 2 +-
 crypto/rc4/asm/rc4-c64xplus.pl          | 2 +-
 crypto/rc4/asm/rc4-md5-x86_64.pl        | 2 +-
 crypto/rc4/asm/rc4-parisc.pl            | 2 +-
 crypto/rc4/asm/rc4-s390x.pl             | 2 +-
 crypto/rc4/asm/rc4-x86_64.pl            | 2 +-
 crypto/rc5/asm/rc5-586.pl               | 2 +-
 crypto/ripemd/asm/rmd-586.pl            | 2 +-
 crypto/s390xcpuid.pl                    | 2 +-
 crypto/sha/asm/keccak1600-armv4.pl      | 2 +-
 crypto/sha/asm/keccak1600-armv8.pl      | 2 +-
 crypto/sha/asm/keccak1600-avx2.pl       | 2 +-
 crypto/sha/asm/keccak1600-avx512.pl     | 2 +-
 crypto/sha/asm/keccak1600-avx512vl.pl   | 2 +-
 crypto/sha/asm/keccak1600-c64x.pl       | 2 +-
 crypto/sha/asm/keccak1600-mmx.pl        | 2 +-
 crypto/sha/asm/keccak1600-ppc64.pl      | 2 +-
 crypto/sha/asm/keccak1600-s390x.pl      | 2 +-
 crypto/sha/asm/keccak1600-x86_64.pl     | 2 +-
 crypto/sha/asm/keccak1600p8-ppc.pl      | 2 +-
 crypto/sha/asm/sha1-586.pl              | 2 +-
 crypto/sha/asm/sha1-alpha.pl            | 2 +-
 crypto/sha/asm/sha1-armv4-large.pl      | 2 +-
 crypto/sha/asm/sha1-armv8.pl            | 2 +-
 crypto/sha/asm/sha1-c64xplus.pl         | 2 +-
 crypto/sha/asm/sha1-mb-x86_64.pl        | 2 +-
 crypto/sha/asm/sha1-mips.pl             | 2 +-
 crypto/sha/asm/sha1-parisc.pl           | 2 +-
 crypto/sha/asm/sha1-ppc.pl              | 2 +-
 crypto/sha/asm/sha1-s390x.pl            | 2 +-
 crypto/sha/asm/sha1-sparcv9.pl          | 2 +-
 crypto/sha/asm/sha1-sparcv9a.pl         | 2 +-
 crypto/sha/asm/sha1-thumb.pl            | 2 +-
 crypto/sha/asm/sha1-x86_64.pl           | 2 +-
 crypto/sha/asm/sha256-586.pl            | 2 +-
 crypto/sha/asm/sha256-armv4.pl          | 2 +-
 crypto/sha/asm/sha256-c64xplus.pl       | 2 +-
 crypto/sha/asm/sha256-mb-x86_64.pl      | 2 +-
 crypto/sha/asm/sha512-586.pl            | 2 +-
 crypto/sha/asm/sha512-armv4.pl          | 2 +-
 crypto/sha/asm/sha512-armv8.pl          | 2 +-
 crypto/sha/asm/sha512-c64xplus.pl       | 2 +-
 crypto/sha/asm/sha512-mips.pl           | 2 +-
 crypto/sha/asm/sha512-parisc.pl         | 2 +-
 crypto/sha/asm/sha512-ppc.pl            | 2 +-
 crypto/sha/asm/sha512-s390x.pl          | 2 +-
 crypto/sha/asm/sha512-sparcv9.pl        | 2 +-
 crypto/sha/asm/sha512-x86_64.pl         | 2 +-
 crypto/sha/asm/sha512p8-ppc.pl          | 2 +-
 crypto/whrlpool/asm/wp-mmx.pl           | 2 +-
 crypto/whrlpool/asm/wp-x86_64.pl        | 2 +-
 crypto/x86_64cpuid.pl                   | 2 +-
 crypto/x86cpuid.pl                      | 2 +-
 163 files changed, 163 insertions(+), 163 deletions(-)

diff --git a/crypto/aes/asm/aes-586.pl b/crypto/aes/asm/aes-586.pl
index 401469eed7..a11eef099d 100755
--- a/crypto/aes/asm/aes-586.pl
+++ b/crypto/aes/asm/aes-586.pl
@@ -2995,4 +2995,4 @@ sub deckey()
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/aes-armv4.pl b/crypto/aes/asm/aes-armv4.pl
index 2461535012..e8feee358a 100644
--- a/crypto/aes/asm/aes-armv4.pl
+++ b/crypto/aes/asm/aes-armv4.pl
@@ -1245,4 +1245,4 @@ while(&lt;SELF&gt;) {
 close SELF;
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;	# enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;	# enforce flush
diff --git a/crypto/aes/asm/aes-c64xplus.pl b/crypto/aes/asm/aes-c64xplus.pl
index 4a9b41af76..3d767ce06f 100644
--- a/crypto/aes/asm/aes-c64xplus.pl
+++ b/crypto/aes/asm/aes-c64xplus.pl
@@ -1378,4 +1378,4 @@ AES_Td4:
 ___
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/aes-mips.pl b/crypto/aes/asm/aes-mips.pl
index 73ed988526..9c3a6e6a0c 100644
--- a/crypto/aes/asm/aes-mips.pl
+++ b/crypto/aes/asm/aes-mips.pl
@@ -2203,4 +2203,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/aes-parisc.pl b/crypto/aes/asm/aes-parisc.pl
index 761c234733..c51c11b180 100644
--- a/crypto/aes/asm/aes-parisc.pl
+++ b/crypto/aes/asm/aes-parisc.pl
@@ -1038,4 +1038,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/aes-ppc.pl b/crypto/aes/asm/aes-ppc.pl
index 219bd69d6f..86c666c64c 100644
--- a/crypto/aes/asm/aes-ppc.pl
+++ b/crypto/aes/asm/aes-ppc.pl
@@ -1460,4 +1460,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/aes-s390x.pl b/crypto/aes/asm/aes-s390x.pl
index a4982554d2..a0c817a1fb 100644
--- a/crypto/aes/asm/aes-s390x.pl
+++ b/crypto/aes/asm/aes-s390x.pl
@@ -2281,4 +2281,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;	# force flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;	# force flush
diff --git a/crypto/aes/asm/aes-sparcv9.pl b/crypto/aes/asm/aes-sparcv9.pl
index f57a9a3fea..e1319502cd 100755
--- a/crypto/aes/asm/aes-sparcv9.pl
+++ b/crypto/aes/asm/aes-sparcv9.pl
@@ -1188,4 +1188,4 @@ ___
 $code =~ s/fmovs.*$//gm;
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;	# ensure flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;	# ensure flush
diff --git a/crypto/aes/asm/aes-x86_64.pl b/crypto/aes/asm/aes-x86_64.pl
index 4e417a516b..1a771a1120 100755
--- a/crypto/aes/asm/aes-x86_64.pl
+++ b/crypto/aes/asm/aes-x86_64.pl
@@ -2924,4 +2924,4 @@ $code =~ s/\`([^\`]*)\`/eval($1)/gem;
 
 print $code;
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/aesfx-sparcv9.pl b/crypto/aes/asm/aesfx-sparcv9.pl
index 2512dffa6b..af99c9f276 100644
--- a/crypto/aes/asm/aesfx-sparcv9.pl
+++ b/crypto/aes/asm/aesfx-sparcv9.pl
@@ -1266,4 +1266,4 @@ foreach (split(&quot;\n&quot;,$code)) {
     print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/aesni-mb-x86_64.pl b/crypto/aes/asm/aesni-mb-x86_64.pl
index eb852cc663..3b2b569481 100644
--- a/crypto/aes/asm/aesni-mb-x86_64.pl
+++ b/crypto/aes/asm/aesni-mb-x86_64.pl
@@ -1473,4 +1473,4 @@ $code =~ s/\`([^\`]*)\`/eval($1)/gem;
 $code =~ s/\b(aes.*%xmm[0-9]+).*$/aesni($1)/gem;
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/aesni-sha1-x86_64.pl b/crypto/aes/asm/aesni-sha1-x86_64.pl
index 4a881f8e10..9f2b2491df 100644
--- a/crypto/aes/asm/aesni-sha1-x86_64.pl
+++ b/crypto/aes/asm/aesni-sha1-x86_64.pl
@@ -2145,4 +2145,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/aesni-sha256-x86_64.pl b/crypto/aes/asm/aesni-sha256-x86_64.pl
index 58ef8ad2ed..442c934ac4 100644
--- a/crypto/aes/asm/aesni-sha256-x86_64.pl
+++ b/crypto/aes/asm/aesni-sha256-x86_64.pl
@@ -1801,4 +1801,4 @@ sub rex {
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 $code =~ s/\b(sha256[^\s]*)\s+(.*)/sha256op38($1,$2)/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/aesni-x86.pl b/crypto/aes/asm/aesni-x86.pl
index 1c714531ea..ee0a47cdcf 100644
--- a/crypto/aes/asm/aesni-x86.pl
+++ b/crypto/aes/asm/aesni-x86.pl
@@ -3410,4 +3410,4 @@ my ($l_,$block,$i1,$i3,$i5) = ($rounds_,$key_,$rounds,$len,$out);
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/aesni-x86_64.pl b/crypto/aes/asm/aesni-x86_64.pl
index 7b2ad2866b..4d2d1e0976 100644
--- a/crypto/aes/asm/aesni-x86_64.pl
+++ b/crypto/aes/asm/aesni-x86_64.pl
@@ -5167,4 +5167,4 @@ $code =~ s/\bmovbe\s+%eax,\s*([0-9]+)\(%rsp\)/movbe($1)/gem;
 
 print $code;
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/aesp8-ppc.pl b/crypto/aes/asm/aesp8-ppc.pl
index 9408bf0a54..7bd5e9e3f0 100755
--- a/crypto/aes/asm/aesp8-ppc.pl
+++ b/crypto/aes/asm/aesp8-ppc.pl
@@ -3808,4 +3808,4 @@ foreach(split(&quot;\n&quot;,$code)) {
         print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/aest4-sparcv9.pl b/crypto/aes/asm/aest4-sparcv9.pl
index c9a2ff69d3..6a3965a827 100644
--- a/crypto/aes/asm/aest4-sparcv9.pl
+++ b/crypto/aes/asm/aest4-sparcv9.pl
@@ -925,4 +925,4 @@ ___
 
 &amp;emit_assembler();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/aesv8-armx.pl b/crypto/aes/asm/aesv8-armx.pl
index 6d7cbf09e4..a18a47e37b 100755
--- a/crypto/aes/asm/aesv8-armx.pl
+++ b/crypto/aes/asm/aesv8-armx.pl
@@ -2245,4 +2245,4 @@ if ($flavour =~ /64/) {			######## 64-bit code
     }
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/bsaes-armv7.pl b/crypto/aes/asm/bsaes-armv7.pl
index 601b6b3942..58b8e927e6 100644
--- a/crypto/aes/asm/bsaes-armv7.pl
+++ b/crypto/aes/asm/bsaes-armv7.pl
@@ -2491,4 +2491,4 @@ close SELF;
 
 print $code;
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/bsaes-x86_64.pl b/crypto/aes/asm/bsaes-x86_64.pl
index 2e46802dfe..1b0f709687 100644
--- a/crypto/aes/asm/bsaes-x86_64.pl
+++ b/crypto/aes/asm/bsaes-x86_64.pl
@@ -3240,4 +3240,4 @@ $code =~ s/\`([^\`]*)\`/eval($1)/gem;
 
 print $code;
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/vpaes-armv8.pl b/crypto/aes/asm/vpaes-armv8.pl
index 2dba92dd24..4068c4bd37 100755
--- a/crypto/aes/asm/vpaes-armv8.pl
+++ b/crypto/aes/asm/vpaes-armv8.pl
@@ -1278,4 +1278,4 @@ ___
 }	}
 print $code;
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/vpaes-ppc.pl b/crypto/aes/asm/vpaes-ppc.pl
index 74f4d9af28..522cfb737b 100644
--- a/crypto/aes/asm/vpaes-ppc.pl
+++ b/crypto/aes/asm/vpaes-ppc.pl
@@ -1595,4 +1595,4 @@ foreach  (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/vpaes-x86.pl b/crypto/aes/asm/vpaes-x86.pl
index a737f2db76..f800d83abf 100644
--- a/crypto/aes/asm/vpaes-x86.pl
+++ b/crypto/aes/asm/vpaes-x86.pl
@@ -911,4 +911,4 @@ $k_dsbo=0x2c0;		# decryption sbox final output
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/aes/asm/vpaes-x86_64.pl b/crypto/aes/asm/vpaes-x86_64.pl
index 121370658c..ed0af8dfd0 100644
--- a/crypto/aes/asm/vpaes-x86_64.pl
+++ b/crypto/aes/asm/vpaes-x86_64.pl
@@ -1245,4 +1245,4 @@ $code =~ s/\`([^\`]*)\`/eval($1)/gem;
 
 print $code;
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/alphacpuid.pl b/crypto/alphacpuid.pl
index c64d50218a..681b11877c 100644
--- a/crypto/alphacpuid.pl
+++ b/crypto/alphacpuid.pl
@@ -253,4 +253,4 @@ OPENSSL_instrument_bus2:
 ___
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/arm64cpuid.pl b/crypto/arm64cpuid.pl
index 0fdaf3db67..96facfd8eb 100755
--- a/crypto/arm64cpuid.pl
+++ b/crypto/arm64cpuid.pl
@@ -147,4 +147,4 @@ CRYPTO_memcmp:
 ___
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/armv4cpuid.pl b/crypto/armv4cpuid.pl
index 3646617326..f0f95648e0 100644
--- a/crypto/armv4cpuid.pl
+++ b/crypto/armv4cpuid.pl
@@ -297,4 +297,4 @@ atomic_add_spinlock:
 ___
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bf/asm/bf-586.pl b/crypto/bf/asm/bf-586.pl
index a4317f7134..43ce999e0c 100644
--- a/crypto/bf/asm/bf-586.pl
+++ b/crypto/bf/asm/bf-586.pl
@@ -31,7 +31,7 @@ $tmp4=&quot;edx&quot;;
 &amp;cbc(&quot;BF_cbc_encrypt&quot;,&quot;BF_encrypt&quot;,&quot;BF_decrypt&quot;,1,4,5,3,-1,-1);
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
 
 sub BF_encrypt
 	{
diff --git a/crypto/bn/asm/alpha-mont.pl b/crypto/bn/asm/alpha-mont.pl
index b242098c75..04239b8b18 100644
--- a/crypto/bn/asm/alpha-mont.pl
+++ b/crypto/bn/asm/alpha-mont.pl
@@ -324,4 +324,4 @@ bn_mul_mont:
 ___
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/armv4-gf2m.pl b/crypto/bn/asm/armv4-gf2m.pl
index 400712f052..ae4cb94b2c 100644
--- a/crypto/bn/asm/armv4-gf2m.pl
+++ b/crypto/bn/asm/armv4-gf2m.pl
@@ -338,4 +338,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;   # enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;   # enforce flush
diff --git a/crypto/bn/asm/armv4-mont.pl b/crypto/bn/asm/armv4-mont.pl
index 85ec79344c..093f146c2a 100644
--- a/crypto/bn/asm/armv4-mont.pl
+++ b/crypto/bn/asm/armv4-mont.pl
@@ -763,4 +763,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/armv8-mont.pl b/crypto/bn/asm/armv8-mont.pl
index 77e77ae03f..ed77a8a152 100755
--- a/crypto/bn/asm/armv8-mont.pl
+++ b/crypto/bn/asm/armv8-mont.pl
@@ -1514,4 +1514,4 @@ ___
 
 print $code;
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/bn-586.pl b/crypto/bn/asm/bn-586.pl
index 3bd422ceb6..4f6f364fdb 100644
--- a/crypto/bn/asm/bn-586.pl
+++ b/crypto/bn/asm/bn-586.pl
@@ -30,7 +30,7 @@ for (@ARGV) { $sse2=1 if (/-DOPENSSL_IA32_SSE2/); }
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
 
 sub bn_mul_add_words
 	{
diff --git a/crypto/bn/asm/c64xplus-gf2m.pl b/crypto/bn/asm/c64xplus-gf2m.pl
index da9b24a5ba..d355891846 100644
--- a/crypto/bn/asm/c64xplus-gf2m.pl
+++ b/crypto/bn/asm/c64xplus-gf2m.pl
@@ -156,4 +156,4 @@ $code.=&lt;&lt;___;
 ___
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/co-586.pl b/crypto/bn/asm/co-586.pl
index 7a9752ad47..5bb03ad6a7 100644
--- a/crypto/bn/asm/co-586.pl
+++ b/crypto/bn/asm/co-586.pl
@@ -21,7 +21,7 @@ $output = pop and open STDOUT,&quot;&gt;$output&quot;;
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
 
 sub mul_add_c
 	{
diff --git a/crypto/bn/asm/ia64-mont.pl b/crypto/bn/asm/ia64-mont.pl
index 63db78367b..fac6ca9b3b 100644
--- a/crypto/bn/asm/ia64-mont.pl
+++ b/crypto/bn/asm/ia64-mont.pl
@@ -858,4 +858,4 @@ ___
 
 open STDOUT,&quot;&gt;$output&quot; if $output;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/mips-mont.pl b/crypto/bn/asm/mips-mont.pl
index 93aa1bf456..3e89ccafa2 100644
--- a/crypto/bn/asm/mips-mont.pl
+++ b/crypto/bn/asm/mips-mont.pl
@@ -433,4 +433,4 @@ ___
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/mips.pl b/crypto/bn/asm/mips.pl
index e24fe2e827..cf67647f0d 100644
--- a/crypto/bn/asm/mips.pl
+++ b/crypto/bn/asm/mips.pl
@@ -2262,4 +2262,4 @@ $code.=&lt;&lt;___;
 .end	bn_sqr_comba4
 ___
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/parisc-mont.pl b/crypto/bn/asm/parisc-mont.pl
index 757f68af21..ed7df62815 100644
--- a/crypto/bn/asm/parisc-mont.pl
+++ b/crypto/bn/asm/parisc-mont.pl
@@ -1005,4 +1005,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/ppc-mont.pl b/crypto/bn/asm/ppc-mont.pl
index b208f2dc6f..497b4c70ed 100644
--- a/crypto/bn/asm/ppc-mont.pl
+++ b/crypto/bn/asm/ppc-mont.pl
@@ -1991,4 +1991,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/ppc.pl b/crypto/bn/asm/ppc.pl
index a9f50a8ebf..b3df275d1a 100644
--- a/crypto/bn/asm/ppc.pl
+++ b/crypto/bn/asm/ppc.pl
@@ -2013,4 +2013,4 @@ Lppcasm_maw_adios:
 EOF
 $data =~ s/\`([^\`]*)\`/eval $1/gem;
 print $data;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/ppc64-mont.pl b/crypto/bn/asm/ppc64-mont.pl
index e869ec87f9..e5799083ee 100644
--- a/crypto/bn/asm/ppc64-mont.pl
+++ b/crypto/bn/asm/ppc64-mont.pl
@@ -1653,4 +1653,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/rsaz-avx2.pl b/crypto/bn/asm/rsaz-avx2.pl
index e0332426a9..a01b2898b6 100755
--- a/crypto/bn/asm/rsaz-avx2.pl
+++ b/crypto/bn/asm/rsaz-avx2.pl
@@ -1981,4 +1981,4 @@ rsaz_1024_gather5_avx2:
 ___
 }}}
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/rsaz-x86_64.pl b/crypto/bn/asm/rsaz-x86_64.pl
index ee92dfe3c4..e05dc81692 100755
--- a/crypto/bn/asm/rsaz-x86_64.pl
+++ b/crypto/bn/asm/rsaz-x86_64.pl
@@ -2430,4 +2430,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/s390x-gf2m.pl b/crypto/bn/asm/s390x-gf2m.pl
index 4e85800178..02acd508f5 100644
--- a/crypto/bn/asm/s390x-gf2m.pl
+++ b/crypto/bn/asm/s390x-gf2m.pl
@@ -227,4 +227,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval($1)/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/s390x-mont.pl b/crypto/bn/asm/s390x-mont.pl
index f7b1dc2111..03fd15bbd2 100644
--- a/crypto/bn/asm/s390x-mont.pl
+++ b/crypto/bn/asm/s390x-mont.pl
@@ -283,4 +283,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	s/_dswap\s+(%r[0-9]+)/sprintf(&quot;rllg\t%s,%s,32&quot;,$1,$1) if($SIZE_T==4)/e;
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/sparct4-mont.pl b/crypto/bn/asm/sparct4-mont.pl
index 1d4b5ee9e5..316c2af8fb 100755
--- a/crypto/bn/asm/sparct4-mont.pl
+++ b/crypto/bn/asm/sparct4-mont.pl
@@ -1224,4 +1224,4 @@ ___
 
 &amp;emit_assembler();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/sparcv9-gf2m.pl b/crypto/bn/asm/sparcv9-gf2m.pl
index 40bac74a89..26f0253f3c 100644
--- a/crypto/bn/asm/sparcv9-gf2m.pl
+++ b/crypto/bn/asm/sparcv9-gf2m.pl
@@ -196,4 +196,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval($1)/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/sparcv9-mont.pl b/crypto/bn/asm/sparcv9-mont.pl
index 33c4ffb5ae..c16d5730ba 100644
--- a/crypto/bn/asm/sparcv9-mont.pl
+++ b/crypto/bn/asm/sparcv9-mont.pl
@@ -616,4 +616,4 @@ $code.=&lt;&lt;___;
 ___
 $code =~ s/\`([^\`]*)\`/eval($1)/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/sparcv9a-mont.pl b/crypto/bn/asm/sparcv9a-mont.pl
index a91e40edb0..369913b85b 100755
--- a/crypto/bn/asm/sparcv9a-mont.pl
+++ b/crypto/bn/asm/sparcv9a-mont.pl
@@ -886,4 +886,4 @@ $code =~ s/fzeros\s+%f([0-9]+)/
 
 print $code;
 # flush
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/via-mont.pl b/crypto/bn/asm/via-mont.pl
index 3c27628890..7678e75a1f 100644
--- a/crypto/bn/asm/via-mont.pl
+++ b/crypto/bn/asm/via-mont.pl
@@ -247,4 +247,4 @@ $sp=&amp;DWP(28,&quot;esp&quot;);
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/vis3-mont.pl b/crypto/bn/asm/vis3-mont.pl
index 827679b396..136f3e44f7 100644
--- a/crypto/bn/asm/vis3-mont.pl
+++ b/crypto/bn/asm/vis3-mont.pl
@@ -380,4 +380,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/x86-gf2m.pl b/crypto/bn/asm/x86-gf2m.pl
index c909065fd9..46cce652c1 100644
--- a/crypto/bn/asm/x86-gf2m.pl
+++ b/crypto/bn/asm/x86-gf2m.pl
@@ -321,4 +321,4 @@ if ($sse2) {
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/x86-mont.pl b/crypto/bn/asm/x86-mont.pl
index e23433594b..0fcc484b2a 100755
--- a/crypto/bn/asm/x86-mont.pl
+++ b/crypto/bn/asm/x86-mont.pl
@@ -627,4 +627,4 @@ $sbit=$num;
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/x86_64-gf2m.pl b/crypto/bn/asm/x86_64-gf2m.pl
index 27034285de..9c08201438 100644
--- a/crypto/bn/asm/x86_64-gf2m.pl
+++ b/crypto/bn/asm/x86_64-gf2m.pl
@@ -423,4 +423,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval($1)/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/x86_64-mont.pl b/crypto/bn/asm/x86_64-mont.pl
index bcc0f83ec0..9ba7ae8b5e 100755
--- a/crypto/bn/asm/x86_64-mont.pl
+++ b/crypto/bn/asm/x86_64-mont.pl
@@ -1591,4 +1591,4 @@ ___
 }
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/bn/asm/x86_64-mont5.pl b/crypto/bn/asm/x86_64-mont5.pl
index 0eb127b4e7..6cd7bca9fa 100755
--- a/crypto/bn/asm/x86_64-mont5.pl
+++ b/crypto/bn/asm/x86_64-mont5.pl
@@ -3962,4 +3962,4 @@ ___
 $code =~ s/\`([^\`]*)\`/eval($1)/gem;
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/c64xpluscpuid.pl b/crypto/c64xpluscpuid.pl
index 0fc1b8b60a..9aedc47dbb 100644
--- a/crypto/c64xpluscpuid.pl
+++ b/crypto/c64xpluscpuid.pl
@@ -284,4 +284,4 @@ bus_loop2_done?:
 ___
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/camellia/asm/cmll-x86.pl b/crypto/camellia/asm/cmll-x86.pl
index d1e522fbd2..f02108cc39 100644
--- a/crypto/camellia/asm/cmll-x86.pl
+++ b/crypto/camellia/asm/cmll-x86.pl
@@ -1146,4 +1146,4 @@ my ($s0,$s1,$s2,$s3) = @T;
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/camellia/asm/cmll-x86_64.pl b/crypto/camellia/asm/cmll-x86_64.pl
index 547fdf9176..a2f627022c 100644
--- a/crypto/camellia/asm/cmll-x86_64.pl
+++ b/crypto/camellia/asm/cmll-x86_64.pl
@@ -1153,4 +1153,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/camellia/asm/cmllt4-sparcv9.pl b/crypto/camellia/asm/cmllt4-sparcv9.pl
index 9548917241..6ac0e31ac6 100644
--- a/crypto/camellia/asm/cmllt4-sparcv9.pl
+++ b/crypto/camellia/asm/cmllt4-sparcv9.pl
@@ -935,4 +935,4 @@ ___
 
 &amp;emit_assembler();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/cast/asm/cast-586.pl b/crypto/cast/asm/cast-586.pl
index c74810bba9..e3bf975674 100644
--- a/crypto/cast/asm/cast-586.pl
+++ b/crypto/cast/asm/cast-586.pl
@@ -45,7 +45,7 @@ $S4=&quot;CAST_S_table3&quot;;
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
 
 sub CAST_encrypt {
     local($name,$enc)=@_;
diff --git a/crypto/chacha/asm/chacha-armv4.pl b/crypto/chacha/asm/chacha-armv4.pl
index 021da300ee..665ca50cf5 100755
--- a/crypto/chacha/asm/chacha-armv4.pl
+++ b/crypto/chacha/asm/chacha-armv4.pl
@@ -1166,4 +1166,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/chacha/asm/chacha-armv8.pl b/crypto/chacha/asm/chacha-armv8.pl
index 466de51867..368e7ac834 100755
--- a/crypto/chacha/asm/chacha-armv8.pl
+++ b/crypto/chacha/asm/chacha-armv8.pl
@@ -1289,4 +1289,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;	# flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;	# flush
diff --git a/crypto/chacha/asm/chacha-c64xplus.pl b/crypto/chacha/asm/chacha-c64xplus.pl
index 0b146288f7..6888e12da0 100755
--- a/crypto/chacha/asm/chacha-c64xplus.pl
+++ b/crypto/chacha/asm/chacha-c64xplus.pl
@@ -922,4 +922,4 @@ $code.=&lt;&lt;___;
 ___
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/chacha/asm/chacha-ia64.pl b/crypto/chacha/asm/chacha-ia64.pl
index 9276dd0fbf..b13d972855 100644
--- a/crypto/chacha/asm/chacha-ia64.pl
+++ b/crypto/chacha/asm/chacha-ia64.pl
@@ -288,4 +288,4 @@ stringz &quot;ChaCha20 for IA64, CRYPTOGAMS by \@dot-asm&quot;
 ___
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/chacha/asm/chacha-ppc.pl b/crypto/chacha/asm/chacha-ppc.pl
index c9c4343517..12e76b000a 100755
--- a/crypto/chacha/asm/chacha-ppc.pl
+++ b/crypto/chacha/asm/chacha-ppc.pl
@@ -1349,4 +1349,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/chacha/asm/chacha-x86.pl b/crypto/chacha/asm/chacha-x86.pl
index 6cf6968890..24c6966d3e 100755
--- a/crypto/chacha/asm/chacha-x86.pl
+++ b/crypto/chacha/asm/chacha-x86.pl
@@ -1151,4 +1151,4 @@ sub XOPROUND {
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/chacha/asm/chacha-x86_64.pl b/crypto/chacha/asm/chacha-x86_64.pl
index 25140104ce..1d67b87780 100755
--- a/crypto/chacha/asm/chacha-x86_64.pl
+++ b/crypto/chacha/asm/chacha-x86_64.pl
@@ -4004,4 +4004,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/des/asm/crypt586.pl b/crypto/des/asm/crypt586.pl
index def4e7fd52..05d1d992f9 100644
--- a/crypto/des/asm/crypt586.pl
+++ b/crypto/des/asm/crypt586.pl
@@ -24,7 +24,7 @@ $R=&quot;esi&quot;;
 &amp;fcrypt_body(&quot;fcrypt_body&quot;);
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
 
 sub fcrypt_body
 	{
diff --git a/crypto/des/asm/des-586.pl b/crypto/des/asm/des-586.pl
index 45fe3d2d44..197ba2d7d9 100644
--- a/crypto/des/asm/des-586.pl
+++ b/crypto/des/asm/des-586.pl
@@ -46,7 +46,7 @@ $small_footprint=1 if (grep(/\-DOPENSSL_SMALL_FOOTPRINT/<A HREF="../../../mailman/listinfo/openssl-commits.html">, at ARGV</A>));
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
 
 sub DES_encrypt_internal()
 	{
diff --git a/crypto/des/asm/dest4-sparcv9.pl b/crypto/des/asm/dest4-sparcv9.pl
index 90438f0e1b..7168c73250 100644
--- a/crypto/des/asm/dest4-sparcv9.pl
+++ b/crypto/des/asm/dest4-sparcv9.pl
@@ -623,4 +623,4 @@ ___
 
 &amp;emit_assembler();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/ec/asm/ecp_nistz256-armv4.pl b/crypto/ec/asm/ecp_nistz256-armv4.pl
index 8813c97ae8..c4cc49817c 100755
--- a/crypto/ec/asm/ecp_nistz256-armv4.pl
+++ b/crypto/ec/asm/ecp_nistz256-armv4.pl
@@ -1853,4 +1853,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;	# enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;	# enforce flush
diff --git a/crypto/ec/asm/ecp_nistz256-armv8.pl b/crypto/ec/asm/ecp_nistz256-armv8.pl
index 794f7631e4..30da900050 100644
--- a/crypto/ec/asm/ecp_nistz256-armv8.pl
+++ b/crypto/ec/asm/ecp_nistz256-armv8.pl
@@ -1874,4 +1874,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;	# enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;	# enforce flush
diff --git a/crypto/ec/asm/ecp_nistz256-avx2.pl b/crypto/ec/asm/ecp_nistz256-avx2.pl
index 8c04b0e924..cf14869f95 100755
--- a/crypto/ec/asm/ecp_nistz256-avx2.pl
+++ b/crypto/ec/asm/ecp_nistz256-avx2.pl
@@ -2079,4 +2079,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/ec/asm/ecp_nistz256-ppc64.pl b/crypto/ec/asm/ecp_nistz256-ppc64.pl
index b7ca4e97ea..9934f680db 100755
--- a/crypto/ec/asm/ecp_nistz256-ppc64.pl
+++ b/crypto/ec/asm/ecp_nistz256-ppc64.pl
@@ -2382,4 +2382,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;	# enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;	# enforce flush
diff --git a/crypto/ec/asm/ecp_nistz256-sparcv9.pl b/crypto/ec/asm/ecp_nistz256-sparcv9.pl
index 29194089b9..70afa8fcff 100755
--- a/crypto/ec/asm/ecp_nistz256-sparcv9.pl
+++ b/crypto/ec/asm/ecp_nistz256-sparcv9.pl
@@ -3056,4 +3056,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/ec/asm/ecp_nistz256-x86.pl b/crypto/ec/asm/ecp_nistz256-x86.pl
index edc1d5a3a9..7320fc1ad8 100755
--- a/crypto/ec/asm/ecp_nistz256-x86.pl
+++ b/crypto/ec/asm/ecp_nistz256-x86.pl
@@ -1858,4 +1858,4 @@ for ($i=0;$i&lt;7;$i++) {
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/ec/asm/ecp_nistz256-x86_64.pl b/crypto/ec/asm/ecp_nistz256-x86_64.pl
index 33485c61ec..c0914d90ad 100755
--- a/crypto/ec/asm/ecp_nistz256-x86_64.pl
+++ b/crypto/ec/asm/ecp_nistz256-x86_64.pl
@@ -4738,4 +4738,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/ec/asm/x25519-ppc64.pl b/crypto/ec/asm/x25519-ppc64.pl
index 9a48d2ad0e..f43059c89f 100755
--- a/crypto/ec/asm/x25519-ppc64.pl
+++ b/crypto/ec/asm/x25519-ppc64.pl
@@ -824,4 +824,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/ec/asm/x25519-x86_64.pl b/crypto/ec/asm/x25519-x86_64.pl
index 1a42728d90..8cd5645ec5 100755
--- a/crypto/ec/asm/x25519-x86_64.pl
+++ b/crypto/ec/asm/x25519-x86_64.pl
@@ -1130,4 +1130,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/md5/asm/md5-586.pl b/crypto/md5/asm/md5-586.pl
index b03bf11ed4..79e1b85612 100644
--- a/crypto/md5/asm/md5-586.pl
+++ b/crypto/md5/asm/md5-586.pl
@@ -45,7 +45,7 @@ $X=&quot;esi&quot;;
 &amp;md5_block(&quot;md5_block_asm_data_order&quot;);
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
 
 sub Np
 	{
diff --git a/crypto/md5/asm/md5-sparcv9.pl b/crypto/md5/asm/md5-sparcv9.pl
index 9cf039656f..ee9d1486ff 100644
--- a/crypto/md5/asm/md5-sparcv9.pl
+++ b/crypto/md5/asm/md5-sparcv9.pl
@@ -436,4 +436,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/md5/asm/md5-x86_64.pl b/crypto/md5/asm/md5-x86_64.pl
index 99cbbea774..8838372889 100755
--- a/crypto/md5/asm/md5-x86_64.pl
+++ b/crypto/md5/asm/md5-x86_64.pl
@@ -392,4 +392,4 @@ ___
 
 print $code;
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/modes/asm/aes-gcm-armv8_64.pl b/crypto/modes/asm/aes-gcm-armv8_64.pl
index 5078424eb1..328e54491a 100755
--- a/crypto/modes/asm/aes-gcm-armv8_64.pl
+++ b/crypto/modes/asm/aes-gcm-armv8_64.pl
@@ -5719,4 +5719,4 @@ if ($flavour =~ /64/) {         ######## 64-bit code
     }
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;; # enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;; # enforce flush
diff --git a/crypto/modes/asm/aesni-gcm-x86_64.pl b/crypto/modes/asm/aesni-gcm-x86_64.pl
index 70b1757f7a..a066fe09cc 100644
--- a/crypto/modes/asm/aesni-gcm-x86_64.pl
+++ b/crypto/modes/asm/aesni-gcm-x86_64.pl
@@ -1106,4 +1106,4 @@ $code =~ s/\`([^\`]*)\`/eval($1)/gem;
 
 print $code;
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/modes/asm/ghash-alpha.pl b/crypto/modes/asm/ghash-alpha.pl
index 8f56d277de..2def37d019 100644
--- a/crypto/modes/asm/ghash-alpha.pl
+++ b/crypto/modes/asm/ghash-alpha.pl
@@ -463,5 +463,5 @@ rem_4bit:
 ___
 $output=pop and open STDOUT,&quot;&gt;$output&quot;;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
 
diff --git a/crypto/modes/asm/ghash-armv4.pl b/crypto/modes/asm/ghash-armv4.pl
index 0b94340d3b..bc44449a63 100644
--- a/crypto/modes/asm/ghash-armv4.pl
+++ b/crypto/modes/asm/ghash-armv4.pl
@@ -551,4 +551,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;; # enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;; # enforce flush
diff --git a/crypto/modes/asm/ghash-c64xplus.pl b/crypto/modes/asm/ghash-c64xplus.pl
index fa9822b3c9..41efa4ba60 100644
--- a/crypto/modes/asm/ghash-c64xplus.pl
+++ b/crypto/modes/asm/ghash-c64xplus.pl
@@ -243,4 +243,4 @@ $code.=&lt;&lt;___;
 ___
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/modes/asm/ghash-ia64.pl b/crypto/modes/asm/ghash-ia64.pl
index 404207a92d..dcdbc83f0c 100755
--- a/crypto/modes/asm/ghash-ia64.pl
+++ b/crypto/modes/asm/ghash-ia64.pl
@@ -467,4 +467,4 @@ $code =~ s/mux1(\s+)\S+\@rev/nop.i$1 0x0/gm      if ($big_endian);
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/modes/asm/ghash-parisc.pl b/crypto/modes/asm/ghash-parisc.pl
index 8192831e8b..a1fb99f3fd 100644
--- a/crypto/modes/asm/ghash-parisc.pl
+++ b/crypto/modes/asm/ghash-parisc.pl
@@ -748,4 +748,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/modes/asm/ghash-s390x.pl b/crypto/modes/asm/ghash-s390x.pl
index b9a637628f..bd1c811b70 100644
--- a/crypto/modes/asm/ghash-s390x.pl
+++ b/crypto/modes/asm/ghash-s390x.pl
@@ -261,4 +261,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/modes/asm/ghash-sparcv9.pl b/crypto/modes/asm/ghash-sparcv9.pl
index ac61df6069..b8bfa815e7 100644
--- a/crypto/modes/asm/ghash-sparcv9.pl
+++ b/crypto/modes/asm/ghash-sparcv9.pl
@@ -577,4 +577,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/modes/asm/ghash-x86.pl b/crypto/modes/asm/ghash-x86.pl
index d3b0ed8684..cebcf29085 100644
--- a/crypto/modes/asm/ghash-x86.pl
+++ b/crypto/modes/asm/ghash-x86.pl
@@ -1377,7 +1377,7 @@ my ($Xhi,$Xi)=@_;
 &amp;asciz(&quot;GHASH for x86, CRYPTOGAMS by &lt;appro\@openssl.org&gt;&quot;);
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
 
 # A question was risen about choice of vanilla MMX. Or rather why wasn't
 # SSE2 chosen instead? In addition to the fact that MMX runs on legacy
diff --git a/crypto/modes/asm/ghash-x86_64.pl b/crypto/modes/asm/ghash-x86_64.pl
index 68fd85e99f..db8063df3e 100644
--- a/crypto/modes/asm/ghash-x86_64.pl
+++ b/crypto/modes/asm/ghash-x86_64.pl
@@ -1823,4 +1823,4 @@ $code =~ s/\`([^\`]*)\`/eval($1)/gem;
 
 print $code;
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/modes/asm/ghashp8-ppc.pl b/crypto/modes/asm/ghashp8-ppc.pl
index aa3af21af1..d6caefcc2c 100755
--- a/crypto/modes/asm/ghashp8-ppc.pl
+++ b/crypto/modes/asm/ghashp8-ppc.pl
@@ -671,4 +671,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;; # enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;; # enforce flush
diff --git a/crypto/modes/asm/ghashv8-armx.pl b/crypto/modes/asm/ghashv8-armx.pl
index 5618410a3d..8272f5076c 100644
--- a/crypto/modes/asm/ghashv8-armx.pl
+++ b/crypto/modes/asm/ghashv8-armx.pl
@@ -794,4 +794,4 @@ if ($flavour =~ /64/) {			######## 64-bit code
     }
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;; # enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;; # enforce flush
diff --git a/crypto/pariscid.pl b/crypto/pariscid.pl
index 8d21c30dbb..c8ee8bdb0a 100644
--- a/crypto/pariscid.pl
+++ b/crypto/pariscid.pl
@@ -275,5 +275,5 @@ foreach(split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
 
diff --git a/crypto/perlasm/arm-xlate.pl b/crypto/perlasm/arm-xlate.pl
index bee0523fef..b7ee99ee94 100755
--- a/crypto/perlasm/arm-xlate.pl
+++ b/crypto/perlasm/arm-xlate.pl
@@ -191,4 +191,4 @@ while(my $line=&lt;&gt;) {
     print &quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/perlasm/ppc-xlate.pl b/crypto/perlasm/ppc-xlate.pl
index 330510109c..571d59c2ea 100755
--- a/crypto/perlasm/ppc-xlate.pl
+++ b/crypto/perlasm/ppc-xlate.pl
@@ -343,4 +343,4 @@ while($line=&lt;&gt;) {
     print &quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/perlasm/x86_64-xlate.pl b/crypto/perlasm/x86_64-xlate.pl
index 7a282109ef..aff165c5fa 100755
--- a/crypto/perlasm/x86_64-xlate.pl
+++ b/crypto/perlasm/x86_64-xlate.pl
@@ -1244,7 +1244,7 @@ print &quot;$cet_property&quot;			if ($cet_property);
 print &quot;\n$current_segment\tENDS\n&quot;	if ($current_segment &amp;&amp; $masm);
 print &quot;END\n&quot;				if ($masm);
 
-close STDOUT;
+close STDOUT or die &quot;error closing STDOUT: $!;&quot;
 
 
#################################################
 # Cross-reference x86_64 ABI &quot;card&quot;
diff --git a/crypto/poly1305/asm/poly1305-armv4.pl b/crypto/poly1305/asm/poly1305-armv4.pl
index 2884cda771..aab5ce73b0 100755
--- a/crypto/poly1305/asm/poly1305-armv4.pl
+++ b/crypto/poly1305/asm/poly1305-armv4.pl
@@ -1252,4 +1252,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;; # enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;; # enforce flush
diff --git a/crypto/poly1305/asm/poly1305-armv8.pl b/crypto/poly1305/asm/poly1305-armv8.pl
index d547f4e723..887c6f92a4 100755
--- a/crypto/poly1305/asm/poly1305-armv8.pl
+++ b/crypto/poly1305/asm/poly1305-armv8.pl
@@ -940,4 +940,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/poly1305/asm/poly1305-mips.pl b/crypto/poly1305/asm/poly1305-mips.pl
index 92deb0b0f9..dc7eb64066 100755
--- a/crypto/poly1305/asm/poly1305-mips.pl
+++ b/crypto/poly1305/asm/poly1305-mips.pl
@@ -437,5 +437,5 @@ ___
 
 $output and open STDOUT,&quot;&gt;$output&quot;;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
 
diff --git a/crypto/poly1305/asm/poly1305-ppc.pl b/crypto/poly1305/asm/poly1305-ppc.pl
index 980dcd3301..915d0947fb 100755
--- a/crypto/poly1305/asm/poly1305-ppc.pl
+++ b/crypto/poly1305/asm/poly1305-ppc.pl
@@ -1978,4 +1978,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/poly1305/asm/poly1305-ppcfp.pl b/crypto/poly1305/asm/poly1305-ppcfp.pl
index 78e1bf8546..103425444b 100755
--- a/crypto/poly1305/asm/poly1305-ppcfp.pl
+++ b/crypto/poly1305/asm/poly1305-ppcfp.pl
@@ -740,4 +740,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/poly1305/asm/poly1305-sparcv9.pl b/crypto/poly1305/asm/poly1305-sparcv9.pl
index c80790423f..5275f99064 100755
--- a/crypto/poly1305/asm/poly1305-sparcv9.pl
+++ b/crypto/poly1305/asm/poly1305-sparcv9.pl
@@ -1116,4 +1116,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/poly1305/asm/poly1305-x86.pl b/crypto/poly1305/asm/poly1305-x86.pl
index b1c746617a..8df52e4b00 100755
--- a/crypto/poly1305/asm/poly1305-x86.pl
+++ b/crypto/poly1305/asm/poly1305-x86.pl
@@ -1811,4 +1811,4 @@ sub vlazy_reduction {
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/poly1305/asm/poly1305-x86_64.pl b/crypto/poly1305/asm/poly1305-x86_64.pl
index e5b841260e..b97398db66 100755
--- a/crypto/poly1305/asm/poly1305-x86_64.pl
+++ b/crypto/poly1305/asm/poly1305-x86_64.pl
@@ -4184,4 +4184,4 @@ foreach (split('\n',$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/ppccpuid.pl b/crypto/ppccpuid.pl
index ea705e3e92..3dbd6dab74 100755
--- a/crypto/ppccpuid.pl
+++ b/crypto/ppccpuid.pl
@@ -383,4 +383,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/rc4/asm/rc4-586.pl b/crypto/rc4/asm/rc4-586.pl
index 79068ffdce..126903f7ff 100644
--- a/crypto/rc4/asm/rc4-586.pl
+++ b/crypto/rc4/asm/rc4-586.pl
@@ -422,4 +422,4 @@ $idx=&quot;edx&quot;;
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/rc4/asm/rc4-c64xplus.pl b/crypto/rc4/asm/rc4-c64xplus.pl
index 2c998d5035..28ff088748 100644
--- a/crypto/rc4/asm/rc4-c64xplus.pl
+++ b/crypto/rc4/asm/rc4-c64xplus.pl
@@ -188,4 +188,4 @@ ___
 
 $output = pop and open STDOUT,&quot;&gt;$output&quot;;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/rc4/asm/rc4-md5-x86_64.pl b/crypto/rc4/asm/rc4-md5-x86_64.pl
index 853e6d6d17..a3f6550a13 100644
--- a/crypto/rc4/asm/rc4-md5-x86_64.pl
+++ b/crypto/rc4/asm/rc4-md5-x86_64.pl
@@ -662,4 +662,4 @@ $code =~ s/#rc4#//gm	if ($rc4);
 
 print $code;
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/rc4/asm/rc4-parisc.pl b/crypto/rc4/asm/rc4-parisc.pl
index 30a8bb505e..660295abf4 100644
--- a/crypto/rc4/asm/rc4-parisc.pl
+++ b/crypto/rc4/asm/rc4-parisc.pl
@@ -333,4 +333,4 @@ foreach(split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/rc4/asm/rc4-s390x.pl b/crypto/rc4/asm/rc4-s390x.pl
index f6d3401c93..c4e4cdea47 100644
--- a/crypto/rc4/asm/rc4-s390x.pl
+++ b/crypto/rc4/asm/rc4-s390x.pl
@@ -240,4 +240,4 @@ RC4_options:
 ___
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;	# force flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;	# force flush
diff --git a/crypto/rc4/asm/rc4-x86_64.pl b/crypto/rc4/asm/rc4-x86_64.pl
index 57d72a283a..adbc40a302 100755
--- a/crypto/rc4/asm/rc4-x86_64.pl
+++ b/crypto/rc4/asm/rc4-x86_64.pl
@@ -703,4 +703,4 @@ $code =~ s/\`([^\`]*)\`/eval $1/gem;
 
 print $code;
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/rc5/asm/rc5-586.pl b/crypto/rc5/asm/rc5-586.pl
index cf5536798c..3c8e383386 100644
--- a/crypto/rc5/asm/rc5-586.pl
+++ b/crypto/rc5/asm/rc5-586.pl
@@ -31,7 +31,7 @@ $tmp4=&quot;edx&quot;;
 &amp;cbc(&quot;RC5_32_cbc_encrypt&quot;,&quot;RC5_32_encrypt&quot;,&quot;RC5_32_decrypt&quot;,0,4,5,3,-1,-1);
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
 
 sub RC5_32_encrypt
 	{
diff --git a/crypto/ripemd/asm/rmd-586.pl b/crypto/ripemd/asm/rmd-586.pl
index 45f03eb36b..d4e64b8cd8 100644
--- a/crypto/ripemd/asm/rmd-586.pl
+++ b/crypto/ripemd/asm/rmd-586.pl
@@ -69,7 +69,7 @@ $KR3=0x7A6D76E9;
 &amp;ripemd160_block(&quot;ripemd160_block_asm_data_order&quot;);
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
 
 sub Xv
 	{
diff --git a/crypto/s390xcpuid.pl b/crypto/s390xcpuid.pl
index 713dae9bdb..f330eff163 100755
--- a/crypto/s390xcpuid.pl
+++ b/crypto/s390xcpuid.pl
@@ -558,4 +558,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;	# force flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;	# force flush
diff --git a/crypto/sha/asm/keccak1600-armv4.pl b/crypto/sha/asm/keccak1600-armv4.pl
index 8a1b1b6eb4..d5af6a8582 100755
--- a/crypto/sha/asm/keccak1600-armv4.pl
+++ b/crypto/sha/asm/keccak1600-armv4.pl
@@ -1633,4 +1633,4 @@ foreach (split($/,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;; # enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;; # enforce flush
diff --git a/crypto/sha/asm/keccak1600-armv8.pl b/crypto/sha/asm/keccak1600-armv8.pl
index c80d135529..188d7bde75 100755
--- a/crypto/sha/asm/keccak1600-armv8.pl
+++ b/crypto/sha/asm/keccak1600-armv8.pl
@@ -873,4 +873,4 @@ foreach(split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/keccak1600-avx2.pl b/crypto/sha/asm/keccak1600-avx2.pl
index 5e5e5db2c3..36f8c2be74 100755
--- a/crypto/sha/asm/keccak1600-avx2.pl
+++ b/crypto/sha/asm/keccak1600-avx2.pl
@@ -478,4 +478,4 @@ ___
 
 $output=pop and open STDOUT,&quot;&gt;$output&quot;;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/keccak1600-avx512.pl b/crypto/sha/asm/keccak1600-avx512.pl
index 52d3f2929e..d7ffc79310 100755
--- a/crypto/sha/asm/keccak1600-avx512.pl
+++ b/crypto/sha/asm/keccak1600-avx512.pl
@@ -547,4 +547,4 @@ ___
 
 $output=pop and open STDOUT,&quot;&gt;$output&quot;;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/keccak1600-avx512vl.pl b/crypto/sha/asm/keccak1600-avx512vl.pl
index d0254969e9..5930c0cd97 100755
--- a/crypto/sha/asm/keccak1600-avx512vl.pl
+++ b/crypto/sha/asm/keccak1600-avx512vl.pl
@@ -388,4 +388,4 @@ ___
 
 $output=pop and open STDOUT,&quot;&gt;$output&quot;;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/keccak1600-c64x.pl b/crypto/sha/asm/keccak1600-c64x.pl
index 9238dd5ebb..631117f117 100755
--- a/crypto/sha/asm/keccak1600-c64x.pl
+++ b/crypto/sha/asm/keccak1600-c64x.pl
@@ -881,4 +881,4 @@ ___
 
 $output=pop and open STDOUT,&quot;&gt;$output&quot;;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/keccak1600-mmx.pl b/crypto/sha/asm/keccak1600-mmx.pl
index e376adf102..ad607f4c3e 100755
--- a/crypto/sha/asm/keccak1600-mmx.pl
+++ b/crypto/sha/asm/keccak1600-mmx.pl
@@ -436,4 +436,4 @@ sub Rho() {				######### regular Rho step
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/keccak1600-ppc64.pl b/crypto/sha/asm/keccak1600-ppc64.pl
index fb73291c3a..77832d5dd2 100755
--- a/crypto/sha/asm/keccak1600-ppc64.pl
+++ b/crypto/sha/asm/keccak1600-ppc64.pl
@@ -759,4 +759,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/keccak1600-s390x.pl b/crypto/sha/asm/keccak1600-s390x.pl
index 5dc970ef55..8f75bb95cb 100755
--- a/crypto/sha/asm/keccak1600-s390x.pl
+++ b/crypto/sha/asm/keccak1600-s390x.pl
@@ -559,4 +559,4 @@ ___
 $code =~ s/(srlg\s+)(%r[0-9]+),/$1$2,$2,/gm;
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/keccak1600-x86_64.pl b/crypto/sha/asm/keccak1600-x86_64.pl
index 0cedea3507..f98bd768f7 100755
--- a/crypto/sha/asm/keccak1600-x86_64.pl
+++ b/crypto/sha/asm/keccak1600-x86_64.pl
@@ -608,4 +608,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_, &quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/keccak1600p8-ppc.pl b/crypto/sha/asm/keccak1600p8-ppc.pl
index c6285af7b8..61d606865d 100755
--- a/crypto/sha/asm/keccak1600p8-ppc.pl
+++ b/crypto/sha/asm/keccak1600p8-ppc.pl
@@ -851,4 +851,4 @@ foreach  (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha1-586.pl b/crypto/sha/asm/sha1-586.pl
index eed01f308a..d8828185c2 100644
--- a/crypto/sha/asm/sha1-586.pl
+++ b/crypto/sha/asm/sha1-586.pl
@@ -1487,4 +1487,4 @@ sub Xtail_avx()
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha1-alpha.pl b/crypto/sha/asm/sha1-alpha.pl
index b4f9388a3c..7de230e8f0 100644
--- a/crypto/sha/asm/sha1-alpha.pl
+++ b/crypto/sha/asm/sha1-alpha.pl
@@ -326,4 +326,4 @@ $code.=&lt;&lt;___;
 ___
 $output=pop and open STDOUT,&quot;&gt;$output&quot;;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha1-armv4-large.pl b/crypto/sha/asm/sha1-armv4-large.pl
index 8ed304799d..d82a38bb93 100644
--- a/crypto/sha/asm/sha1-armv4-large.pl
+++ b/crypto/sha/asm/sha1-armv4-large.pl
@@ -749,4 +749,4 @@ foreach (split($/,$code)) {
 	print $_,$/;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;; # enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;; # enforce flush
diff --git a/crypto/sha/asm/sha1-armv8.pl b/crypto/sha/asm/sha1-armv8.pl
index cb0e383396..e874481fbd 100644
--- a/crypto/sha/asm/sha1-armv8.pl
+++ b/crypto/sha/asm/sha1-armv8.pl
@@ -357,4 +357,4 @@ foreach(split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha1-c64xplus.pl b/crypto/sha/asm/sha1-c64xplus.pl
index 4a4772eaab..156aa22500 100644
--- a/crypto/sha/asm/sha1-c64xplus.pl
+++ b/crypto/sha/asm/sha1-c64xplus.pl
@@ -333,4 +333,4 @@ $code.=&lt;&lt;___;
 ___
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha1-mb-x86_64.pl b/crypto/sha/asm/sha1-mb-x86_64.pl
index 71aacc569a..0873bd96dc 100644
--- a/crypto/sha/asm/sha1-mb-x86_64.pl
+++ b/crypto/sha/asm/sha1-mb-x86_64.pl
@@ -1627,4 +1627,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha1-mips.pl b/crypto/sha/asm/sha1-mips.pl
index 4a510c6ace..a5af4a63e1 100644
--- a/crypto/sha/asm/sha1-mips.pl
+++ b/crypto/sha/asm/sha1-mips.pl
@@ -461,4 +461,4 @@ $code.=&lt;&lt;___;
 .asciiz	&quot;SHA1 for MIPS, CRYPTOGAMS by &lt;appro\@openssl.org&gt;&quot;
 ___
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha1-parisc.pl b/crypto/sha/asm/sha1-parisc.pl
index 4f64346306..c913be1bf3 100644
--- a/crypto/sha/asm/sha1-parisc.pl
+++ b/crypto/sha/asm/sha1-parisc.pl
@@ -279,4 +279,4 @@ foreach(split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha1-ppc.pl b/crypto/sha/asm/sha1-ppc.pl
index 0bc16c0ad7..498d30e40a 100755
--- a/crypto/sha/asm/sha1-ppc.pl
+++ b/crypto/sha/asm/sha1-ppc.pl
@@ -352,4 +352,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha1-s390x.pl b/crypto/sha/asm/sha1-s390x.pl
index 4de9f384c1..71e8a9bb2c 100644
--- a/crypto/sha/asm/sha1-s390x.pl
+++ b/crypto/sha/asm/sha1-s390x.pl
@@ -248,4 +248,4 @@ ___
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha1-sparcv9.pl b/crypto/sha/asm/sha1-sparcv9.pl
index 585996b13d..04ec84d3b0 100644
--- a/crypto/sha/asm/sha1-sparcv9.pl
+++ b/crypto/sha/asm/sha1-sparcv9.pl
@@ -430,4 +430,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha1-sparcv9a.pl b/crypto/sha/asm/sha1-sparcv9a.pl
index 9c24a48e3d..d9f05de53a 100644
--- a/crypto/sha/asm/sha1-sparcv9a.pl
+++ b/crypto/sha/asm/sha1-sparcv9a.pl
@@ -604,4 +604,4 @@ $code =~ s/\b(alignaddr)\s+(%[goli][0-7]),(%[goli][0-7]),(%[goli][0-7])/
 		&amp;unalignaddr($1,$2,$3,$4)
 	  /gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha1-thumb.pl b/crypto/sha/asm/sha1-thumb.pl
index b89bd978c3..01a772e702 100644
--- a/crypto/sha/asm/sha1-thumb.pl
+++ b/crypto/sha/asm/sha1-thumb.pl
@@ -262,4 +262,4 @@ $code.=&lt;&lt;___;
 ___
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;; # enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;; # enforce flush
diff --git a/crypto/sha/asm/sha1-x86_64.pl b/crypto/sha/asm/sha1-x86_64.pl
index 7ed39165ef..540368e6d3 100755
--- a/crypto/sha/asm/sha1-x86_64.pl
+++ b/crypto/sha/asm/sha1-x86_64.pl
@@ -2131,4 +2131,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha256-586.pl b/crypto/sha/asm/sha256-586.pl
index 962e1e9aae..f890dc1825 100644
--- a/crypto/sha/asm/sha256-586.pl
+++ b/crypto/sha/asm/sha256-586.pl
@@ -1292,4 +1292,4 @@ sub bodyx_00_15 () {			# +10%
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha256-armv4.pl b/crypto/sha/asm/sha256-armv4.pl
index f20840d2b9..1eb4f0d374 100644
--- a/crypto/sha/asm/sha256-armv4.pl
+++ b/crypto/sha/asm/sha256-armv4.pl
@@ -739,4 +739,4 @@ foreach (split($/,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;; # enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;; # enforce flush
diff --git a/crypto/sha/asm/sha256-c64xplus.pl b/crypto/sha/asm/sha256-c64xplus.pl
index 8dba0c84e0..cef9f6ea5b 100644
--- a/crypto/sha/asm/sha256-c64xplus.pl
+++ b/crypto/sha/asm/sha256-c64xplus.pl
@@ -316,4 +316,4 @@ K256:
 ___
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha256-mb-x86_64.pl b/crypto/sha/asm/sha256-mb-x86_64.pl
index 2f939781cc..7e9f486028 100644
--- a/crypto/sha/asm/sha256-mb-x86_64.pl
+++ b/crypto/sha/asm/sha256-mb-x86_64.pl
@@ -1613,4 +1613,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha512-586.pl b/crypto/sha/asm/sha512-586.pl
index 78cafda6a2..215defe3bc 100644
--- a/crypto/sha/asm/sha512-586.pl
+++ b/crypto/sha/asm/sha512-586.pl
@@ -921,4 +921,4 @@ sub BODY_00_15_ssse3 {		# &quot;phase-less&quot; copy of BODY_00_15_sse2
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha512-armv4.pl b/crypto/sha/asm/sha512-armv4.pl
index 7c6ac41b5b..fa8f2c8548 100644
--- a/crypto/sha/asm/sha512-armv4.pl
+++ b/crypto/sha/asm/sha512-armv4.pl
@@ -677,4 +677,4 @@ while(&lt;SELF&gt;) {
 close SELF;
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;; # enforce flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;; # enforce flush
diff --git a/crypto/sha/asm/sha512-armv8.pl b/crypto/sha/asm/sha512-armv8.pl
index 228b643c83..7ef518cd01 100644
--- a/crypto/sha/asm/sha512-armv8.pl
+++ b/crypto/sha/asm/sha512-armv8.pl
@@ -891,4 +891,4 @@ foreach(split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha512-c64xplus.pl b/crypto/sha/asm/sha512-c64xplus.pl
index 14b6bb5ab6..60ac946ada 100644
--- a/crypto/sha/asm/sha512-c64xplus.pl
+++ b/crypto/sha/asm/sha512-c64xplus.pl
@@ -434,4 +434,4 @@ K512:
 ___
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha512-mips.pl b/crypto/sha/asm/sha512-mips.pl
index 5f585eb91d..42c0fa046f 100644
--- a/crypto/sha/asm/sha512-mips.pl
+++ b/crypto/sha/asm/sha512-mips.pl
@@ -524,4 +524,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha512-parisc.pl b/crypto/sha/asm/sha512-parisc.pl
index 17a304cb80..9cc0e56daf 100755
--- a/crypto/sha/asm/sha512-parisc.pl
+++ b/crypto/sha/asm/sha512-parisc.pl
@@ -807,4 +807,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha512-ppc.pl b/crypto/sha/asm/sha512-ppc.pl
index f5c4138d0c..aaf56cfb80 100755
--- a/crypto/sha/asm/sha512-ppc.pl
+++ b/crypto/sha/asm/sha512-ppc.pl
@@ -799,4 +799,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha512-s390x.pl b/crypto/sha/asm/sha512-s390x.pl
index 78d710c30e..5c6786d85c 100644
--- a/crypto/sha/asm/sha512-s390x.pl
+++ b/crypto/sha/asm/sha512-s390x.pl
@@ -323,4 +323,4 @@ $code =~ s/\`([^\`]*)\`/eval $1/gem;
 $code =~ s/(srlg\s+)(%r[0-9]+),/$1$2,$2,/gm;
 
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha512-sparcv9.pl b/crypto/sha/asm/sha512-sparcv9.pl
index 11dd8d6117..7d81008fd2 100644
--- a/crypto/sha/asm/sha512-sparcv9.pl
+++ b/crypto/sha/asm/sha512-sparcv9.pl
@@ -856,4 +856,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 	print $_,&quot;\n&quot;;
 }
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha512-x86_64.pl b/crypto/sha/asm/sha512-x86_64.pl
index 7c7cb23cd7..f73ec5d3ed 100755
--- a/crypto/sha/asm/sha512-x86_64.pl
+++ b/crypto/sha/asm/sha512-x86_64.pl
@@ -2557,4 +2557,4 @@ foreach (split(&quot;\n&quot;,$code)) {
 
 	print $_,&quot;\n&quot;;
 }
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/sha/asm/sha512p8-ppc.pl b/crypto/sha/asm/sha512p8-ppc.pl
index ea3d308373..82610e2cd2 100755
--- a/crypto/sha/asm/sha512p8-ppc.pl
+++ b/crypto/sha/asm/sha512p8-ppc.pl
@@ -420,4 +420,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/whrlpool/asm/wp-mmx.pl b/crypto/whrlpool/asm/wp-mmx.pl
index 2780f96d08..851d3ce9a1 100644
--- a/crypto/whrlpool/asm/wp-mmx.pl
+++ b/crypto/whrlpool/asm/wp-mmx.pl
@@ -503,4 +503,4 @@ for($i=0;$i&lt;8;$i++) {
 &amp;function_end_B(&quot;whirlpool_block_mmx&quot;);
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/whrlpool/asm/wp-x86_64.pl b/crypto/whrlpool/asm/wp-x86_64.pl
index ee09234adb..546ffb2885 100644
--- a/crypto/whrlpool/asm/wp-x86_64.pl
+++ b/crypto/whrlpool/asm/wp-x86_64.pl
@@ -616,4 +616,4 @@ ___
 
 $code =~ s/\`([^\`]*)\`/eval $1/gem;
 print $code;
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
diff --git a/crypto/x86_64cpuid.pl b/crypto/x86_64cpuid.pl
index be9f33f5f8..32d18a23e8 100644
--- a/crypto/x86_64cpuid.pl
+++ b/crypto/x86_64cpuid.pl
@@ -519,4 +519,4 @@ ___
 gen_random(&quot;rdrand&quot;);
 gen_random(&quot;rdseed&quot;);
 
-close STDOUT or die &quot;error closing STDOUT&quot;;	# flush
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;	# flush
diff --git a/crypto/x86cpuid.pl b/crypto/x86cpuid.pl
index 4aaac9163d..484bbdd7ef 100644
--- a/crypto/x86cpuid.pl
+++ b/crypto/x86cpuid.pl
@@ -504,4 +504,4 @@ my $rdop = shift;
 
 &amp;asm_finish();
 
-close STDOUT or die &quot;error closing STDOUT&quot;;
+close STDOUT or die &quot;error closing STDOUT: $!&quot;;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027557.html">[openssl]  master update
</A></li>
	<LI>Next message: <A HREF="027563.html">[openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27558">[ date ]</a>
              <a href="thread.html#27558">[ thread ]</a>
              <a href="subject.html#27558">[ subject ]</a>
              <a href="author.html#27558">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
