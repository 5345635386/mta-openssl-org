<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl/openssl] f68283: test/evp_test.c: Check too big output buffer sizes...
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2022-June/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%20f68283%3A%20test/evp_test.c%3A%20Check%20too%20big%20output%0A%20buffer%20sizes...&In-Reply-To=%3Copenssl/openssl/push/refs/heads/master/46c1c2-0feb13%40github.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="036744.html">
   <LINK REL="Next"  HREF="036746.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl/openssl] f68283: test/evp_test.c: Check too big output buffer sizes...</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%20f68283%3A%20test/evp_test.c%3A%20Check%20too%20big%20output%0A%20buffer%20sizes...&In-Reply-To=%3Copenssl/openssl/push/refs/heads/master/46c1c2-0feb13%40github.openssl.org%3E"
       TITLE="[openssl/openssl] f68283: test/evp_test.c: Check too big output buffer sizes...">noreply at reply.github.openssl.org
       </A><BR>
    <I>Wed Jun 15 13:21:09 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="036744.html">[openssl/openssl] a0587a: test/evp_test.c: Check too big output buffer sizes...
</A></li>
        <LI>Next message (by thread): <A HREF="036746.html">[openssl/openssl] 01fc9b: Fix a crash in X509v3_asid_subset()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36745">[ date ]</a>
              <a href="thread.html#36745">[ thread ]</a>
              <a href="subject.html#36745">[ subject ]</a>
              <a href="author.html#36745">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  Branch: refs/heads/master
  Home:   <A HREF="https://github.openssl.org/openssl/openssl">https://github.openssl.org/openssl/openssl</A>
  Commit: f68283c18eaf015e7500e59a6adf3dbb3ee74f59
      <A HREF="https://github.openssl.org/openssl/openssl/commit/f68283c18eaf015e7500e59a6adf3dbb3ee74f59">https://github.openssl.org/openssl/openssl/commit/f68283c18eaf015e7500e59a6adf3dbb3ee74f59</A>
  Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
  Date:   2022-06-15 (Wed, 15 Jun 2022)

  Changed paths:
    M test/evp_test.c

  Log Message:
  -----------
  test/evp_test.c: Check too big output buffer sizes in PKEYKDF tests

EVP_PKEY_derive() should be able to cope with a too big buffer for fixed
size outputs.  However, we don't test that.

This change modifies the PKEYKDF tests to ask EVP_PKEY_derive() what the
desired output buffer size is, and as long as the returned value isn't
absurd (indicating that anything goes), the output buffer is made to be
twice as big as what is expected.

Tests #18517

Reviewed-by: Paul Dale &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">pauli at openssl.org</A>&gt;
Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/18533">https://github.com/openssl/openssl/pull/18533</A>)

(cherry picked from commit a0587aaeff7391b8cf4ee4c6a233d0f4dca7d62f)


  Commit: 0feb138fbeeec9ae09e63b212a0a6e345ed0dc30
      <A HREF="https://github.openssl.org/openssl/openssl/commit/0feb138fbeeec9ae09e63b212a0a6e345ed0dc30">https://github.openssl.org/openssl/openssl/commit/0feb138fbeeec9ae09e63b212a0a6e345ed0dc30</A>
  Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
  Date:   2022-06-15 (Wed, 15 Jun 2022)

  Changed paths:
    M providers/implementations/exchange/kdf_exch.c

  Log Message:
  -----------
  providers/implementations/exchange/kdf_exch.c: Fix kdf_derive()

kdf_derive() calls EVP_KDF_derive(), but didn't do enough to adapt its input
buffer length arguments to fit the requirements to call EVP_KDF_derive().

Fixes #18517

Reviewed-by: Paul Dale &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">pauli at openssl.org</A>&gt;
Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/18533">https://github.com/openssl/openssl/pull/18533</A>)

(cherry picked from commit e906eab8d863ac7bdadc671e8d0686fead88c4bf)


Compare: <A HREF="https://github.openssl.org/openssl/openssl/compare/46c1c2d7fa91...0feb138fbeee">https://github.openssl.org/openssl/openssl/compare/46c1c2d7fa91...0feb138fbeee</A>
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="036744.html">[openssl/openssl] a0587a: test/evp_test.c: Check too big output buffer sizes...
</A></li>
	<LI>Next message (by thread): <A HREF="036746.html">[openssl/openssl] 01fc9b: Fix a crash in X509v3_asid_subset()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#36745">[ date ]</a>
              <a href="thread.html#36745">[ thread ]</a>
              <a href="subject.html#36745">[ subject ]</a>
              <a href="author.html#36745">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
