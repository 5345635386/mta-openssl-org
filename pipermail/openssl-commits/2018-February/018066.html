<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2018-February/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1518546153.669538.19194.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018063.html">
   <LINK REL="Next"  HREF="018069.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  master update</H1>
    <B>Rich Salz</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1518546153.669538.19194.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  master update">rsalz at openssl.org
       </A><BR>
    <I>Tue Feb 13 18:22:33 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="018063.html">[openssl-commits] [openssl]  master update
</A></li>
        <LI>Next message: <A HREF="018069.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18066">[ date ]</a>
              <a href="thread.html#18066">[ thread ]</a>
              <a href="subject.html#18066">[ subject ]</a>
              <a href="author.html#18066">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  97d37b85d4e1a218fdc61dbe0dff3e7c8ff36121 (commit)
      from  d7c402c4f2d9c311a91616fd75c24a15afabe2e5 (commit)


- Log -----------------------------------------------------------------
commit 97d37b85d4e1a218fdc61dbe0dff3e7c8ff36121
Author: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;
Date:   Tue Feb 13 13:09:02 2018 -0500

    Generate copyright year properly
    
    Output copyright year depends on any input file(s) and the script.
    This is not perfect, but better than what we had.
    Also run 'make update'
    
    Reviewed-by: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/5350">https://github.com/openssl/openssl/pull/5350</A>)

-----------------------------------------------------------------------

Summary of changes:
 crypto/asn1/charmap.h     |  2 +-
 crypto/asn1/charmap.pl    |  4 +++-
 crypto/bn/bn_prime.h      |  2 +-
 crypto/bn/bn_prime.pl     |  4 +++-
 crypto/conf/conf_def.h    |  2 +-
 crypto/conf/keysets.pl    |  4 +++-
 crypto/objects/obj_dat.h  |  2 +-
 crypto/objects/obj_dat.pl |  8 ++++++--
 crypto/objects/obj_xref.h |  2 +-
 crypto/objects/objects.pl | 11 +++++++++--
 crypto/objects/objxref.pl |  9 ++++++++-
 fuzz/mkfuzzoids.pl        |  5 +++++
 include/openssl/obj_mac.h |  2 +-
 13 files changed, 43 insertions(+), 14 deletions(-)

diff --git a/crypto/asn1/charmap.h b/crypto/asn1/charmap.h
index 2a75925..bfccac2 100644
--- a/crypto/asn1/charmap.h
+++ b/crypto/asn1/charmap.h
@@ -2,7 +2,7 @@
  * WARNING: do not edit!
  * Generated by crypto/asn1/charmap.pl
  *
- * Copyright 2000-2016 The OpenSSL Project Authors. All Rights Reserved.
+ * Copyright 2000-2018 The OpenSSL Project Authors. All Rights Reserved.
  *
  * Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
  * this file except in compliance with the License.  You can obtain a copy
diff --git a/crypto/asn1/charmap.pl b/crypto/asn1/charmap.pl
index 26ca325..e12006a 100644
--- a/crypto/asn1/charmap.pl
+++ b/crypto/asn1/charmap.pl
@@ -82,12 +82,14 @@ $arr[ord(&quot;?&quot;)] |= $PSTRING_CHAR;
 
 # Now generate the C code
 
+# Output year depends on the year of the script.
+my $YEAR = [localtime([stat($0)]-&gt;[9])]-&gt;[5] + 1900;
 print &lt;&lt;EOF;
 /*
  * WARNING: do not edit!
  * Generated by crypto/asn1/charmap.pl
  *
- * Copyright 2000-2016 The OpenSSL Project Authors. All Rights Reserved.
+ * Copyright 2000-$YEAR The OpenSSL Project Authors. All Rights Reserved.
  *
  * Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
  * this file except in compliance with the License.  You can obtain a copy
diff --git a/crypto/bn/bn_prime.h b/crypto/bn/bn_prime.h
index 3bee718..a64c963 100644
--- a/crypto/bn/bn_prime.h
+++ b/crypto/bn/bn_prime.h
@@ -2,7 +2,7 @@
  * WARNING: do not edit!
  * Generated by crypto/bn/bn_prime.pl
  *
- * Copyright 1998-2016 The OpenSSL Project Authors. All Rights Reserved.
+ * Copyright 1998-2018 The OpenSSL Project Authors. All Rights Reserved.
  *
  * Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
  * this file except in compliance with the License.  You can obtain a copy
diff --git a/crypto/bn/bn_prime.pl b/crypto/bn/bn_prime.pl
index b1e4707..72a5e1f 100644
--- a/crypto/bn/bn_prime.pl
+++ b/crypto/bn/bn_prime.pl
@@ -6,12 +6,14 @@
 # in the file LICENSE in the source distribution or at
 # <A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>
 
+# Output year depends on the year of the script.
+my $YEAR = [localtime([stat($0)]-&gt;[9])]-&gt;[5] + 1900;
 print &lt;&lt;&quot;EOF&quot;;
 /*
  * WARNING: do not edit!
  * Generated by crypto/bn/bn_prime.pl
  *
- * Copyright 1998-2016 The OpenSSL Project Authors. All Rights Reserved.
+ * Copyright 1998-$YEAR The OpenSSL Project Authors. All Rights Reserved.
  *
  * Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
  * this file except in compliance with the License.  You can obtain a copy
diff --git a/crypto/conf/conf_def.h b/crypto/conf/conf_def.h
index da4767e..ad8894c 100644
--- a/crypto/conf/conf_def.h
+++ b/crypto/conf/conf_def.h
@@ -2,7 +2,7 @@
  * WARNING: do not edit!
  * Generated by crypto/conf/keysets.pl
  *
- * Copyright 1995-2016 The OpenSSL Project Authors. All Rights Reserved.
+ * Copyright 1995-2018 The OpenSSL Project Authors. All Rights Reserved.
  * Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
  * this file except in compliance with the License.  You can obtain a copy
  * in the file LICENSE in the source distribution or at
diff --git a/crypto/conf/keysets.pl b/crypto/conf/keysets.pl
index 5af08ae..a637fdc 100644
--- a/crypto/conf/keysets.pl
+++ b/crypto/conf/keysets.pl
@@ -57,12 +57,14 @@ foreach (0 .. 255)
 	push(@V_w32,$v);
 	}
 
+# Output year depends on the year of the script.
+my $YEAR = [localtime([stat($0)]-&gt;[9])]-&gt;[5] + 1900;
 print &lt;&lt;&quot;EOF&quot;;
 /*
  * WARNING: do not edit!
  * Generated by crypto/conf/keysets.pl
  *
- * Copyright 1995-2016 The OpenSSL Project Authors. All Rights Reserved.
+ * Copyright 1995-$YEAR The OpenSSL Project Authors. All Rights Reserved.
  * Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
  * this file except in compliance with the License.  You can obtain a copy
  * in the file LICENSE in the source distribution or at
diff --git a/crypto/objects/obj_dat.h b/crypto/objects/obj_dat.h
index 7724453..61b12bf 100644
--- a/crypto/objects/obj_dat.h
+++ b/crypto/objects/obj_dat.h
@@ -2,7 +2,7 @@
  * WARNING: do not edit!
  * Generated by crypto/objects/obj_dat.pl
  *
- * Copyright 1995-2017 The OpenSSL Project Authors. All Rights Reserved.
+ * Copyright 1995-2018 The OpenSSL Project Authors. All Rights Reserved.
  * Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
  * this file except in compliance with the License.  You can obtain a copy
  * in the file LICENSE in the source distribution or at
diff --git a/crypto/objects/obj_dat.pl b/crypto/objects/obj_dat.pl
index 947ccee..19137b1 100644
--- a/crypto/objects/obj_dat.pl
+++ b/crypto/objects/obj_dat.pl
@@ -36,6 +36,10 @@ sub der_it
     return $ret;
 }
 
+# Output year depends on the year of the script and the input file.
+my $YEAR = [localtime([stat($0)]-&gt;[9])]-&gt;[5] + 1900;
+my $iYEAR = [localtime([stat($ARGV[0])]-&gt;[9])]-&gt;[5] + 1900;
+$YEAR = $iYEAR if $iYEAR &gt; $YEAR;
 
 # Read input, parse all #define's into OID name and value.
 # Populate %ln and %sn with long and short names (%dupln and %dupsn)
@@ -149,12 +153,12 @@ for (my $i = 0; $i &lt; $n; $i++) {
 
 # Finally ready to generate the output.
 open(OUT, &quot;&gt;$ARGV[1]&quot;) || die &quot;Can't open output file $ARGV[1], $!&quot;;
-print OUT &lt;&lt;'EOF';
+print OUT &lt;&lt;&quot;EOF&quot;;
 /*
  * WARNING: do not edit!
  * Generated by crypto/objects/obj_dat.pl
  *
- * Copyright 1995-2017 The OpenSSL Project Authors. All Rights Reserved.
+ * Copyright 1995-$YEAR The OpenSSL Project Authors. All Rights Reserved.
  * Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
  * this file except in compliance with the License.  You can obtain a copy
  * in the file LICENSE in the source distribution or at
diff --git a/crypto/objects/obj_xref.h b/crypto/objects/obj_xref.h
index fe5c006..ebd5bf5 100644
--- a/crypto/objects/obj_xref.h
+++ b/crypto/objects/obj_xref.h
@@ -2,7 +2,7 @@
  * WARNING: do not edit!
  * Generated by objxref.pl
  *
- * Copyright 1998-2016 The OpenSSL Project Authors. All Rights Reserved.
+ * Copyright 1998-2018 The OpenSSL Project Authors. All Rights Reserved.
  *
  * Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
  * this file except in compliance with the License.  You can obtain a copy
diff --git a/crypto/objects/objects.pl b/crypto/objects/objects.pl
index 6598b5e..b9e8890 100644
--- a/crypto/objects/objects.pl
+++ b/crypto/objects/objects.pl
@@ -6,6 +6,13 @@
 # in the file LICENSE in the source distribution or at
 # <A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>
 
+# Output year depends on the year of the script and the input files.
+my $YEAR = [localtime([stat($0)]-&gt;[9])]-&gt;[5] + 1900;
+my $iYEAR = [localtime([stat($ARGV[0])]-&gt;[9])]-&gt;[5] + 1900;
+$YEAR = $iYEAR if $iYEAR &gt; $YEAR;
+$iYEAR = [localtime([stat($ARGV[1])]-&gt;[9])]-&gt;[5] + 1900;
+$YEAR = $iYEAR if $iYEAR &gt; $YEAR;
+
 open (NUMIN,&quot;$ARGV[1]&quot;) || die &quot;Can't open number file $ARGV[1]&quot;;
 $max_nid=0;
 $o=0;
@@ -124,12 +131,12 @@ foreach (sort { $a &lt;=&gt; $b } keys %nidn)
 close NUMOUT;
 
 open (OUT,&quot;&gt;$ARGV[2]&quot;) || die &quot;Can't open output file $ARGV[2]&quot;;
-print OUT &lt;&lt;'EOF';
+print OUT &lt;&lt;&quot;EOF&quot;;
 /*
  * WARNING: do not edit!
  * Generated by crypto/objects/objects.pl
  *
- * Copyright 2000-2017 The OpenSSL Project Authors. All Rights Reserved.
+ * Copyright 2000-$YEAR The OpenSSL Project Authors. All Rights Reserved.
  * Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
  * this file except in compliance with the License.  You can obtain a copy
  * in the file LICENSE in the source distribution or at
diff --git a/crypto/objects/objxref.pl b/crypto/objects/objxref.pl
index 53f9bd6..6a33130 100644
--- a/crypto/objects/objxref.pl
+++ b/crypto/objects/objxref.pl
@@ -14,6 +14,13 @@ my %oid_tbl;
 
 my ($mac_file, $xref_file) = @ARGV;
 
+# Output year depends on the year of the script and the input file.
+my $YEAR = [localtime([stat($0)]-&gt;[9])]-&gt;[5] + 1900;
+my $iYEAR = [localtime([stat($mac_file)]-&gt;[9])]-&gt;[5] + 1900;
+$YEAR = $iYEAR if $iYEAR &gt; $YEAR;
+$iYEAR = [localtime([stat($xref_file)]-&gt;[9])]-&gt;[5] + 1900;
+$YEAR = $iYEAR if $iYEAR &gt; $YEAR;
+
 open(IN, $mac_file) || die &quot;Can't open $mac_file, $!\n&quot;;
 
 # Read in OID nid values for a lookup table.
@@ -71,7 +78,7 @@ print &lt;&lt;EOF;
  * WARNING: do not edit!
  * Generated by $pname
  *
- * Copyright 1998-2016 The OpenSSL Project Authors. All Rights Reserved.
+ * Copyright 1998-$YEAR The OpenSSL Project Authors. All Rights Reserved.
  *
  * Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
  * this file except in compliance with the License.  You can obtain a copy
diff --git a/fuzz/mkfuzzoids.pl b/fuzz/mkfuzzoids.pl
index 4bf97bc..9ad96b3 100755
--- a/fuzz/mkfuzzoids.pl
+++ b/fuzz/mkfuzzoids.pl
@@ -8,6 +8,11 @@
 
 my $obj_dat_h = $ARGV[0];
 
+# Output year depends on the date on the input file and the script.
+my $YEAR = [localtime([stat($0)]-&gt;[9])]-&gt;[5] + 1900;
+my $iYEAR = [localtime([stat($obj_dat_h)]-&gt;[9])]-&gt;[5] + 1900;
+$YEAR = $iYEAR if $iYEAR &gt; $YEAR;
+
 open IN, '&lt;', $obj_dat_h
     || die &quot;Couldn't open $obj_dat_h : $!\n&quot;;
 
diff --git a/include/openssl/obj_mac.h b/include/openssl/obj_mac.h
index b98c918..4014a49 100644
--- a/include/openssl/obj_mac.h
+++ b/include/openssl/obj_mac.h
@@ -2,7 +2,7 @@
  * WARNING: do not edit!
  * Generated by crypto/objects/objects.pl
  *
- * Copyright 2000-2017 The OpenSSL Project Authors. All Rights Reserved.
+ * Copyright 2000-2018 The OpenSSL Project Authors. All Rights Reserved.
  * Licensed under the OpenSSL license (the &quot;License&quot;).  You may not use
  * this file except in compliance with the License.  You can obtain a copy
  * in the file LICENSE in the source distribution or at
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018063.html">[openssl-commits] [openssl]  master update
</A></li>
	<LI>Next message: <A HREF="018069.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18066">[ date ]</a>
              <a href="thread.html#18066">[ thread ]</a>
              <a href="subject.html#18066">[ subject ]</a>
              <a href="author.html#18066">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
