<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2017-February/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1486724376.418103.29357.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012729.html">
   <LINK REL="Next"  HREF="012735.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  master update</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1486724376.418103.29357.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  master update">levitte at openssl.org
       </A><BR>
    <I>Fri Feb 10 10:59:36 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="012729.html">[openssl-commits] [openssl]  master update
</A></li>
        <LI>Next message: <A HREF="012735.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12734">[ date ]</a>
              <a href="thread.html#12734">[ thread ]</a>
              <a href="subject.html#12734">[ subject ]</a>
              <a href="author.html#12734">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  222c3da35cc508446df150a16080943019ba6f54 (commit)
       via  c8bff7ad501c38f1ce9bfe9392fcb22a709e0f6f (commit)
       via  0d4de7563cdced60122059e9085ab8d7f66b9de4 (commit)
       via  8ac2d1abb3691491bae2be1e8085171b0b5774d5 (commit)
      from  bd5d27c1c6d3f83464ddf5124f18a2cac2cbb37f (commit)


- Log -----------------------------------------------------------------
commit 222c3da35cc508446df150a16080943019ba6f54
Author: Cristian Stoica &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">cristian.stoica at nxp.com</A>&gt;
Date:   Tue Aug 2 11:41:30 2016 +0300

    speed.c: simplify aggregation of ecdh --multi results
    
    CLA: trivial
    
    Signed-off-by: Cristian Stoica &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">cristian.stoica at nxp.com</A>&gt;
    
    Reviewed-by: Geoff Thorpe &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">geoff at openssl.org</A>&gt;
    Reviewed-by: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/1377">https://github.com/openssl/openssl/pull/1377</A>)

commit c8bff7ad501c38f1ce9bfe9392fcb22a709e0f6f
Author: Cristian Stoica &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">cristian.stoica at nxp.com</A>&gt;
Date:   Tue Aug 2 11:38:45 2016 +0300

    speed.c: simplify aggregation of ecdsa --multi results
    
    CLA: trivial
    
    Signed-off-by: Cristian Stoica &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">cristian.stoica at nxp.com</A>&gt;
    
    Reviewed-by: Geoff Thorpe &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">geoff at openssl.org</A>&gt;
    Reviewed-by: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/1377">https://github.com/openssl/openssl/pull/1377</A>)

commit 0d4de7563cdced60122059e9085ab8d7f66b9de4
Author: Cristian Stoica &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">cristian.stoica at nxp.com</A>&gt;
Date:   Tue Aug 2 11:22:27 2016 +0300

    speed.c: simplify aggregation of dsa --multi results
    
    CLA: trivial
    
    Signed-off-by: Cristian Stoica &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">cristian.stoica at nxp.com</A>&gt;
    
    Reviewed-by: Geoff Thorpe &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">geoff at openssl.org</A>&gt;
    Reviewed-by: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/1377">https://github.com/openssl/openssl/pull/1377</A>)

commit 8ac2d1abb3691491bae2be1e8085171b0b5774d5
Author: Cristian Stoica &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">cristian.stoica at nxp.com</A>&gt;
Date:   Tue Aug 2 11:13:00 2016 +0300

    speed.c: simplify aggregation of rsa --multi results
    
    CLA: trivial
    
    Signed-off-by: Cristian Stoica &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">cristian.stoica at nxp.com</A>&gt;
    
    Reviewed-by: Geoff Thorpe &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">geoff at openssl.org</A>&gt;
    Reviewed-by: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/1377">https://github.com/openssl/openssl/pull/1377</A>)

-----------------------------------------------------------------------

Summary of changes:
 apps/speed.c | 64 ++++++++++++++++++++----------------------------------------
 1 file changed, 21 insertions(+), 43 deletions(-)

diff --git a/apps/speed.c b/apps/speed.c
index 8f2950e..c10a8ee 100644
--- a/apps/speed.c
+++ b/apps/speed.c
@@ -2360,7 +2360,7 @@ int speed_main(int argc, char **argv)
                        mr ? &quot;+R1:%ld:%d:%.2f\n&quot;
                        : &quot;%ld %d bit private RSA's in %.2fs\n&quot;,
                        count, rsa_bits[testnum], d);
-            rsa_results[testnum][0] = d / (double)count;
+            rsa_results[testnum][0] = (double)count / d;
             rsa_count = count;
         }
 
@@ -2386,7 +2386,7 @@ int speed_main(int argc, char **argv)
                        mr ? &quot;+R2:%ld:%d:%.2f\n&quot;
                        : &quot;%ld %d bit public RSA's in %.2fs\n&quot;,
                        count, rsa_bits[testnum], d);
-            rsa_results[testnum][1] = d / (double)count;
+            rsa_results[testnum][1] = (double)count / d;
         }
 
         if (rsa_count &lt;= 1) {
@@ -2433,7 +2433,7 @@ int speed_main(int argc, char **argv)
                        mr ? &quot;+R3:%ld:%d:%.2f\n&quot;
                        : &quot;%ld %d bit DSA signs in %.2fs\n&quot;,
                        count, dsa_bits[testnum], d);
-            dsa_results[testnum][0] = d / (double)count;
+            dsa_results[testnum][0] = (double)count / d;
             rsa_count = count;
         }
 
@@ -2459,7 +2459,7 @@ int speed_main(int argc, char **argv)
                        mr ? &quot;+R4:%ld:%d:%.2f\n&quot;
                        : &quot;%ld %d bit DSA verify in %.2fs\n&quot;,
                        count, dsa_bits[testnum], d);
-            dsa_results[testnum][1] = d / (double)count;
+            dsa_results[testnum][1] = (double)count / d;
         }
 
         if (rsa_count &lt;= 1) {
@@ -2519,7 +2519,7 @@ int speed_main(int argc, char **argv)
                            mr ? &quot;+R5:%ld:%d:%.2f\n&quot; :
                            &quot;%ld %d bit ECDSA signs in %.2fs \n&quot;,
                            count, test_curves_bits[testnum], d);
-                ecdsa_results[testnum][0] = d / (double)count;
+                ecdsa_results[testnum][0] = (double)count / d;
                 rsa_count = count;
             }
 
@@ -2547,7 +2547,7 @@ int speed_main(int argc, char **argv)
                            mr ? &quot;+R6:%ld:%d:%.2f\n&quot;
                            : &quot;%ld %d bit ECDSA verify in %.2fs\n&quot;,
                            count, test_curves_bits[testnum], d);
-                ecdsa_results[testnum][1] = d / (double)count;
+                ecdsa_results[testnum][1] = (double)count / d;
             }
 
             if (rsa_count &lt;= 1) {
@@ -2709,7 +2709,7 @@ int speed_main(int argc, char **argv)
                        mr ? &quot;+R7:%ld:%d:%.2f\n&quot; :
                        &quot;%ld %d-bit ECDH ops in %.2fs\n&quot;, count,
                        test_curves_bits[testnum], d);
-            ecdh_results[testnum][0] = d / (double)count;
+            ecdh_results[testnum][0] = (double)count / d;
             rsa_count = count;
         }
 
@@ -2789,8 +2789,8 @@ int speed_main(int argc, char **argv)
                    k, rsa_bits[k], rsa_results[k][0], rsa_results[k][1]);
         else
             printf(&quot;rsa %4u bits %8.6fs %8.6fs %8.1f %8.1f\n&quot;,
-                   rsa_bits[k], rsa_results[k][0], rsa_results[k][1],
-                   1.0 / rsa_results[k][0], 1.0 / rsa_results[k][1]);
+                   rsa_bits[k], 1.0 / rsa_results[k][0], 1.0 / rsa_results[k][1],
+                   rsa_results[k][0], rsa_results[k][1]);
     }
 #endif
 #ifndef OPENSSL_NO_DSA
@@ -2807,8 +2807,8 @@ int speed_main(int argc, char **argv)
                    k, dsa_bits[k], dsa_results[k][0], dsa_results[k][1]);
         else
             printf(&quot;dsa %4u bits %8.6fs %8.6fs %8.1f %8.1f\n&quot;,
-                   dsa_bits[k], dsa_results[k][0], dsa_results[k][1],
-                   1.0 / dsa_results[k][0], 1.0 / dsa_results[k][1]);
+                   dsa_bits[k], 1.0 / dsa_results[k][0], 1.0 / dsa_results[k][1],
+                   dsa_results[k][0], dsa_results[k][1]);
     }
 #endif
 #ifndef OPENSSL_NO_EC
@@ -2829,8 +2829,8 @@ int speed_main(int argc, char **argv)
             printf(&quot;%4u bit ecdsa (%s) %8.4fs %8.4fs %8.1f %8.1f\n&quot;,
                    test_curves_bits[k],
                    test_curves_names[k],
-                   ecdsa_results[k][0], ecdsa_results[k][1],
-                   1.0 / ecdsa_results[k][0], 1.0 / ecdsa_results[k][1]);
+                   1.0 / ecdsa_results[k][0], 1.0 / ecdsa_results[k][1],
+                   ecdsa_results[k][0], ecdsa_results[k][1]);
     }
 
     testnum = 1;
@@ -2850,7 +2850,7 @@ int speed_main(int argc, char **argv)
             printf(&quot;%4u bit ecdh (%s) %8.4fs %8.1f\n&quot;,
                    test_curves_bits[k],
                    test_curves_names[k],
-                   ecdh_results[k][0], 1.0 / ecdh_results[k][0]);
+                   1.0 / ecdh_results[k][0], ecdh_results[k][0]);
     }
 #endif
 
@@ -3037,16 +3037,10 @@ static int do_multi(int multi)
                 sstrsep(&amp;p, sep);
 
                 d = atof(sstrsep(&amp;p, sep));
-                if (n)
-                    rsa_results[k][0] = 1 / (1 / rsa_results[k][0] + 1 / d);
-                else
-                    rsa_results[k][0] = d;
+                rsa_results[k][0] += d;
 
                 d = atof(sstrsep(&amp;p, sep));
-                if (n)
-                    rsa_results[k][1] = 1 / (1 / rsa_results[k][1] + 1 / d);
-                else
-                    rsa_results[k][1] = d;
+                rsa_results[k][1] += d;
             }
 # ifndef OPENSSL_NO_DSA
             else if (strncmp(buf, &quot;+F3:&quot;, 4) == 0) {
@@ -3058,16 +3052,10 @@ static int do_multi(int multi)
                 sstrsep(&amp;p, sep);
 
                 d = atof(sstrsep(&amp;p, sep));
-                if (n)
-                    dsa_results[k][0] = 1 / (1 / dsa_results[k][0] + 1 / d);
-                else
-                    dsa_results[k][0] = d;
+                dsa_results[k][0] += d;
 
                 d = atof(sstrsep(&amp;p, sep));
-                if (n)
-                    dsa_results[k][1] = 1 / (1 / dsa_results[k][1] + 1 / d);
-                else
-                    dsa_results[k][1] = d;
+                dsa_results[k][1] += d;
             }
 # endif
 # ifndef OPENSSL_NO_EC
@@ -3080,16 +3068,10 @@ static int do_multi(int multi)
                 sstrsep(&amp;p, sep);
 
                 d = atof(sstrsep(&amp;p, sep));
-                if (n)
-                    ecdsa_results[k][0] = 1 / (1 / ecdsa_results[k][0] + 1 / d);
-                else
-                    ecdsa_results[k][0] = d;
+                ecdsa_results[k][0] += d;
 
                 d = atof(sstrsep(&amp;p, sep));
-                if (n)
-                    ecdsa_results[k][1] = 1 / (1 / ecdsa_results[k][1] + 1 / d);
-                else
-                    ecdsa_results[k][1] = d;
+                ecdsa_results[k][1] += d;
             } else if (strncmp(buf, &quot;+F5:&quot;, 4) == 0) {
                 int k;
                 double d;
@@ -3099,11 +3081,7 @@ static int do_multi(int multi)
                 sstrsep(&amp;p, sep);
 
                 d = atof(sstrsep(&amp;p, sep));
-                if (n)
-                    ecdh_results[k][0] = 1 / (1 / ecdh_results[k][0] + 1 / d);
-                else
-                    ecdh_results[k][0] = d;
-
+                ecdh_results[k][0] += d;
             }
 # endif
 
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012729.html">[openssl-commits] [openssl]  master update
</A></li>
	<LI>Next message: <A HREF="012735.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12734">[ date ]</a>
              <a href="thread.html#12734">[ thread ]</a>
              <a href="subject.html#12734">[ subject ]</a>
              <a href="author.html#12734">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
