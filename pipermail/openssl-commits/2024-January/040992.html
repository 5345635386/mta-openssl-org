<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl/openssl] 971028: Fix performance regression of ChaCha20 on LoongArch64
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2024-January/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%20971028%3A%20Fix%20performance%20regression%20of%20ChaCha20%20on%0A%20LoongArch64&In-Reply-To=%3Copenssl/openssl/push/refs/heads/master/2f8573-971028%40github.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="040990.html">
   <LINK REL="Next"  HREF="040993.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl/openssl] 971028: Fix performance regression of ChaCha20 on LoongArch64</H1>
    <B>lrzlin</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl/openssl%5D%20971028%3A%20Fix%20performance%20regression%20of%20ChaCha20%20on%0A%20LoongArch64&In-Reply-To=%3Copenssl/openssl/push/refs/heads/master/2f8573-971028%40github.com%3E"
       TITLE="[openssl/openssl] 971028: Fix performance regression of ChaCha20 on LoongArch64">noreply at github.com
       </A><BR>
    <I>Wed Jan 17 08:43:47 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="040990.html">[openssl/openssl] 91e8a3: hurd: Fix dgram_sendmmsg
</A></li>
        <LI>Next message (by thread): <A HREF="040993.html">[openssl/openssl] 96dd7b: Fix performance regression of ChaCha20 on LoongArch64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40992">[ date ]</a>
              <a href="thread.html#40992">[ thread ]</a>
              <a href="subject.html#40992">[ subject ]</a>
              <a href="author.html#40992">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  Branch: refs/heads/master
  Home:   <A HREF="https://github.com/openssl/openssl">https://github.com/openssl/openssl</A>
  Commit: 971028535e6531c89449e06b1f6862c18f04ff91
      <A HREF="https://github.com/openssl/openssl/commit/971028535e6531c89449e06b1f6862c18f04ff91">https://github.com/openssl/openssl/commit/971028535e6531c89449e06b1f6862c18f04ff91</A>
  Author: Lin Runze &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">lrzlin at 163.com</A>&gt;
  Date:   2024-01-17 (Wed, 17 Jan 2024)

  Changed paths:
    M crypto/chacha/asm/chacha-loongarch64.pl

  Log Message:
  -----------
  Fix performance regression of ChaCha20 on LoongArch64

The regression was introduced in PR #22817.

In that pull request, the input length check was moved forward,
but the related ori instruction was missing, and it will cause
input of any length down to the much slower scalar implementation.

Fixes #23300

CLA: trivial

Reviewed-by: Shane Lontis &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">shane.lontis at oracle.com</A>&gt;
Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
(Merged from <A HREF="https://github.com/openssl/openssl/pull/23301">https://github.com/openssl/openssl/pull/23301</A>)


</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="040990.html">[openssl/openssl] 91e8a3: hurd: Fix dgram_sendmmsg
</A></li>
	<LI>Next message (by thread): <A HREF="040993.html">[openssl/openssl] 96dd7b: Fix performance regression of ChaCha20 on LoongArch64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#40992">[ date ]</a>
              <a href="thread.html#40992">[ thread ]</a>
              <a href="subject.html#40992">[ subject ]</a>
              <a href="author.html#40992">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
