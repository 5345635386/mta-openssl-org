<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl] OpenSSL source code branch	OpenSSL_1_0_1-stable updated. OpenSSL_1_0_1j-91-gc14a808
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2014-December/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20OpenSSL%20source%20code%20branch%0A%09OpenSSL_1_0_1-stable%20updated.%20OpenSSL_1_0_1j-91-gc14a808&In-Reply-To=%3C20141230160415.057731DF10B%40openssl.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000118.html">
   <LINK REL="Next"  HREF="000120.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl] OpenSSL source code branch	OpenSSL_1_0_1-stable updated. OpenSSL_1_0_1j-91-gc14a808</H1>
    <B>Kurt Roeckx</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20OpenSSL%20source%20code%20branch%0A%09OpenSSL_1_0_1-stable%20updated.%20OpenSSL_1_0_1j-91-gc14a808&In-Reply-To=%3C20141230160415.057731DF10B%40openssl.net%3E"
       TITLE="[openssl-commits] [openssl] OpenSSL source code branch	OpenSSL_1_0_1-stable updated. OpenSSL_1_0_1j-91-gc14a808">kurt at openssl.org
       </A><BR>
    <I>Tue Dec 30 16:04:13 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000118.html">[openssl-commits] [openssl] OpenSSL source code branch	OpenSSL_1_0_2-stable updated. OpenSSL_1_0_2-beta3-130-g73bda31
</A></li>
        <LI>Next message: <A HREF="000120.html">[openssl-commits] [openssl] OpenSSL source code branch master	updated. 1d97c8435171a7af575f73c526d79e1ef0ee5960
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#119">[ date ]</a>
              <a href="thread.html#119">[ thread ]</a>
              <a href="subject.html#119">[ subject ]</a>
              <a href="author.html#119">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;OpenSSL source code&quot;.

The branch, OpenSSL_1_0_1-stable has been updated
       via  c14a808c516eea83cf949c5da7fd9e7c77f379c4 (commit)
       via  cdf42d7b4354c198d263ba6476daad3c110d2693 (commit)
       via  7858d304bcfaf4e3af8fd0aec8fc3fe2a8227171 (commit)
       via  f14a6bf5151602d93866059af0f972710446a55c (commit)
      from  5dad57536f943964e082f243430e0a945bcabbad (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit c14a808c516eea83cf949c5da7fd9e7c77f379c4
Author: Kurt Roeckx &lt;<A HREF="https://mta.opensslfoundation.net/mailman/listinfo/openssl-commits">kurt at roeckx.be</A>&gt;
Date:   Tue Dec 16 12:35:21 2014 +0100

    Make &quot;run&quot; volatile
    
    RT#3629
    
    Reviewed-by: Richard Levitte &lt;<A HREF="https://mta.opensslfoundation.net/mailman/listinfo/openssl-commits">levitte at openssl.org</A>&gt;

commit cdf42d7b4354c198d263ba6476daad3c110d2693
Author: Thorsten Glaser &lt;<A HREF="https://mta.opensslfoundation.net/mailman/listinfo/openssl-commits">tg at mirbsd.de</A>&gt;
Date:   Fri May 22 16:28:05 2009 +0000

    Document openssl dgst -hmac option
    
    Signed-off-by: Kurt Roeckx &lt;<A HREF="https://mta.opensslfoundation.net/mailman/listinfo/openssl-commits">kurt at roeckx.be</A>&gt;
    Reviewed-by: Richard Levitte &lt;<A HREF="https://mta.opensslfoundation.net/mailman/listinfo/openssl-commits">levitte at openssl.org</A>&gt;

commit 7858d304bcfaf4e3af8fd0aec8fc3fe2a8227171
Author: Kurt Roeckx &lt;<A HREF="https://mta.opensslfoundation.net/mailman/listinfo/openssl-commits">kurt at roeckx.be</A>&gt;
Date:   Mon Dec 23 19:06:34 2013 +0100

    dlfcn: always define _GNU_SOURCE
    
    We need this for the freebsd kernel with glibc as used in the Debian kfreebsd
    ports.  There shouldn't be a problem defining this on systems not using glibc.
    
    Reviewed-by: Richard Levitte &lt;<A HREF="https://mta.opensslfoundation.net/mailman/listinfo/openssl-commits">levitte at openssl.org</A>&gt;

commit f14a6bf5151602d93866059af0f972710446a55c
Author: Kurt Roeckx &lt;<A HREF="https://mta.opensslfoundation.net/mailman/listinfo/openssl-commits">kurt at roeckx.be</A>&gt;
Date:   Sun Dec 7 22:25:39 2014 +0100

    Fix memory leak in the apps
    
    The BIO_free() allocated ex_data again that we already freed.
    
    Reviewed-by: Richard Levitte &lt;<A HREF="https://mta.opensslfoundation.net/mailman/listinfo/openssl-commits">levitte at openssl.org</A>&gt;

-----------------------------------------------------------------------

Summary of changes:
 apps/dgst.c            |    2 ++
 apps/openssl.c         |    5 +++--
 apps/speed.c           |    2 +-
 crypto/dso/dso_dlfcn.c |    6 ++----
 doc/apps/dgst.pod      |   11 +++++++++++
 5 files changed, 19 insertions(+), 7 deletions(-)

diff --git a/apps/dgst.c b/apps/dgst.c
index f4aec77..e31a6b1 100644
--- a/apps/dgst.c
+++ b/apps/dgst.c
@@ -273,6 +273,8 @@ int MAIN(int argc, char **argv)
 		BIO_printf(bio_err,&quot;-d              to output debug info\n&quot;);
 		BIO_printf(bio_err,&quot;-hex            output as hex dump\n&quot;);
 		BIO_printf(bio_err,&quot;-binary         output in binary form\n&quot;);
+		BIO_printf(bio_err,&quot;-hmac arg       set the HMAC key to arg\n&quot;);
+		BIO_printf(bio_err,&quot;-non-fips-allow allow use of non FIPS digest\n&quot;);
 		BIO_printf(bio_err,&quot;-sign   file    sign digest using private key in file\n&quot;);
 		BIO_printf(bio_err,&quot;-verify file    verify a signature using public key in file\n&quot;);
 		BIO_printf(bio_err,&quot;-prverify file  verify a signature using private key in file\n&quot;);
diff --git a/apps/openssl.c b/apps/openssl.c
index 71e1e48..5372459 100644
--- a/apps/openssl.c
+++ b/apps/openssl.c
@@ -435,9 +435,7 @@ end:
 	if (prog != NULL) lh_FUNCTION_free(prog);
 	if (arg.data != NULL) OPENSSL_free(arg.data);
 
-	apps_shutdown();
 
-	CRYPTO_mem_leaks(bio_err);
 	if (bio_err != NULL)
 		{
 		BIO_free(bio_err);
@@ -450,6 +448,9 @@ end:
 		OPENSSL_free(Argv);
 		}
 #endif
+	apps_shutdown();
+	CRYPTO_mem_leaks(bio_err);
+
 	OPENSSL_EXIT(ret);
 	}
 
diff --git a/apps/speed.c b/apps/speed.c
index 691b4b6..24d4122 100644
--- a/apps/speed.c
+++ b/apps/speed.c
@@ -225,7 +225,7 @@
 
 #undef BUFSIZE
 #define BUFSIZE	((long)1024*8+1)
-int run=0;
+static volatile int run=0;
 
 static int mr=0;
 static int usertime=1;
diff --git a/crypto/dso/dso_dlfcn.c b/crypto/dso/dso_dlfcn.c
index 4a56aac..faa9d76 100644
--- a/crypto/dso/dso_dlfcn.c
+++ b/crypto/dso/dso_dlfcn.c
@@ -60,10 +60,8 @@
    that handle _GNU_SOURCE and other similar macros.  Defining it later
    is simply too late, because those headers are protected from re-
    inclusion.  */
-#ifdef __linux
-# ifndef _GNU_SOURCE
-#  define _GNU_SOURCE	/* make sure dladdr is declared */
-# endif
+#ifndef _GNU_SOURCE
+# define _GNU_SOURCE	/* make sure dladdr is declared */
 #endif
 
 #include &lt;stdio.h&gt;
diff --git a/doc/apps/dgst.pod b/doc/apps/dgst.pod
index 2414c53..9e15798 100644
--- a/doc/apps/dgst.pod
+++ b/doc/apps/dgst.pod
@@ -13,6 +13,8 @@ B&lt;openssl&gt; B&lt;dgst&gt;
 [B&lt;-hex&gt;]
 [B&lt;-binary&gt;]
 [B&lt;-r&gt;]
+[B&lt;-hmac arg&gt;]
+[B&lt;-non-fips-allow&gt;]
 [B&lt;-out filename&gt;]
 [B&lt;-sign filename&gt;]
 [B&lt;-keyform arg&gt;]
@@ -62,6 +64,15 @@ output the digest or signature in binary form.
 
 output the digest in the &quot;coreutils&quot; format used by programs like B&lt;sha1sum&gt;.
 
+=item B&lt;-hmac arg&gt;
+
+set the HMAC key to &quot;arg&quot;.
+
+=item B&lt;-non-fips-allow&gt;
+
+Allow use of non FIPS digest when in FIPS mode.  This has no effect when not in
+FIPS mode.
+
 =item B&lt;-out filename&gt;
 
 filename to output to, or standard output by default.


hooks/post-receive
-- 
OpenSSL source code
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000118.html">[openssl-commits] [openssl] OpenSSL source code branch	OpenSSL_1_0_2-stable updated. OpenSSL_1_0_2-beta3-130-g73bda31
</A></li>
	<LI>Next message: <A HREF="000120.html">[openssl-commits] [openssl] OpenSSL source code branch master	updated. 1d97c8435171a7af575f73c526d79e1ef0ee5960
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#119">[ date ]</a>
              <a href="thread.html#119">[ thread ]</a>
              <a href="subject.html#119">[ subject ]</a>
              <a href="author.html#119">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://mta.opensslfoundation.net/mailman/listinfo/openssl-commits">More information about the openssl-commits
mailing list</a><br>
</body></html>
