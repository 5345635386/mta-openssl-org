<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2016-February/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1455310453.646367.11503.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003996.html">
   <LINK REL="Next"  HREF="003998.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  master update</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1455310453.646367.11503.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  master update">levitte at openssl.org
       </A><BR>
    <I>Fri Feb 12 20:54:13 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="003996.html">[openssl-commits] [openssl]  master update
</A></li>
        <LI>Next message: <A HREF="003998.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3997">[ date ]</a>
              <a href="thread.html#3997">[ thread ]</a>
              <a href="subject.html#3997">[ subject ]</a>
              <a href="author.html#3997">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  3c65577f1af1109beb8de06420efa09188981628 (commit)
      from  c619e81011209ec7c52763a07479081fc15076f1 (commit)


- Log -----------------------------------------------------------------
commit 3c65577f1af1109beb8de06420efa09188981628
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Fri Feb 12 21:14:03 2016 +0100

    Rename INSTALL_PREFIX to DESTDIR, remove option --install_prefix
    
    INSTALL_PREFIX is a confusing name, as there's also --prefix.
    Instead, tag along with the rest of the open source world and adopt
    the Makefile variable DESTDIR to designate the desired staging
    directory.
    
    The Configure option --install_prefix is removed, the only way to
    designate a staging directory is with the Makefile variable (this is
    also implemented for VMS' descrip.mms et al).
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;

-----------------------------------------------------------------------

Summary of changes:
 CHANGES                           |   6 ++
 Configurations/descrip.mms.tmpl   |  24 +++--
 Configurations/unix-Makefile.tmpl | 198 +++++++++++++++++++-------------------
 Configure                         |   9 --
 INSTALL                           |   5 +-
 Makefile.in                       | 142 +++++++++++++--------------
 apps/Makefile.in                  |  28 +++---
 crypto/async/Makefile.in          |   4 +-
 crypto/srp/Makefile.in            |   2 +-
 crypto/ts/Makefile.in             |   2 +-
 engines/Makefile.in               |  10 +-
 openssl.spec                      |   2 +-
 tools/Makefile.in                 |  20 ++--
 util/cygwin.sh                    |  20 ++--
 14 files changed, 233 insertions(+), 239 deletions(-)

diff --git a/CHANGES b/CHANGES
index 29a00bc..cf7d272 100644
--- a/CHANGES
+++ b/CHANGES
@@ -4,6 +4,12 @@
 
  Changes between 1.0.2f and 1.1.0  [xx XXX xxxx]
 
+  *) The INSTALL_PREFIX Makefile variable has been renamed to
+     DESTDIR.  That makes for less confusion on what this variable
+     is for.  Also, the configuration option --install_prefix is
+     removed.
+     [Richard Levitte]
+
   *) Heartbeat for TLS has been removed and is disabled by default
      for DTLS; configure with enable-heartbeats.  Code that uses the
      old #define's might need to be updated.
diff --git a/Configurations/descrip.mms.tmpl b/Configurations/descrip.mms.tmpl
index 0d5c7ba..4732782 100644
--- a/Configurations/descrip.mms.tmpl
+++ b/Configurations/descrip.mms.tmpl
@@ -106,15 +106,13 @@ PROGRAMS={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_.&quot;.EXE&quot; } grep { !m|^\[\.test\]| } @{$uni
 TESTPROGS={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_.&quot;.EXE&quot; } grep { m|^\[\.test\]| } @{$unified_info{programs}}) -}
 SCRIPTS={- join(&quot;, &quot;, map { &quot;-\n\t&quot;.$_ } @{$unified_info{scripts}}) -}
 
-# INSTALL_PREFIX is for package builders so that they can configure for, say,
+# DESTDIR is for package builders so that they can configure for, say,
 # SYS$COMMON:[OPENSSL] and yet have everything installed in STAGING:[USER].
 # In that case, configure with --prefix=SYS$COMMON:[OPENSSL] and then run
-# MMS with /MACROS=(INSTALL_PREFIX=STAGING:[USER]).  The result will end
-# up in STAGING:[USER.OPENSSL].
-# Note that INSTALL_PREFIX can also be given at configuration time, with
-# --install_prefix.
+# MMS with /MACROS=(DESTDIR=STAGING:[USER]).  The result will end up in
+# STAGING:[USER.OPENSSL].
 # Normally it is left empty.
-INSTALL_PREFIX={- $config{install_prefix} -}
+DESTDIR=
 
 # Do not edit this manually. Use Configure --prefix=DIR to change this!
 INSTALLTOP={- catdir($config{prefix}) || &quot;SYS\$COMMON:[OPENSSL-\$(MAJOR).\$(MINOR)]&quot; -}
@@ -160,7 +158,7 @@ NODEBUG=@
         $(NODEBUG) internal_inc3 = F$PARSE(&quot;{- catdir($config{sourcedir},&quot;[.crypto.include.internal]&quot;) -}&quot;,&quot;A.;&quot;,,,&quot;SYNTAX_ONLY&quot;) - &quot;A.;&quot;
         $(NODEBUG) DEFINE openssl 'openssl_inc1','openssl_inc2'
         $(NODEBUG) DEFINE internal 'internal_inc1','internal_inc2','internal_inc3'
-        $(NODEBUG) staging_dir = &quot;$(INSTALL_PREFIX)&quot;
+        $(NODEBUG) staging_dir = &quot;$(DESTDIR)&quot;
         $(NODEBUG) IF staging_dir .NES. &quot;&quot; THEN -
                 staging_dir = F$PARSE(&quot;A.;&quot;,staging_dir,&quot;[]&quot;,,&quot;SYNTAX_ONLY&quot;) - &quot;A.;&quot;
         $(NODEBUG) !
@@ -179,7 +177,7 @@ NODEBUG=@
         $(NODEBUG) !
         $(NODEBUG) datatop = F$PARSE(&quot;$(OPENSSLDIR)&quot;,&quot;[000000]A.;&quot;,,,&quot;SYNTAX_ONLY&quot;) -
                 - &quot;]A.;&quot; + &quot;.]&quot;
-        $(NODEBUG) IF &quot;$(INSTALL_PREFIX)&quot; .EQS. &quot;&quot; THEN -
+        $(NODEBUG) IF &quot;$(DESTDIR)&quot; .EQS. &quot;&quot; THEN -
                 DEFINE ossl_dataroot 'datatop'
         $(NODEBUG) !
         $(NODEBUG) ! Figure out the architecture
@@ -193,7 +191,7 @@ NODEBUG=@
 
 .LAST :
         $(NODEBUG) {- join(&quot;\n\t\$(NODEBUG) &quot;, map { &quot;DEASSIGN &quot;.uc($_) } map { $unified_info{sharednames}-&gt;{$_} || () } @{$unified_info{libraries}}) || &quot;!&quot; -}
-        $(NODEBUG) IF &quot;$(INSTALL_PREFIX)&quot; .EQS. &quot;&quot; THEN DEASSIGN ossl_dataroot
+        $(NODEBUG) IF &quot;$(DESTDIR)&quot; .EQS. &quot;&quot; THEN DEASSIGN ossl_dataroot
         $(NODEBUG) DEASSIGN ossl_installroot
         $(NODEBUG) DEASSIGN internal
         $(NODEBUG) DEASSIGN openssl
@@ -266,7 +264,7 @@ install_sw : all install_dev install_engines install_runtime install_config
         @ WRITE SYS$OUTPUT &quot;&quot;
         @ WRITE SYS$OUTPUT &quot;Installation complete&quot;
         @ WRITE SYS$OUTPUT &quot;&quot;
-        @ IF &quot;$(INSTALL_PREFIX)&quot; .NES. &quot;&quot; THEN EXIT 1
+        @ IF &quot;$(DESTDIR)&quot; .NES. &quot;&quot; THEN EXIT 1
         @ WRITE SYS$OUTPUT &quot;Run @$(INSTALLTOP)openssl_startup to set up logical names&quot;
         @ WRITE SYS$OUTPUT &quot;then run @$(INSTALLTOP)openssl_setup to define commands&quot;
         @ WRITE SYS$OUTPUT &quot;&quot;
@@ -316,10 +314,10 @@ install_engines : check_INSTALLTOP
 
 install_config : [.VMS]openssl_startup.com [.VMS]openssl_shutdown.com -
                  check_INSTALLTOP
-        IF &quot;$(INSTALL_PREFIX)&quot; .EQS. &quot;&quot; THEN -
+        IF &quot;$(DESTDIR)&quot; .EQS. &quot;&quot; THEN -
                 IF F$SEARCH(&quot;OSSL_DATAROOT:[000000]CERTS.DIR;1&quot;) .EQS. &quot;&quot; THEN -
                 CREATE/DIR/PROT=(S:RWED,O:RWE,G:RE,W:RE) OSSL_DATAROOT:[CERTS]
-        IF &quot;$(INSTALL_PREFIX)&quot; .EQS. &quot;&quot; THEN -
+        IF &quot;$(DESTDIR)&quot; .EQS. &quot;&quot; THEN -
                 IF F$SEARCH(&quot;OSSL_DATAROOT:[000000]PRIVATE.DIR;1&quot;) .EQS. &quot;&quot; THEN -
                 CREATE/DIR/PROT=(S:RWED,O:RWE,G:,W:) OSSL_DATAROOT:[PRIVATE]
         CREATE/DIR ossl_installroot:[SYS$STARTUP]
@@ -388,7 +386,7 @@ copy-certs :
 
 debug_logicals :
         SH LOGICAL/PROC openssl,internal,ossl_installroot
-        IF &quot;$(INSTALL_PREFIX)&quot; .EQS. &quot;&quot; THEN -
+        IF &quot;$(DESTDIR)&quot; .EQS. &quot;&quot; THEN -
                 SH LOGICAL/PROC ossl_dataroot
 
 # Building targets ###################################################
diff --git a/Configurations/unix-Makefile.tmpl b/Configurations/unix-Makefile.tmpl
index c94a3a1..e013f15 100644
--- a/Configurations/unix-Makefile.tmpl
+++ b/Configurations/unix-Makefile.tmpl
@@ -42,10 +42,10 @@ MISC_SCRIPTS=$(SRCDIR)/tools/c_hash $(SRCDIR)/tools/c_info \
 	     $(SRCDIR)/tools/c_issuer $(SRCDIR)/tools/c_name \
 	     $(BLDDIR)/apps/CA.pl $(SRCDIR)/apps/tsget
 
-# INSTALL_PREFIX is for package builders so that they can configure
-# for, say, /usr/ and yet have everything installed to /tmp/somedir/usr/.
+# DESTDIR is for package builders so that they can configure for, say,
+# /usr/ and yet have everything installed to /tmp/somedir/usr/.
 # Normally it is left empty.
-INSTALL_PREFIX={- $config{install_prefix} -}
+DESTDIR=
 
 # Do not edit these manually. Use Configure with --prefix or --openssldir
 # to change this!  Short explanation in the top comment in Configure
@@ -198,184 +198,184 @@ uninstall_docs: uninstall_man_docs uninstall_html_docs
 install_dev:
 	@[ -n &quot;$(INSTALLTOP)&quot; ] || (echo INSTALLTOP should not be empty; exit 1)
 	@echo &quot;*** Installing development files&quot;
-	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(INSTALL_PREFIX)$(INSTALLTOP)/include/openssl
+	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(INSTALLTOP)/include/openssl
 	@set -e; for i in $(SRCDIR)/include/openssl/*.h \
 			  $(BLDDIR)/include/openssl/*.h; do \
 		fn=`basename $$i`; \
-		echo &quot;install $$i -&gt; $(INSTALL_PREFIX)$(INSTALLTOP)/include/openssl/$$fn&quot;; \
-		cp $$i $(INSTALL_PREFIX)$(INSTALLTOP)/include/openssl/$$fn; \
-		chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/include/openssl/$$fn; \
+		echo &quot;install $$i -&gt; $(DESTDIR)$(INSTALLTOP)/include/openssl/$$fn&quot;; \
+		cp $$i $(DESTDIR)$(INSTALLTOP)/include/openssl/$$fn; \
+		chmod 644 $(DESTDIR)$(INSTALLTOP)/include/openssl/$$fn; \
 	done
-	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)
+	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)
 	@set -e; for l in $(LIBS); do \
 		fn=`basename $$l`; \
-		echo &quot;install $$l -&gt; $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn&quot;; \
-		cp $$l $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn.new; \
-		$(RANLIB) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn.new; \
-		chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn.new; \
-		mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn.new \
-		      $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn; \
+		echo &quot;install $$l -&gt; $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn&quot;; \
+		cp $$l $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.new; \
+		$(RANLIB) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.new; \
+		chmod 644 $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.new; \
+		mv -f $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.new \
+		      $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn; \
 	done
 	@ : {- output_off() if $config{no_shared}; &quot;&quot; -}
 	@set -e; for s in $(SHLIBS); do \
 		fn=`basename $$s`; \
-		echo &quot;install $$s -&gt; $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn&quot;; \
-		cp $$s $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn.new; \
-		chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn.new; \
-		mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn.new \
-		      $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn; \
+		echo &quot;install $$s -&gt; $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn&quot;; \
+		cp $$s $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.new; \
+		chmod 644 $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.new; \
+		mv -f $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.new \
+		      $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn; \
 		if [ &quot;$(SHLIB_EXT)&quot; != &quot;$(SHLIB_EXT_SIMPLE)&quot; ]; then \
-			echo &quot;link $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn2 -&gt; $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn&quot;; \
+			echo &quot;link $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn2 -&gt; $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn&quot;; \
 			fn2=`basename $$fn $(SHLIB_EXT)`$(SHLIB_EXT_SIMPLE); \
-			ln -sf $$fn $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn2; \
+			ln -sf $$fn $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn2; \
 		fi; \
 		: {- output_off() unless windowsdll(); &quot;&quot; -}; \
-		echo &quot;install $$s.a -&gt; $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn.a&quot;; \
-		cp $$s.a $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn.a.new; \
-		chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn.a.new; \
-		mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn.a.new \
-		      $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn.a; \
+		echo &quot;install $$s.a -&gt; $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.a&quot;; \
+		cp $$s.a $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.a.new; \
+		chmod 644 $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.a.new; \
+		mv -f $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.a.new \
+		      $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.a; \
 		: {- output_on() -}; \
 	done
 	@ : {- output_on() -}
-	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig
-	@echo &quot;install libcrypto.pc -&gt; $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libcrypto.pc&quot;
-	@cp libcrypto.pc $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig
-	@chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libcrypto.pc
-	@echo &quot;install libssl.pc -&gt; $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libssl.pc&quot;
-	@cp libssl.pc $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig
-	@chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libssl.pc
-	@echo &quot;install openssl.pc -&gt; $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/openssl.pc&quot;
-	@cp openssl.pc $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig
-	@chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/openssl.pc
+	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig
+	@echo &quot;install libcrypto.pc -&gt; $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libcrypto.pc&quot;
+	@cp libcrypto.pc $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig
+	@chmod 644 $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libcrypto.pc
+	@echo &quot;install libssl.pc -&gt; $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libssl.pc&quot;
+	@cp libssl.pc $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig
+	@chmod 644 $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libssl.pc
+	@echo &quot;install openssl.pc -&gt; $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/openssl.pc&quot;
+	@cp openssl.pc $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig
+	@chmod 644 $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/openssl.pc
 
 uninstall_dev:
 	@echo &quot;*** Uninstalling development files&quot;
 	@set -e; for i in $(SRCDIR)/include/openssl/*.h \
 			  $(BLDDIR)/include/openssl/*.h; do \
 		fn=`basename $$i`; \
-		echo &quot;$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/include/openssl/$$fn&quot;; \
-		$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/include/openssl/$$fn; \
+		echo &quot;$(RM) $(DESTDIR)$(INSTALLTOP)/include/openssl/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(INSTALLTOP)/include/openssl/$$fn; \
 	done
 	@set -e; for l in $(LIBS); do \
 		fn=`basename $$l`; \
-		echo &quot;$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn&quot;; \
-		$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn; \
+		echo &quot;$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn; \
 	done
 	@set -e; for s in $(SHLIBS); do \
 		fn=`basename $$s`; \
 		if [ &quot;$(SHLIB_EXT)&quot; != &quot;$(SHLIB_EXT_SIMPLE)&quot; ]; then \
 			fn2=`basename $$fn $(SHLIB_EXT)`$(SHLIB_EXT_SIMPLE); \
-			echo &quot;$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn2&quot;; \
-			$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn2; \
+			echo &quot;$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn2&quot;; \
+			$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn2; \
 		fi; \
-		echo &quot;$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn&quot;; \
-		$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn; \
+		echo &quot;$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn; \
 		: {- output_off() unless windowsdll(); &quot;&quot; -}; \
-		echo &quot;$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn.a&quot;; \
-		$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$fn.a; \
+		echo &quot;$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.a&quot;; \
+		$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$fn.a; \
 		: {- output_on() -}; \
 	done
-	@echo &quot;$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libcrypto.pc&quot;
-	@$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libcrypto.pc
-	@echo &quot;$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libssl.pc&quot;
-	@$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libssl.pc
-	@echo &quot;$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/openssl.pc&quot;
-	@$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/openssl.pc
+	@echo &quot;$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libcrypto.pc&quot;
+	@$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libcrypto.pc
+	@echo &quot;$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libssl.pc&quot;
+	@$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libssl.pc
+	@echo &quot;$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/openssl.pc&quot;
+	@$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/openssl.pc
 
 install_engines:
 	@[ -n &quot;$(INSTALLTOP)&quot; ] || (echo INSTALLTOP should not be empty; exit 1)
-	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/engines/
+	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/engines/
 	@echo &quot;*** Installing engines&quot;
 	@set -e; for e in $(ENGINES); do \
 		fn=`basename $$e`; \
-		echo &quot;install $$e -&gt; $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn&quot;; \
-		cp $$e $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/engines/$$fn.new; \
-		chmod 755 $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/engines/$$fn.new; \
-		mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/engines/$$fn.new \
-		      $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/engines/$$fn; \
+		echo &quot;install $$e -&gt; $(DESTDIR)$(INSTALLTOP)/bin/$$fn&quot;; \
+		cp $$e $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/engines/$$fn.new; \
+		chmod 755 $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/engines/$$fn.new; \
+		mv -f $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/engines/$$fn.new \
+		      $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/engines/$$fn; \
 	done
 
 uninstall_engines:
 	@echo &quot;*** Uninstalling engines&quot;
 	@set -e; for e in $(ENGINES); do \
 		fn=`basename $$e`; \
-		echo &quot;$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn&quot;; \
-		$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/engines/$$fn; \
+		echo &quot;$(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/engines/$$fn; \
 	done
 
 install_runtime:
 	@[ -n &quot;$(INSTALLTOP)&quot; ] || (echo INSTALLTOP should not be empty; exit 1)
-	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(INSTALL_PREFIX)$(INSTALLTOP)/bin
-	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(INSTALL_PREFIX)$(OPENSSLDIR)/misc
+	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(INSTALLTOP)/bin
+	@$(PERL) $(SRCDIR)/util/mkdir-p.pl $(DESTDIR)$(OPENSSLDIR)/misc
 	@echo &quot;*** Installing runtime files&quot;
 	: {- output_off() unless windowsdll(); &quot;&quot; -};
 	@set -e; for s in $(SHLIBS); do \
 		fn=`basename $$i`; \
-		echo &quot;install $$s -&gt; $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn&quot;; \
-		cp $$s $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn.new; \
-		chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn.new; \
-		mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn.new \
-		      $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn; \
+		echo &quot;install $$s -&gt; $(DESTDIR)$(INSTALLTOP)/bin/$$fn&quot;; \
+		cp $$s $(DESTDIR)$(INSTALLTOP)/bin/$$fn.new; \
+		chmod 644 $(DESTDIR)$(INSTALLTOP)/bin/$$fn.new; \
+		mv -f $(DESTDIR)$(INSTALLTOP)/bin/$$fn.new \
+		      $(DESTDIR)$(INSTALLTOP)/bin/$$fn; \
 	done
 	: {- output_on() -};
 	@set -e; for x in $(PROGRAMS); do \
 		fn=`basename $$x`; \
-		echo &quot;install $$x -&gt; $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn&quot;; \
-		cp $$x $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn.new; \
-		chmod 755 $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn.new; \
-		mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn.new \
-		      $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn; \
+		echo &quot;install $$x -&gt; $(DESTDIR)$(INSTALLTOP)/bin/$$fn&quot;; \
+		cp $$x $(DESTDIR)$(INSTALLTOP)/bin/$$fn.new; \
+		chmod 755 $(DESTDIR)$(INSTALLTOP)/bin/$$fn.new; \
+		mv -f $(DESTDIR)$(INSTALLTOP)/bin/$$fn.new \
+		      $(DESTDIR)$(INSTALLTOP)/bin/$$fn; \
 	done
 	@set -e; for x in $(BIN_SCRIPTS); do \
 		fn=`basename $$x`; \
-		echo &quot;install $$x -&gt; $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn&quot;; \
-		cp $$x $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn.new; \
-		chmod 755 $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn.new; \
-		mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn.new \
-		      $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn; \
+		echo &quot;install $$x -&gt; $(DESTDIR)$(INSTALLTOP)/bin/$$fn&quot;; \
+		cp $$x $(DESTDIR)$(INSTALLTOP)/bin/$$fn.new; \
+		chmod 755 $(DESTDIR)$(INSTALLTOP)/bin/$$fn.new; \
+		mv -f $(DESTDIR)$(INSTALLTOP)/bin/$$fn.new \
+		      $(DESTDIR)$(INSTALLTOP)/bin/$$fn; \
 	done
 	@set -e; for x in $(MISC_SCRIPTS); do \
 		fn=`basename $$x`; \
-		echo &quot;install $$x -&gt; $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$fn&quot;; \
-		cp $$x $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$fn.new; \
-		chmod 755 $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$fn.new; \
-		mv -f $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$fn.new \
-		      $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$fn; \
+		echo &quot;install $$x -&gt; $(DESTDIR)$(OPENSSLDIR)/misc/$$fn&quot;; \
+		cp $$x $(DESTDIR)$(OPENSSLDIR)/misc/$$fn.new; \
+		chmod 755 $(DESTDIR)$(OPENSSLDIR)/misc/$$fn.new; \
+		mv -f $(DESTDIR)$(OPENSSLDIR)/misc/$$fn.new \
+		      $(DESTDIR)$(OPENSSLDIR)/misc/$$fn; \
 	done
-	@echo &quot;install $(SRCDIR)/apps/openssl.cnf -&gt; $(INSTALL_PREFIX)$(OPENSSLDIR)/openssl.cnf&quot;
-	@cp $(SRCDIR)/apps/openssl.cnf $(INSTALL_PREFIX)$(OPENSSLDIR)/openssl.cnf.new
-	@chmod 644 $(INSTALL_PREFIX)$(OPENSSLDIR)/openssl.cnf.new
-	@mv -f  $(INSTALL_PREFIX)$(OPENSSLDIR)/openssl.cnf.new $(INSTALL_PREFIX)$(OPENSSLDIR)/openssl.cnf
+	@echo &quot;install $(SRCDIR)/apps/openssl.cnf -&gt; $(DESTDIR)$(OPENSSLDIR)/openssl.cnf&quot;
+	@cp $(SRCDIR)/apps/openssl.cnf $(DESTDIR)$(OPENSSLDIR)/openssl.cnf.new
+	@chmod 644 $(DESTDIR)$(OPENSSLDIR)/openssl.cnf.new
+	@mv -f  $(DESTDIR)$(OPENSSLDIR)/openssl.cnf.new $(DESTDIR)$(OPENSSLDIR)/openssl.cnf
 
 uninstall_runtime:
 	@echo &quot;*** Uninstalling runtime files&quot;
 	@set -e; for x in $(PROGRAMS); \
 	do  \
 		fn=`basename $$x`; \
-		echo &quot;$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn&quot;; \
-		$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn; \
+		echo &quot;$(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$fn; \
 	done;
 	@set -e; for x in $(BIN_SCRIPTS); \
 	do  \
 		fn=`basename $$x`; \
-		echo &quot;$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn&quot;; \
-		$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn; \
+		echo &quot;$(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$fn; \
 	done
 	@set -e; for x in $(MISC_SCRIPTS); \
 	do  \
 		fn=`basename $$x`; \
-		echo &quot;$(RM) $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$fn&quot;; \
-		$(RM) $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$fn; \
+		echo &quot;$(RM) $(DESTDIR)$(OPENSSLDIR)/misc/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(OPENSSLDIR)/misc/$$fn; \
 	done
 	: {- output_off() unless windowsdll(); &quot;&quot; -};
 	@set -e; for s in $(SHLIBS); do \
 		fn=`basename $$i`; \
-		echo &quot;$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn&quot;; \
-		$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$fn; \
+		echo &quot;$(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$fn&quot;; \
+		$(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$fn; \
 	done
 	: {- output_on() -};
-	$(RM) $(INSTALL_PREFIX)$(OPENSSLDIR)/openssl.cnf
+	$(RM) $(DESTDIR)$(OPENSSLDIR)/openssl.cnf
 
 # A method to extract all names from a .pod file
 # The first sed extracts everything between &quot;=head1 NAME&quot; and the next =head1
@@ -442,7 +442,7 @@ install_man_docs:
 	@echo &quot;*** Installing manpages&quot;
 	@\
 	OUTSUFFIX='.$${SEC}$(MANSUFFIX)'; \
-	OUTTOP=&quot;$(INSTALL_PREFIX)$(MANDIR)&quot;; \
+	OUTTOP=&quot;$(DESTDIR)$(MANDIR)&quot;; \
 	GENERATE='pod2man --name=$$NAME --section=$$SEC --center=OpenSSL --release=$(VERSION)'; \
 	$(PROCESS_PODS)
 
@@ -450,7 +450,7 @@ uninstall_man_docs:
 	@echo &quot;*** Uninstalling manpages&quot;
 	@\
 	OUTSUFFIX='.$${SEC}$(MANSUFFIX)'; \
-	OUTTOP=&quot;$(INSTALL_PREFIX)$(MANDIR)&quot;; \
+	OUTTOP=&quot;$(DESTDIR)$(MANDIR)&quot;; \
 	$(UNINSTALL_DOCS)
 
 install_html_docs:
@@ -458,7 +458,7 @@ install_html_docs:
 	@echo &quot;*** Installing HTML manpages&quot;
 	@\
 	OUTSUFFIX='.$(HTMLSUFFIX)'; \
-	OUTTOP=&quot;$(INSTALL_PREFIX)$(HTMLDIR)&quot;; \
+	OUTTOP=&quot;$(DESTDIR)$(HTMLDIR)&quot;; \
 	GENERATE=&quot;pod2html --podroot=$(SRCDIR)/doc --htmldir=.. \
 			   --podpath=apps:crypto:ssl \
 		  | sed -e 's|href=\&quot;<A HREF="http://man.he.net/man|href=\">http://man.he.net/man|href=\</A>&quot;../man|g'&quot;; \
@@ -468,7 +468,7 @@ uninstall_html_docs:
 	@echo &quot;*** Uninstalling manpages&quot;
 	@\
 	OUTSUFFIX='.$(HTMLSUFFIX)'; \
-	OUTTOP=&quot;$(INSTALL_PREFIX)$(HTMLDIR)&quot;; \
+	OUTTOP=&quot;$(DESTDIR)$(HTMLDIR)&quot;; \
 	$(UNINSTALL_DOCS)
 
 
diff --git a/Configure b/Configure
index 2ba33cb..138ffd3 100755
--- a/Configure
+++ b/Configure
@@ -32,10 +32,6 @@ my $usage=&quot;Usage: Configure [no-&lt;cipher&gt; ...] [enable-&lt;cipher&gt; ...] [experimenta
 #               This becomes the value of OPENSSLDIR in Makefile and in C.
 #               (Default: PREFIX/ssl)
 #
-# --install_prefix  Additional prefix for package builders (empty by
-#               default).  This needn't be set in advance, you can
-#               just as well use &quot;make INSTALL_PREFIX=/whatever install&quot;.
-#
 # --cross-compile-prefix Add specified prefix to binutils components.
 #
 # --api         One of 0.9.8, 1.0.0 or 1.1.0.  Do not compile support for
@@ -184,7 +180,6 @@ $config{prefix}=&quot;&quot;;
 $config{openssldir}=&quot;&quot;;
 $config{processor}=&quot;&quot;;
 $config{libdir}=&quot;&quot;;
-$config{install_prefix}= &quot;$ENV{'INSTALL_PREFIX'}&quot;;
 $config{cross_compile_prefix}=&quot;&quot;;
 $config{fipslibdir}=&quot;/usr/local/ssl/fips-2.0/lib/&quot;;
 my $nofipscanistercheck=0;
@@ -604,10 +599,6 @@ foreach (@argvcopy)
 			{
 			$config{openssldir}=$1;
 			}
-		elsif (/^--install.prefix=(.*)$/)
-			{
-			$config{install_prefix}=$1;
-			}
 		elsif (/^--with-zlib-lib=(.*)$/)
 			{
 			$withargs{zlib_lib}=$1;
diff --git a/INSTALL b/INSTALL
index 5ed0d58..31d8857 100644
--- a/INSTALL
+++ b/INSTALL
@@ -252,10 +252,9 @@
      locations, but have the package installed somewhere else so that
      it can easily be packaged, can use
 
-       $ make INSTALL_PREFIX=/tmp/package-root install
+       $ make DESTDIR=/tmp/package-root install
 
-     (or specify &quot;--install_prefix=/tmp/package-root&quot; as a configure
-     option).  The specified prefix will be prepended to all
+     The specified destination directory will be prepended to all
      installation target filenames.
 
 
diff --git a/Makefile.in b/Makefile.in
index b52bc18..ad51e76 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -21,10 +21,10 @@ SHLIB_TARGET={- $target{shared_target} -}
 # and should probably not be bothered with at all.
 HERE=.
 
-# INSTALL_PREFIX is for package builders so that they can configure
+# DESTDIR is for package builders so that they can configure
 # for, say, /usr/ and yet have everything installed to /tmp/somedir/usr/.
 # Normally it is left empty.
-INSTALL_PREFIX={- $config{install_prefix} -}
+DESTDIR=
 
 # Do not edit these manually. Use Configure with --prefix or --openssldir
 # to change this!  Short explanation in the top comment in Configure
@@ -215,14 +215,14 @@ HEADER=         e_os.h
 
 # Directories created on install if they don't exist.
 INSTALLDIRS=	\
-		$(INSTALL_PREFIX)$(INSTALLTOP)/bin \
-		$(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR) \
-		$(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/engines \
-		$(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig \
-		$(INSTALL_PREFIX)$(INSTALLTOP)/include/openssl \
-		$(INSTALL_PREFIX)$(OPENSSLDIR)/misc \
-		$(INSTALL_PREFIX)$(OPENSSLDIR)/certs \
-		$(INSTALL_PREFIX)$(OPENSSLDIR)/private
+		$(DESTDIR)$(INSTALLTOP)/bin \
+		$(DESTDIR)$(INSTALLTOP)/$(LIBDIR) \
+		$(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/engines \
+		$(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig \
+		$(DESTDIR)$(INSTALLTOP)/include/openssl \
+		$(DESTDIR)$(OPENSSLDIR)/misc \
+		$(DESTDIR)$(OPENSSLDIR)/certs \
+		$(DESTDIR)$(OPENSSLDIR)/private
 
 all: Makefile build_all
 
@@ -251,7 +251,7 @@ BUILDENV=	LC_ALL=C PLATFORM='$(PLATFORM)' PROCESSOR='$(PROCESSOR)'\
 		CROSS_COMPILE='$(CROSS_COMPILE)'	\
 		PERL='$(PERL)'	\
 		SDIRS='$(SDIRS)' LIBRPATH='$(INSTALLTOP)/$(LIBDIR)'	\
-		INSTALL_PREFIX='$(INSTALL_PREFIX)'		\
+		DESTDIR='$(DESTDIR)'		\
 		INSTALLTOP='$(INSTALLTOP)' OPENSSLDIR='$(OPENSSLDIR)'	\
 		LIBDIR='$(LIBDIR)'				\
 		DEPFLAG='$(DEPFLAG)'                    	\
@@ -565,18 +565,18 @@ uninstall: uninstall_sw uninstall_docs
 install_sw:
 	@$(PERL) $(TOP)/util/mkdir-p.pl $(INSTALLDIRS)
 	@set -e; for i in include/openssl/*.h; do \
-	(cp $$i $(INSTALL_PREFIX)$(INSTALLTOP)/$$i; \
-	chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/$$i ); \
+	(cp $$i $(DESTDIR)$(INSTALLTOP)/$$i; \
+	chmod 644 $(DESTDIR)$(INSTALLTOP)/$$i ); \
 	done;
 	@set -e; target=install; for dir in $(INSTALL_SUBS); do $(BUILD_CMD); done
 	@set -e; liblist=&quot;$(LIBS)&quot;; for i in $$liblist ;\
 	do \
 		if [ -f &quot;$$i&quot; ]; then \
 		(       echo installing $$i; \
-			cp $$i $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i.new; \
-			$(RANLIB) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i.new; \
-			chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i.new; \
-			mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i.new $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i ); \
+			cp $$i $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i.new; \
+			$(RANLIB) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i.new; \
+			chmod 644 $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i.new; \
+			mv -f $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i.new $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i ); \
 		fi; \
 	done;
 	@set -e; if [ -n &quot;$(SHARED_LIBS)&quot; ]; then \
@@ -587,16 +587,16 @@ install_sw:
 			(       echo installing $$i; \
 				if expr &quot;$(PLATFORM)&quot; : &quot;Cygwin&quot; &gt;/dev/null; then \
 					c=`echo $$i | sed 's/^lib\(.*\)\.dll\.a/cyg\1-$(SHLIB_VERSION_NUMBER).dll/'`; \
-					cp $$c $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$c.new; \
-					chmod 755 $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$c.new; \
-					mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$c.new $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$c; \
-					cp $$i $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i.new; \
-					chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i.new; \
-					mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i.new $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i; \
+					cp $$c $(DESTDIR)$(INSTALLTOP)/bin/$$c.new; \
+					chmod 755 $(DESTDIR)$(INSTALLTOP)/bin/$$c.new; \
+					mv -f $(DESTDIR)$(INSTALLTOP)/bin/$$c.new $(DESTDIR)$(INSTALLTOP)/bin/$$c; \
+					cp $$i $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i.new; \
+					chmod 644 $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i.new; \
+					mv -f $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i.new $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i; \
 				else \
-					cp $$i $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i.new; \
-					chmod 555 $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i.new; \
-					mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i.new $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i; \
+					cp $$i $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i.new; \
+					chmod 555 $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i.new; \
+					mv -f $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i.new $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i; \
 				fi ); \
 				if expr $(PLATFORM) : 'mingw' &gt; /dev/null; then \
 				(	case $$i in \
@@ -604,34 +604,34 @@ install_sw:
 						*ssl*)    i=ssleay32.dll;; \
 					esac; \
 					echo installing $$i; \
-					cp $$i $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i.new; \
-					chmod 755 $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i.new; \
-					mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i.new $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i ); \
+					cp $$i $(DESTDIR)$(INSTALLTOP)/bin/$$i.new; \
+					chmod 755 $(DESTDIR)$(INSTALLTOP)/bin/$$i.new; \
+					mv -f $(DESTDIR)$(INSTALLTOP)/bin/$$i.new $(DESTDIR)$(INSTALLTOP)/bin/$$i ); \
 				fi; \
 			fi; \
 		done; \
 		(	here=&quot;`pwd`&quot;; \
-			cd $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR); \
+			cd $(DESTDIR)$(INSTALLTOP)/$(LIBDIR); \
 			$(MAKE) -f $$here/Makefile HERE=&quot;$$here&quot; link-shared ); \
 		if [ &quot;$(INSTALLTOP)&quot; != &quot;/usr&quot; ]; then \
 			echo 'OpenSSL shared libraries have been installed in:'; \
 			echo '  $(INSTALLTOP)'; \
 		fi; \
 	fi
-	cp libcrypto.pc $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig
-	chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libcrypto.pc
-	cp libssl.pc $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig
-	chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libssl.pc
-	cp openssl.pc $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig
-	chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/openssl.pc
+	cp libcrypto.pc $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig
+	chmod 644 $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libcrypto.pc
+	cp libssl.pc $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig
+	chmod 644 $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libssl.pc
+	cp openssl.pc $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig
+	chmod 644 $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/openssl.pc
 
 uninstall_sw:
-	cd include/openssl &amp;&amp; files=* &amp;&amp; cd $(INSTALL_PREFIX)$(INSTALLTOP)/include/openssl &amp;&amp; $(RM) $$files
+	cd include/openssl &amp;&amp; files=* &amp;&amp; cd $(DESTDIR)$(INSTALLTOP)/include/openssl &amp;&amp; $(RM) $$files
 	@for i in $(LIBS) ;\
 	do \
 		test -f &quot;$$i&quot; &amp;&amp; \
-		echo $(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i &amp;&amp; \
-		$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i; \
+		echo $(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i &amp;&amp; \
+		$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i; \
 	done;
 	@if [ -n &quot;$(SHARED_LIBS)&quot; ]; then \
 		tmp=&quot;$(SHARED_LIBS)&quot;; \
@@ -640,28 +640,28 @@ uninstall_sw:
 			if [ -f &quot;$$i&quot; -o -f &quot;$$i.a&quot; ]; then \
 				if expr &quot;$(PLATFORM)&quot; : &quot;Cygwin&quot; &gt;/dev/null; then \
 					c=`echo $$i | sed 's/^lib\(.*\)\.dll\.a/cyg\1-$(SHLIB_VERSION_NUMBER).dll/'`; \
-					echo $(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$c; \
-					$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$c; \
-					echo $(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i; \
-					$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i; \
+					echo $(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$c; \
+					$(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$c; \
+					echo $(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i; \
+					$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i; \
 				else \
-					echo $(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i; \
-					$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/$$i; \
+					echo $(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i; \
+					$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/$$i; \
 				fi; \
 				if expr $(PLATFORM) : 'mingw' &gt; /dev/null; then \
 					case $$i in \
 						*crypto*) i=libeay32.dll;; \
 						*ssl*)    i=ssleay32.dll;; \
 					esac; \
-					echo $(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i; \
-					$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i; \
+					echo $(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$i; \
+					$(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$i; \
 				fi; \
 			fi; \
 		done; \
 	fi
-	$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libcrypto.pc
-	$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libssl.pc
-	$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/openssl.pc
+	$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libcrypto.pc
+	$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/libssl.pc
+	$(RM) $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/pkgconfig/openssl.pc
 	@target=uninstall; $(RECURSIVE_BUILD_CMD)
 
 install_html_docs:
@@ -671,7 +671,7 @@ install_html_docs:
 		filecase=-i; \
 	esac; \
 	for subdir in apps crypto ssl; do \
-		$(PERL) $(TOP)/util/mkdir-p $(INSTALL_PREFIX)$(HTMLDIR)/$$subdir; \
+		$(PERL) $(TOP)/util/mkdir-p $(DESTDIR)$(HTMLDIR)/$$subdir; \
 		for i in doc/$$subdir/*.pod; do \
 			fn=`basename $$i .pod`; \
 			echo &quot;installing html/$$fn.$(HTMLSUFFIX)&quot;; \
@@ -679,10 +679,10 @@ install_html_docs:
 			| sed -r 's/L&lt;([^)]*)(\([0-9]\))?\|([^)]*)(\([0-9]\))?&gt;/L&lt;\1|\3&gt;/g' \
 			| pod2html --podroot=doc --htmlroot=.. --podpath=$$subdir:apps:crypto:ssl \
 			| sed -r 's/&lt;!DOCTYPE.*//g' \
-			&gt; $(INSTALL_PREFIX)$(HTMLDIR)/$$subdir/$$fn.$(HTMLSUFFIX); \
+			&gt; $(DESTDIR)$(HTMLDIR)/$$subdir/$$fn.$(HTMLSUFFIX); \
 			$(PERL) util/extract-names.pl &lt; $$i | \
 				grep -v $$filecase &quot;^$$fn\$$&quot; | \
-				(cd $(INSTALL_PREFIX)$(HTMLDIR)/$$subdir; \
+				(cd $(DESTDIR)$(HTMLDIR)/$$subdir; \
 				 while read n; do \
 					PLATFORM=$(PLATFORM) $$here/util/point.sh $$fn.$(HTMLSUFFIX) &quot;$$n&quot;.$(HTMLSUFFIX); \
 				 done); \
@@ -698,21 +698,21 @@ uninstall_html_docs:
 	for subdir in apps crypto ssl; do \
 		for i in doc/$$subdir/*.pod; do \
 			fn=`basename $$i .pod`; \
-			$(RM) $(INSTALL_PREFIX)$(HTMLDIR)/$$subdir/$$fn.$(HTMLSUFFIX); \
+			$(RM) $(DESTDIR)$(HTMLDIR)/$$subdir/$$fn.$(HTMLSUFFIX); \
 			$(PERL) util/extract-names.pl &lt; $$i | \
 				grep -v $$filecase &quot;^$$fn\$$&quot; | \
 				while read n; do \
-					$(RM) $(INSTALL_PREFIX)$(HTMLDIR)/$$subdir/&quot;$$n&quot;.$(HTMLSUFFIX); \
+					$(RM) $(DESTDIR)$(HTMLDIR)/$$subdir/&quot;$$n&quot;.$(HTMLSUFFIX); \
 				done; \
 		done; \
 	done
 
 install_docs:
 	@$(PERL) $(TOP)/util/mkdir-p.pl \
-		$(INSTALL_PREFIX)$(MANDIR)/man1 \
-		$(INSTALL_PREFIX)$(MANDIR)/man3 \
-		$(INSTALL_PREFIX)$(MANDIR)/man5 \
-		$(INSTALL_PREFIX)$(MANDIR)/man7
+		$(DESTDIR)$(MANDIR)/man1 \
+		$(DESTDIR)$(MANDIR)/man3 \
+		$(DESTDIR)$(MANDIR)/man5 \
+		$(DESTDIR)$(MANDIR)/man7
 	here=&quot;`pwd`&quot;; \
 	filecase=; \
 	case &quot;$(PLATFORM)&quot; in DJGPP|Cygwin*|mingw*|darwin*-*-cc) \
@@ -726,11 +726,11 @@ install_docs:
 		pod2man \
 			--section=$$sec --center=OpenSSL \
 			--release=$(VERSION) `basename $$i`) \
-			&gt;  $(INSTALL_PREFIX)$(MANDIR)/man$$sec/$$fn.$${sec}$(MANSUFFIX); \
+			&gt;  $(DESTDIR)$(MANDIR)/man$$sec/$$fn.$${sec}$(MANSUFFIX); \
 		$(PERL) util/extract-names.pl &lt; $$i | \
 			(grep -v $$filecase &quot;^$$fn\$$&quot;; true) | \
 			(grep -v &quot;[	]&quot;; true) | \
-			(cd $(INSTALL_PREFIX)$(MANDIR)/man$$sec/; \
+			(cd $(DESTDIR)$(MANDIR)/man$$sec/; \
 			 while read n; do \
 				PLATFORM=$(PLATFORM) $$here/util/point.sh $$fn.$${sec}$(MANSUFFIX) &quot;$$n&quot;.$${sec}$(MANSUFFIX); \
 			 done); \
@@ -743,11 +743,11 @@ install_docs:
 		pod2man \
 			--section=$$sec --center=OpenSSL \
 			--release=$(VERSION) `basename $$i`) \
-			&gt;  $(INSTALL_PREFIX)$(MANDIR)/man$$sec/$$fn.$${sec}$(MANSUFFIX); \
+			&gt;  $(DESTDIR)$(MANDIR)/man$$sec/$$fn.$${sec}$(MANSUFFIX); \
 		$(PERL) util/extract-names.pl &lt; $$i | \
 			(grep -v $$filecase &quot;^$$fn\$$&quot;; true) | \
 			(grep -v &quot;[	]&quot;; true) | \
-			(cd $(INSTALL_PREFIX)$(MANDIR)/man$$sec/; \
+			(cd $(DESTDIR)$(MANDIR)/man$$sec/; \
 			 while read n; do \
 				PLATFORM=$(PLATFORM) $$here/util/point.sh $$fn.$${sec}$(MANSUFFIX) &quot;$$n&quot;.$${sec}$(MANSUFFIX); \
 			 done); \
@@ -762,27 +762,27 @@ uninstall_docs:
 	for i in doc/apps/*.pod; do \
 		fn=`basename $$i .pod`; \
 		sec=`$(PERL) util/extract-section.pl 1 &lt; $$i`; \
-		echo $(RM) $(INSTALL_PREFIX)$(MANDIR)/man$$sec/$$fn.$${sec}$(MANSUFFIX); \
-		$(RM) $(INSTALL_PREFIX)$(MANDIR)/man$$sec/$$fn.$${sec}$(MANSUFFIX); \
+		echo $(RM) $(DESTDIR)$(MANDIR)/man$$sec/$$fn.$${sec}$(MANSUFFIX); \
+		$(RM) $(DESTDIR)$(MANDIR)/man$$sec/$$fn.$${sec}$(MANSUFFIX); \
 		$(PERL) util/extract-names.pl &lt; $$i | \
 			(grep -v $$filecase &quot;^$$fn\$$&quot;; true) | \
 			(grep -v &quot;[	]&quot;; true) | \
 			while read n; do \
-				echo $(RM) $(INSTALL_PREFIX)$(MANDIR)/man$$sec/&quot;$$n&quot;.$${sec}$(MANSUFFIX); \
-				$(RM) $(INSTALL_PREFIX)$(MANDIR)/man$$sec/&quot;$$n&quot;.$${sec}$(MANSUFFIX); \
+				echo $(RM) $(DESTDIR)$(MANDIR)/man$$sec/&quot;$$n&quot;.$${sec}$(MANSUFFIX); \
+				$(RM) $(DESTDIR)$(MANDIR)/man$$sec/&quot;$$n&quot;.$${sec}$(MANSUFFIX); \
 			done; \
 	done; \
 	for i in doc/crypto/*.pod doc/ssl/*.pod; do \
 		fn=`basename $$i .pod`; \
 		sec=`$(PERL) util/extract-section.pl 3 &lt; $$i`; \
-		echo $(RM) $(INSTALL_PREFIX)$(MANDIR)/man$$sec/$$fn.$${sec}$(MANSUFFIX); \
-		$(RM) $(INSTALL_PREFIX)$(MANDIR)/man$$sec/$$fn.$${sec}$(MANSUFFIX); \
+		echo $(RM) $(DESTDIR)$(MANDIR)/man$$sec/$$fn.$${sec}$(MANSUFFIX); \
+		$(RM) $(DESTDIR)$(MANDIR)/man$$sec/$$fn.$${sec}$(MANSUFFIX); \
 		$(PERL) util/extract-names.pl &lt; $$i | \
 			(grep -v $$filecase &quot;^$$fn\$$&quot;; true) | \
 			(grep -v &quot;[	]&quot;; true) | \
 			while read n; do \
-				echo $(RM) $(INSTALL_PREFIX)$(MANDIR)/man$$sec/&quot;$$n&quot;.$${sec}$(MANSUFFIX); \
-				$(RM) $(INSTALL_PREFIX)$(MANDIR)/man$$sec/&quot;$$n&quot;.$${sec}$(MANSUFFIX); \
+				echo $(RM) $(DESTDIR)$(MANDIR)/man$$sec/&quot;$$n&quot;.$${sec}$(MANSUFFIX); \
+				$(RM) $(DESTDIR)$(MANDIR)/man$$sec/&quot;$$n&quot;.$${sec}$(MANSUFFIX); \
 			done; \
 	done
 
diff --git a/apps/Makefile.in b/apps/Makefile.in
index e3f485d..5fb4f47 100644
--- a/apps/Makefile.in
+++ b/apps/Makefile.in
@@ -80,33 +80,33 @@ install:
 	@set -e; for i in $(EXE); \
 	do  \
 	(echo installing $$i; \
-	 cp $$i $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i.new; \
-	 chmod 755 $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i.new; \
-	 mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i.new $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i ); \
+	 cp $$i $(DESTDIR)$(INSTALLTOP)/bin/$$i.new; \
+	 chmod 755 $(DESTDIR)$(INSTALLTOP)/bin/$$i.new; \
+	 mv -f $(DESTDIR)$(INSTALLTOP)/bin/$$i.new $(DESTDIR)$(INSTALLTOP)/bin/$$i ); \
 	 done;
 	@set -e; for i in $(SCRIPTS); \
 	do  \
 	(echo installing $$i; \
-	 cp $$i $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$i.new; \
-	 chmod 755 $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$i.new; \
-	 mv -f $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$i.new $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$i ); \
+	 cp $$i $(DESTDIR)$(OPENSSLDIR)/misc/$$i.new; \
+	 chmod 755 $(DESTDIR)$(OPENSSLDIR)/misc/$$i.new; \
+	 mv -f $(DESTDIR)$(OPENSSLDIR)/misc/$$i.new $(DESTDIR)$(OPENSSLDIR)/misc/$$i ); \
 	 done
-	@cp openssl.cnf $(INSTALL_PREFIX)$(OPENSSLDIR)/openssl.cnf.new; \
-	chmod 644 $(INSTALL_PREFIX)$(OPENSSLDIR)/openssl.cnf.new; \
-	mv -f  $(INSTALL_PREFIX)$(OPENSSLDIR)/openssl.cnf.new $(INSTALL_PREFIX)$(OPENSSLDIR)/openssl.cnf
+	@cp openssl.cnf $(DESTDIR)$(OPENSSLDIR)/openssl.cnf.new; \
+	chmod 644 $(DESTDIR)$(OPENSSLDIR)/openssl.cnf.new; \
+	mv -f  $(DESTDIR)$(OPENSSLDIR)/openssl.cnf.new $(DESTDIR)$(OPENSSLDIR)/openssl.cnf
 
 uninstall:
 	@set -e; for i in $(EXE); \
 	do  \
-		echo $(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i; \
-		$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i; \
+		echo $(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$i; \
+		$(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$i; \
 	done;
 	@set -e; for i in $(SCRIPTS); \
 	do  \
-		echo $(RM) $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$i; \
-		$(RM) $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$i; \
+		echo $(RM) $(DESTDIR)$(OPENSSLDIR)/misc/$$i; \
+		$(RM) $(DESTDIR)$(OPENSSLDIR)/misc/$$i; \
 	done
-	$(RM) $(INSTALL_PREFIX)$(OPENSSLDIR)/openssl.cnf
+	$(RM) $(DESTDIR)$(OPENSSLDIR)/openssl.cnf
 
 generate: openssl-vms.cnf progs.h
 
diff --git a/crypto/async/Makefile.in b/crypto/async/Makefile.in
index c50b04d..1a89b99 100644
--- a/crypto/async/Makefile.in
+++ b/crypto/async/Makefile.in
@@ -48,8 +48,8 @@ install:
 	@[ -n &quot;$(INSTALLTOP)&quot; ] # should be set by top Makefile...
 	@headerlist=&quot;$(EXHEADER)&quot;; for i in $$headerlist ; \
 	do  \
-	(cp $$i $(INSTALL_PREFIX)$(INSTALLTOP)/include/openssl/$$i; \
-	chmod 644 $(INSTALL_PREFIX)$(INSTALLTOP)/include/openssl/$$i ); \
+	(cp $$i $(DESTDIR)$(INSTALLTOP)/include/openssl/$$i; \
+	chmod 644 $(DESTDIR)$(INSTALLTOP)/include/openssl/$$i ); \
 	done;
 
 depend:
diff --git a/crypto/srp/Makefile.in b/crypto/srp/Makefile.in
index 3b654da..eded0e7 100644
--- a/crypto/srp/Makefile.in
+++ b/crypto/srp/Makefile.in
@@ -3,7 +3,7 @@ TOP=	../..
 CC=	cc
 INCLUDES= -I.. -I$(TOP) -I../../include
 CFLAG=-g
-INSTALL_PREFIX=
+DESTDIR=
 OPENSSLDIR=     /usr/local/ssl
 INSTALLTOP=/usr/local/ssl
 AR=		ar r
diff --git a/crypto/ts/Makefile.in b/crypto/ts/Makefile.in
index 68a3206..db034ba 100644
--- a/crypto/ts/Makefile.in
+++ b/crypto/ts/Makefile.in
@@ -6,7 +6,7 @@ TOP=	../..
 CC=	cc
 INCLUDES= -I.. -I../../include
 CFLAG = -g
-INSTALL_PREFIX=
+DESTDIR=
 OPENSSLDIR=     /usr/local/ssl
 INSTALLTOP=/usr/local/ssl
 AR=		ar r
diff --git a/engines/Makefile.in b/engines/Makefile.in
index 2207c5c..e4204ee 100644
--- a/engines/Makefile.in
+++ b/engines/Makefile.in
@@ -88,13 +88,13 @@ install:
 	@[ -n &quot;$(INSTALLTOP)&quot; ] # should be set by top Makefile...
 	@if [ -n &quot;$(SHARED_LIBS)&quot; ]; then \
 		set -e; \
-		$(PERL) $(TOP)/util/mkdir-p.pl $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/engines; \
+		$(PERL) $(TOP)/util/mkdir-p.pl $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/engines; \
 		for l in $(LIBNAMES); do \
 			( echo installing $$l; \
 			  pfx=lib; \
 			  if expr &quot;$(PLATFORM)&quot; : &quot;Cygwin&quot; &gt;/dev/null; then \
 				sfx=&quot;.so&quot;; \
-				cp cyg$$l.dll $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/engines/$$pfx$$l$$sfx.new; \
+				cp cyg$$l.dll $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/engines/$$pfx$$l$$sfx.new; \
 			  else \
 				case &quot;$(CFLAGS)&quot; in \
 				*DSO_DLFCN*)	sfx=`expr &quot;$(SHLIB_EXT)&quot; : '.*\(\.[a-z][a-z]*\)' \| &quot;.so&quot;`;;	\
@@ -102,10 +102,10 @@ install:
 				*DSO_WIN32*)	sfx=&quot;eay32.dll&quot;; pfx=;;	\
 				*)		sfx=&quot;.bad&quot;;;	\
 				esac; \
-				cp $$pfx$$l$$sfx $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/engines/$$pfx$$l$$sfx.new; \
+				cp $$pfx$$l$$sfx $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/engines/$$pfx$$l$$sfx.new; \
 			  fi; \
-			  chmod 555 $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/engines/$$pfx$$l$$sfx.new; \
-			  mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/engines/$$pfx$$l$$sfx.new $(INSTALL_PREFIX)$(INSTALLTOP)/$(LIBDIR)/engines/$$pfx$$l$$sfx ); \
+			  chmod 555 $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/engines/$$pfx$$l$$sfx.new; \
+			  mv -f $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/engines/$$pfx$$l$$sfx.new $(DESTDIR)$(INSTALLTOP)/$(LIBDIR)/engines/$$pfx$$l$$sfx ); \
 		done; \
 	fi
 
diff --git a/openssl.spec b/openssl.spec
index f347c48..ceda82a 100644
--- a/openssl.spec
+++ b/openssl.spec
@@ -103,7 +103,7 @@ LD_LIBRARY_PATH=`pwd` make test
 
 %install
 rm -rf $RPM_BUILD_ROOT
-make MANDIR=/usr/man MANSUFFIX=ssl INSTALL_PREFIX=&quot;$RPM_BUILD_ROOT&quot; install
+make MANDIR=/usr/man MANSUFFIX=ssl DESTDIR=&quot;$RPM_BUILD_ROOT&quot; install
 
 # Make backwards-compatibility symlink to ssleay
 ln -sf /usr/bin/openssl $RPM_BUILD_ROOT/usr/bin/ssleay
diff --git a/tools/Makefile.in b/tools/Makefile.in
index d0c5ca2..7b4f14e 100644
--- a/tools/Makefile.in
+++ b/tools/Makefile.in
@@ -23,27 +23,27 @@ install:
 	@[ -n &quot;$(INSTALLTOP)&quot; ] # should be set by top Makefile...
 	@for i in $(APPS) ; \
 	do  \
-	(cp $$i $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i.new; \
-	chmod 755 $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i.new; \
-	mv -f $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i.new $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i ); \
+	(cp $$i $(DESTDIR)$(INSTALLTOP)/bin/$$i.new; \
+	chmod 755 $(DESTDIR)$(INSTALLTOP)/bin/$$i.new; \
+	mv -f $(DESTDIR)$(INSTALLTOP)/bin/$$i.new $(DESTDIR)$(INSTALLTOP)/bin/$$i ); \
 	done;
 	@for i in $(MISC_APPS) ; \
 	do  \
-	(cp $$i $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$i.new; \
-	chmod 755 $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$i.new; \
-	mv -f $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$i.new $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$i ); \
+	(cp $$i $(DESTDIR)$(OPENSSLDIR)/misc/$$i.new; \
+	chmod 755 $(DESTDIR)$(OPENSSLDIR)/misc/$$i.new; \
+	mv -f $(DESTDIR)$(OPENSSLDIR)/misc/$$i.new $(DESTDIR)$(OPENSSLDIR)/misc/$$i ); \
 	done;
 
 uninstall:
 	@for i in $(APPS) ; \
 	do  \
-		echo $(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i; \
-		$(RM) $(INSTALL_PREFIX)$(INSTALLTOP)/bin/$$i; \
+		echo $(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$i; \
+		$(RM) $(DESTDIR)$(INSTALLTOP)/bin/$$i; \
 	done;
 	@for i in $(MISC_APPS) ; \
 	do  \
-		echo $(RM) $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$i; \
-		$(RM) $(INSTALL_PREFIX)$(OPENSSLDIR)/misc/$$i; \
+		echo $(RM) $(DESTDIR)$(OPENSSLDIR)/misc/$$i; \
+		$(RM) $(DESTDIR)$(OPENSSLDIR)/misc/$$i; \
 	done;
 
 files:
diff --git a/util/cygwin.sh b/util/cygwin.sh
index cfdb04d..4f7fac9 100755
--- a/util/cygwin.sh
+++ b/util/cygwin.sh
@@ -8,7 +8,7 @@
 #set -x
 
 CONFIG_OPTIONS=&quot;--prefix=/usr shared zlib no-idea no-rc5&quot;
-INSTALL_PREFIX=/tmp/install/INSTALL
+DESTDIR=/tmp/install/INSTALL
 
 VERSION=
 SHLIB_VERSION_NUMBER=
@@ -16,8 +16,8 @@ SUBVERSION=$1
 
 function cleanup()
 {
-  rm -rf ${INSTALL_PREFIX}/etc
-  rm -rf ${INSTALL_PREFIX}/usr
+  rm -rf ${DESTDIR}/etc
+  rm -rf ${DESTDIR}/usr
 }
 
 function get_openssl_version()
@@ -40,14 +40,14 @@ function get_openssl_version()
 
 function base_install()
 {
-  mkdir -p ${INSTALL_PREFIX}
+  mkdir -p ${DESTDIR}
   cleanup
-  make install INSTALL_PREFIX=&quot;${INSTALL_PREFIX}&quot;
+  make install DESTDIR=&quot;${DESTDIR}&quot;
 }
 
 function doc_install()
 {
-  DOC_DIR=${INSTALL_PREFIX}/usr/share/doc/openssl
+  DOC_DIR=${DESTDIR}/usr/share/doc/openssl
 
   mkdir -p ${DOC_DIR}
   cp CHANGES CHANGES.SSLeay INSTALL LICENSE NEWS README ${DOC_DIR}
@@ -57,7 +57,7 @@ function doc_install()
 
 function certs_install()
 {
-  CERTS_DIR=${INSTALL_PREFIX}/usr/ssl/certs
+  CERTS_DIR=${DESTDIR}/usr/ssl/certs
 
   mkdir -p ${CERTS_DIR}
   cp -rp certs/* ${CERTS_DIR}
@@ -65,7 +65,7 @@ function certs_install()
 
 function create_cygwin_readme()
 {
-  README_DIR=${INSTALL_PREFIX}/usr/share/doc/Cygwin
+  README_DIR=${DESTDIR}/usr/share/doc/Cygwin
   README_FILE=${README_DIR}/openssl-${VERSION}.README
 
   mkdir -p ${README_DIR}
@@ -81,7 +81,7 @@ function create_cygwin_readme()
 
 function create_profile_files()
 {
-  PROFILE_DIR=${INSTALL_PREFIX}/etc/profile.d
+  PROFILE_DIR=${DESTDIR}/etc/profile.d
 
   mkdir -p $PROFILE_DIR
   cat &gt; ${PROFILE_DIR}/openssl.sh &lt;&lt;- &quot;EOF&quot;
@@ -126,7 +126,7 @@ create_cygwin_readme
 
 create_profile_files
 
-cd ${INSTALL_PREFIX}
+cd ${DESTDIR}
 chmod u+w usr/lib/engines/*.so
 strip usr/bin/*.exe usr/bin/*.dll usr/lib/engines/*.so
 chmod u-w usr/lib/engines/*.so
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003996.html">[openssl-commits] [openssl]  master update
</A></li>
	<LI>Next message: <A HREF="003998.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3997">[ date ]</a>
              <a href="thread.html#3997">[ thread ]</a>
              <a href="subject.html#3997">[ subject ]</a>
              <a href="author.html#3997">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
