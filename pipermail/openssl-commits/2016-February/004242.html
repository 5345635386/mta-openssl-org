<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2016-February/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1455835439.523706.2343.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004241.html">
   <LINK REL="Next"  HREF="004244.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  master update</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1455835439.523706.2343.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  master update">levitte at openssl.org
       </A><BR>
    <I>Thu Feb 18 22:43:59 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="004241.html">[openssl-commits] [openssl]  master update
</A></li>
        <LI>Next message: <A HREF="004244.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4242">[ date ]</a>
              <a href="thread.html#4242">[ thread ]</a>
              <a href="subject.html#4242">[ subject ]</a>
              <a href="author.html#4242">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  ce192ebed0f5445076996b46c279a1499fdc8948 (commit)
       via  88297284ad14a233430cb5140d368edf17dacf7a (commit)
      from  7d1037661afedc008f0abbd050c492e23905b431 (commit)


- Log -----------------------------------------------------------------
commit ce192ebed0f5445076996b46c279a1499fdc8948
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Thu Feb 18 13:17:15 2016 +0100

    Remove all special make depend flags, as well as OPENSSL_DOING_MAKEDEPEND
    
    All those flags existed because we had all the dependencies versioned
    in the repository, and wanted to have it be consistent, no matter what
    the local configuration was.  Now that the dependencies are gone from
    the versioned Makefile.ins, it makes much more sense to use the exact
    same flags as when compiling the object files.
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;

commit 88297284ad14a233430cb5140d368edf17dacf7a
Author: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;
Date:   Thu Feb 18 13:04:05 2016 +0100

    Don't treat .d (depend) files separately from object files
    
    .d (.MMS in the VMS world) files with just dependencies are built from
    exactly the same conditions as the object files.  Therefore, the rules
    for them can be built at the same time as the rules for the
    corresponding object files.
    
    This removes the requirement for a src2dep function in the build file
    templates, and for common.tmpl to call it.  In the end, the existence
    of depend files is entirely up to the build file.
    
    Reviewed-by: Rich Salz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">rsalz at openssl.org</A>&gt;

-----------------------------------------------------------------------

Summary of changes:
 Configurations/README             | 20 -------------------
 Configurations/README.design      | 18 -----------------
 Configurations/common.tmpl        |  5 -----
 Configurations/descrip.mms.tmpl   | 41 +++------------------------------------
 Configurations/unix-Makefile.tmpl | 37 +++++++++++++----------------------
 Configure                         | 13 -------------
 Makefile.in                       |  2 --
 apps/Makefile.in                  |  2 +-
 crypto/Makefile.in                |  2 +-
 crypto/aes/Makefile.in            |  2 +-
 crypto/asn1/Makefile.in           |  2 +-
 crypto/async/Makefile.in          |  2 +-
 crypto/bf/Makefile.in             |  2 +-
 crypto/bio/Makefile.in            |  2 +-
 crypto/bn/Makefile.in             |  2 +-
 crypto/buffer/Makefile.in         |  2 +-
 crypto/camellia/Makefile.in       |  2 +-
 crypto/cast/Makefile.in           |  2 +-
 crypto/chacha/Makefile.in         |  2 +-
 crypto/cmac/Makefile.in           |  2 +-
 crypto/cms/Makefile.in            |  2 +-
 crypto/comp/Makefile.in           |  2 +-
 crypto/conf/Makefile.in           |  2 +-
 crypto/ct/Makefile.in             |  2 +-
 crypto/des/Makefile.in            |  2 +-
 crypto/dh/Makefile.in             |  2 +-
 crypto/dsa/Makefile.in            |  2 +-
 crypto/dso/Makefile.in            |  2 +-
 crypto/ec/Makefile.in             |  2 +-
 crypto/engine/Makefile.in         |  2 +-
 crypto/err/Makefile.in            |  2 +-
 crypto/evp/Makefile.in            |  2 +-
 crypto/hmac/Makefile.in           |  2 +-
 crypto/idea/Makefile.in           |  2 +-
 crypto/kdf/Makefile.in            |  2 +-
 crypto/lhash/Makefile.in          |  2 +-
 crypto/md2/Makefile.in            |  2 +-
 crypto/md4/Makefile.in            |  2 +-
 crypto/md5/Makefile.in            |  2 +-
 crypto/mdc2/Makefile.in           |  2 +-
 crypto/modes/Makefile.in          |  2 +-
 crypto/objects/Makefile.in        |  2 +-
 crypto/ocsp/Makefile.in           |  2 +-
 crypto/pem/Makefile.in            |  2 +-
 crypto/pkcs12/Makefile.in         |  2 +-
 crypto/pkcs7/Makefile.in          |  2 +-
 crypto/poly1305/Makefile.in       |  2 +-
 crypto/rand/Makefile.in           |  2 +-
 crypto/rc2/Makefile.in            |  2 +-
 crypto/rc4/Makefile.in            |  2 +-
 crypto/rc5/Makefile.in            |  2 +-
 crypto/ripemd/Makefile.in         |  2 +-
 crypto/rsa/Makefile.in            |  2 +-
 crypto/seed/Makefile.in           |  2 +-
 crypto/sha/Makefile.in            |  2 +-
 crypto/srp/Makefile.in            |  2 +-
 crypto/stack/Makefile.in          |  2 +-
 crypto/ts/Makefile.in             |  2 +-
 crypto/txt_db/Makefile.in         |  2 +-
 crypto/ui/Makefile.in             |  2 +-
 crypto/whrlpool/Makefile.in       |  2 +-
 crypto/x509/Makefile.in           |  2 +-
 crypto/x509v3/Makefile.in         |  2 +-
 engines/Makefile.in               |  2 +-
 include/openssl/opensslconf.h.in  |  8 --------
 ssl/Makefile.in                   |  2 +-
 test/Makefile.in                  |  2 +-
 util/domd.in                      |  4 ++--
 68 files changed, 77 insertions(+), 189 deletions(-)

diff --git a/Configurations/README b/Configurations/README
index 89fc65c..4945c1c 100644
--- a/Configurations/README
+++ b/Configurations/README
@@ -480,26 +480,6 @@ The build-file template is expected to define at least the following
 perl functions in a perl code fragment enclosed with &quot;{-&quot; and &quot;-}&quot;.
 They are all expected to return a string with the lines they produce.
 
-    src2dep     - function that produces build file lines to get the
-                  dependencies for an object file into a dependency
-                  file.
-
-                  It's called like this:
-
-                        src2dep(obj =&gt; &quot;PATH/TO/objectfile&quot;,
-                                srcs =&gt; [ &quot;PATH/TO/sourcefile&quot;, ... ],
-                                deps =&gt; [ &quot;dep1&quot;, ... ],
-                                incs =&gt; [ &quot;INCL/PATH&quot;, ... ]);
-
-                  'obj' has the dependent object file as well as
-                  object file the dependencies are for; it's *without*
-                  extension, src2dep() is expected to add that.
-                  'srcs' has the list of source files to build the
-                  object file, with the first item being the source
-                  file that directly corresponds to the object file.
-                  'deps' is a list of explicit dependencies.  'incs'
-                  is a list of include file directories.
-
     src2obj     - function that produces build file lines to build an
                   object file from source files and associated data.
 
diff --git a/Configurations/README.design b/Configurations/README.design
index ed2d25e..80839fa 100644
--- a/Configurations/README.design
+++ b/Configurations/README.design
@@ -384,24 +384,6 @@ build static libraries from object files, to build shared libraries
 from static libraries, to programs from object files and libraries,
 etc.
 
-    src2dep     - function that produces build file lines to get the
-                  dependencies for an object file into a dependency
-                  file.
-
-                  It's called like this:
-
-                        src2dep(obj =&gt; &quot;PATH/TO/objectfile&quot;,
-                                srcs =&gt; [ &quot;PATH/TO/sourcefile&quot;, ... ],
-                                incs =&gt; [ &quot;INCL/PATH&quot;, ... ]);
-
-                  'obj' has the dependent object file as well as
-                  object file the dependencies are for; it's *without*
-                  extension, src2dep() is expected to add that.
-                  'srcs' has the list of source files to build the
-                  object file, with the first item being the source
-                  file that directly corresponds to the object file.
-                  'incs' is a list of include file directories.
-
     src2obj     - function that produces build file lines to build an
                   object file from source files and associated data.
 
diff --git a/Configurations/common.tmpl b/Configurations/common.tmpl
index 3bd7324..d7d01dc 100644
--- a/Configurations/common.tmpl
+++ b/Configurations/common.tmpl
@@ -43,11 +43,6 @@
                          deps =&gt; [ reducedepends(resolvedepends($obj)) ],
                          incs =&gt; [ @{$unified_info{includes}-&gt;{$bin}},
                                    @{$unified_info{includes}-&gt;{$obj}} ]);
-         $OUT .= src2dep(obj =&gt; $obj_no_o,
-                         srcs =&gt; $unified_info{sources}-&gt;{$obj},
-                         deps =&gt; [ reducedepends(resolvedepends($obj)) ],
-                         incs =&gt; [ @{$unified_info{includes}-&gt;{$bin}},
-                                   @{$unified_info{includes}-&gt;{$obj}} ]);
      }
  }
 
diff --git a/Configurations/descrip.mms.tmpl b/Configurations/descrip.mms.tmpl
index 4ce7973..2798b19 100644
--- a/Configurations/descrip.mms.tmpl
+++ b/Configurations/descrip.mms.tmpl
@@ -410,43 +410,6 @@ descrip.mms : {- sourcefile(&quot;Configurations&quot;, &quot;descrip.mms.tmpl&quot;) -} $(SRCDIR)Co
 {-
   use File::Basename;
   use File::Spec::Functions qw/abs2rel rel2abs catfile catdir/;
-  sub src2dep {
-      my %args = @_;
-      my $dep = $args{obj};
-      my $deps = join(&quot;, -\n\t\t&quot;, @{$args{srcs}}, @{$args{deps}});
-
-      # Because VMS C isn't very good at combining a /INCLUDE path with
-      # #includes having a relative directory (like '#include &quot;../foo.h&quot;),
-      # the best choice is to move to the first source file's intended
-      # directory before compiling, and make sure to write the object file
-      # in the correct position (important when the object tree is other
-      # than the source tree).
-      my $forward = dirname($args{srcs}-&gt;[0]);
-      my $backward = abs2rel(rel2abs(&quot;.&quot;), rel2abs($forward));
-      my $depd = abs2rel(rel2abs(dirname($dep)), rel2abs($forward));
-      my $depn = basename($dep);
-      my $srcs =
-          join(&quot;, &quot;,
-               map { abs2rel(rel2abs($_), rel2abs($forward)) } @{$args{srcs}});
-      my $incs =
-          &quot;/INCLUDE=(&quot;.join(&quot;,&quot;,
-                            map {
-                               file_name_is_absolute($_)
-                               ? $_ : catdir($backward,$_)
-                            } @{$args{incs}}).&quot;)&quot;;
-      my $before = $unified_info{before}-&gt;{$dep.&quot;.OBJ&quot;} || &quot;\@ !&quot;;
-      my $after = $unified_info{after}-&gt;{$dep.&quot;.OBJ&quot;} || &quot;\@ !&quot;;
-
-      return &lt;&lt;&quot;EOF&quot;;
-$dep.MMS : $deps
-        ${before}
-        SET DEFAULT $forward
-        \$(CC) \$(CFLAGS)${incs} /MMS=(TARGET=.OBJ)/OBJECT=${depd}${depn}.MMS $srcs
-        SET DEFAULT $backward
-        ${after}
-        - PURGE $dep.MMS
-EOF
-  }
   sub src2obj {
       my %args = @_;
       my $obj = $args{obj};
@@ -475,7 +438,9 @@ EOF
       my $after = $unified_info{after}-&gt;{$obj.&quot;.OBJ&quot;} || &quot;\@ !&quot;;
 
       return &lt;&lt;&quot;EOF&quot;;
-$obj.OBJ : $deps
+$obj.MMS : $deps
+        \$(CC) \$(CFLAGS)${incs} /MMS=(FILE=${objd}${objn}.MMS,TARGET=$obj.OBJ) /NOOBJECT $srcs
+$obj.OBJ : $obj.MMS
         ${before}
         SET DEFAULT $forward
         \$(CC) \$(CFLAGS)${incs} /OBJECT=${objd}${objn}.OBJ /REPOSITORY=$backward $srcs
diff --git a/Configurations/unix-Makefile.tmpl b/Configurations/unix-Makefile.tmpl
index bae16fd..4deab32 100644
--- a/Configurations/unix-Makefile.tmpl
+++ b/Configurations/unix-Makefile.tmpl
@@ -97,7 +97,6 @@ CROSS_COMPILE= {- $config{cross_compile_prefix} -}
 CC= $(CROSS_COMPILE){- $target{cc} -}
 CFLAGS={- our $cflags2 = join(&quot; &quot;,(map { &quot;-D&quot;.$_} @{$config{defines}}),&quot;-DOPENSSLDIR=\&quot;\\\&quot;\$(OPENSSLDIR)\\\&quot;\&quot;&quot;,&quot;-DENGINESDIR=\&quot;\\\&quot;\$(ENGINESDIR)\\\&quot;\&quot;&quot;) -} {- $config{cflags} -}
 CFLAGS_Q={- $cflags2 =~ s|([\\&quot;])|\\$1|g; $cflags2 -} {- $config{cflags} -}
-DEPFLAGS= {- join(&quot; &quot;,map { &quot;-D&quot;.$_} @{$config{depdefines}}) -}
 LDFLAGS= {- $config{lflags} -}
 PLIB_LDFLAGS= {- $config{plib_lflags} -}
 EX_LIBS= {- $config{ex_libs} -}
@@ -732,39 +731,29 @@ Makefile: {- $config{build_file_template} -} $(SRCDIR)/Configure $(SRCDIR)/confi
 		   } } @_;
   }
 
-  sub src2dep {
+  sub src2obj {
       my %args = @_;
-      my $dep = $args{obj}.'$(DEP_EXT)';
-      my $obj = $args{obj}.'$(OBJ_EXT)';
+      my $obj = $args{obj};
       my $srcs = join(&quot; &quot;, @{$args{srcs}});
       my $deps = join(&quot; &quot;, @{$args{srcs}}, @{$args{deps}});
       my $incs = join(&quot; &quot;, map { &quot; -I&quot;.$_ } @{$args{incs}});
       my $makedepprog = $config{makedepprog};
       if ($makedepprog eq &quot;makedepend&quot;) {
           return &lt;&lt;&quot;EOF&quot;;
-$dep : $deps
+$obj\$(DEP_EXT): $deps
 	rm -f \$\@.tmp; touch \$\@.tmp
-	\$(MAKEDEPEND) -f\$\@.tmp -o&quot;|$obj&quot; \\
-	    -- -DOPENSSL_DOING_MAKEDEPEND \$(DEPFLAGS)$incs \\
-	    -- $srcs \\
+	\$(MAKEDEPEND) -f\$\@.tmp -o&quot;|$obj&quot; -- \$(CFLAGS)$incs -- $srcs \\
 	    2&gt;/dev/null
 	sed -e 's/^.*|//' -e 's/ \\/\\(\\\\.\\|[^ ]\\)*//g' -e '/: *\$\$/d' -e '/^\\(#.*\\| *\\)\$\$/d' \$\@.tmp &gt; \$\@
 	rm \$\@.tmp
+$obj\$(OBJ_EXT): $obj\$(DEP_EXT)
+	\$(CC) \$(CFLAGS)$incs -c -o \$\@ $srcs
 EOF
       }
       return &lt;&lt;&quot;EOF&quot;;
-$dep : $deps Makefile
-	\$(CC) -DOPENSSL_DOING_MAKEDEPEND \$(DEPFLAGS)$incs -MM -MF \$\@ -MQ $obj $srcs
-EOF
-  }
-  sub src2obj {
-      my %args = @_;
-      my $obj = $args{obj}.'$(OBJ_EXT)';
-      my $srcs = join(&quot; &quot;, @{$args{srcs}});
-      my $deps = join(&quot; &quot;, @{$args{srcs}}, @{$args{deps}});
-      my $incs = join(&quot; &quot;, map { &quot; -I&quot;.$_ } @{$args{incs}});
-      return &lt;&lt;&quot;EOF&quot;;
-$obj : $deps
+$obj\$(DEP_EXT): $deps
+	\$(CC) \$(CFLAGS)$incs -MM -MF \$\@ -MQ $obj $srcs
+$obj\$(OBJ_EXT): $obj\$(DEP_EXT)
 	\$(CC) \$(CFLAGS)$incs -c -o \$\@ $srcs
 EOF
   }
@@ -795,7 +784,7 @@ EOF
 # It's not necessary to have both as targets.  The choice falls on the
 # simplest, {libname}\$(SHLIB_EXT_SIMPLE).a for Windows POSIX layers and
 # {libname}\$(SHLIB_EXT_SIMPLE) for the Unix platforms.
-$shlibtarget : $lib\$(LIB_EXT) $deps $ordinalsfile
+$shlibtarget: $lib\$(LIB_EXT) $deps $ordinalsfile
 	\$(MAKE) -f \$(SRCDIR)/Makefile.shared -e \\
 		PLATFORM=\$(PLATFORM) \\
 		PERL=\$(PERL) SRCDIR=&quot;\$(SRCDIR)&quot; DSTDIR=&quot;$libd&quot; \\
@@ -848,7 +837,7 @@ EOF
       my $lib = $args{lib};
       my $objs = join(&quot; &quot;, map { $_.&quot;\$(OBJ_EXT)&quot; } @{$args{objs}});
       return &lt;&lt;&quot;EOF&quot;;
-$lib\$(LIB_EXT) : $objs
+$lib\$(LIB_EXT): $objs
 	\$(AR) \$\@ $objs
 	\$(RANLIB) \$\@ || echo Never mind.
 EOF
@@ -867,7 +856,7 @@ EOF
                                     &quot; -L$d -l$l&quot; } @{$args{deps}});
       my $shlib_target = $config{no_shared} ? &quot;&quot; : $target{shared_target};
       return &lt;&lt;&quot;EOF&quot;;
-$bin\$(EXE_EXT) : $objs $deps
+$bin\$(EXE_EXT): $objs $deps
 	\$(RM) $bin\$(EXE_EXT)
 	\$(MAKE) -f \$(SRCDIR)/Makefile.shared -e \\
 		PERL=\$(PERL) SRCDIR=\$(SRCDIR) \\
@@ -886,7 +875,7 @@ EOF
                                            &quot;util&quot;, &quot;dofile.pl&quot;)),
                            rel2abs($config{builddir}));
       return &lt;&lt;&quot;EOF&quot;;
-$script : $sources
+$script: $sources
 	\$(PERL) &quot;-I\$(BLDDIR)&quot; -Mconfigdata &quot;$dofile&quot; \\
 	    &quot;-o$target{build_file}&quot; $sources &gt; &quot;$script&quot;
 	chmod a+x $script
diff --git a/Configure b/Configure
index 3bf2e88..41fbf56 100755
--- a/Configure
+++ b/Configure
@@ -400,14 +400,6 @@ while ((my $first, my $second) = (shift @list, shift @list)) {
     unshift @list, $second;
 }
 
-# Construct the string of what $config{depdefines} should look like with
-# the defaults from %disabled above.  (we need this to see if we should
-# advise the user to run &quot;make depend&quot;):
-my @default_depdefines =
-    map { my $x = $_; $x =~ tr{[a-z]-}{[A-Z]_}; &quot;OPENSSL_NO_$x&quot;; }
-    grep { $disabled{$_} !~ /\(no-depdefines\)$/ }
-    sort keys %disabled;
-
 # Explicit &quot;no-...&quot; options will be collected in %disabled along with the defaults.
 # To remove something from %disabled, use &quot;enable-foo&quot;.
 # For symmetry, &quot;disable-foo&quot; is a synonym for &quot;no-foo&quot;.
@@ -429,7 +421,6 @@ my $no_sse2=0;
 my $user_cflags=&quot;&quot;;
 my @user_defines=();
 my $unified = 0;
-$config{depdefines}=[];
 $config{openssl_api_defines}=[];
 $config{openssl_algorithm_defines}=[];
 $config{openssl_thread_defines}=[];
@@ -785,7 +776,6 @@ foreach (sort (keys %disabled))
 			($ALGO,$algo) = (&quot;RMD160&quot;,&quot;rmd160&quot;) if ($algo eq &quot;ripemd&quot;);
 
 			push @{$config{openssl_algorithm_defines}}, &quot;OPENSSL_NO_$ALGO&quot;;
-			push @{$config{depdefines}}, &quot;OPENSSL_NO_$ALGO&quot;;
 			print &quot; OPENSSL_NO_$ALGO&quot;;
 
 			# fix-up crypto/directory name(s)
@@ -1097,8 +1087,6 @@ if ($^O ne &quot;VMS&quot;) {
     close(PIPE);
 }
 
-$config{depflags} =~ s/^\s*//;
-
 
 # Deal with bn_ops ###################################################
 
@@ -1134,7 +1122,6 @@ $config{cflags} =~ s/([\\\&quot;])/\\\1/g;
 if (defined($config{api})) {
     $config{openssl_api_defines} = [ &quot;OPENSSL_MIN_API=&quot;.$apitable-&gt;{$config{api}} ];
     my $apiflag = sprintf(&quot;OPENSSL_API_COMPAT=%s&quot;, $apitable-&gt;{$config{api}});
-    push @default_depdefines, $apiflag;
     push @{$config{defines}}, $apiflag;
 }
 
diff --git a/Makefile.in b/Makefile.in
index cc2c0b5..2fa7a65 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -92,7 +92,6 @@ CROSS_COMPILE= {- $config{cross_compile_prefix} -}
 CC= $(CROSS_COMPILE){- $target{cc} -}
 CFLAG={- our $cflags2 = join(&quot; &quot;,(map { &quot;-D&quot;.$_} @{$config{defines}}),&quot;-DOPENSSLDIR=\&quot;\\\&quot;\$(OPENSSLDIR)\\\&quot;\&quot;&quot;,&quot;-DENGINESDIR=\&quot;\\\&quot;\$(ENGINESDIR)\\\&quot;\&quot;&quot;) -} {- $config{cflags} -}
 CFLAG_Q={- $cflags2 =~ s|([\\&quot;])|\\$1|g; $cflags2 -} {- $config{cflags} -}
-DEPFLAG= {- join(&quot; &quot;,map { &quot;-D&quot;.$_} @{$config{depdefines}}) -}
 LDFLAG= {- $config{lflags} -}
 PLIB_LDFLAG= {- $config{plib_lflags} -}
 EX_LIBS= {- $config{ex_libs} -}
@@ -254,7 +253,6 @@ BUILDENV=	LC_ALL=C PLATFORM='$(PLATFORM)' PROCESSOR='$(PROCESSOR)'\
 		DESTDIR='$(DESTDIR)'		\
 		INSTALLTOP='$(INSTALLTOP)' OPENSSLDIR='$(OPENSSLDIR)'	\
 		LIBDIR='$(LIBDIR)'				\
-		DEPFLAG='$(DEPFLAG)'                    	\
 		SHARED_LDFLAG='$(SHARED_LDFLAG)'		\
 		SHARED_RCFLAG='$(SHARED_RCFLAG)'		\
 		ZLIB_INCLUDE='$(ZLIB_INCLUDE)' LIBZLIB='$(LIBZLIB)'	\
diff --git a/apps/Makefile.in b/apps/Makefile.in
index 5fb4f47..d49afec 100644
--- a/apps/Makefile.in
+++ b/apps/Makefile.in
@@ -111,7 +111,7 @@ uninstall:
 generate: openssl-vms.cnf progs.h
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(EXE_SRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(EXE_SRC)
 
 clean:
 	rm -f *.o *.obj *.dll lib tags core .pure .nfs* *.old *.bak fluff $(EXE)
diff --git a/crypto/Makefile.in b/crypto/Makefile.in
index 69556f8..d04f75c 100644
--- a/crypto/Makefile.in
+++ b/crypto/Makefile.in
@@ -107,7 +107,7 @@ libs:
 
 depend:
 	@[ -z &quot;$(THIS)&quot; -o -f buildinf.h ] || touch buildinf.h # fake buildinf.h if it does not exist
-	@[ -z &quot;$(THIS)&quot; ] || $(TOP)/util/domd $(CFLAG) $(INCLUDE) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	@[ -z &quot;$(THIS)&quot; ] || $(TOP)/util/domd $(CFLAG) $(INCLUDE) -- $(PROGS) $(LIBSRC)
 	@[ -z &quot;$(THIS)&quot; -o -s buildinf.h ] || rm buildinf.h
 	@[ -z &quot;$(THIS)&quot; ] || (set -e; target=depend; $(RECURSIVE_MAKE) )
 	@if [ -z &quot;$(THIS)&quot; ]; then $(MAKE) -f $(TOP)/Makefile reflect THIS=$@; fi
diff --git a/crypto/aes/Makefile.in b/crypto/aes/Makefile.in
index e87e80b..98bfb0a 100644
--- a/crypto/aes/Makefile.in
+++ b/crypto/aes/Makefile.in
@@ -101,7 +101,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl &quot;AES_ENC=$(AES_ENC)&quot; Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/asn1/Makefile.in b/crypto/asn1/Makefile.in
index c96e1fb..b6c44e7 100644
--- a/crypto/asn1/Makefile.in
+++ b/crypto/asn1/Makefile.in
@@ -72,7 +72,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/async/Makefile.in b/crypto/async/Makefile.in
index 1a89b99..6e9f465 100644
--- a/crypto/async/Makefile.in
+++ b/crypto/async/Makefile.in
@@ -53,7 +53,7 @@ install:
 	done;
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/bf/Makefile.in b/crypto/bf/Makefile.in
index 408be9f..14e2fe2 100644
--- a/crypto/bf/Makefile.in
+++ b/crypto/bf/Makefile.in
@@ -46,7 +46,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/bio/Makefile.in b/crypto/bio/Makefile.in
index 4ad411e..ff35cfb 100644
--- a/crypto/bio/Makefile.in
+++ b/crypto/bio/Makefile.in
@@ -50,7 +50,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/bn/Makefile.in b/crypto/bn/Makefile.in
index 9d45446..7574585 100644
--- a/crypto/bn/Makefile.in
+++ b/crypto/bn/Makefile.in
@@ -140,7 +140,7 @@ div:
 generate: bn_prime.h
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o asm/*.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/buffer/Makefile.in b/crypto/buffer/Makefile.in
index 595e1d8..79eeac1 100644
--- a/crypto/buffer/Makefile.in
+++ b/crypto/buffer/Makefile.in
@@ -38,7 +38,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/camellia/Makefile.in b/crypto/camellia/Makefile.in
index 787b1c6..ac3ffda 100644
--- a/crypto/camellia/Makefile.in
+++ b/crypto/camellia/Makefile.in
@@ -52,7 +52,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/cast/Makefile.in b/crypto/cast/Makefile.in
index 6cf4c5c..cd62408 100644
--- a/crypto/cast/Makefile.in
+++ b/crypto/cast/Makefile.in
@@ -46,7 +46,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/chacha/Makefile.in b/crypto/chacha/Makefile.in
index 08bfdb5..de80ba4 100644
--- a/crypto/chacha/Makefile.in
+++ b/crypto/chacha/Makefile.in
@@ -52,7 +52,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/cmac/Makefile.in b/crypto/cmac/Makefile.in
index 45c4b97..4488865 100644
--- a/crypto/cmac/Makefile.in
+++ b/crypto/cmac/Makefile.in
@@ -38,7 +38,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/cms/Makefile.in b/crypto/cms/Makefile.in
index e68438c..5e5db74 100644
--- a/crypto/cms/Makefile.in
+++ b/crypto/cms/Makefile.in
@@ -44,7 +44,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/comp/Makefile.in b/crypto/comp/Makefile.in
index 0fdf773..6db1349 100644
--- a/crypto/comp/Makefile.in
+++ b/crypto/comp/Makefile.in
@@ -41,7 +41,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/conf/Makefile.in b/crypto/conf/Makefile.in
index 501d9e9..c0c8cd8 100644
--- a/crypto/conf/Makefile.in
+++ b/crypto/conf/Makefile.in
@@ -41,7 +41,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/ct/Makefile.in b/crypto/ct/Makefile.in
index f5e51e2..5d186b8 100644
--- a/crypto/ct/Makefile.in
+++ b/crypto/ct/Makefile.in
@@ -43,7 +43,7 @@ errors:
 	$(PERL) $(TOP)/util/mkerr.pl -conf ct.ec -hprefix internal/ -write *.c
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/des/Makefile.in b/crypto/des/Makefile.in
index c2403f5..c65c05b 100644
--- a/crypto/des/Makefile.in
+++ b/crypto/des/Makefile.in
@@ -67,7 +67,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o *.obj des lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/dh/Makefile.in b/crypto/dh/Makefile.in
index 308b2a8..473ad35 100644
--- a/crypto/dh/Makefile.in
+++ b/crypto/dh/Makefile.in
@@ -40,7 +40,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o */*.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/dsa/Makefile.in b/crypto/dsa/Makefile.in
index de2468d..dd5bdbe 100644
--- a/crypto/dsa/Makefile.in
+++ b/crypto/dsa/Makefile.in
@@ -40,7 +40,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o */*.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/dso/Makefile.in b/crypto/dso/Makefile.in
index e6e4de7..1f74735 100644
--- a/crypto/dso/Makefile.in
+++ b/crypto/dso/Makefile.in
@@ -40,7 +40,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o */*.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/ec/Makefile.in b/crypto/ec/Makefile.in
index c241b13..eb68dcd 100644
--- a/crypto/ec/Makefile.in
+++ b/crypto/ec/Makefile.in
@@ -67,7 +67,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o */*.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/engine/Makefile.in b/crypto/engine/Makefile.in
index dfd4794..01dad47 100644
--- a/crypto/engine/Makefile.in
+++ b/crypto/engine/Makefile.in
@@ -48,7 +48,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o */*.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/err/Makefile.in b/crypto/err/Makefile.in
index 93ce3ea..b2ff218 100644
--- a/crypto/err/Makefile.in
+++ b/crypto/err/Makefile.in
@@ -38,7 +38,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/evp/Makefile.in b/crypto/evp/Makefile.in
index 61e8929..100de31 100644
--- a/crypto/evp/Makefile.in
+++ b/crypto/evp/Makefile.in
@@ -63,7 +63,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/hmac/Makefile.in b/crypto/hmac/Makefile.in
index fbff69e..ffb80b5 100644
--- a/crypto/hmac/Makefile.in
+++ b/crypto/hmac/Makefile.in
@@ -38,7 +38,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/idea/Makefile.in b/crypto/idea/Makefile.in
index 9a3169b..c0f12e2 100644
--- a/crypto/idea/Makefile.in
+++ b/crypto/idea/Makefile.in
@@ -38,7 +38,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/kdf/Makefile.in b/crypto/kdf/Makefile.in
index 337f3a7..f7ddfe0 100644
--- a/crypto/kdf/Makefile.in
+++ b/crypto/kdf/Makefile.in
@@ -48,7 +48,7 @@ lint:
 update: depend
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/lhash/Makefile.in b/crypto/lhash/Makefile.in
index d01faaa..a9dc3df 100644
--- a/crypto/lhash/Makefile.in
+++ b/crypto/lhash/Makefile.in
@@ -38,7 +38,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/md2/Makefile.in b/crypto/md2/Makefile.in
index 3a16c01..29eeb33 100644
--- a/crypto/md2/Makefile.in
+++ b/crypto/md2/Makefile.in
@@ -38,7 +38,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/md4/Makefile.in b/crypto/md4/Makefile.in
index aa4b647..ff5a2c1 100644
--- a/crypto/md4/Makefile.in
+++ b/crypto/md4/Makefile.in
@@ -39,7 +39,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f asm/mx86unix.cpp *.o asm/*.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/md5/Makefile.in b/crypto/md5/Makefile.in
index c597188..b1d98e1 100644
--- a/crypto/md5/Makefile.in
+++ b/crypto/md5/Makefile.in
@@ -56,7 +56,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/mdc2/Makefile.in b/crypto/mdc2/Makefile.in
index de42139..8930d02 100644
--- a/crypto/mdc2/Makefile.in
+++ b/crypto/mdc2/Makefile.in
@@ -38,7 +38,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/modes/Makefile.in b/crypto/modes/Makefile.in
index 1391d72..4d3c0b0 100644
--- a/crypto/modes/Makefile.in
+++ b/crypto/modes/Makefile.in
@@ -71,7 +71,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o */*.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/objects/Makefile.in b/crypto/objects/Makefile.in
index a733836..394da3b 100644
--- a/crypto/objects/Makefile.in
+++ b/crypto/objects/Makefile.in
@@ -53,7 +53,7 @@ files:
 generate: obj_dat.h ../../include/openssl/obj_mac.h obj_xref.h
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/ocsp/Makefile.in b/crypto/ocsp/Makefile.in
index ae5f605..26d9774 100644
--- a/crypto/ocsp/Makefile.in
+++ b/crypto/ocsp/Makefile.in
@@ -41,7 +41,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/pem/Makefile.in b/crypto/pem/Makefile.in
index d30c0dd..8a23ef6 100644
--- a/crypto/pem/Makefile.in
+++ b/crypto/pem/Makefile.in
@@ -41,7 +41,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/pkcs12/Makefile.in b/crypto/pkcs12/Makefile.in
index 1b8d80e..651f13f 100644
--- a/crypto/pkcs12/Makefile.in
+++ b/crypto/pkcs12/Makefile.in
@@ -44,7 +44,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/pkcs7/Makefile.in b/crypto/pkcs7/Makefile.in
index 973b982..a58e323 100644
--- a/crypto/pkcs7/Makefile.in
+++ b/crypto/pkcs7/Makefile.in
@@ -45,7 +45,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff enc dec sign verify
diff --git a/crypto/poly1305/Makefile.in b/crypto/poly1305/Makefile.in
index d027eed..8735b79 100644
--- a/crypto/poly1305/Makefile.in
+++ b/crypto/poly1305/Makefile.in
@@ -56,7 +56,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/rand/Makefile.in b/crypto/rand/Makefile.in
index e408b6b..bf9ff3e 100644
--- a/crypto/rand/Makefile.in
+++ b/crypto/rand/Makefile.in
@@ -40,7 +40,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/rc2/Makefile.in b/crypto/rc2/Makefile.in
index 88f20a5..3eaf4e3 100644
--- a/crypto/rc2/Makefile.in
+++ b/crypto/rc2/Makefile.in
@@ -38,7 +38,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/rc4/Makefile.in b/crypto/rc4/Makefile.in
index df53b27..f0f72d1 100644
--- a/crypto/rc4/Makefile.in
+++ b/crypto/rc4/Makefile.in
@@ -66,7 +66,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/rc5/Makefile.in b/crypto/rc5/Makefile.in
index bd8e8b2..9efe7f9 100644
--- a/crypto/rc5/Makefile.in
+++ b/crypto/rc5/Makefile.in
@@ -46,7 +46,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/ripemd/Makefile.in b/crypto/ripemd/Makefile.in
index 8679016..3aed997 100644
--- a/crypto/ripemd/Makefile.in
+++ b/crypto/ripemd/Makefile.in
@@ -46,7 +46,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/rsa/Makefile.in b/crypto/rsa/Makefile.in
index 21d5790..8779cc7 100644
--- a/crypto/rsa/Makefile.in
+++ b/crypto/rsa/Makefile.in
@@ -44,7 +44,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o */*.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/seed/Makefile.in b/crypto/seed/Makefile.in
index 2495639..a6c85af 100644
--- a/crypto/seed/Makefile.in
+++ b/crypto/seed/Makefile.in
@@ -39,7 +39,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/sha/Makefile.in b/crypto/sha/Makefile.in
index 41b2c8b..2675869 100644
--- a/crypto/sha/Makefile.in
+++ b/crypto/sha/Makefile.in
@@ -101,7 +101,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/srp/Makefile.in b/crypto/srp/Makefile.in
index eded0e7..8b0c9c7 100644
--- a/crypto/srp/Makefile.in
+++ b/crypto/srp/Makefile.in
@@ -34,7 +34,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/stack/Makefile.in b/crypto/stack/Makefile.in
index dc9fec4..22630c2 100644
--- a/crypto/stack/Makefile.in
+++ b/crypto/stack/Makefile.in
@@ -38,7 +38,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/ts/Makefile.in b/crypto/ts/Makefile.in
index db034ba..f5d40b9 100644
--- a/crypto/ts/Makefile.in
+++ b/crypto/ts/Makefile.in
@@ -48,7 +48,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff enc dec sign verify
diff --git a/crypto/txt_db/Makefile.in b/crypto/txt_db/Makefile.in
index 036333c..3229d52 100644
--- a/crypto/txt_db/Makefile.in
+++ b/crypto/txt_db/Makefile.in
@@ -38,7 +38,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/ui/Makefile.in b/crypto/ui/Makefile.in
index ecca10d..c8f327a 100644
--- a/crypto/ui/Makefile.in
+++ b/crypto/ui/Makefile.in
@@ -38,7 +38,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o */*.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/whrlpool/Makefile.in b/crypto/whrlpool/Makefile.in
index abeae3b..6027883 100644
--- a/crypto/whrlpool/Makefile.in
+++ b/crypto/whrlpool/Makefile.in
@@ -51,7 +51,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.s *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/x509/Makefile.in b/crypto/x509/Makefile.in
index c3691f2..440ff72 100644
--- a/crypto/x509/Makefile.in
+++ b/crypto/x509/Makefile.in
@@ -52,7 +52,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/crypto/x509v3/Makefile.in b/crypto/x509v3/Makefile.in
index c5edce9..6dec02b 100644
--- a/crypto/x509v3/Makefile.in
+++ b/crypto/x509v3/Makefile.in
@@ -48,7 +48,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f *.o *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/engines/Makefile.in b/engines/Makefile.in
index e4204ee..047b6b4 100644
--- a/engines/Makefile.in
+++ b/engines/Makefile.in
@@ -116,7 +116,7 @@ errors:
 	done
 
 depend:
-	@[ -z &quot;$(THIS)&quot; ] || $(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC) $(TESTLIBSRC)
+	@[ -z &quot;$(THIS)&quot; ] || $(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC) $(TESTLIBSRC)
 	@[ -z &quot;$(THIS)&quot; ] || (set -e; target=depend; $(RECURSIVE_MAKE) )
 
 clean:
diff --git a/include/openssl/opensslconf.h.in b/include/openssl/opensslconf.h.in
index e5f3ccd..54a1354 100644
--- a/include/openssl/opensslconf.h.in
+++ b/include/openssl/opensslconf.h.in
@@ -42,14 +42,6 @@ extern &quot;C&quot; {
 	$OUT .= &quot;# endif\n&quot;;
       }
     }
-    if ($OUT) {
-        $OUT = &lt;&lt;&quot;EOF&quot;;
-#ifndef OPENSSL_DOING_MAKEDEPEND
-
-$OUT
-#endif /* OPENSSL_DOING_MAKEDEPEND */
-EOF
-    }
     &quot;&quot;;
 -}
 
diff --git a/ssl/Makefile.in b/ssl/Makefile.in
index cf507ae..e56ffa0 100644
--- a/ssl/Makefile.in
+++ b/ssl/Makefile.in
@@ -72,7 +72,7 @@ files:
 	$(PERL) $(TOP)/util/files.pl Makefile &gt;&gt; $(TOP)/MINFO
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(LIBSRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(LIBSRC)
 
 clean:
 	rm -f $(LIBOBJ) *.obj lib tags core .pure .nfs* *.old *.bak fluff
diff --git a/test/Makefile.in b/test/Makefile.in
index 0a75304..767948c 100644
--- a/test/Makefile.in
+++ b/test/Makefile.in
@@ -165,7 +165,7 @@ apps:
 	@(cd ..; $(MAKE) DIRS=apps all)
 
 depend:
-	$(TOP)/util/domd $(CFLAG) $(INCLUDES) $(DEPFLAG) -- $(PROGS) $(SRC)
+	$(TOP)/util/domd $(CFLAG) $(INCLUDES) -- $(PROGS) $(SRC)
 
 clean:
 	rm -f .rnd tmp.bntest tmp.bctest *.o *.obj *.dll lib tags core .pure .nfs* *.old *.bak fluff $(EXE) *.ss *.srl log *.log dummytest
diff --git a/util/domd.in b/util/domd.in
index 20d3474..1569c35 100755
--- a/util/domd.in
+++ b/util/domd.in
@@ -9,7 +9,7 @@ case &quot;${MAKEDEPEND}&quot; in
 cat)
     ;;
 makedepend)
-    ${MAKEDEPEND} -DOPENSSL_DOING_MAKEDEPEND $@ || exit 1
+    ${MAKEDEPEND} $@ || exit 1
     ;;
 *)
     args=&quot;-Werror -MM&quot;
@@ -20,7 +20,7 @@ makedepend)
         shift
     done
     sed -e '/DO NOT DELETE THIS LINE/q' Makefile &gt;Makefile.tmp
-    ${MAKEDEPEND} -DOPENSSL_DOING_MAKEDEPEND $args &gt;&gt;Makefile.tmp || exit 1
+    ${MAKEDEPEND} $args &gt;&gt;Makefile.tmp || exit 1
     mv Makefile.tmp Makefile
     ;;
 esac
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004241.html">[openssl-commits] [openssl]  master update
</A></li>
	<LI>Next message: <A HREF="004244.html">[openssl-commits] [openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4242">[ date ]</a>
              <a href="thread.html#4242">[ thread ]</a>
              <a href="subject.html#4242">[ subject ]</a>
              <a href="author.html#4242">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
