<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-commits] [openssl]  OpenSSL_1_0_2-stable update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2016-November/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20OpenSSL_1_0_2-stable%20update&In-Reply-To=%3C1478106406.560950.22684.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011278.html">
   <LINK REL="Next"  HREF="011294.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-commits] [openssl]  OpenSSL_1_0_2-stable update</H1>
    <B>Matt Caswell</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl-commits%5D%20%5Bopenssl%5D%20%20OpenSSL_1_0_2-stable%20update&In-Reply-To=%3C1478106406.560950.22684.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl-commits] [openssl]  OpenSSL_1_0_2-stable update">matt at openssl.org
       </A><BR>
    <I>Wed Nov  2 17:06:46 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="011278.html">[openssl-commits] [openssl]  OpenSSL_1_0_2-stable update
</A></li>
        <LI>Next message: <A HREF="011294.html">[openssl-commits] [openssl]  OpenSSL_1_0_2-stable update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11287">[ date ]</a>
              <a href="thread.html#11287">[ thread ]</a>
              <a href="subject.html#11287">[ subject ]</a>
              <a href="author.html#11287">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch OpenSSL_1_0_2-stable has been updated
       via  ad69a30323cbc6723c2387d6ce546a51b10c42d0 (commit)
      from  ba2bf831c0f0b3468acbd433957f4c46c20cf43d (commit)


- Log -----------------------------------------------------------------
commit ad69a30323cbc6723c2387d6ce546a51b10c42d0
Author: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">matt at openssl.org</A>&gt;
Date:   Wed Nov 2 15:36:06 2016 +0000

    Fix heartbeat_test
    
    The heartbeat_test reaches into the internals of libssl and calls some
    internal functions. It then checks the return value to check its what it
    expected. However commit fa4c37457 changed the return value of these
    internal functions, and now the test is failing.
    
    The solution is to update the test to look for the new return value.
    
    Reviewed-by: Richard Levitte &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">levitte at openssl.org</A>&gt;

-----------------------------------------------------------------------

Summary of changes:
 ssl/heartbeat_test.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/ssl/heartbeat_test.c b/ssl/heartbeat_test.c
index 7623c36..493bf0c 100644
--- a/ssl/heartbeat_test.c
+++ b/ssl/heartbeat_test.c
@@ -278,7 +278,7 @@ static int test_dtls1_not_bleeding()
 
     fixture.payload = &amp;payload_buf[0];
     fixture.sent_payload_len = payload_buf_len;
-    fixture.expected_return_value = 0;
+    fixture.expected_return_value = -1;
     fixture.expected_payload_len = payload_buf_len;
     fixture.expected_return_payload =
         &quot;Not bleeding, sixteen spaces of padding&quot;;
@@ -301,7 +301,7 @@ static int test_dtls1_not_bleeding_empty_payload()
 
     fixture.payload = &amp;payload_buf[0];
     fixture.sent_payload_len = payload_buf_len;
-    fixture.expected_return_value = 0;
+    fixture.expected_return_value = -1;
     fixture.expected_payload_len = payload_buf_len;
     fixture.expected_return_payload = &quot;&quot;;
     EXECUTE_HEARTBEAT_TEST();
@@ -370,7 +370,7 @@ static int test_tls1_not_bleeding()
 
     fixture.payload = &amp;payload_buf[0];
     fixture.sent_payload_len = payload_buf_len;
-    fixture.expected_return_value = 0;
+    fixture.expected_return_value = -1;
     fixture.expected_payload_len = payload_buf_len;
     fixture.expected_return_payload =
         &quot;Not bleeding, sixteen spaces of padding&quot;;
@@ -393,7 +393,7 @@ static int test_tls1_not_bleeding_empty_payload()
 
     fixture.payload = &amp;payload_buf[0];
     fixture.sent_payload_len = payload_buf_len;
-    fixture.expected_return_value = 0;
+    fixture.expected_return_value = -1;
     fixture.expected_payload_len = payload_buf_len;
     fixture.expected_return_payload = &quot;&quot;;
     EXECUTE_HEARTBEAT_TEST();
</PRE>































































































































































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011278.html">[openssl-commits] [openssl]  OpenSSL_1_0_2-stable update
</A></li>
	<LI>Next message: <A HREF="011294.html">[openssl-commits] [openssl]  OpenSSL_1_0_2-stable update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11287">[ date ]</a>
              <a href="thread.html#11287">[ thread ]</a>
              <a href="subject.html#11287">[ subject ]</a>
              <a href="author.html#11287">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
