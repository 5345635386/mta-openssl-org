<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl]  master update
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-commits/2021-June/index.html" >
   <LINK REL="made" HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1623129320.870426.5762.nullmailer%40dev.openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="034629.html">
   <LINK REL="Next"  HREF="034631.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl]  master update</H1>
    <B>Dr. Paul Dale</B> 
    <A HREF="mailto:openssl-commits%40openssl.org?Subject=Re%3A%20%5Bopenssl%5D%20%20master%20update&In-Reply-To=%3C1623129320.870426.5762.nullmailer%40dev.openssl.org%3E"
       TITLE="[openssl]  master update">pauli at openssl.org
       </A><BR>
    <I>Tue Jun  8 05:15:20 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="034629.html">[openssl]  master update
</A></li>
        <LI>Next message: <A HREF="034631.html">[openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34630">[ date ]</a>
              <a href="thread.html#34630">[ thread ]</a>
              <a href="subject.html#34630">[ subject ]</a>
              <a href="author.html#34630">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The branch master has been updated
       via  5135a9bd9280301a24640a6bf5125c144e28cfdd (commit)
      from  063e019738b90fcf0a3ab7b1654ce8976805b0b3 (commit)


- Log -----------------------------------------------------------------
commit 5135a9bd9280301a24640a6bf5125c144e28cfdd
Author: Shane Lontis &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">shane.lontis at oracle.com</A>&gt;
Date:   Thu Jun 3 10:54:13 2021 +1000

    Document missing EC/SM2 params
    
    Fixes #15548
    
    Document OSSL_PKEY_PARAM_EC_PUB_X, OSSL_PKEY_PARAM_EC_PUB_Y and OSSL_PKEY_PARAM_DEFAULT_DIGEST
    Added a section related to parameters for SM2.
    
    Reviewed-by: Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">tomas at openssl.org</A>&gt;
    Reviewed-by: Paul Dale &lt;<A HREF="../../../mailman/listinfo/openssl-commits.html">pauli at openssl.org</A>&gt;
    (Merged from <A HREF="https://github.com/openssl/openssl/pull/15601">https://github.com/openssl/openssl/pull/15601</A>)

-----------------------------------------------------------------------

Summary of changes:
 doc/man7/EVP_PKEY-EC.pod                     | 13 +++++++++++++
 doc/man7/EVP_PKEY-SM2.pod                    | 20 +++++++++++++++++++-
 providers/implementations/keymgmt/ec_kmgmt.c |  4 ++--
 3 files changed, 34 insertions(+), 3 deletions(-)

diff --git a/doc/man7/EVP_PKEY-EC.pod b/doc/man7/EVP_PKEY-EC.pod
index 82892492e3..31d92bf8a1 100644
--- a/doc/man7/EVP_PKEY-EC.pod
+++ b/doc/man7/EVP_PKEY-EC.pod
@@ -122,6 +122,19 @@ Used for getting and setting the encoding of an EC public key. The public key
 is expected to be a point conforming to Sec. 2.3.4 of the SECG SEC 1 (&quot;Elliptic
 Curve Cryptography&quot;) standard.
 
+=item &quot;qx&quot; (B&lt;OSSL_PKEY_PARAM_EC_PUB_X&gt;) &lt;unsigned integer&gt;
+
+Used for getting the EC public key X component.
+
+=item &quot;qy&quot; (B&lt;OSSL_PKEY_PARAM_EC_PUB_Y&gt;) &lt;unsigned integer&gt;
+
+Used for getting the EC public key Y component.
+
+=item (B&lt;OSSL_PKEY_PARAM_DEFAULT_DIGEST&gt;) &lt;UTF8 string&gt;
+
+Getter that returns the default digest name.
+(Currently returns &quot;SHA256&quot; as of OpenSSL 3.0).
+
 =back
 
 The following Gettable types are also available for the built-in EC algorithm:
diff --git a/doc/man7/EVP_PKEY-SM2.pod b/doc/man7/EVP_PKEY-SM2.pod
index bb6258c873..4f0e240f3f 100644
--- a/doc/man7/EVP_PKEY-SM2.pod
+++ b/doc/man7/EVP_PKEY-SM2.pod
@@ -15,6 +15,24 @@ both signature and encryption schemes via the EVP interface.
 When doing the B&lt;SM2&gt; signature algorithm, it requires a distinguishing identifier
 to form the message prefix which is hashed before the real message is hashed.
 
+=head2 Common SM2 parameters
+
+SM2 uses the parameters defined in L&lt;EVP_PKEY-EC(7)/Common EC parameters&gt;.
+The following parameters are different:
+
+=over 4
+
+=item &quot;cofactor&quot; (B&lt;OSSL_PKEY_PARAM_EC_COFACTOR&gt;) &lt;unsigned integer&gt;
+
+This parameter is ignored for B&lt;SM2&gt;.
+
+=item (B&lt;OSSL_PKEY_PARAM_DEFAULT_DIGEST&gt;) &lt;UTF8 string&gt;
+
+Getter that returns the default digest name.
+(Currently returns &quot;SM3&quot; as of OpenSSL 3.0).
+
+=back
+
 =head1 NOTES
 
 B&lt;SM2&gt; signatures can be generated by using the 'DigestSign' series of APIs, for
@@ -63,7 +81,7 @@ L&lt;EVP_MD_CTX_set_pkey_ctx(3)&gt;
 
 =head1 COPYRIGHT
 
-Copyright 2018-2020 The OpenSSL Project Authors. All Rights Reserved.
+Copyright 2018-2021 The OpenSSL Project Authors. All Rights Reserved.
 
 Licensed under the Apache License 2.0 (the &quot;License&quot;).  You may not use
 this file except in compliance with the License.  You can obtain a copy
diff --git a/providers/implementations/keymgmt/ec_kmgmt.c b/providers/implementations/keymgmt/ec_kmgmt.c
index 6cd9aa3d38..24d4df543b 100644
--- a/providers/implementations/keymgmt/ec_kmgmt.c
+++ b/providers/implementations/keymgmt/ec_kmgmt.c
@@ -763,8 +763,8 @@ static const OSSL_PARAM ec_known_gettable_params[] = {
     EC_IMEXPORTABLE_DOM_PARAMETERS,
     EC2M_GETTABLE_DOM_PARAMS
     EC_IMEXPORTABLE_PUBLIC_KEY,
-    OSSL_PARAM_octet_string(OSSL_PKEY_PARAM_EC_PUB_X, NULL, 0),
-    OSSL_PARAM_octet_string(OSSL_PKEY_PARAM_EC_PUB_Y, NULL, 0),
+    OSSL_PARAM_BN(OSSL_PKEY_PARAM_EC_PUB_X, NULL, 0),
+    OSSL_PARAM_BN(OSSL_PKEY_PARAM_EC_PUB_Y, NULL, 0),
     EC_IMEXPORTABLE_PRIVATE_KEY,
     EC_IMEXPORTABLE_OTHER_PARAMETERS,
     OSSL_PARAM_END
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="034629.html">[openssl]  master update
</A></li>
	<LI>Next message: <A HREF="034631.html">[openssl]  master update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#34630">[ date ]</a>
              <a href="thread.html#34630">[ thread ]</a>
              <a href="subject.html#34630">[ subject ]</a>
              <a href="author.html#34630">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-commits.html">More information about the openssl-commits
mailing list</a><br>
</body></html>
