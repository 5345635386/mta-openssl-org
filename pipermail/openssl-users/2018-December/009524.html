<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] PerlASM for x64
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2018-December/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20PerlASM%20for%20x64&In-Reply-To=%3C98f571de-f47e-6259-f1ac-792ebed3ed54%40wisemo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009511.html">
   <LINK REL="Next"  HREF="009531.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] PerlASM for x64</H1>
    <B>Jakob Bohm</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20PerlASM%20for%20x64&In-Reply-To=%3C98f571de-f47e-6259-f1ac-792ebed3ed54%40wisemo.com%3E"
       TITLE="[openssl-users] PerlASM for x64">jb-openssl at wisemo.com
       </A><BR>
    <I>Thu Dec 27 09:12:34 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="009511.html">[openssl-users] PerlASM for x64
</A></li>
        <LI>Next message: <A HREF="009531.html">[openssl-users] PerlASM for x64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9524">[ date ]</a>
              <a href="thread.html#9524">[ thread ]</a>
              <a href="subject.html#9524">[ subject ]</a>
              <a href="author.html#9524">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/12/2018 19:08, Richard Levitte wrote:
&gt;<i> In message &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">3fc4d543-d71a-8c22-566a-d902c4f7da03 at gmail.com</A>&gt; on Mon, 24 Dec 2018 13:17:51 +0100, Gisle Vanem &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">gisle.vanem at gmail.com</A>&gt; said:
</I>&gt;<i>
</I>&gt;&gt;<i> Richard Levitte wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I experimented some more. I figured the &quot;auto&quot; does not work.
</I>&gt;&gt;&gt;&gt;<i> But this works:
</I>&gt;&gt;&gt;&gt;<i>     perl crypto\aes\asm\aesni-x86_64.pl nasm &gt; tmp-file.s
</I>&gt;&gt;&gt;&gt;<i>     diff tmp-file.s crypto\aes\aesni-x86_64.asm
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> No diffs.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Why does the the generation of .asm-files be so damn hard to
</I>&gt;&gt;&gt;&gt;<i> figure out? Some cmd-line help to show what &quot;auto&quot; does would
</I>&gt;&gt;&gt;&gt;<i> be nice.
</I>&gt;&gt;&gt;<i> The &quot;auto&quot; flavor takes note of the output file extension.  .asm vs .s
</I>&gt;&gt;&gt;<i> in this case.
</I>&gt;&gt;<i> Thank, but it was a typo in my 1st email. The correct command was
</I>&gt;&gt;<i> with a redirect:
</I>&gt;&gt;<i>    set ASM=nasm
</I>&gt;&gt;<i>    f:\util\StrawberryPerl\perl\bin\perl crypto\aes\asm\aesni-x86_64.pl
</I>&gt;&gt;<i>    auto &gt; tmp-file.s
</I>&gt;<i> That isn't a correct use of the script.  All of the assembler perl
</I>&gt;<i> scripts expect the output file as last argument, and the x86_64 ones
</I>&gt;<i> do look at the output file and determines that if the extension is
</I>&gt;<i> '.asm', nasm assembler is expected, otherwise you will get gas
</I>&gt;<i> assembler.  So if you redirect, the result is, mildly put, undefined.
</I>&gt;<i>
</I>&gt;<i> Thank you, though...  it is time the assembler stuff gets documented,
</I>&gt;<i> and I think I'm in a fairly good position to do so.  I will not
</I>&gt;<i> promise that it will happen fast, but it is in my backlog.
</I>As a trivial (and easily audited first patch) perhaps make the
common code error out with a usage message to STDERR if the
command line makes no sense (no output file, wrong argument
count, auto with unrecognized file extension).&#160; Ideally this
would be in the common perl module(s), not in individual
assembler files.

Remember that keeping every patch easily audited by the wider
community is essential to the trustworthiness of OpenSSL, the
great reformatting a while back was a major mistake in this
regard.

Enjoy

Jakob
-- 
Jakob Bohm, CIO, Partner, WiseMo A/S.  <A HREF="https://www.wisemo.com">https://www.wisemo.com</A>
Transformervej 29, 2860 S&#248;borg, Denmark.  Direct +45 31 13 16 10
This public discussion message is non-binding and may contain errors.
WiseMo - Remote Service Management for PCs, Phones and Embedded

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009511.html">[openssl-users] PerlASM for x64
</A></li>
	<LI>Next message: <A HREF="009531.html">[openssl-users] PerlASM for x64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9524">[ date ]</a>
              <a href="thread.html#9524">[ thread ]</a>
              <a href="subject.html#9524">[ subject ]</a>
              <a href="author.html#9524">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
