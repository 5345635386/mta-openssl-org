<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Self-signed error when using	SSL_CTX_load_verify_locations CApath
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2018-December/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Self-signed%20error%20when%20using%0A%09SSL_CTX_load_verify_locations%20CApath&In-Reply-To=%3C051001d48aa1%242e69cb40%248b3d61c0%24%40mcn.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009349.html">
   <LINK REL="Next"  HREF="009358.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Self-signed error when using	SSL_CTX_load_verify_locations CApath</H1>
    <B>Charles Mills</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Self-signed%20error%20when%20using%0A%09SSL_CTX_load_verify_locations%20CApath&In-Reply-To=%3C051001d48aa1%242e69cb40%248b3d61c0%24%40mcn.org%3E"
       TITLE="[openssl-users] Self-signed error when using	SSL_CTX_load_verify_locations CApath">charlesm at mcn.org
       </A><BR>
    <I>Mon Dec  3 00:43:17 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="009349.html">[openssl-users] Self-signed error when using SSL_CTX_load_verify_locations CApath
</A></li>
        <LI>Next message: <A HREF="009358.html">[openssl-users] Self-signed error when using SSL_CTX_load_verify_locations CApath
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9355">[ date ]</a>
              <a href="thread.html#9355">[ thread ]</a>
              <a href="subject.html#9355">[ subject ]</a>
              <a href="author.html#9355">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry, I do not have a packet capture tool configured.

I have a verify callback with a lot of trace messages. I can see that it is
only entered once; X509_STORE_CTX_get_error_depth() is 1.

Does that tell us anything useful?

Charles


-----Original Message-----
From: openssl-users [mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-bounces at openssl.org</A>] On Behalf Of
Kyle Hamilton
Sent: Saturday, December 1, 2018 10:29 PM
To: openssl-users
Subject: Re: [openssl-users] Self-signed error when using
SSL_CTX_load_verify_locations CApath

Wireshark and other packet capture tools can help you determine
exactly what's in the chain sent by the client.  If the self-signed
root isn't being sent, then the &quot;self-signed certificate in
certificate chain&quot; error should never have been sent, and a bug report
on that issue would be appropriate.

If the root is being sent, though, having some idea of what you're
doing when constructing your sessions could help us to figure out why
it is when you didn't intend it to be.

-Kyle H
On Sat, Dec 1, 2018 at 1:47 PM Charles Mills &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">charlesm at mcn.org</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> &gt; It was found in the chain of certificates sent by the client to the
</I>&gt;<i> &gt; server for validation
</I>&gt;<i>
</I>&gt;<i> Again, I could be wrong but that is my point. I do not think the client is
</I>&gt;<i> sending a chain of certificates, but rather only one, the CA-signed client
</I>&gt;<i> certificate. (I wrote and configured the client, and generated the
</I>&gt;<i> certificate, and loaded it into the certificate store.)
</I>&gt;<i>
</I>&gt;<i> Charles
</I>&gt;<i>
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: openssl-users [mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-bounces at openssl.org</A>] On Behalf
</I>Of
&gt;<i> Viktor Dukhovni
</I>&gt;<i> Sent: Saturday, December 1, 2018 12:47 PM
</I>&gt;<i> To: <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>
</I>&gt;<i> Subject: Re: [openssl-users] Self-signed error when using
</I>&gt;<i> SSL_CTX_load_verify_locations CApath
</I>&gt;<i>
</I>&gt;<i> On Sat, Dec 01, 2018 at 12:29:42PM -0800, Charles Mills wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; I could easily be wrong -- you guys know more about certificates than I
</I>&gt;<i> ever
</I>&gt;<i> &gt; will -- but I do not *think* there is any self-signed certificate in
</I>this
&gt;<i> &gt; scenario. There should be exactly two certificates in this discussion:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 1. The client certificate. It is not self-signed (in the correct sense
</I>of
&gt;<i> &gt; the term, as opposed to the erroneous popular sense): it is signed by my
</I>&gt;<i> &gt; &quot;in-house&quot; CA.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2. The CA certificate. Yes, it is a root and self-signed, but you didn't
</I>&gt;<i> &gt; find it, right?
</I>&gt;<i>
</I>&gt;<i> You seem to be stuck on a narrow meaning of the word &quot;found&quot;.  The
</I>&gt;<i> self-signed certificate *was* found, but not in the trust-store.
</I>&gt;<i>
</I>&gt;<i> It was found in the chain of certificates sent by the client to the
</I>&gt;<i> server for validation.  That's what the error message is telling
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> openssl-users mailing list
</I>&gt;<i> To unsubscribe: <A HREF="../../../mailman/listinfo/openssl-users.html">https://mta.openssl.org/mailman/listinfo/openssl-users</A>
</I>-- 
openssl-users mailing list
To unsubscribe: <A HREF="../../../mailman/listinfo/openssl-users.html">https://mta.openssl.org/mailman/listinfo/openssl-users</A>

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009349.html">[openssl-users] Self-signed error when using SSL_CTX_load_verify_locations CApath
</A></li>
	<LI>Next message: <A HREF="009358.html">[openssl-users] Self-signed error when using SSL_CTX_load_verify_locations CApath
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9355">[ date ]</a>
              <a href="thread.html#9355">[ thread ]</a>
              <a href="subject.html#9355">[ subject ]</a>
              <a href="author.html#9355">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
