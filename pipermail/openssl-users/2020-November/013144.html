<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> test cases failed after enabling ktls
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2020-November/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20test%20cases%20failed%20after%20enabling%20ktls&In-Reply-To=%3C172291605513240%40mail.yandex.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013143.html">
   <LINK REL="Next"  HREF="013147.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>test cases failed after enabling ktls</H1>
    <B>rui zang</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20test%20cases%20failed%20after%20enabling%20ktls&In-Reply-To=%3C172291605513240%40mail.yandex.com%3E"
       TITLE="test cases failed after enabling ktls">rui.zang at yandex.com
       </A><BR>
    <I>Mon Nov 16 07:56:19 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="013143.html">test cases failed after enabling ktls
</A></li>
        <LI>Next message: <A HREF="013147.html">test cases failed after enabling ktls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13144">[ date ]</a>
              <a href="thread.html#13144">[ thread ]</a>
              <a href="subject.html#13144">[ subject ]</a>
              <a href="author.html#13144">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Resend in plain text.
======================================

Greetings,
 
I am trying openssl+ktls on ubuntu 20.04.
I have tried openssl-3.0.0-alpha8 from <A HREF="https://www.openssl.org/source/openssl-3.0.0-alpha8.tar.gz">https://www.openssl.org/source/openssl-3.0.0-alpha8.tar.gz</A> 
and also the current master branch from the github repo.
The kernels I have tried are v5.9 and v5.9.8.
On every combination, same group of test case could not pass.
 
Test Summary Report
-------------------
70-test_key_share.t              (Wstat: 1536 Tests: 22 Failed: 6)
  Failed tests:  1, 4, 6-7, 13-14
  Non-zero exit status: 6
70-test_sslextension.t           (Wstat: 256 Tests: 8 Failed: 1)
  Failed test:  8
  Non-zero exit status: 1
70-test_sslrecords.t             (Wstat: 768 Tests: 20 Failed: 3)
  Failed tests:  18-20
  Non-zero exit status: 3
70-test_sslsigalgs.t             (Wstat: 1536 Tests: 26 Failed: 6)
  Failed tests:  1, 6, 22-23, 25-26
  Non-zero exit status: 6
70-test_sslsignature.t           (Wstat: 256 Tests: 4 Failed: 1)
  Failed test:  1
  Non-zero exit status: 1
70-test_sslversions.t            (Wstat: 512 Tests: 8 Failed: 2)
  Failed tests:  5, 7
  Non-zero exit status: 2
70-test_tls13cookie.t            (Wstat: 512 Tests: 2 Failed: 2)
  Failed tests:  1-2
  Non-zero exit status: 2
70-test_tls13downgrade.t         (Wstat: 256 Tests: 6 Failed: 1)
  Failed test:  6
  Non-zero exit status: 1
70-test_tls13kexmodes.t          (Wstat: 7424 Tests: 1 Failed: 1)
  Failed test:  1
  Non-zero exit status: 29
  Parse errors: Bad plan.  You planned 11 tests but ran 1.
70-test_tls13messages.t          (Wstat: 7424 Tests: 1 Failed: 0)
  Non-zero exit status: 29
  Parse errors: Bad plan.  You planned 17 tests but ran 1.
70-test_tls13psk.t               (Wstat: 7424 Tests: 1 Failed: 1)
  Failed test:  1
  Non-zero exit status: 29
  Parse errors: Bad plan.  You planned 5 tests but ran 1.
70-test_tlsextms.t               (Wstat: 256 Tests: 10 Failed: 1)
  Failed test:  10
  Non-zero exit status: 1
Files=223, Tests=3571, 615 wallclock secs (11.00 usr  0.93 sys + 343.65 cusr 84.69 csys = 440.27 CPU)
Result: FAIL
make[1]: *** [Makefile:3197: _tests] Error 1
make[1]: Leaving directory '/home/ubuntu/openssl'
make: *** [Makefile:3194: tests] Error 2
 
Complete `make test` output  (kernel v5.9.8 + openssl master) is copied here <A HREF="https://cl1p.net/openssl_ktls_make_test_failure">https://cl1p.net/openssl_ktls_make_test_failure</A> (due to the 100K limit of this mailing list)
I am sure that the kernel tls module is loaded correctly since /proc/net/tls_stat is exposed correctly and I can see the counters increasing while doing `make test`.
So is this supposed to happen? What should I do to make ktls work?
 
Thanks,
Rui Zang
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013143.html">test cases failed after enabling ktls
</A></li>
	<LI>Next message: <A HREF="013147.html">test cases failed after enabling ktls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13144">[ date ]</a>
              <a href="thread.html#13144">[ thread ]</a>
              <a href="subject.html#13144">[ subject ]</a>
              <a href="author.html#13144">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
