<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> test cases failed after enabling ktls
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2020-November/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20test%20cases%20failed%20after%20enabling%20ktls&In-Reply-To=%3C1089471605582408%40mail.yandex.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013147.html">
   <LINK REL="Next"  HREF="013148.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>test cases failed after enabling ktls</H1>
    <B>rui zang</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20test%20cases%20failed%20after%20enabling%20ktls&In-Reply-To=%3C1089471605582408%40mail.yandex.com%3E"
       TITLE="test cases failed after enabling ktls">rui.zang at yandex.com
       </A><BR>
    <I>Tue Nov 17 03:08:27 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="013147.html">test cases failed after enabling ktls
</A></li>
        <LI>Next message: <A HREF="013148.html">Handling BIO errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13149">[ date ]</a>
              <a href="thread.html#13149">[ thread ]</a>
              <a href="subject.html#13149">[ subject ]</a>
              <a href="author.html#13149">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks, please check out <A HREF="https://github.com/openssl/openssl/issues/13424">https://github.com/openssl/openssl/issues/13424</A>

Regards,
Rui Zang


16.11.2020, 19:45, &quot;Matt Caswell&quot; &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">matt at openssl.org</A>&gt;:
&gt;<i> On 16/11/2020 07:56, rui zang wrote:
</I>&gt;&gt;<i> &#160;Resend in plain text.
</I>&gt;&gt;<i> &#160;======================================
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;Greetings,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;I am trying openssl+ktls on ubuntu 20.04.
</I>&gt;&gt;<i> &#160;I have tried openssl-3.0.0-alpha8 from <A HREF="https://www.openssl.org/source/openssl-3.0.0-alpha8.tar.gz">https://www.openssl.org/source/openssl-3.0.0-alpha8.tar.gz</A>
</I>&gt;&gt;<i> &#160;and also the current master branch from the github repo.
</I>&gt;&gt;<i> &#160;The kernels I have tried are v5.9 and v5.9.8.
</I>&gt;&gt;<i> &#160;On every combination, same group of test case could not pass.
</I>&gt;<i>
</I>&gt;<i> Please can you open this as a github issue?
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i> Matt
</I>&gt;<i>
</I>&gt;&gt;<i> &#160;Test Summary Report
</I>&gt;&gt;<i> &#160;-------------------
</I>&gt;&gt;<i> &#160;70-test_key_share.t (Wstat: 1536 Tests: 22 Failed: 6)
</I>&gt;&gt;<i> &#160;&#160;&#160;Failed tests: 1, 4, 6-7, 13-14
</I>&gt;&gt;<i> &#160;&#160;&#160;Non-zero exit status: 6
</I>&gt;&gt;<i> &#160;70-test_sslextension.t (Wstat: 256 Tests: 8 Failed: 1)
</I>&gt;&gt;<i> &#160;&#160;&#160;Failed test: 8
</I>&gt;&gt;<i> &#160;&#160;&#160;Non-zero exit status: 1
</I>&gt;&gt;<i> &#160;70-test_sslrecords.t (Wstat: 768 Tests: 20 Failed: 3)
</I>&gt;&gt;<i> &#160;&#160;&#160;Failed tests: 18-20
</I>&gt;&gt;<i> &#160;&#160;&#160;Non-zero exit status: 3
</I>&gt;&gt;<i> &#160;70-test_sslsigalgs.t (Wstat: 1536 Tests: 26 Failed: 6)
</I>&gt;&gt;<i> &#160;&#160;&#160;Failed tests: 1, 6, 22-23, 25-26
</I>&gt;&gt;<i> &#160;&#160;&#160;Non-zero exit status: 6
</I>&gt;&gt;<i> &#160;70-test_sslsignature.t (Wstat: 256 Tests: 4 Failed: 1)
</I>&gt;&gt;<i> &#160;&#160;&#160;Failed test: 1
</I>&gt;&gt;<i> &#160;&#160;&#160;Non-zero exit status: 1
</I>&gt;&gt;<i> &#160;70-test_sslversions.t (Wstat: 512 Tests: 8 Failed: 2)
</I>&gt;&gt;<i> &#160;&#160;&#160;Failed tests: 5, 7
</I>&gt;&gt;<i> &#160;&#160;&#160;Non-zero exit status: 2
</I>&gt;&gt;<i> &#160;70-test_tls13cookie.t (Wstat: 512 Tests: 2 Failed: 2)
</I>&gt;&gt;<i> &#160;&#160;&#160;Failed tests: 1-2
</I>&gt;&gt;<i> &#160;&#160;&#160;Non-zero exit status: 2
</I>&gt;&gt;<i> &#160;70-test_tls13downgrade.t (Wstat: 256 Tests: 6 Failed: 1)
</I>&gt;&gt;<i> &#160;&#160;&#160;Failed test: 6
</I>&gt;&gt;<i> &#160;&#160;&#160;Non-zero exit status: 1
</I>&gt;&gt;<i> &#160;70-test_tls13kexmodes.t (Wstat: 7424 Tests: 1 Failed: 1)
</I>&gt;&gt;<i> &#160;&#160;&#160;Failed test: 1
</I>&gt;&gt;<i> &#160;&#160;&#160;Non-zero exit status: 29
</I>&gt;&gt;<i> &#160;&#160;&#160;Parse errors: Bad plan. You planned 11 tests but ran 1.
</I>&gt;&gt;<i> &#160;70-test_tls13messages.t (Wstat: 7424 Tests: 1 Failed: 0)
</I>&gt;&gt;<i> &#160;&#160;&#160;Non-zero exit status: 29
</I>&gt;&gt;<i> &#160;&#160;&#160;Parse errors: Bad plan. You planned 17 tests but ran 1.
</I>&gt;&gt;<i> &#160;70-test_tls13psk.t (Wstat: 7424 Tests: 1 Failed: 1)
</I>&gt;&gt;<i> &#160;&#160;&#160;Failed test: 1
</I>&gt;&gt;<i> &#160;&#160;&#160;Non-zero exit status: 29
</I>&gt;&gt;<i> &#160;&#160;&#160;Parse errors: Bad plan. You planned 5 tests but ran 1.
</I>&gt;&gt;<i> &#160;70-test_tlsextms.t (Wstat: 256 Tests: 10 Failed: 1)
</I>&gt;&gt;<i> &#160;&#160;&#160;Failed test: 10
</I>&gt;&gt;<i> &#160;&#160;&#160;Non-zero exit status: 1
</I>&gt;&gt;<i> &#160;Files=223, Tests=3571, 615 wallclock secs (11.00 usr 0.93 sys + 343.65 cusr 84.69 csys = 440.27 CPU)
</I>&gt;&gt;<i> &#160;Result: FAIL
</I>&gt;&gt;<i> &#160;make[1]: *** [Makefile:3197: _tests] Error 1
</I>&gt;&gt;<i> &#160;make[1]: Leaving directory '/home/ubuntu/openssl'
</I>&gt;&gt;<i> &#160;make: *** [Makefile:3194: tests] Error 2
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;Complete `make test` output (kernel v5.9.8 + openssl master) is copied here <A HREF="https://cl1p.net/openssl_ktls_make_test_failure">https://cl1p.net/openssl_ktls_make_test_failure</A> (due to the 100K limit of this mailing list)
</I>&gt;&gt;<i> &#160;I am sure that the kernel tls module is loaded correctly since /proc/net/tls_stat is exposed correctly and I can see the counters increasing while doing `make test`.
</I>&gt;&gt;<i> &#160;So is this supposed to happen? What should I do to make ktls work?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;Thanks,
</I>&gt;&gt;<i> &#160;Rui Zang
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013147.html">test cases failed after enabling ktls
</A></li>
	<LI>Next message: <A HREF="013148.html">Handling BIO errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13149">[ date ]</a>
              <a href="thread.html#13149">[ thread ]</a>
              <a href="subject.html#13149">[ subject ]</a>
              <a href="author.html#13149">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
