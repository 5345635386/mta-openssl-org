<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] 1.1.1 pre1 tests failing on Solaris SPARC
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2018-February/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%201.1.1%20pre1%20tests%20failing%20on%20Solaris%20SPARC&In-Reply-To=%3Ceae80324b965bc566d816708ad61bc7a%40foocrypt.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007610.html">
   <LINK REL="Next"  HREF="007627.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] 1.1.1 pre1 tests failing on Solaris SPARC</H1>
    <B>openssl at foocrypt.net</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%201.1.1%20pre1%20tests%20failing%20on%20Solaris%20SPARC&In-Reply-To=%3Ceae80324b965bc566d816708ad61bc7a%40foocrypt.net%3E"
       TITLE="[openssl-users] 1.1.1 pre1 tests failing on Solaris SPARC">openssl at foocrypt.net
       </A><BR>
    <I>Sun Feb 25 01:36:18 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="007610.html">[openssl-users] 1.1.1 pre1 tests failing on Solaris SPARC
</A></li>
        <LI>Next message: <A HREF="007627.html">[openssl-users] 1.1.1 pre1 tests failing on Solaris SPARC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7645">[ date ]</a>
              <a href="thread.html#7645">[ thread ]</a>
              <a href="subject.html#7645">[ subject ]</a>
              <a href="author.html#7645">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Morning Dennis, et al


This may be off thread topic, but one thing I have noticed with the x86 
openssl builds shipped by Oracle and Blastwave in the releases I have 
been testing FooCrypt against ( 10u11 through 11.3 ) is that openssl 
seems to &#8216;HANG&#8217; when inputting a string greater than 262 characters 
which is quite different behavious to the Linux / macOS stock builds 
that accept a string of up to 522 characters.

Anyone know if this is a &#8216;feature&#8217; of the Solaris x86 compiles or is it 
inherent to openssl compiling on Solaris x86 ?

name -a : SunOS FooCrypt 5.10 Generic_147148-26 i86pc i386 i86pc

/opt/csw/bin/openssl version OpenSSL 1.0.2n  7 Dec 2017


name -a : SunOS FooCrypt 5.11 11.3 i86pc i386 i86pc

/opt/csw/bin/openssl version : OpenSSL 1.0.2n  7 Dec 2017

/usr/bin/openssl version : OpenSSL 1.0.1p 9 Jul 2015



&#8212;

Regards,

Mark A. Lane

Cryptopocalypse NOW 01 04 2016

Volumes 0.0 NOW available through iTunes - iBooks @ 
<A HREF="https://itunes.apple.com/au/author/mark-a.-lane/id1100062966?mt=11">https://itunes.apple.com/au/author/mark-a.-lane/id1100062966?mt=11</A>

Cryptopocalypse NOW is the TRUE story behind the trials and tribulations 
encountered in creating &quot;FooCrypt, A Tale of Cynical Cyclical 
Encryption.&quot; due to the Australian Government's ( led by Malcolm 
Turnbull ) criminalisation of encryption technologies on the 1st of 
April, 2016, as told by a Convicted Hacker.

&quot;FooCrypt, A Tale of Cynical Cyclical Encryption.&quot; is aimed at hardening 
several commonly used Symmetric Open Source Encryption methods so that 
they are hardened to a standard that is commonly termed 'QUANTUM 
ENCRYPTION'.

&quot;FooCrypt, A Tale of Cynical Cyclical Encryption.&quot; is currently under 
export control by the Australian Department of Defence Defence Export 
Controls Office due to the listing of Cryptology as a &#8216;Dual Use&#8217; 
Technology as per the &#8216;Wassenaar Arrangement&#8217;

Limited Edition Collectors versions and Hard Back Editions are available 
via the store on <A HREF="http://www.foocrypt.net/">http://www.foocrypt.net/</A>

&#169; Mark A. Lane 1980 - 2018, All Rights Reserved.
&#169; FooCrypt 1980 - 2018, All Rights Reserved.
&#169; FooCrypt, A Tale of Cynical Cyclical Encryption. 1980 - 2018, All 
Rights Reserved.
&#169; Cryptopocalypse 1980 - 2018, All Rights Reserved.


On 2018-02-21 11:42, Dennis Clarke wrote:
&gt;<i> On 21/02/18 12:11 PM, Norm Green wrote:
</I>&gt;&gt;<i> On 2/21/2018 8:42 AM, Dennis Clarke wrote:
</I>&gt;&gt;&gt;<i> Pretty sure I have done builds and tests. In fact I am certain of it.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> If you added -xmemalign=8s to the SPARC compiler flags (as shown in 
</I>&gt;&gt;<i> one
</I>&gt;&gt;<i> of your emails from yesterday) then you would not see the problem.
</I>&gt;&gt;<i> -xmemalign=8s forces the compiler to use 8-byte alignment.
</I>&gt;<i> 
</I>&gt;<i> Which is correct way to do this on sparc systems.  I am digging into 
</I>&gt;<i> the
</I>&gt;<i> whole build process to see what needs to be &quot;hacked&quot; at to get solid 
</I>&gt;<i> and
</I>&gt;<i> reasonable results. The real issue is compilers.  Sorry but gcc just
</I>&gt;<i> won't do the right things on sparc and that isn't anyones fault.
</I>&gt;<i> 
</I>&gt;<i> This is where we could go down a deep dark hole.  For the sake of
</I>&gt;<i> getting it out there we may as well just admit that the compilers that
</I>&gt;<i> are generally installed on Solaris systems were of the Forte flavour 
</I>&gt;<i> way
</I>&gt;<i> back when little dinosaurs were still roaming the datacenters and the
</I>&gt;<i> cost of the license was about $3000 or so. The acquisitions and rename
</I>&gt;<i> of everything happened for a while there and I am surprised no one at
</I>&gt;<i> Sun lost their little minds and called it the Java Enterprise C 
</I>&gt;<i> Compiler
</I>&gt;<i> because everything else had &quot;Java&quot; slapped on it. Regardless, the Forte
</I>&gt;<i> name went away and we then had &quot;Sun Studio&quot; which revved up until we
</I>&gt;<i> were able to compile the whole source code base with it and Solaris
</I>&gt;<i> &quot;UNIX&quot; was self hosted and self boot-strappable and time marched on. So
</I>&gt;<i> here we are today with Oracle Studio compilers and they are very very
</I>&gt;<i> good. At least on sparc they are. The concept of doing a compile for a
</I>&gt;<i> very specific machine class was dropped on the market way back in 1999
</I>&gt;<i> or so and I think by 2002 we could target flavours of sparc v9 with the
</I>&gt;<i> vis instructions as well as a lot of hullabaloo about fused multiply
</I>&gt;<i> etc.  However that was a sun4c and sun4m issue back when we needed the
</I>&gt;<i> optional weitek coprocessor.
</I>&gt;<i> 
</I>&gt;<i> So anyways the &quot;target&quot; option was born out of necessity to get the
</I>&gt;<i> right opcodes for given sparc units. People had fights over the entire
</I>&gt;<i> x86 platform and Sun dropped it. Then picked it up again.  Then built a
</I>&gt;<i> version for Itanium. Put that on a shelf and hid it. Buried it. Then
</I>&gt;<i> went back and released a general x86 version again. Madness. I had a 
</I>&gt;<i> sit
</I>&gt;<i> down coffee with the global manager for the &quot;solaris&quot; product and it is
</I>&gt;<i> history now but the compiler tools for x86 were never the same quality
</I>&gt;<i> as the sparc tools.  Never have been.  One needs to use &quot;fpversion&quot; to
</I>&gt;<i> get the correct target and cache line options but someone at Oracle has
</I>&gt;<i> spilled a coffee and shuffled papers and forgot to release fpversion in
</I>&gt;<i> the latest flavour of the Studio compilers. I will take a look on a big
</I>&gt;<i> new shiney M-class machine and see what is there but I can tell you 
</I>&gt;<i> that
</I>&gt;<i> the openssl binaries I build from sources are at least the same speed 
</I>&gt;<i> or
</I>&gt;<i> better than the ones shipped out by Oracle. For a given specific type 
</I>&gt;<i> of
</I>&gt;<i> machine and sparc target.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> jupiter # /opt/developerstudio12.5/bin/fpversion
</I>&gt;<i>  A SPARC-based CPU is available.
</I>&gt;<i>  Kernel says main memory's clock rate is 1272.0 MHz.
</I>&gt;<i> 
</I>&gt;<i>  Sun-4 floating-point controller version 0 found.
</I>&gt;<i>  An UltraSPARC chip is available.
</I>&gt;<i> 
</I>&gt;<i>  Use &quot;-xtarget=sparc64viiplus -xcache=64/64/2:11264/256/11&quot;
</I>&gt;<i> code-generation option.
</I>&gt;<i> 
</I>&gt;<i>  Hostid = 0xBADCAFFE.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> A much older system may say :
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> mimas $ /opt/solarisstudio12.4/bin/fpversion
</I>&gt;<i>  A SPARC-based CPU is available.
</I>&gt;<i>  Kernel says CPU's clock rate is 500.0 MHz.
</I>&gt;<i>  Kernel says main memory's clock rate is 100.0 MHz.
</I>&gt;<i> 
</I>&gt;<i>  Sun-4 floating-point controller version 0 found.
</I>&gt;<i>  An UltraSPARC chip is available.
</I>&gt;<i> 
</I>&gt;<i>  Use &quot;-xtarget=ultra2e -xcache=16/32/1:256/64/1&quot; code-generation 
</I>&gt;<i> option.
</I>&gt;<i> 
</I>&gt;<i>  Hostid = 0xBADCAFFE.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Even more bizarre and older :
</I>&gt;<i> 
</I>&gt;<i> ns1_$ /opt/solarisstudio12.4/bin/fpversion
</I>&gt;<i>  A SPARC-based CPU is available.
</I>&gt;<i>  Kernel says CPU's clock rate is 360.0 MHz.
</I>&gt;<i>  Kernel says main memory's clock rate is 90.0 MHz.
</I>&gt;<i> 
</I>&gt;<i>  Sun-4 floating-point controller version 0 found.
</I>&gt;<i>  An UltraSPARC chip is available.
</I>&gt;<i> 
</I>&gt;<i>  Use &quot;-xtarget=ultra2i -xcache=16/32/1:1024/64/1&quot; code-generation 
</I>&gt;<i> option.
</I>&gt;<i> 
</I>&gt;<i>  Hostid = 0xDEADBEEF.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I say &quot;bizarre&quot; because that is a system that uses the memory options
</I>&gt;<i> which were shipped on the E10k servers and those cache lines are wrong.
</I>&gt;<i> That machine will always report &quot;infinite&quot; performance from openssl
</I>&gt;<i> speed results and be damned if I can figure out why.  Yet.
</I>&gt;<i> 
</I>&gt;<i> ns1_$ /usr/local/ssl/bin/openssl speed rsa4096
</I>&gt;<i> Doing 4096 bit private rsa's for 10s: 13 4096 bit private RSA's in 
</I>&gt;<i> 0.00s
</I>&gt;<i> Doing 4096 bit public rsa's for 10s: 1436 4096 bit public RSA's in 
</I>&gt;<i> 0.00s
</I>&gt;<i> OpenSSL 1.0.2n  7 Dec 2017
</I>&gt;<i> built on: reproducible build, date unspecified
</I>&gt;<i> options:bn(64,32) rc4(ptr,char) des(ptr,risc1,16,int) aes(partial)
</I>&gt;<i> idea(int) blowfish(ptr)
</I>&gt;<i> compiler: /opt/solarisstudio12.4/bin/c99 -I. -I.. -I../include  -KPIC
</I>&gt;<i> -DOPENSSL_PIC -DZLIB -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN
</I>&gt;<i> -DHAVE_DLFCN_H -Xc -g -errfmt=error -erroff=%none -xmemalign=8s
</I>&gt;<i> -errshort=full -xstrconst -xildoff -m64 -xnolibmil -xcode=pic32
</I>&gt;<i> -xregs=no%appl -xlibmieee -ftrap=%none -xarch=sparc -mc -xs
</I>&gt;<i> -xbuiltin=%none -xdebugformat=dwarf -xunroll=1 -D_TS_ERRNO
</I>&gt;<i> -D_POSIX_PTHREAD_SEMANTICS -D_LARGEFILE64_SOURCE -DB_ENDIAN
</I>&gt;<i> -DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_GF2m -DSHA1_ASM -DSHA256_ASM
</I>&gt;<i> -DSHA512_ASM -DMD5_ASM -DAES_ASM -DGHASH_ASM
</I>&gt;<i>                   sign    verify    sign/s verify/s
</I>&gt;<i> rsa 4096 bits 0.000000s 0.000000s      inf      inf
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> However the latest from Oracle claims :
</I>&gt;<i> 
</I>&gt;<i> $ ls /opt/developerstudio12.6/bin/fpversion
</I>&gt;<i> /opt/developerstudio12.6/bin/fpversion: No such file or directory
</I>&gt;<i> 
</I>&gt;<i> However it is in the manual still.
</I>&gt;<i> 
</I>&gt;<i> Messy.  Very.
</I>&gt;<i> 
</I>&gt;<i> So as I said earlier ... this should be fun.
</I>&gt;<i> 
</I>&gt;<i> Dennis
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007610.html">[openssl-users] 1.1.1 pre1 tests failing on Solaris SPARC
</A></li>
	<LI>Next message: <A HREF="007627.html">[openssl-users] 1.1.1 pre1 tests failing on Solaris SPARC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7645">[ date ]</a>
              <a href="thread.html#7645">[ thread ]</a>
              <a href="subject.html#7645">[ subject ]</a>
              <a href="author.html#7645">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
