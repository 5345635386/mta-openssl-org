<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Crash in OpenSSL v1.0.1 from dtls1_do_write OPENSSL_assert(len == (unsigned int)ret);
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2019-September/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Crash%20in%20OpenSSL%20v1.0.1%20from%20dtls1_do_write%20OPENSSL_assert%28len%20%3D%3D%0A%20%28unsigned%20int%29ret%29%3B&In-Reply-To=%3CDM5PR02MB22512BFEB4EC058825678FA785840%40DM5PR02MB2251.namprd02.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011229.html">
   <LINK REL="Next"  HREF="011235.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Crash in OpenSSL v1.0.1 from dtls1_do_write OPENSSL_assert(len == (unsigned int)ret);</H1>
    <B>Ian Sinclair</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Crash%20in%20OpenSSL%20v1.0.1%20from%20dtls1_do_write%20OPENSSL_assert%28len%20%3D%3D%0A%20%28unsigned%20int%29ret%29%3B&In-Reply-To=%3CDM5PR02MB22512BFEB4EC058825678FA785840%40DM5PR02MB2251.namprd02.prod.outlook.com%3E"
       TITLE="Crash in OpenSSL v1.0.1 from dtls1_do_write OPENSSL_assert(len == (unsigned int)ret);">ian.sinclair at emetrotel.com
       </A><BR>
    <I>Tue Sep 24 13:11:58 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="011229.html">Fwd: static link segmentation fault
</A></li>
        <LI>Next message: <A HREF="011235.html">Crash in OpenSSL v1.0.1 from dtls1_do_write OPENSSL_assert(len == (unsigned int)ret);
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11230">[ date ]</a>
              <a href="thread.html#11230">[ thread ]</a>
              <a href="subject.html#11230">[ subject ]</a>
              <a href="author.html#11230">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm working with Asterisk PBX code which uses openSSL v1.0.2 (from Centos6). On one site we're getting a crash from dtls1_do_write and as far as I can tell it's from the assertion coded:

  /* bad if this assert fails, only part of the handshake
   * message got sent.  but why would this happen? */
  OPENSSL_assert(len == (unsigned int)ret);

My question is the same as some previous author - why would this happen?

Is there any meaningful way I can debug this? Some flag I can set that will show the DTLS packets to try to find a cause? Some way to get rid of the assertion so that the failure doesn't take down the whole system, because currently the assertion causes a reboot? It's happening on an end customer site so building a debug load isn't particularly viable, but if that's the only option tell me how.

Is this a known problem that is only fixed as a non-security fix in a later release? We are current for the release, I believe, with v1.0.1e 58.el6_10. If the solution is only in later releases how compatible are those with Centos 6? I really don't want to have to go to another stream.

I'm completely new to Asterisk, openSSL, core files, and pretty much everything else, so please be clear and complete in suggestions.

Thanks,
Ian

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20190924/0f85b59b/attachment.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20190924/0f85b59b/attachment.html</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011229.html">Fwd: static link segmentation fault
</A></li>
	<LI>Next message: <A HREF="011235.html">Crash in OpenSSL v1.0.1 from dtls1_do_write OPENSSL_assert(len == (unsigned int)ret);
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11230">[ date ]</a>
              <a href="thread.html#11230">[ thread ]</a>
              <a href="subject.html#11230">[ subject ]</a>
              <a href="author.html#11230">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
