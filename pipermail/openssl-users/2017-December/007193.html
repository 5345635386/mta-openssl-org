<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Question as to best options....
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2017-December/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Question%20as%20to%20best%20options....&In-Reply-To=%3Ca7314155-699d-1d4e-3f24-1aa8ac4de8ac%40denninger.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007235.html">
   <LINK REL="Next"  HREF="007194.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Question as to best options....</H1>
    <B>Karl Denninger</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Question%20as%20to%20best%20options....&In-Reply-To=%3Ca7314155-699d-1d4e-3f24-1aa8ac4de8ac%40denninger.net%3E"
       TITLE="[openssl-users] Question as to best options....">karl at denninger.net
       </A><BR>
    <I>Tue Dec 26 18:38:32 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="007235.html">[openssl-users] How to form a proper hash after writing somethinginto SSL handshake.
</A></li>
        <LI>Next message: <A HREF="007194.html">[openssl-users] Question as to best options....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7193">[ date ]</a>
              <a href="thread.html#7193">[ thread ]</a>
              <a href="subject.html#7193">[ subject ]</a>
              <a href="author.html#7193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So let's assume I have system A and B.

System A has some store of certificates and keys.&#160; We'll assume they're
in either PEM or DER format and OpenSSL generated them.

System B is going to get passed one or both via a mechanism (e.g. over a
TLS connection that it has validated as being &quot;ok&quot; with appropriate
cipher and certificate chase, so it's reasonably convinced it's talking
to who it thinks it is), and then wishes to install them into executing
software so OpenSSL can use them for THAT system to do something with
(e.g. take connections from a third machine, sign objects, etc.)&#160; I
already know how do the &quot;do something&quot; part with OpenSSL.&#160; System B does
*NOT* want to store these persistently on the disk somewhere (even
transiently.)

What I'm trying to figure out is the &quot;best&quot; way to handle this.&#160;
SSL_CTX_use_PrivateKey accepts a EVP_PKEY pointer,
SSL_CTX_use_PrivateKey_ASN1 takes an ASN1 structure of length len, but
what is parameter &quot;pk&quot; (not explained in the man page) and this assumes
I have an ASN.1.....

I would assume that doing wonky things with EVP_PKEY (like digging into
the structure once loaded, grabbing it and transmitting it) is a
severely bad idea as the structure may change (e.g. EVP_PKEY is intended
to be an opaque structure from a user code perspective.)

So that leaves the obvious question as &quot;is there a decent way to convert
a PEM or DER private key file into ASN.1&quot; using OpenSSL calls (from a
&quot;C&quot; program, not from the command line; we'll assume I have the key and
cert files already.)

TIA
--
Karl Denninger
<A HREF="../../../mailman/listinfo/openssl-users.html">karl at denninger.net</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">karl at denninger.net</A>&gt;

/The Market Ticker/
/[S/MIME encrypted email preferred]/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20171226/ca5a3a2e/attachment-0001.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20171226/ca5a3a2e/attachment-0001.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4897 bytes
Desc: S/MIME Cryptographic Signature
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20171226/ca5a3a2e/attachment-0001.bin">http://mta.openssl.org/pipermail/openssl-users/attachments/20171226/ca5a3a2e/attachment-0001.bin</A>&gt;
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007235.html">[openssl-users] How to form a proper hash after writing somethinginto SSL handshake.
</A></li>
	<LI>Next message: <A HREF="007194.html">[openssl-users] Question as to best options....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7193">[ date ]</a>
              <a href="thread.html#7193">[ thread ]</a>
              <a href="subject.html#7193">[ subject ]</a>
              <a href="author.html#7193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
