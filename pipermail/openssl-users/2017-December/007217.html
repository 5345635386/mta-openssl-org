<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Can't build OpenSSL on Windows
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2017-December/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Can%27t%20build%20OpenSSL%20on%20Windows&In-Reply-To=%3C20171229.000641.1297349608194041259.levitte%40openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007209.html">
   <LINK REL="Next"  HREF="007220.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Can't build OpenSSL on Windows</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Can%27t%20build%20OpenSSL%20on%20Windows&In-Reply-To=%3C20171229.000641.1297349608194041259.levitte%40openssl.org%3E"
       TITLE="[openssl-users] Can't build OpenSSL on Windows">levitte at openssl.org
       </A><BR>
    <I>Thu Dec 28 23:06:41 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="007209.html">[openssl-users] Can't build OpenSSL on Windows
</A></li>
        <LI>Next message: <A HREF="007220.html">[openssl-users] Can't build OpenSSL on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7217">[ date ]</a>
              <a href="thread.html#7217">[ thread ]</a>
              <a href="subject.html#7217">[ subject ]</a>
              <a href="author.html#7217">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In message &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">20171228221837.2608-1-martin at eclypsium.com</A>&gt; on Thu, 28 Dec 2017 19:18:37 -0300, Martin Galvan &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">omgalvan.86 at gmail.com</A>&gt; said:

omgalvan.86&gt; Hi all,
omgalvan.86&gt; 
omgalvan.86&gt; I'm trying to build OpenSSL on Windows. I'm using the nmake that came with
omgalvan.86&gt; Visual Studio 2017, NASM, ActivePerl and have installed the Test::More and
omgalvan.86&gt; Test::Template modules. nmake, perl and nasm are all visible in my system Path
omgalvan.86&gt; variable. This is what I'm seeing:
omgalvan.86&gt; 
omgalvan.86&gt; C:\Users\e1\openssl\source&gt;perl Configure VC-WIN64A --prefix=\c\Users\e1\openssl\install-windows no-comp no-zlib
omgalvan.86&gt; Configuring OpenSSL version 1.1.0g (0x1010007fL)
omgalvan.86&gt;     no-asan         [default]  OPENSSL_NO_ASAN
omgalvan.86&gt;     no-comp         [option]   OPENSSL_NO_COMP (skip dir)
omgalvan.86&gt;     no-crypto-mdebug [default]  OPENSSL_NO_CRYPTO_MDEBUG
omgalvan.86&gt;     no-crypto-mdebug-backtrace [default]  OPENSSL_NO_CRYPTO_MDEBUG_BACKTRACE
omgalvan.86&gt;     no-ec_nistp_64_gcc_128 [default]  OPENSSL_NO_EC_NISTP_64_GCC_128
omgalvan.86&gt;     no-egd          [default]  OPENSSL_NO_EGD
omgalvan.86&gt;     no-fuzz-afl     [default]  OPENSSL_NO_FUZZ_AFL
omgalvan.86&gt;     no-fuzz-libfuzzer [default]  OPENSSL_NO_FUZZ_LIBFUZZER
omgalvan.86&gt;     no-heartbeats   [default]  OPENSSL_NO_HEARTBEATS
omgalvan.86&gt;     no-md2          [default]  OPENSSL_NO_MD2 (skip dir)
omgalvan.86&gt;     no-msan         [default]  OPENSSL_NO_MSAN
omgalvan.86&gt;     no-rc5          [default]  OPENSSL_NO_RC5 (skip dir)
omgalvan.86&gt;     no-sctp         [default]  OPENSSL_NO_SCTP
omgalvan.86&gt;     no-ssl-trace    [default]  OPENSSL_NO_SSL_TRACE
omgalvan.86&gt;     no-ssl3         [default]  OPENSSL_NO_SSL3
omgalvan.86&gt;     no-ssl3-method  [default]  OPENSSL_NO_SSL3_METHOD
omgalvan.86&gt;     no-ubsan        [default]  OPENSSL_NO_UBSAN
omgalvan.86&gt;     no-unit-test    [default]  OPENSSL_NO_UNIT_TEST
omgalvan.86&gt;     no-weak-ssl-ciphers [default]  OPENSSL_NO_WEAK_SSL_CIPHERS
omgalvan.86&gt;     no-zlib         [option]
omgalvan.86&gt;     no-zlib-dynamic [default]
omgalvan.86&gt; Configuring for VC-WIN64A
omgalvan.86&gt; CC            =cl
omgalvan.86&gt; CFLAG         =-W3 -wd4090 -Gs0 -GF -Gy -nologo -DOPENSSL_SYS_WIN32 -DWIN32_LEAN_AND_MEAN -DL_ENDIAN -D_CRT_SECURE_NO_DEPRECATE -DUNICODE -D_UNICODE /MD /O2
omgalvan.86&gt; SHARED_CFLAG  =
omgalvan.86&gt; DEFINES       =OPENSSL_USE_APPLINK DSO_WIN32 NDEBUG OPENSSL_THREADS OPENSSL_NO_STATIC_ENGINE OPENSSL_PIC OPENSSL_IA32_SSE2 OPENSSL_BN_ASM_MONT OPENSSL_BN_ASM_MONT5 OPENSSL_BN_ASM_GF2m SHA1_ASM SHA256_ASM SHA512_ASM RC4_ASM MD5_ASM AES_ASM VPAES_ASM BSAES_ASM GHASH_ASM ECP_NISTZ256_ASM PADLOCK_ASM POLY1305_ASM
omgalvan.86&gt; LFLAG         =/nologo /debug
omgalvan.86&gt; PLIB_LFLAG    =
omgalvan.86&gt; EX_LIBS       =ws2_32.lib gdi32.lib advapi32.lib crypt32.lib user32.lib
omgalvan.86&gt; APPS_OBJ      =win32_init.o ../ms/applink.o
omgalvan.86&gt; CPUID_OBJ     =x86_64cpuid.o
omgalvan.86&gt; UPLINK_OBJ    =../ms/uplink.o uplink-x86_64.o
omgalvan.86&gt; BN_ASM        =bn_asm.o x86_64-mont.o x86_64-mont5.o x86_64-gf2m.o rsaz_exp.o rsaz-x86_64.o rsaz-avx2.o
omgalvan.86&gt; EC_ASM        =ecp_nistz256.o ecp_nistz256-x86_64.o
omgalvan.86&gt; DES_ENC       =des_enc.o fcrypt_b.o
omgalvan.86&gt; AES_ENC       =aes-x86_64.o vpaes-x86_64.o bsaes-x86_64.o aesni-x86_64.o aesni-sha1-x86_64.o aesni-sha256-x86_64.o aesni-mb-x86_64.o
omgalvan.86&gt; BF_ENC        =bf_enc.o
omgalvan.86&gt; CAST_ENC      =c_enc.o
omgalvan.86&gt; RC4_ENC       =rc4-x86_64.o rc4-md5-x86_64.o
omgalvan.86&gt; RC5_ENC       =rc5_enc.o
omgalvan.86&gt; MD5_OBJ_ASM   =md5-x86_64.o
omgalvan.86&gt; SHA1_OBJ_ASM  =sha1-x86_64.o sha256-x86_64.o sha512-x86_64.o sha1-mb-x86_64.o sha256-mb-x86_64.o
omgalvan.86&gt; RMD160_OBJ_ASM=
omgalvan.86&gt; CMLL_ENC      =cmll-x86_64.o cmll_misc.o
omgalvan.86&gt; MODES_OBJ     =ghash-x86_64.o aesni-gcm-x86_64.o
omgalvan.86&gt; PADLOCK_OBJ   =e_padlock-x86_64.o
omgalvan.86&gt; CHACHA_ENC    =chacha-x86_64.o
omgalvan.86&gt; POLY1305_OBJ  =poly1305-x86_64.o
omgalvan.86&gt; BLAKE2_OBJ    =
omgalvan.86&gt; PROCESSOR     =
omgalvan.86&gt; RANLIB        =true
omgalvan.86&gt; ARFLAGS       =/nologo
omgalvan.86&gt; PERL          =C:\Perl64\bin\perl.exe
omgalvan.86&gt; 
omgalvan.86&gt; SIXTY_FOUR_BIT mode
omgalvan.86&gt; 
omgalvan.86&gt; Configured for VC-WIN64A.
omgalvan.86&gt; 
omgalvan.86&gt; And then:
omgalvan.86&gt; 
omgalvan.86&gt; C:\Users\e1\openssl\source&gt;nmake
omgalvan.86&gt; 
omgalvan.86&gt; Microsoft (R) Program Maintenance Utility Version 14.11.25547.0
omgalvan.86&gt; Copyright (C) Microsoft Corporation.  All rights reserved.
omgalvan.86&gt; 
omgalvan.86&gt; &quot;Detected changed: &quot;.\Configure&quot; &quot;Configurations\windows-makefile.tmpl&quot; &quot;Configurations\common.tmpl&quot;
omgalvan.86&gt; &quot;build.info&quot; &quot;crypto\build.info&quot; &quot;ssl\build.info&quot; &quot;engines\build.info&quot; &quot;apps\build.info&quot;
omgalvan.86&gt; &quot;test\build.info&quot; &quot;util\build.info&quot; &quot;tools\build.info&quot; &quot;fuzz\build.info&quot; &quot;crypto\objects\build.info&quot;
omgalvan.86&gt; &quot;crypto\md4\build.info&quot; &quot;crypto\md5\build.info&quot; &quot;crypto\sha\build.info&quot; &quot;crypto\mdc2\build.info&quot;
omgalvan.86&gt; &quot;crypto\hmac\build.info&quot; &quot;crypto\ripemd\build.info&quot; &quot;crypto\whrlpool\build.info&quot;
omgalvan.86&gt; &quot;crypto\poly1305\build.info&quot; &quot;crypto\blake2\build.info&quot; &quot;crypto\des\build.info&quot; &quot;crypto\aes\build.info&quot;
omgalvan.86&gt; &quot;crypto\rc2\build.info&quot; &quot;crypto\rc4\build.info&quot; &quot;crypto\idea\build.info&quot; &quot;crypto\bf\build.info&quot;
omgalvan.86&gt; &quot;crypto\cast\build.info&quot; &quot;crypto\camellia\build.info&quot; &quot;crypto\seed\build.info&quot; &quot;crypto\chacha\build.info&quot;
omgalvan.86&gt; &quot;crypto\modes\build.info&quot; &quot;crypto\bn\build.info&quot; &quot;crypto\ec\build.info&quot; &quot;crypto\rsa\build.info&quot;
omgalvan.86&gt; &quot;crypto\dsa\build.info&quot; &quot;crypto\dh\build.info&quot; &quot;crypto\dso\build.info&quot; &quot;crypto\engine\build.info&quot;
omgalvan.86&gt; &quot;crypto\buffer\build.info&quot; &quot;crypto\bio\build.info&quot; &quot;crypto\stack\build.info&quot; &quot;crypto\lhash\build.info&quot;
omgalvan.86&gt; &quot;crypto\rand\build.info&quot; &quot;crypto\err\build.info&quot; &quot;crypto\evp\build.info&quot; &quot;crypto\asn1\build.info&quot;
omgalvan.86&gt; &quot;crypto\pem\build.info&quot; &quot;crypto\x509\build.info&quot; &quot;crypto\x509v3\build.info&quot; &quot;crypto\conf\build.info&quot;
omgalvan.86&gt; &quot;crypto\txt_db\build.info&quot; &quot;crypto\pkcs7\build.info&quot; &quot;crypto\pkcs12\build.info&quot; &quot;crypto\ocsp\build.info&quot;
omgalvan.86&gt; &quot;crypto\ui\build.info&quot; &quot;crypto\cms\build.info&quot; &quot;crypto\ts\build.info&quot; &quot;crypto\srp\build.info&quot;
omgalvan.86&gt; &quot;crypto\cmac\build.info&quot; &quot;crypto\ct\build.info&quot; &quot;crypto\async\build.info&quot; &quot;crypto\kdf\build.info&quot;
omgalvan.86&gt; &quot;Configurations\00-base-templates.conf&quot; &quot;Configurations\10-main.conf&quot;&quot;
omgalvan.86&gt; &quot;Reconfiguring...&quot;
omgalvan.86&gt;         &quot;C:\Perl64\bin\perl.exe&quot; &quot;.\Configure&quot; reconf
omgalvan.86&gt; Reconfiguring with: VC-WIN64A --prefix=\c\Users\e1\openssl\install-windows no-comp no-zlib
omgalvan.86&gt;     CC = cl
omgalvan.86&gt;     BUILDFILE = makefile
omgalvan.86&gt; Configuring OpenSSL version 1.1.0g (0x1010007fL)
omgalvan.86&gt;     no-asan         [default]  OPENSSL_NO_ASAN
omgalvan.86&gt;     no-comp         [option]   OPENSSL_NO_COMP (skip dir)
omgalvan.86&gt;     no-crypto-mdebug [default]  OPENSSL_NO_CRYPTO_MDEBUG
omgalvan.86&gt;     no-crypto-mdebug-backtrace [default]  OPENSSL_NO_CRYPTO_MDEBUG_BACKTRACE
omgalvan.86&gt;     no-ec_nistp_64_gcc_128 [default]  OPENSSL_NO_EC_NISTP_64_GCC_128
omgalvan.86&gt;     no-egd          [default]  OPENSSL_NO_EGD
omgalvan.86&gt;     no-fuzz-afl     [default]  OPENSSL_NO_FUZZ_AFL
omgalvan.86&gt;     no-fuzz-libfuzzer [default]  OPENSSL_NO_FUZZ_LIBFUZZER
omgalvan.86&gt;     no-heartbeats   [default]  OPENSSL_NO_HEARTBEATS
omgalvan.86&gt;     no-md2          [default]  OPENSSL_NO_MD2 (skip dir)
omgalvan.86&gt;     no-msan         [default]  OPENSSL_NO_MSAN
omgalvan.86&gt;     no-rc5          [default]  OPENSSL_NO_RC5 (skip dir)
omgalvan.86&gt;     no-sctp         [default]  OPENSSL_NO_SCTP
omgalvan.86&gt;     no-ssl-trace    [default]  OPENSSL_NO_SSL_TRACE
omgalvan.86&gt;     no-ssl3         [default]  OPENSSL_NO_SSL3
omgalvan.86&gt;     no-ssl3-method  [default]  OPENSSL_NO_SSL3_METHOD
omgalvan.86&gt;     no-ubsan        [default]  OPENSSL_NO_UBSAN
omgalvan.86&gt;     no-unit-test    [default]  OPENSSL_NO_UNIT_TEST
omgalvan.86&gt;     no-weak-ssl-ciphers [default]  OPENSSL_NO_WEAK_SSL_CIPHERS
omgalvan.86&gt;     no-zlib         [option]
omgalvan.86&gt;     no-zlib-dynamic [default]
omgalvan.86&gt; Configuring for VC-WIN64A
omgalvan.86&gt; CC            =cl
omgalvan.86&gt; CFLAG         =-W3 -wd4090 -Gs0 -GF -Gy -nologo -DOPENSSL_SYS_WIN32 -DWIN32_LEAN_AND_MEAN -DL_ENDIAN -D_CRT_SECURE_NO_DEPRECATE -DUNICODE -D_UNICODE /MD /O2
omgalvan.86&gt; SHARED_CFLAG  =
omgalvan.86&gt; DEFINES       =OPENSSL_USE_APPLINK DSO_WIN32 NDEBUG OPENSSL_THREADS OPENSSL_NO_STATIC_ENGINE OPENSSL_PIC OPENSSL_IA32_SSE2 OPENSSL_BN_ASM_MONT OPENSSL_BN_ASM_MONT5 OPENSSL_BN_ASM_GF2m SHA1_ASM SHA256_ASM SHA512_ASM RC4_ASM MD5_ASM AES_ASM VPAES_ASM BSAES_ASM GHASH_ASM ECP_NISTZ256_ASM PADLOCK_ASM POLY1305_ASM
omgalvan.86&gt; LFLAG         =/nologo /debug
omgalvan.86&gt; PLIB_LFLAG    =
omgalvan.86&gt; EX_LIBS       =ws2_32.lib gdi32.lib advapi32.lib crypt32.lib user32.lib
omgalvan.86&gt; APPS_OBJ      =win32_init.o ../ms/applink.o
omgalvan.86&gt; CPUID_OBJ     =x86_64cpuid.o
omgalvan.86&gt; UPLINK_OBJ    =../ms/uplink.o uplink-x86_64.o
omgalvan.86&gt; BN_ASM        =bn_asm.o x86_64-mont.o x86_64-mont5.o x86_64-gf2m.o rsaz_exp.o rsaz-x86_64.o rsaz-avx2.o
omgalvan.86&gt; EC_ASM        =ecp_nistz256.o ecp_nistz256-x86_64.o
omgalvan.86&gt; DES_ENC       =des_enc.o fcrypt_b.o
omgalvan.86&gt; AES_ENC       =aes-x86_64.o vpaes-x86_64.o bsaes-x86_64.o aesni-x86_64.o aesni-sha1-x86_64.o aesni-sha256-x86_64.o aesni-mb-x86_64.o
omgalvan.86&gt; BF_ENC        =bf_enc.o
omgalvan.86&gt; CAST_ENC      =c_enc.o
omgalvan.86&gt; RC4_ENC       =rc4-x86_64.o rc4-md5-x86_64.o
omgalvan.86&gt; RC5_ENC       =rc5_enc.o
omgalvan.86&gt; MD5_OBJ_ASM   =md5-x86_64.o
omgalvan.86&gt; SHA1_OBJ_ASM  =sha1-x86_64.o sha256-x86_64.o sha512-x86_64.o sha1-mb-x86_64.o sha256-mb-x86_64.o
omgalvan.86&gt; RMD160_OBJ_ASM=
omgalvan.86&gt; CMLL_ENC      =cmll-x86_64.o cmll_misc.o
omgalvan.86&gt; MODES_OBJ     =ghash-x86_64.o aesni-gcm-x86_64.o
omgalvan.86&gt; PADLOCK_OBJ   =e_padlock-x86_64.o
omgalvan.86&gt; CHACHA_ENC    =chacha-x86_64.o
omgalvan.86&gt; POLY1305_OBJ  =poly1305-x86_64.o
omgalvan.86&gt; BLAKE2_OBJ    =
omgalvan.86&gt; PROCESSOR     =
omgalvan.86&gt; RANLIB        =true
omgalvan.86&gt; ARFLAGS       =/nologo
omgalvan.86&gt; PERL          =C:\Perl64\bin\perl.exe
omgalvan.86&gt; 
omgalvan.86&gt; SIXTY_FOUR_BIT mode
omgalvan.86&gt; 
omgalvan.86&gt; Configured for VC-WIN64A.
omgalvan.86&gt; &quot;**************************************************&quot;
omgalvan.86&gt; &quot;***                                            ***&quot;
omgalvan.86&gt; &quot;***   Please run the same make command again   ***&quot;
omgalvan.86&gt; &quot;***                                            ***&quot;
omgalvan.86&gt; &quot;**************************************************&quot;
omgalvan.86&gt; NMAKE : fatal error U1077: 'exit' : return code '0x1'
omgalvan.86&gt; Stop.
omgalvan.86&gt; 
omgalvan.86&gt; What am I doing wrong?

Nothing, I think...

what's happening is that there's a rule that looks like this in the
makefile:

    configdata.pm : .\Configure ...

That's the one that's getting triggered for some reason, and that's
because one of those listed dependencies is newer than configdata.pm

You simply need to do exactly what you're told, i.e. run 'nmake'
again.

If that happens again and again, then you have a problem.  If I were
in your shoes, I'd look pretty hard at file time stamps to see if I
could figure it out from there.

Cheers,
Richard

-- 
Richard Levitte         <A HREF="../../../mailman/listinfo/openssl-users.html">levitte at openssl.org</A>
OpenSSL Project         <A HREF="http://www.openssl.org/~levitte/">http://www.openssl.org/~levitte/</A>
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007209.html">[openssl-users] Can't build OpenSSL on Windows
</A></li>
	<LI>Next message: <A HREF="007220.html">[openssl-users] Can't build OpenSSL on Windows
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7217">[ date ]</a>
              <a href="thread.html#7217">[ thread ]</a>
              <a href="subject.html#7217">[ subject ]</a>
              <a href="author.html#7217">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
