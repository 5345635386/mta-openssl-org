<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> client authentication status
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2021-September/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20client%20authentication%20status&In-Reply-To=%3C20210901155119.GV19992%40akamai.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014212.html">
   <LINK REL="Next"  HREF="014214.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>client authentication status</H1>
    <B>Benjamin Kaduk</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20client%20authentication%20status&In-Reply-To=%3C20210901155119.GV19992%40akamai.com%3E"
       TITLE="client authentication status">bkaduk at akamai.com
       </A><BR>
    <I>Wed Sep  1 15:51:20 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="014212.html">client authentication status
</A></li>
        <LI>Next message: <A HREF="014214.html">client authentication status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14213">[ date ]</a>
              <a href="thread.html#14213">[ thread ]</a>
              <a href="subject.html#14213">[ subject ]</a>
              <a href="author.html#14213">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Sep 01, 2021 at 03:36:36PM +0000, Zeke Evans wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Is there any way to check the status of client authentication sent in a TLS 1.3 handshake after SSL_connect returns?  With TLS 1.2 SSL_connect seems to always capture the status and return an error code if it failed but not TLS 1.3.  I haven't been able to find a good way to do this after SSL_connect returns.  I have to handle blocking and non-blocking sockets so calling SSL_read or SSL_peek isn't an option since those could block.  If client authentication happened to fail then calling those methods would work because they will return an error but if it didn't fail then they could block.
</I>
Note that the server is allowed to ignore a client cert that it doesn't like, proceeding with the connection as if the client was unauthenticated.  If you need a specific signal that the server believes the client successfully authenticated, that has to be at the application layer.

Did you try a zero-length SSL_read()?  My recollection is that that gets far enough into the library to see if there are pending alert messages to process.

-Ben
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014212.html">client authentication status
</A></li>
	<LI>Next message: <A HREF="014214.html">client authentication status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14213">[ date ]</a>
              <a href="thread.html#14213">[ thread ]</a>
              <a href="subject.html#14213">[ subject ]</a>
              <a href="author.html#14213">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
