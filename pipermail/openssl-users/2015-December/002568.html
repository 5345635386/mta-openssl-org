<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Find size of available data prior to ssl_read
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2015-December/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Find%20size%20of%20available%20data%20prior%20to%20ssl_read&In-Reply-To=%3C5671AC1D.8000100%40black-sheep-research.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002567.html">
   <LINK REL="Next"  HREF="002569.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Find size of available data prior to ssl_read</H1>
    <B>Martin Brampton</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Find%20size%20of%20available%20data%20prior%20to%20ssl_read&In-Reply-To=%3C5671AC1D.8000100%40black-sheep-research.com%3E"
       TITLE="[openssl-users] Find size of available data prior to ssl_read">martin at black-sheep-research.com
       </A><BR>
    <I>Wed Dec 16 18:23:25 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="002567.html">[openssl-users] Errors building 1.0.2e on Mac OS X 10.7.5
</A></li>
        <LI>Next message: <A HREF="002569.html">[openssl-users] Find size of available data prior to ssl_read
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2568">[ date ]</a>
              <a href="thread.html#2568">[ thread ]</a>
              <a href="subject.html#2568">[ subject ]</a>
              <a href="author.html#2568">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Is there a way to obtain the amount of data available to be read?

I'm working with a system that operates in non-blocking mode using 
epoll. When an EPOLLIN event is received the aim is to read the data. 
For the non-SSL case, the amount of data can be obtained using ioctl 
FIONREAD.  This is used to malloc a suitable sized buffer, followed by 
read the data into the buffer.

How should the SSL version of our code work?  At present it is using the 
sum of the number obtained from ioctl FIONREAD (which seems suspect when 
SSL is in use and appears to be always too large) and the number from 
ssl_pending (which seems to be zero).  The buffer then has to be truncated.

Can this approach work?  Could it be improved?  Or is there some 
fundamental problem with operating in this way?


</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002567.html">[openssl-users] Errors building 1.0.2e on Mac OS X 10.7.5
</A></li>
	<LI>Next message: <A HREF="002569.html">[openssl-users] Find size of available data prior to ssl_read
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2568">[ date ]</a>
              <a href="thread.html#2568">[ thread ]</a>
              <a href="subject.html#2568">[ subject ]</a>
              <a href="author.html#2568">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
