<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> TLS handshake fails (&quot;SSL_accept:error in error&quot;) for server-&gt;server connection (smtp submit dovecot-&gt;postfix) if /etc/pki/tls/openssl.cnf &quot;Options=&quot; includes 'ServerPreference' ?
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2020-September/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20TLS%20handshake%20fails%20%28%22SSL_accept%3Aerror%20in%20error%22%29%20for%0A%20server-%3Eserver%20connection%20%28smtp%20submit%20dovecot-%3Epostfix%29%20if%0A%20/etc/pki/tls/openssl.cnf%20%22Options%3D%22%20includes%20%27ServerPreference%27%20%3F&In-Reply-To=%3Cca5f9629-3c20-565c-b430-064416a4a227%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013005.html">
   <LINK REL="Next"  HREF="013007.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>TLS handshake fails (&quot;SSL_accept:error in error&quot;) for server-&gt;server connection (smtp submit dovecot-&gt;postfix) if /etc/pki/tls/openssl.cnf &quot;Options=&quot; includes 'ServerPreference' ?</H1>
    <B>PGNet Dev</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20TLS%20handshake%20fails%20%28%22SSL_accept%3Aerror%20in%20error%22%29%20for%0A%20server-%3Eserver%20connection%20%28smtp%20submit%20dovecot-%3Epostfix%29%20if%0A%20/etc/pki/tls/openssl.cnf%20%22Options%3D%22%20includes%20%27ServerPreference%27%20%3F&In-Reply-To=%3Cca5f9629-3c20-565c-b430-064416a4a227%40gmail.com%3E"
       TITLE="TLS handshake fails (&quot;SSL_accept:error in error&quot;) for server-&gt;server connection (smtp submit dovecot-&gt;postfix) if /etc/pki/tls/openssl.cnf &quot;Options=&quot; includes 'ServerPreference' ?">pgnet.dev at gmail.com
       </A><BR>
    <I>Fri Sep 25 14:36:44 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="013005.html">TLS handshake fails (&quot;SSL_accept:error in error&quot;) for server-&gt;server connection (smtp submit dovecot-&gt;postfix) if /etc/pki/tls/openssl.cnf &quot;Options=&quot; includes 'ServerPreference' ?
</A></li>
        <LI>Next message: <A HREF="013007.html">TLS handshake fails (&quot;SSL_accept:error in error&quot;) for server-&gt;server connection (smtp submit dovecot-&gt;postfix) if /etc/pki/tls/openssl.cnf &quot;Options=&quot; includes 'ServerPreference' ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13006">[ date ]</a>
              <a href="thread.html#13006">[ thread ]</a>
              <a href="subject.html#13006">[ subject ]</a>
              <a href="author.html#13006">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 9/25/20 12:18 AM, Viktor Dukhovni wrote:
&gt;<i> On Thu, Sep 24, 2020 at 09:26:26PM -0700, PGNet Dev wrote:
</I>&gt;<i> I must lodge a complaint on wasting my time here
</I>
seems your're done, then.


thx anyway.

&gt;<i> you intimated that just changing openssl.cnf makes the difference.
</I>
i didn't 'intimate'.

i stated so. as that is exactly/only what's changed.
and the change it causes has been documented.

&gt;<i> But that is clearly not the case, because you're testing different server endpoints, with port
</I>&gt;<i> 60465 for the &quot;working&quot; case, and &quot;465&quot; for the non-working case.
</I>
that's simply not the case

as stated

 60465 is the dovecot submission port
 465 it the postfix submission port

the mua submits to dovecot at port 60465
dovecot resubmits to postfix at port 465

that same configuration is used in each/every test.

again, the ONLY thing that changed between the 'working' and 'failed' cases is the setting in openssl.cnf

I never directly submit to 465

&gt;<i> It seems likely that you don't have TLS wrapper mode on port 60465.
</I>
port 60465 is, and always has been, configured for implicit SSL -- not starttls usage.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013005.html">TLS handshake fails (&quot;SSL_accept:error in error&quot;) for server-&gt;server connection (smtp submit dovecot-&gt;postfix) if /etc/pki/tls/openssl.cnf &quot;Options=&quot; includes 'ServerPreference' ?
</A></li>
	<LI>Next message: <A HREF="013007.html">TLS handshake fails (&quot;SSL_accept:error in error&quot;) for server-&gt;server connection (smtp submit dovecot-&gt;postfix) if /etc/pki/tls/openssl.cnf &quot;Options=&quot; includes 'ServerPreference' ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13006">[ date ]</a>
              <a href="thread.html#13006">[ thread ]</a>
              <a href="subject.html#13006">[ subject ]</a>
              <a href="author.html#13006">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
