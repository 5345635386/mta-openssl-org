<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> crypto/threads_pthread.c:48:5: warning: implicit declaration of function &#8216;pthread_mutexattr_settype&#8217;
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2020-September/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%3D%3FUTF-8%3FQ%3Fcrypto/threads%3D5fpthread%3D2ec%3D3a48%3D3a5%3D3a_warning%3D3a_impli%3F%3D%0A%20%3D%3FUTF-8%3FQ%3Fcit_declaration_of_function_%3De2%3D80%3D98pthread%3D5fmutexattr%3D5fsettyp%3F%3D%0A%20%3D%3FUTF-8%3FB%3FZeKAmQ%3D%3D%3F%3D&In-Reply-To=%3Ca707989f-ce60-2c93-2d2c-f09c4ec46238%40blastwave.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012992.html">
   <LINK REL="Next"  HREF="012993.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>crypto/threads_pthread.c:48:5: warning: implicit declaration of function &#8216;pthread_mutexattr_settype&#8217;</H1>
    <B>Dennis Clarke</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%3D%3FUTF-8%3FQ%3Fcrypto/threads%3D5fpthread%3D2ec%3D3a48%3D3a5%3D3a_warning%3D3a_impli%3F%3D%0A%20%3D%3FUTF-8%3FQ%3Fcit_declaration_of_function_%3De2%3D80%3D98pthread%3D5fmutexattr%3D5fsettyp%3F%3D%0A%20%3D%3FUTF-8%3FB%3FZeKAmQ%3D%3D%3F%3D&In-Reply-To=%3Ca707989f-ce60-2c93-2d2c-f09c4ec46238%40blastwave.org%3E"
       TITLE="crypto/threads_pthread.c:48:5: warning: implicit declaration of function &#8216;pthread_mutexattr_settype&#8217;">dclarke at blastwave.org
       </A><BR>
    <I>Wed Sep 23 08:09:09 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="012992.html">Are -DOPENSSLDIR -DENGINESDIR hard coded ?
</A></li>
        <LI>Next message: <A HREF="012993.html">TLS handshake fails (&quot;SSL_accept:error in error&quot;) for server-&gt;server connection (smtp submit dovecot-&gt;postfix) if /etc/pki/tls/openssl.cnf &quot;Options=&quot; includes 'ServerPreference' ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12990">[ date ]</a>
              <a href="thread.html#12990">[ thread ]</a>
              <a href="subject.html#12990">[ subject ]</a>
              <a href="author.html#12990">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
This is a strange error to get on Debian sid amd64 :


/usr/bin/gcc-10  -I. -Iinclude -fPIC -pthread -std=iso9899:1999 -m64 -g
-O0 -march=k8 -mtune=k8 -Wl,-rpath=/opt/bw/lib,--enable-new-dtags
-fno-builtin -malign-double -mpc80 -std=iso9899:1999 -m64 -g -O0
-march=k8 -mtune=k8 -Wl,-rpath=/opt/bw/lib,--enable-new-dtags
-fno-builtin -malign-double -mpc80 -DOPENSSL_USE_NODELETE -DL_ENDIAN
-DOPENSSL_PIC -DOPENSSLDIR=&quot;\&quot;/opt/bw/ssl\&quot;&quot;
-DENGINESDIR=&quot;\&quot;/opt/bw/lib/engines-1.1\&quot;&quot;  -I/opt/bw/include -MMD -MF
crypto/threads_pthread.d.tmp -MT crypto/threads_pthread.o -c -o
crypto/threads_pthread.o crypto/threads_pthread.c
crypto/threads_pthread.c: In function &#8216;CRYPTO_THREAD_lock_new&#8217;:
crypto/threads_pthread.c:48:5: warning: implicit declaration of function
&#8216;pthread_mutexattr_settype&#8217;; did you mean &#8216;pthread_mutexattr_destroy&#8217;?
[-Wimplicit-function-declaration]
   48 |     pthread_mutexattr_settype(&amp;attr, PTHREAD_MUTEX_RECURSIVE);
      |     ^~~~~~~~~~~~~~~~~~~~~~~~~
      |     pthread_mutexattr_destroy
crypto/threads_pthread.c:48:38: error: &#8216;PTHREAD_MUTEX_RECURSIVE&#8217;
undeclared (first use in this function); did you mean
&#8216;PTHREAD_MUTEX_RECURSIVE_NP&#8217;?
   48 |     pthread_mutexattr_settype(&amp;attr, PTHREAD_MUTEX_RECURSIVE);
      |                                      ^~~~~~~~~~~~~~~~~~~~~~~
      |                                      PTHREAD_MUTEX_RECURSIVE_NP
crypto/threads_pthread.c:48:38: note: each undeclared identifier is
reported only once for each function it appears in
make[1]: *** [Makefile:5104: crypto/threads_pthread.o] Error 1
make[1]: Leaving directory
'/opt/bw/build/openssl-1.1.1h_debian_sid_5.8.0-2-amd64.004'
make: *** [Makefile:174: all] Error 2
Command exited with non-zero status 2


Why should the include of pthread.h be absent here ?

-- 
Dennis Clarke
RISC-V/SPARC/PPC/ARM/CISC
UNIX and Linux spoken
GreyBeard and suspenders optional
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012992.html">Are -DOPENSSLDIR -DENGINESDIR hard coded ?
</A></li>
	<LI>Next message: <A HREF="012993.html">TLS handshake fails (&quot;SSL_accept:error in error&quot;) for server-&gt;server connection (smtp submit dovecot-&gt;postfix) if /etc/pki/tls/openssl.cnf &quot;Options=&quot; includes 'ServerPreference' ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12990">[ date ]</a>
              <a href="thread.html#12990">[ thread ]</a>
              <a href="subject.html#12990">[ subject ]</a>
              <a href="author.html#12990">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
