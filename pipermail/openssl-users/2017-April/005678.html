<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] What does this error mean? sslv3 alert certificate unknown:state 23
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2017-April/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20What%20does%20this%20error%20mean%3F%20sslv3%20alert%0A%20certificate%20unknown%3Astate%2023&In-Reply-To=%3C223CAE30-1F1B-4516-B6AE-6C36E9847310%40dukhovni.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005675.html">
   <LINK REL="Next"  HREF="005679.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] What does this error mean? sslv3 alert certificate unknown:state 23</H1>
    <B>Viktor Dukhovni</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20What%20does%20this%20error%20mean%3F%20sslv3%20alert%0A%20certificate%20unknown%3Astate%2023&In-Reply-To=%3C223CAE30-1F1B-4516-B6AE-6C36E9847310%40dukhovni.org%3E"
       TITLE="[openssl-users] What does this error mean? sslv3 alert certificate unknown:state 23">openssl-users at dukhovni.org
       </A><BR>
    <I>Mon Apr 24 22:55:52 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="005675.html">[openssl-users] What does this error mean? sslv3 alert certificate unknown:state 23
</A></li>
        <LI>Next message: <A HREF="005679.html">[openssl-users] What does this error mean? sslv3 alert certificate unknown:state 23
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5678">[ date ]</a>
              <a href="thread.html#5678">[ thread ]</a>
              <a href="subject.html#5678">[ subject ]</a>
              <a href="author.html#5678">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> On Apr 24, 2017, at 6:11 PM, Blumenthal, Uri - 0553 - MITLL &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">uri at ll.mit.edu</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> I went through the capture between the app (local end) and the proxy. It appears that the sequence is:
</I>&gt;<i> 
</I>&gt;<i> ClientHello -&gt; (from app to proxy, with a ton of cipher suites, including 0xc02f)
</I>&gt;<i>       &lt;-  ServerHello (with TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 &#8211; present in ClientHello)
</I>&gt;<i>       &lt;- CertificateServer Key Exchange, Server Hello Done (includes proxy&#8217;s cert rather than the remote end&#8217;s cert)
</I>&gt;<i> 
</I>&gt;<i> Alert (Level: Fatal, Description: Certificate Unknown) -&gt;
</I>&gt;<i> 
</I>&gt;<i> So it appears that the app expects the remote end&#8217;s cert, and is not happy getting the proxy&#8217;s cert instead?
</I>
Please report tshark output, not an approximate rendition.  In what direction
is the alert sent?

It is indeed possible that the application is not configured for and correctly
rejects the forged certificate of the MiTM proxy.  It would need the Root CA
of the proxy as a trusted issuer, but that may not be configurable.  In which
case you'd need to let the app connect directly to the remote server without
an MiTM-proxy.

-- 
	Viktor.

</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005675.html">[openssl-users] What does this error mean? sslv3 alert certificate unknown:state 23
</A></li>
	<LI>Next message: <A HREF="005679.html">[openssl-users] What does this error mean? sslv3 alert certificate unknown:state 23
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5678">[ date ]</a>
              <a href="thread.html#5678">[ thread ]</a>
              <a href="subject.html#5678">[ subject ]</a>
              <a href="author.html#5678">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
