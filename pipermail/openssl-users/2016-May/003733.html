<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Help for Bug - time stamp routines:TS_CHECK_SIGNING_CERTS:ess signing, certificate error:ts_rsp_verify.c:291:
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2016-May/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Help%20for%20Bug%20-%20time%20stamp%0A%20routines%3ATS_CHECK_SIGNING_CERTS%3Aess%20signing%2C%0A%20certificate%20error%3Ats_rsp_verify.c%3A291%3A&In-Reply-To=%3C88cc5171-a11f-54a7-caf4-24deebce307e%40yahoo.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003731.html">
   <LINK REL="Next"  HREF="003734.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Help for Bug - time stamp routines:TS_CHECK_SIGNING_CERTS:ess signing, certificate error:ts_rsp_verify.c:291:</H1>
    <B>Mario Scalabrino</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Help%20for%20Bug%20-%20time%20stamp%0A%20routines%3ATS_CHECK_SIGNING_CERTS%3Aess%20signing%2C%0A%20certificate%20error%3Ats_rsp_verify.c%3A291%3A&In-Reply-To=%3C88cc5171-a11f-54a7-caf4-24deebce307e%40yahoo.it%3E"
       TITLE="[openssl-users] Help for Bug - time stamp routines:TS_CHECK_SIGNING_CERTS:ess signing, certificate error:ts_rsp_verify.c:291:">mario.scalabrino at yahoo.it
       </A><BR>
    <I>Mon May 23 10:25:33 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="003731.html">[openssl-users] Async BIO
</A></li>
        <LI>Next message: <A HREF="003734.html">[openssl-users] 1.1 release being delayed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3733">[ date ]</a>
              <a href="thread.html#3733">[ thread ]</a>
              <a href="subject.html#3733">[ subject ]</a>
              <a href="author.html#3733">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear openssl users,

I'm struggling with the error below, I wrote to Openssl development in 
February 2016 but they are busy with the next release, I see they are 
aware of it in git/openssl and working on it.
<A HREF="https://github.com/openssl/openssl/pull/771">https://github.com/openssl/openssl/pull/771</A>


The bug is in the command ts -verify

|<i>************** openssl ts -verify -digest 
</I>e16db7d30581e44a5540f19553852b5a4e4e26f9adc365cc846f94038ee33025 \ -in 
/tmp/namirial.tsr -CAfile /tmp/NamirialCATSA.pem Verification: FAILED 
140236013643424:error:2F067065:time stamp 
routines:TS_CHECK_SIGNING_CERTS:ess signing certificate 
error:ts_rsp_verify.c:291:|

*****************

I need to verify programmatically that every timestamped document its' 
ok, it is very important for me to provide reliable timestamping from a 
trusted qualified European Union Timestamping Authority.



 From what I understood the bug relates to the fact that the new TSA's 
certificates are not compatible with the old way openssl reads them, or 
their attribute or hashing. My understanding of it is very basic.



*Is there a patch that I can apply?

*The bug has been found in 2013
<A HREF="http://openssl.6102.n7.nabble.com/possible-Bug-in-OpenSSL-rfc-3161-TSA-service-tt43128.html#none">http://openssl.6102.n7.nabble.com/possible-Bug-in-OpenSSL-rfc-3161-TSA-service-tt43128.html#none</A>

I also opened a thread here
<A HREF="http://stackoverflow.com/questions/35914327/error-0x2f067065-in-ts-rsp-verify-c291/35916523?noredirect=1#comment62213243_35916523">http://stackoverflow.com/questions/35914327/error-0x2f067065-in-ts-rsp-verify-c291/35916523?noredirect=1#comment62213243_35916523</A>

It seems that it has been mentioned also here in git
<A HREF="https://github.com/elabftw/elabftw/issues/242">https://github.com/elabftw/elabftw/issues/242</A>
<A HREF="https://github.com/openssl/openssl/pull/771">https://github.com/openssl/openssl/pull/771</A>


Here's my environment

Ubuntu 14.04 LTS guest of a Virtualbox VM in an openstack IaaS.
|<i>OpenSSL 1.0.1f 6 Jan 2014 |
</I>|||<i>Server Info: Apache/2.4.18 (Ubuntu)
</I>PHP Version: 5.5.34-1+deb.sury.org~trusty+1|
mysql  Ver 14.14 Distrib 5.5.49, for debian-linux-gnu (x86_64) using 
readline 6.3


Could you please help?


Thank you in advance

Cheers

Msca

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20160523/57238b44/attachment-0001.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20160523/57238b44/attachment-0001.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003731.html">[openssl-users] Async BIO
</A></li>
	<LI>Next message: <A HREF="003734.html">[openssl-users] 1.1 release being delayed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3733">[ date ]</a>
              <a href="thread.html#3733">[ thread ]</a>
              <a href="subject.html#3733">[ subject ]</a>
              <a href="author.html#3733">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
