<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Storing session in file and reusing at client side
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2016-May/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Storing%20session%20in%20file%20and%20reusing%20at%20client%0A%20side&In-Reply-To=%3C20160502200648.GA13687%40openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003643.html">
   <LINK REL="Next"  HREF="003647.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Storing session in file and reusing at client side</H1>
    <B>Dr. Stephen Henson</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Storing%20session%20in%20file%20and%20reusing%20at%20client%0A%20side&In-Reply-To=%3C20160502200648.GA13687%40openssl.org%3E"
       TITLE="[openssl-users] Storing session in file and reusing at client side">steve at openssl.org
       </A><BR>
    <I>Mon May  2 20:06:48 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="003643.html">[openssl-users] [openssl-dev] Storing session in file and reusing at client side
</A></li>
        <LI>Next message: <A HREF="003647.html">[openssl-users] Storing session in file and reusing at client	side
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3646">[ date ]</a>
              <a href="thread.html#3646">[ thread ]</a>
              <a href="subject.html#3646">[ subject ]</a>
              <a href="author.html#3646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, May 02, 2016, Shubham Chauhan wrote:

&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I wanted to store the freshly negotiated ssl/tls session in a file and
</I>&gt;<i> reuse it (via SSL_set_session()), in the next handshake. I was not able to
</I>&gt;<i> do that since the handshake got terminated giving a fatal error - illegal
</I>&gt;<i> parameters (47).
</I>&gt;<i> 
</I>&gt;<i> Although this works perfectly fine when I store the session in a global
</I>&gt;<i> variable at the client side and use it the next time. But I need to use the
</I>&gt;<i> same session across multiple clients (I hope session does not store the IP
</I>&gt;<i> and DNS entries).
</I>&gt;<i> 
</I>&gt;<i> I had the following questions-
</I>&gt;<i> 1). Why is the session, when stored in an external file, resulting into the
</I>&gt;<i> &quot;illegal parameter&quot; error?
</I>&gt;<i> 2). Is there some other way to handle the same session among different
</I>&gt;<i> client *.c files? Something better than writing down the session in a file
</I>&gt;<i> (well, even this does not seems to work for me!)
</I>&gt;<i> 
</I>
Is it the server sending the error? Is the server running OpenSSL? Does it
happen with the same client running the same software with the same IP address
or does it only happen with different IP addresses?

I'm wondering if the server rejects the attempt to resume from different IP
addresses.

Also see if you can reproduce the behaviour with s_client using -sess_out and
-sess_in options.

Steve.
--
Dr Stephen N. Henson. OpenSSL project core developer.
Commercial tech support now available see: <A HREF="http://www.openssl.org">http://www.openssl.org</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003643.html">[openssl-users] [openssl-dev] Storing session in file and reusing at client side
</A></li>
	<LI>Next message: <A HREF="003647.html">[openssl-users] Storing session in file and reusing at client	side
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3646">[ date ]</a>
              <a href="thread.html#3646">[ thread ]</a>
              <a href="subject.html#3646">[ subject ]</a>
              <a href="author.html#3646">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
