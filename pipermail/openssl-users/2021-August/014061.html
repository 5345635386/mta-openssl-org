<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Public key from TSS2 private key with OpenSSL 3.0.0-beta2
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2021-August/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Public%20key%20from%20TSS2%20private%20key%20with%20OpenSSL%203.0.0-beta2&In-Reply-To=%3CBY5PR19MB355358B08562EA4E2FA8E3DE98F39%40BY5PR19MB3553.namprd19.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014060.html">
   <LINK REL="Next"  HREF="014063.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Public key from TSS2 private key with OpenSSL 3.0.0-beta2</H1>
    <B>Nestor Melo</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Public%20key%20from%20TSS2%20private%20key%20with%20OpenSSL%203.0.0-beta2&In-Reply-To=%3CBY5PR19MB355358B08562EA4E2FA8E3DE98F39%40BY5PR19MB3553.namprd19.prod.outlook.com%3E"
       TITLE="Public key from TSS2 private key with OpenSSL 3.0.0-beta2">Nestor.Melo at zpesystems.com
       </A><BR>
    <I>Fri Aug  6 20:23:26 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="014060.html">Public key from TSS2 private key with OpenSSL 3.0.0-beta2
</A></li>
        <LI>Next message: <A HREF="014063.html">Several _METHOD structs not marked as deprecated in 3.0.0-beta2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14061">[ date ]</a>
              <a href="thread.html#14061">[ thread ]</a>
              <a href="subject.html#14061">[ subject ]</a>
              <a href="author.html#14061">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Dmitry,


I just submitted a new issue, #16256.


Thank you,

Nestor Melo
________________________________
From: Dmitry Belyavsky &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">beldmit at gmail.com</A>&gt;
Sent: Friday, August 6, 2021 12:21 PM
To: Nestor Melo &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">Nestor.Melo at zpesystems.com</A>&gt;
Cc: <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A> &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&gt;
Subject: Re: Public key from TSS2 private key with OpenSSL 3.0.0-beta2

Dear Nestor,

Could you please fill an issue on GitHub?
It's much simpler for us to follow the issues there.

On Fri, Aug 6, 2021 at 9:13 PM Nestor Melo &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">Nestor.Melo at zpesystems.com</A>&lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">Nestor.Melo at zpesystems.com</A>&gt;&gt; wrote:
Greetings,


We use a TPM2 device to generate private keys with tpm2-tss-engine:
<A HREF="https://github.com/tpm2-software/tpm2-tss-engine">https://github.com/tpm2-software/tpm2-tss-engine</A>

While attempting to extract the public key from a TSS2 private key using OpenSSL 3.0.0-beta2 and tpm2-tss-engine, I received a message &quot;PEM format not supported&quot;:

openssl rsa -engine libtpm2tss -inform engine -in privkey.pem -pubout -outform PEM -out pubkey.pem
Engine &quot;tpm2tss&quot; set.
writing RSA key
PEM format not supported

Although it is recommended to use providers instead of engines with OpenSSL 3.0.0, are engines still supported? Should the above operation be expected to work?

Here is an example of a private key was generated with tpm2-tss-engine's tpm2tss-genkey:
-----BEGIN TSS2 PRIVATE KEY-----
MIIB8gYGZ4EFCgEDoAMBAQECBEAAAAEEggEYARYAAQALAAYEcgAAABAAEAgAAAEA
AQEAmT8O+ikRX5eTRUsDXrBAephW1YLEITkKxviFzIxF7R1K1jlDIXI8PKhc6tUE
sEDfgTNtldmc3nxPmJBxeAzIQrGAAUjGY74xtvbe6T6muU9FHGVpw1e3LelewFCQ
yR+t36GaOBY+S4Bc0DC0KhSoFakiwYt2vtQvm0W54cwxg7B4aSfcBUNHFPB5J90c
ere/o20QpNvb7mw/kwvoTSzsyQT5qMZALKZeRFZ42991dGWJpnfC30xieXCMoD7z
x5hhc5Uf5EbFtxeWaT2HTfs0h0OxigQSjXdmCJPeJVoMPOoF2FK+PbZwPn2UDKyo
SqhsmZ+9hvkUWylDYiXfm24TUwSBwAC+ACDJpk4p0h4Q3UEtwph3oNy5xR7hya4S
XHqabuThC+xX1AAQDTukmp9lruULdnZALN1Lyw1AMw+7F2BBx786jjOmg9rX+umB
ffGZSs187UAjmfe98XUk9oNsZkgB7HEsDRIOXoET+9R0KI48whV3Z/Kwag+UmErL
KRTOl5zEUenbQi8/CBDVpuxKMyKl6tYc38iNh2rA8Eju9tv+x6kPv/5/JxmXSpgQ
rCSHxBQFxnnITejU/RMqCHMZpCly2A==
-----END TSS2 PRIVATE KEY-----

If I use instead the TPM2 provider tpm2-openssl
<A HREF="https://github.com/tpm2-software/tpm2-openssl">https://github.com/tpm2-software/tpm2-openssl</A>

the command
openssl rsa -provider tpm2 -in privkey.pem -pubout -outform PEM -out pubkey.pem

works, producing:
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmT8O+ikRX5eTRUsDXrBA
ephW1YLEITkKxviFzIxF7R1K1jlDIXI8PKhc6tUEsEDfgTNtldmc3nxPmJBxeAzI
QrGAAUjGY74xtvbe6T6muU9FHGVpw1e3LelewFCQyR+t36GaOBY+S4Bc0DC0KhSo
FakiwYt2vtQvm0W54cwxg7B4aSfcBUNHFPB5J90cere/o20QpNvb7mw/kwvoTSzs
yQT5qMZALKZeRFZ42991dGWJpnfC30xieXCMoD7zx5hhc5Uf5EbFtxeWaT2HTfs0
h0OxigQSjXdmCJPeJVoMPOoF2FK+PbZwPn2UDKyoSqhsmZ+9hvkUWylDYiXfm24T
UwIDAQAB
-----END PUBLIC KEY-----


Thank you,

Nestor Melo




--
SY, Dmitry Belyavsky
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20210806/b59ae749/attachment.html">https://mta.openssl.org/pipermail/openssl-users/attachments/20210806/b59ae749/attachment.html</A>&gt;
</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014060.html">Public key from TSS2 private key with OpenSSL 3.0.0-beta2
</A></li>
	<LI>Next message: <A HREF="014063.html">Several _METHOD structs not marked as deprecated in 3.0.0-beta2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14061">[ date ]</a>
              <a href="thread.html#14061">[ thread ]</a>
              <a href="subject.html#14061">[ subject ]</a>
              <a href="author.html#14061">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
