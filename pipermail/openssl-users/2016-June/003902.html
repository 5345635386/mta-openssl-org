<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Regarding FIPS capable openssl (I want to combine libcrypto.a and libssl.a)
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2016-June/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Regarding%20FIPS%20capable%20openssl%20%28I%20want%20to%0A%20combine%20libcrypto.a%20and%20libssl.a%29&In-Reply-To=%3CCAAQPBEbnM-D6UeWvdke_qkONpmXnGvnG8uVqaZyA8RXiwwOxKg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003901.html">
   <LINK REL="Next"  HREF="003926.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Regarding FIPS capable openssl (I want to combine libcrypto.a and libssl.a)</H1>
    <B>Ken Chow</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Regarding%20FIPS%20capable%20openssl%20%28I%20want%20to%0A%20combine%20libcrypto.a%20and%20libssl.a%29&In-Reply-To=%3CCAAQPBEbnM-D6UeWvdke_qkONpmXnGvnG8uVqaZyA8RXiwwOxKg%40mail.gmail.com%3E"
       TITLE="[openssl-users] Regarding FIPS capable openssl (I want to combine libcrypto.a and libssl.a)">kenchow.cn at gmail.com
       </A><BR>
    <I>Mon Jun 27 09:13:23 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="003901.html">[openssl-users] Regarding FIPS capable openssl (I want to combine libcrypto.a and libssl.a)
</A></li>
        <LI>Next message: <A HREF="003926.html">[openssl-users] Regarding FIPS capable openssl (I want to combine libcrypto.a and libssl.a)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3902">[ date ]</a>
              <a href="thread.html#3902">[ thread ]</a>
              <a href="subject.html#3902">[ subject ]</a>
              <a href="author.html#3902">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I think you should refer the way of building Android application
<A HREF="https://wiki.openssl.org/index.php/Android">https://wiki.openssl.org/index.php/Android</A> .

Trying to warp libcryto.so to your dynamic library by the specified FIPS
compiler, once you successfully generated your dynamic library, then no
need to specify FIPS compiler for compiling your execute program any more,
and it worked for me, whatever under linux(gcc) or android(NDK).


&lt;<A HREF="http://about.me/kenchowcn">http://about.me/kenchowcn</A>&gt;


Ken Chow
about.me/kenchowcn
[image: Ken Chow on about.me]
  &lt;<A HREF="http://about.me/kenchowcn">http://about.me/kenchowcn</A>&gt;

2016-06-27 16:37 GMT+08:00 Sahil Gandhi &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">sahilgandhi87 at gmail.com</A>&gt;:

&gt;<i> Hi Steve,
</I>&gt;<i>
</I>&gt;<i> Could you please elaborate in detail?
</I>&gt;<i>
</I>&gt;<i> Many Thanks,
</I>&gt;<i> Sahil
</I>&gt;<i>
</I>&gt;<i> On Mon, Jun 27, 2016 at 12:49 PM, Sahil Gandhi &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">sahilgandhi87 at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Jakob,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks a lot for your time and detailed explanation.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i> Sahil
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Fri, Jun 24, 2016 at 7:13 PM, Jakob Bohm &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">jb-openssl at wisemo.com</A>&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On 24/06/2016 15:24, Sahil Gandhi wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hi Steve,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Could you please help me out?
</I>&gt;&gt;&gt;&gt;<i> I tried to re-read that part of user-guide but no success.
</I>&gt;&gt;&gt;&gt;<i> I know how to generate fingerprint but once i create new static library
</I>&gt;&gt;&gt;&gt;<i> out of libcrypto.a and libssl.a.
</I>&gt;&gt;&gt;&gt;<i> And I do generate the finger print of that new library but don't know
</I>&gt;&gt;&gt;&gt;<i> how to proceed further with that.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> because if i use that new library(to create executable) as it is, it
</I>&gt;&gt;&gt;&gt;<i> throws fingerprint mismatch error.
</I>&gt;&gt;&gt;&gt;<i> My sample source file has FIPS_mode_set(1) call only.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Because fipscannister.o is not compiled as 100% position independent
</I>&gt;&gt;&gt;<i> code (and cannot legally be done so due to the bureaucratic rules of
</I>&gt;&gt;&gt;<i> the FIPS validation), every new program linked to the FIPS enabled
</I>&gt;&gt;&gt;<i> libcrypto.a will end up with a different fingerprint for the
</I>&gt;&gt;&gt;<i> fipscannister.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> And if load address randomization is enabled in the operating system,
</I>&gt;&gt;&gt;<i> each new run of the program will end up with a different fingerprint
</I>&gt;&gt;&gt;<i> and thus not work.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The situation is slightly better for the libcrypto.so DLL, because
</I>&gt;&gt;&gt;<i> if load address randomization is turned off and it is ensured that
</I>&gt;&gt;&gt;<i> libcrypto.so will load at a particular address every time, there
</I>&gt;&gt;&gt;<i> will only be one fingerprint for each compiled libcrypto.so DLL.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Fri, Jun 24, 2016 at 4:14 PM, Steve Marquess &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">marquess at openssl.com</A>
</I>&gt;&gt;&gt;&gt;<i> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">marquess at openssl.com</A>&gt;&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     On 06/24/2016 03:10 AM, Sahil Gandhi wrote:
</I>&gt;&gt;&gt;&gt;<i>     &gt; Hi Jakob,
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt; Could you please elaborate it? I am not getting it.
</I>&gt;&gt;&gt;&gt;<i>     &gt; I might missing something but I did not get it.
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt; Many Thanks Jakob for replying.
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt; -Sahil
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt; On Fri, Jun 24, 2016 at 11:57 AM, Jakob Bohm
</I>&gt;&gt;&gt;&gt;<i>     &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">jb-openssl at wisemo.com</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">jb-openssl at wisemo.com</A>&gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt; &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">jb-openssl at wisemo.com</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">jb-openssl at wisemo.com</A>&gt;&gt;&gt;
</I>&gt;&gt;&gt;&gt;<i> wrote:
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt;     On 24/06/2016 07:59, Sahil Gandhi wrote:
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt;         Hi All,
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt;         I have built Openssl-fips-2.0.10.tar on* RHEL Linux*
</I>&gt;&gt;&gt;&gt;<i>     (/_*Same
</I>&gt;&gt;&gt;&gt;<i>     &gt;         happens with Solaris 10*_/). Then I built Openssl-1.0.1p
</I>&gt;&gt;&gt;&gt;<i>     using
</I>&gt;&gt;&gt;&gt;<i>     &gt;         respective fips object module (i.e.
</I>&gt;&gt;&gt;&gt;<i>     Openssl-fips-2.0.10.tar).
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt;         Once I have built Openssl-1.0.1p, libcrypto.a and
</I>&gt;&gt;&gt;&gt;<i>     libssl.a has
</I>&gt;&gt;&gt;&gt;<i>     &gt;         been created.
</I>&gt;&gt;&gt;&gt;<i>     &gt;         I need to join these 2 libraries and make it one.
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt;         I am doing it using &quot;ar&quot; command as follows:
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt;         ar -x libssl.a
</I>&gt;&gt;&gt;&gt;<i>     &gt;         ar -x libcrypto.a
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt;         Then combine all .o files to make third library:
</I>&gt;&gt;&gt;&gt;<i>     &gt;         ar -r libnew.a *.o
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt;         But when i use this libnew.a in my sample(contain
</I>&gt;&gt;&gt;&gt;<i>     &gt;         FIPS_mode_set(1)), it compiles successfully but when
</I>&gt;&gt;&gt;&gt;<i>     execute the
</I>&gt;&gt;&gt;&gt;<i>     &gt;         executable it throws error* finger print does not
</I>&gt;&gt;&gt;&gt;<i>     match:fips.c:232*
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt;          Plz help.
</I>&gt;&gt;&gt;&gt;<i>     &gt;          I need to combine both libaries and make it one.
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt;         Any help/suggestion?
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>     &gt;     You forgot the special link step for FIPS enabled
</I>&gt;&gt;&gt;&gt;<i> applications,
</I>&gt;&gt;&gt;&gt;<i>     &gt;     perhaps also some of the other required steps from the FIPS
</I>&gt;&gt;&gt;&gt;<i>     &gt;     module users guide.
</I>&gt;&gt;&gt;&gt;<i>     &gt;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     See <A HREF="https://openssl.org/docs/fips/UserGuide-2.0.pdf.">https://openssl.org/docs/fips/UserGuide-2.0.pdf.</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     The FIPS module requires special build-time voodoo to satisfy the
</I>&gt;&gt;&gt;&gt;<i>     peculiar requirements of the FIPS 140-2 validation.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Enjoy
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Jakob
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> Jakob Bohm, CIO, Partner, WiseMo A/S.  <A HREF="https://www.wisemo.com">https://www.wisemo.com</A>
</I>&gt;&gt;&gt;<i> Transformervej 29, 2860 S&#248;borg, Denmark.  Direct +45 31 13 16 10
</I>&gt;&gt;&gt;<i> This public discussion message is non-binding and may contain errors.
</I>&gt;&gt;&gt;<i> WiseMo - Remote Service Management for PCs, Phones and Embedded
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> openssl-users mailing list
</I>&gt;&gt;&gt;<i> To unsubscribe: <A HREF="../../../mailman/listinfo/openssl-users.html">https://mta.openssl.org/mailman/listinfo/openssl-users</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Sahil
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Sahil Gandhi
</I>&gt;<i> Project Engineer
</I>&gt;<i> R&amp;D CDAC, Pune
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> openssl-users mailing list
</I>&gt;<i> To unsubscribe: <A HREF="../../../mailman/listinfo/openssl-users.html">https://mta.openssl.org/mailman/listinfo/openssl-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20160627/e993d51a/attachment.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20160627/e993d51a/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003901.html">[openssl-users] Regarding FIPS capable openssl (I want to combine libcrypto.a and libssl.a)
</A></li>
	<LI>Next message: <A HREF="003926.html">[openssl-users] Regarding FIPS capable openssl (I want to combine libcrypto.a and libssl.a)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3902">[ date ]</a>
              <a href="thread.html#3902">[ thread ]</a>
              <a href="subject.html#3902">[ subject ]</a>
              <a href="author.html#3902">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
