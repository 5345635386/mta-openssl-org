<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] M_ASN1_D2I_* replacement in OpenSSL 1.1.0
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2016-September/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20M_ASN1_D2I_%2A%20replacement%20in%20OpenSSL%201.1.0&In-Reply-To=%3C20160908192356.GB7289%40openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004389.html">
   <LINK REL="Next"  HREF="004395.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] M_ASN1_D2I_* replacement in OpenSSL 1.1.0</H1>
    <B>Dr. Stephen Henson</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20M_ASN1_D2I_%2A%20replacement%20in%20OpenSSL%201.1.0&In-Reply-To=%3C20160908192356.GB7289%40openssl.org%3E"
       TITLE="[openssl-users] M_ASN1_D2I_* replacement in OpenSSL 1.1.0">steve at openssl.org
       </A><BR>
    <I>Thu Sep  8 19:23:56 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="004389.html">[openssl-users] M_ASN1_D2I_* replacement in OpenSSL 1.1.0
</A></li>
        <LI>Next message: <A HREF="004395.html">[openssl-users] M_ASN1_D2I_* replacement in OpenSSL 1.1.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4393">[ date ]</a>
              <a href="thread.html#4393">[ thread ]</a>
              <a href="subject.html#4393">[ subject ]</a>
              <a href="author.html#4393">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Sep 08, 2016, Aleksandr Konstantinov wrote:

&gt;<i> Hello all,
</I>&gt;<i> 
</I>&gt;<i> I'm in process of porting our project to OpenSSL 1.1.0. We have part of
</I>&gt;<i> code which heavily uses M_ASN1_D2I_* and M_ASN1_I2D_* for defining d2i_*
</I>&gt;<i> and i2d_* methods for new extension. For example code uses M_ASN1_D2I_vars,
</I>&gt;<i> M_ASN1_D2I_Init and M_ASN1_D2I_start_sequence to start reading sequence of
</I>&gt;<i> items and then proceeds with M_ASN1_D2I_get_* for content of the
</I>&gt;<i> sequence. Could please anybody advise what would be proper replacement for
</I>&gt;<i> those macros in OpenSSL 1.1.0? Is there any new API for such things? Or
</I>&gt;<i> shall one do raw byte banging?
</I>&gt;<i> 
</I>
Those old macros were updated way back in OpenSSL 0.9.7 and finally retired in
OpenSSL 1.1.0.

You need to write an appropriate ASN.1 module to encode and decode your
structure. There are many examples of this such as in crypto/cms/cms_asn1.c
and some much simpler ones in crypto/x509v3 which are perhaps better suited to
you needs.

They use macros which start with ASN1_SEQUENCE*

Is it possible to look at your old code? Then I could give some more specific
pointers.

Steve.
--
Dr Stephen N. Henson. OpenSSL project core developer.
Commercial tech support now available see: <A HREF="http://www.openssl.org">http://www.openssl.org</A>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004389.html">[openssl-users] M_ASN1_D2I_* replacement in OpenSSL 1.1.0
</A></li>
	<LI>Next message: <A HREF="004395.html">[openssl-users] M_ASN1_D2I_* replacement in OpenSSL 1.1.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4393">[ date ]</a>
              <a href="thread.html#4393">[ thread ]</a>
              <a href="subject.html#4393">[ subject ]</a>
              <a href="author.html#4393">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
