<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] &#22238;&#22797;&#65306; &#22238;&#22797;&#65306;  [help]SSL_CTX_use_certificate_file failed!
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2016-September/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20%3D%3Futf-8%3Fb%3F5Zue5aSN77yaIOWbnuWkje%2B8miAgW2hlbHBd%3F%3D%0A%20%3D%3Futf-8%3Fq%3FSSL%3D5FCTX%3D5Fuse%3D5Fcertificate%3D5Ffile_failed%21%3F%3D&In-Reply-To=%3Cfd0f96ef-a61d-4c52-a73d-77815f7b229b.zy_chongqing%40aliyun.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004435.html">
   <LINK REL="Next"  HREF="004437.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] &#22238;&#22797;&#65306; &#22238;&#22797;&#65306;  [help]SSL_CTX_use_certificate_file failed!</H1>
    <B>zy_chongqing</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20%3D%3Futf-8%3Fb%3F5Zue5aSN77yaIOWbnuWkje%2B8miAgW2hlbHBd%3F%3D%0A%20%3D%3Futf-8%3Fq%3FSSL%3D5FCTX%3D5Fuse%3D5Fcertificate%3D5Ffile_failed%21%3F%3D&In-Reply-To=%3Cfd0f96ef-a61d-4c52-a73d-77815f7b229b.zy_chongqing%40aliyun.com%3E"
       TITLE="[openssl-users] &#22238;&#22797;&#65306; &#22238;&#22797;&#65306;  [help]SSL_CTX_use_certificate_file failed!">zy_chongqing at aliyun.com
       </A><BR>
    <I>Tue Sep 13 15:59:06 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="004435.html">[openssl-users] &#22238;&#22797;&#65306;  [help]SSL_CTX_use_certificate_file failed!
</A></li>
        <LI>Next message: <A HREF="004437.html">[openssl-users] &#22238;&#22797;&#65306; &#22238;&#22797;&#65306; [help]SSL_CTX_use_certificate_file failed!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4436">[ date ]</a>
              <a href="thread.html#4436">[ thread ]</a>
              <a href="subject.html#4436">[ subject ]</a>
              <a href="author.html#4436">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Only this one certificate, acutually this file is used for the iOS APNs function.the weird thing is, I use the same file and same code on other 2 server, it work well. That is really confused me.&#160;------------------------------------------------------------------&#21457;&#20214;&#20154;&#65306;Viktor Dukhovni &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at dukhovni.org</A>&gt;&#21457;&#36865;&#26102;&#38388;&#65306;2016&#24180;9&#26376;13&#26085;(&#26143;&#26399;&#20108;) 23:46&#25910;&#20214;&#20154;&#65306;openssl-users &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&gt;&#20027;&#12288;&#39064;&#65306;Re: [openssl-users] &#22238;&#22797;&#65306;  [help]SSL_CTX_use_certificate_file failed!
On&#160;Tue,&#160;Sep&#160;13,&#160;2016&#160;at&#160;10:53:57PM&#160;+0800,&#160;zy_chongqing&#160;wrote:

&gt;<i>&#160;thanks&#160;for&#160;your&#160;reply.&#160;please&#160;kindly&#160;find&#160;the&#160;attached&#160;to&#160;get&#160;the&#160;certificate.
</I>
Firstly,&#160;you&#160;posted&#160;a&#160;2048-bit&#160;certificate,&#160;which&#160;would&#160;not&#160;normally
fail&#160;with&#160;a&#160;&quot;key&#160;too&#160;small&quot;&#160;error,&#160;other&#160;than&#160;by&#160;failure&#160;to&#160;parse
the&#160;public&#160;key.

Secondly,&#160;when&#160;I&#160;start&#160;the&#160;OpenSSL&#160;1.1.0&#160;s_server(1)&#160;with&#160;the&#160;posted
certificate&#160;as&#160;the&#160;chain&#160;file,&#160;and&#160;a&#160;random&#160;2048-bit&#160;RSA&#160;key&#160;as
the&#160;key&#160;file,&#160;the&#160;error&#160;is&#160;that&#160;the&#160;key&#160;and&#160;certificate&#160;don't&#160;match.
This&#160;means&#160;that&#160;at&#160;least&#160;s_server&#160;*is*&#160;able&#160;to&#160;parse&#160;the&#160;public
key.&#160;&#160;Are&#160;there&#160;some&#160;other&#160;certificates&#160;in&#160;the&#160;chain&#160;file,&#160;in
addition&#160;to&#160;the&#160;leaf&#160;certificate&#160;you&#160;posted?&#160;&#160;Please&#160;post&#160;all
the&#160;certificates&#160;(but&#160;not&#160;the&#160;private&#160;key)&#160;from&#160;that&#160;chain&#160;file.

&#160;&#160;&#160;&#160;$&#160;openssl&#160;genrsa&#160;2048&#160;&gt;&gt;&#160;/tmp/cert.pem
&#160;&#160;&#160;&#160;Generating&#160;RSA&#160;private&#160;key,&#160;2048&#160;bit&#160;long&#160;modulus
&#160;&#160;&#160;&#160;........................................................................+++
&#160;&#160;&#160;&#160;...............+++
&#160;&#160;&#160;&#160;e&#160;is&#160;65537&#160;(0x010001)

&#160;&#160;&#160;&#160;$&#160;openssl&#160;s_server&#160;-cert&#160;/tmp/cert.pem&#160;-accept&#160;12345
&#160;&#160;&#160;&#160;Using&#160;default&#160;temp&#160;DH&#160;parameters
&#160;&#160;&#160;&#160;error&#160;setting&#160;private&#160;key
&#160;&#160;&#160;&#160;140735148003328:error:0B080074:x509&#160;certificate&#160;routines:X509_check_private_key:key&#160;values&#160;mismatch:../openssl/crypto/x509/x509_cmp.c:295:

--&#160;
&#160;Viktor.
--&#160;
openssl-users&#160;mailing&#160;list
To&#160;unsubscribe:&#160;<A HREF="../../../mailman/listinfo/openssl-users.html">https://mta.openssl.org/mailman/listinfo/openssl-users</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20160913/313a66ce/attachment.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20160913/313a66ce/attachment.html</A>&gt;
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004435.html">[openssl-users] &#22238;&#22797;&#65306;  [help]SSL_CTX_use_certificate_file failed!
</A></li>
	<LI>Next message: <A HREF="004437.html">[openssl-users] &#22238;&#22797;&#65306; &#22238;&#22797;&#65306; [help]SSL_CTX_use_certificate_file failed!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4436">[ date ]</a>
              <a href="thread.html#4436">[ thread ]</a>
              <a href="subject.html#4436">[ subject ]</a>
              <a href="author.html#4436">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
