<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Handling signature_algorithm extension on TLS1.3 server
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2019-June/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Handling%20signature_algorithm%20extension%20on%20TLS1.3%20server&In-Reply-To=%3C30591254.IpTQv7yrRR%40pintsize.usersys.redhat.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010643.html">
   <LINK REL="Next"  HREF="010653.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Handling signature_algorithm extension on TLS1.3 server</H1>
    <B>Hubert Kario</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Handling%20signature_algorithm%20extension%20on%20TLS1.3%20server&In-Reply-To=%3C30591254.IpTQv7yrRR%40pintsize.usersys.redhat.com%3E"
       TITLE="Handling signature_algorithm extension on TLS1.3 server">hkario at redhat.com
       </A><BR>
    <I>Fri Jun  7 16:07:19 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="010643.html">Handling signature_algorithm extension on TLS1.3 server
</A></li>
        <LI>Next message: <A HREF="010653.html">Handling signature_algorithm extension on TLS1.3 server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10646">[ date ]</a>
              <a href="thread.html#10646">[ thread ]</a>
              <a href="subject.html#10646">[ subject ]</a>
              <a href="author.html#10646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Friday, 7 June 2019 14:42:26 CEST Raja Ashok wrote:
&gt;<i> &gt; This was an area of some ambiguity in the TLSv1.2 spec where only
</I>&gt;<i> &gt; signature_algorithms exists. I believe it was common practice for
</I>&gt;<i> &gt; implementations to not check the signatures in certificates for
</I>&gt;<i> &gt; conformance with
</I>&gt;<i> &gt; this (certainly that is the way OpenSSL behaves). The TLSv1.3 spec seems
</I>&gt;<i> &gt; to be
</I>&gt;<i> &gt; more explicit about this. I would expect our TLSv1.2 implementation to
</I>&gt;<i> &gt; continue
</I>&gt;<i> &gt; to operate as it did before so this additional checking of signatures in
</I>&gt;<i> &gt; certificates where only the signature_algorithms extensions is present
</I>&gt;<i> &gt; should
</I>&gt;<i> &gt; only apply to TLSv1.3.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I don't see any code to do this in has_usable_cert so this looks like a
</I>&gt;<i> &gt; potential bug. Although possibly it was left out on purpose.
</I>&gt;<i> 
</I>&gt;<i> Yes. Currently this check is missing for both TLSv1.2 and TLSv1.3. I feel
</I>&gt;<i> we may need to add for both TLSv1.2 and TLSv1.3, because TLSv1.2 RFC 5246
</I>&gt;<i> also mandates to do this check.
</I>&gt;<i> 
</I>&gt;<i>    If the client provided a &quot;signature_algorithms&quot; extension, then all
</I>&gt;<i>    certificates provided by the server MUST be signed by a
</I>&gt;<i>    hash/signature algorithm pair that appears in that extension.
</I>

OTOH, the practice in TLS 1.2, and behaviour codified in TLS 1.3 RFC, is that 
if you have just one chain, give it to client and let it sort out if it likes 
it or not

-- 
Regards,
Hubert Kario
Senior Quality Engineer, QE BaseOS Security team
Web: www.cz.redhat.com
Red Hat Czech s.r.o., Purky&#328;ova 115, 612 00  Brno, Czech Republic
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part.
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20190607/40e787ab/attachment.sig">http://mta.openssl.org/pipermail/openssl-users/attachments/20190607/40e787ab/attachment.sig</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010643.html">Handling signature_algorithm extension on TLS1.3 server
</A></li>
	<LI>Next message: <A HREF="010653.html">Handling signature_algorithm extension on TLS1.3 server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10646">[ date ]</a>
              <a href="thread.html#10646">[ thread ]</a>
              <a href="subject.html#10646">[ subject ]</a>
              <a href="author.html#10646">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
