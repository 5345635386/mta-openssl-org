<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Can create a cert with no serial number?
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2023-June/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Can%20create%20a%20cert%20with%20no%20serial%20number%3F&In-Reply-To=%3C02451027-9624-0064-7033-764ffb38214e%40htt-consult.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016394.html">
   <LINK REL="Next"  HREF="016396.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Can create a cert with no serial number?</H1>
    <B>Robert Moskowitz</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Can%20create%20a%20cert%20with%20no%20serial%20number%3F&In-Reply-To=%3C02451027-9624-0064-7033-764ffb38214e%40htt-consult.com%3E"
       TITLE="Can create a cert with no serial number?">rgm at htt-consult.com
       </A><BR>
    <I>Thu Jun  1 03:05:14 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016394.html">Can create a cert with no serial number?
</A></li>
        <LI>Next message (by thread): <A HREF="016396.html">Can create a cert with no serial number?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16395">[ date ]</a>
              <a href="thread.html#16395">[ thread ]</a>
              <a href="subject.html#16395">[ subject ]</a>
              <a href="author.html#16395">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Actually we have demonstrated that 8 randomly generated bytes may have 
collisions.

If you check out rfc9374, sec 9.5, I discuss the real risk of collisions 
in the hash-generated right 8 bytes of the IPv6 DET.&#160; We manage this in 
the registration (draft-ietf-drip-registries, sec 6) by rejecting 
duplicate DETs.&#160; First-come-first-serve; typically the public keys are 
different, but the hashes collide.

So here there is a real risk of serial number duplication, but the 
subjectKey will be different.&#160; That is what I am pinning uniqueness on.&#160; 
Here serial number is because.&#160; this whole effort is because there are a 
few parties in the drone-to-drone direct communications work that hold 
we have to have X.509 certs and they have to be small enough to fit in 
the very constrained spectrum that will be regulated to use for this.&#160; 
Meanwhile in my RATS-styled Endorsements, I provide all the trust these 
individuals claim to need in 136 bytes and can compress 16 bytes out of 
that 
(<A HREF="https://datatracker.ietf.org/doc/draft-moskowitz-drip-a2x-adhoc-session/">https://datatracker.ietf.org/doc/draft-moskowitz-drip-a2x-adhoc-session/</A>).

These X.509 certs are, in DER format, 240 bytes.

So I go through the work and then at the 'end of the day' we see how we 
address this problem.&#160; Would not surprise if next they throw CBOR certs 
out at me.&#160; Just to have flexible content, when everything points that 
flexibility can be better handled as signed attributes in the 
drone-to-drone messaging.

So sorry for any breaking of best practices.&#160; I would rather not spend 
ANY time on this, but I have to show due diligence.

Sigh.

On 5/31/23 21:55, Viktor Dukhovni wrote:
&gt;<i> On Wed, May 31, 2023 at 09:21:07PM -0400, Robert Moskowitz wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> openssl rand -hex 1 &gt; $dir/serial
</I>&gt;<i> Don't do that.  You'll quickly create collisions.
</I>&gt;<i> Initialise the serial number to 1 more than the
</I>&gt;<i> serial number of the issuing CA, and let it be
</I>&gt;<i> auto-maintained thereafter.
</I>&gt;<i>
</I>&gt;<i> This assumes a sound digest algorithm is used, otherwise predictable
</I>&gt;<i> serial numbers make it easier to mount collision attacks on the CA.
</I>&gt;<i> Are you sure you actually need to squeeze out every last byte?
</I>&gt;<i>
</I>&gt;<i> Premature optimisation ...
</I>&gt;<i>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016394.html">Can create a cert with no serial number?
</A></li>
	<LI>Next message (by thread): <A HREF="016396.html">Can create a cert with no serial number?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16395">[ date ]</a>
              <a href="thread.html#16395">[ thread ]</a>
              <a href="subject.html#16395">[ subject ]</a>
              <a href="author.html#16395">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
