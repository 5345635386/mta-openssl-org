<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Subject: SSL_connect returned=1 errno=0 state=error: dh key too small
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2019-August/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Subject%3A%20SSL_connect%20returned%3D1%20errno%3D0%20state%3Derror%3A%20dh%20key%20too%0A%20small&In-Reply-To=%3C9447154.QSkP0O941a%40pintsize.usersys.redhat.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011096.html">
   <LINK REL="Next"  HREF="011111.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Subject: SSL_connect returned=1 errno=0 state=error: dh key too small</H1>
    <B>Hubert Kario</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Subject%3A%20SSL_connect%20returned%3D1%20errno%3D0%20state%3Derror%3A%20dh%20key%20too%0A%20small&In-Reply-To=%3C9447154.QSkP0O941a%40pintsize.usersys.redhat.com%3E"
       TITLE="Subject: SSL_connect returned=1 errno=0 state=error: dh key too small">hkario at redhat.com
       </A><BR>
    <I>Thu Aug 29 15:05:48 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="011096.html">Subject: SSL_connect returned=1 errno=0 state=error: dh key too small
</A></li>
        <LI>Next message: <A HREF="011111.html">Subject: SSL_connect returned=1 errno=0 state=error: dh key too small
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11105">[ date ]</a>
              <a href="thread.html#11105">[ thread ]</a>
              <a href="subject.html#11105">[ subject ]</a>
              <a href="author.html#11105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday, 28 August 2019 23:20:49 CEST Marcelo Lauxen wrote:
&gt;<i>   Our server runs with DH key size of 2048 bits and we are trying to make
</I>&gt;<i> requests with httparty(<A HREF="https://github.com/jnunemaker/httparty">https://github.com/jnunemaker/httparty</A>) to a server
</I>&gt;<i> that uses DH key size of 1024 bits, i want to now for what reason we are
</I>&gt;<i> getting this error SSL_connect returned=1 errno=0 state=error: dh key too
</I>&gt;<i> small, it's because different DH key sizes? &#129300;
</I>&gt;<i> 
</I>&gt;<i> We haven't control of the server who are using DH key size of 1048 bits.
</I>&gt;<i> 
</I>&gt;<i> I've opened the same issue on httparty
</I>&gt;<i> <A HREF="https://github.com/jnunemaker/httparty/issues/664,">https://github.com/jnunemaker/httparty/issues/664,</A> but seems not a problem
</I>&gt;<i> with httparty and something with OpenSSL.
</I>&gt;<i> 
</I>&gt;<i> Currently our server is using *OpenSSL 1.1.1c*, but before we was
</I>&gt;<i> using *OpenSSL
</I>&gt;<i> 1.1.0j* and this error doesn't happen. Is OpenSSL blocking the
</I>&gt;<i> communication between our server who uses DH 2048 bits and the other server
</I>&gt;<i> who uses DH 1024 bits (weak Diffie-Hellman)? If yes, is it reported in
</I>&gt;<i> somewhere?
</I>&gt;<i> 
</I>&gt;<i> Our server SSL Labs results:
</I>&gt;<i> <A HREF="https://www.ssllabs.com/ssltest/analyze.html?d=web.monde.com.br&amp;latest">https://www.ssllabs.com/ssltest/analyze.html?d=web.monde.com.br&amp;latest</A>
</I>&gt;<i> 
</I>&gt;<i> Server who we are trying make requests:
</I>&gt;<i> <A HREF="https://www.ssllabs.com/ssltest/analyze.html?d=webservices.voeazul.com.br&amp;la">https://www.ssllabs.com/ssltest/analyze.html?d=webservices.voeazul.com.br&amp;la</A>
</I>&gt;<i> test
</I>
that server is willing to negotiate ECDHE_RSA ciphers, you'd be better off 
disabling ciphers that use DHE and RSA key exchange and using ECDHE_RSA 
instead of trying to make 1024 bit work &#8211; it really is weak and should not be 
used (see also: LOGJAM)


-- 
Regards,
Hubert Kario
Senior Quality Engineer, QE BaseOS Security team
Web: www.cz.redhat.com
Red Hat Czech s.r.o., Purky&#328;ova 115, 612 00  Brno, Czech Republic
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part.
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20190829/a0b1f0be/attachment-0001.sig">http://mta.openssl.org/pipermail/openssl-users/attachments/20190829/a0b1f0be/attachment-0001.sig</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011096.html">Subject: SSL_connect returned=1 errno=0 state=error: dh key too small
</A></li>
	<LI>Next message: <A HREF="011111.html">Subject: SSL_connect returned=1 errno=0 state=error: dh key too small
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11105">[ date ]</a>
              <a href="thread.html#11105">[ thread ]</a>
              <a href="subject.html#11105">[ subject ]</a>
              <a href="author.html#11105">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
