<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> openssl-users Digest, Vol 106, Issue 24
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2023-September/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20openssl-users%20Digest%2C%20Vol%20106%2C%20Issue%2024&In-Reply-To=%3CCA%2BAuDRd0YX0gpK9AApvtXCPjkPupzvmt%3DDiYxd_eFVoE2jPU%2BQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016733.html">
   <LINK REL="Next"  HREF="016737.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>openssl-users Digest, Vol 106, Issue 24</H1>
    <B>Kamal Joshi</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20openssl-users%20Digest%2C%20Vol%20106%2C%20Issue%2024&In-Reply-To=%3CCA%2BAuDRd0YX0gpK9AApvtXCPjkPupzvmt%3DDiYxd_eFVoE2jPU%2BQ%40mail.gmail.com%3E"
       TITLE="openssl-users Digest, Vol 106, Issue 24">kamal19joshi at gmail.com
       </A><BR>
    <I>Tue Sep 26 01:29:09 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016733.html">Question about using Post Handshake Authentication (SSL_VERIFY_POST_HANDSHAKE) and SSL_get_peer_certificate
</A></li>
        <LI>Next message (by thread): <A HREF="016737.html">Engine vs provider questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16736">[ date ]</a>
              <a href="thread.html#16736">[ thread ]</a>
              <a href="subject.html#16736">[ subject ]</a>
              <a href="author.html#16736">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Team,

I have a few queries related to the Provider concept in OpenSSL 3.1.x
version

As openssl version is coming up with Provider implementation and engine API
are deprecated. Below are the queries.
1. Is it possible to still use Engine API and will it work with OpenSSL
3.1.x?
2. If not can someone help in replacing the engine with provider
implementation with some basic example or minimum set of implementation?

I am working on this on Linux (Openbmc environment ) which is then open
source to the community. As OpenSSL provides command line support in Linux
for testing different speed tests using hardware engines, similarly is
there any such command line utility or commands for provider?

Also like in Engine, we change openssl.conf file for invoking the engine at
runtime. Do we need to change the configuration file for the provider as
well to load at runtime?
Our project is at a very scratch level and we starting with OpenSSL 3.1.x
so need to understand provider implementation. Any pointer or input will be
highly helpful to us.

Regards,
Kamal Joshi




On Fri, Sep 22, 2023 at 5:30&#8239;PM &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-request at openssl.org</A>&gt; wrote:

&gt;<i> Send openssl-users mailing list submissions to
</I>&gt;<i>         <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>
</I>&gt;<i>
</I>&gt;<i> To subscribe or unsubscribe via the World Wide Web, visit
</I>&gt;<i>         <A HREF="../../../mailman/listinfo/openssl-users.html">https://mta.openssl.org/mailman/listinfo/openssl-users</A>
</I>&gt;<i> or, via email, send a message with subject or body 'help' to
</I>&gt;<i>         <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-request at openssl.org</A>
</I>&gt;<i>
</I>&gt;<i> You can reach the person managing the list at
</I>&gt;<i>         <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-owner at openssl.org</A>
</I>&gt;<i>
</I>&gt;<i> When replying, please edit your Subject line so it is more specific
</I>&gt;<i> than &quot;Re: Contents of openssl-users digest...&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Today's Topics:
</I>&gt;<i>
</I>&gt;<i>    1. Re: pkey public key extraction (David von Oheimb)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 1
</I>&gt;<i> Date: Fri, 22 Sep 2023 07:44:01 +0200
</I>&gt;<i> From: David von Oheimb &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">it at von-Oheimb.de</A>&gt;
</I>&gt;<i> To: <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>
</I>&gt;<i> Subject: Re: pkey public key extraction
</I>&gt;<i> Message-ID: &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">52984fec-bb5a-11ad-49ab-6d77dece9dea at von-Oheimb.de</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=&quot;utf-8&quot;; Format=&quot;flowed&quot;
</I>&gt;<i>
</I>&gt;<i> Thanks Viktor for the very good comments below.
</I>&gt;<i>
</I>&gt;<i> Here is a more general side remark on a side info by Stephen Doody:
</I>&gt;<i>
</I>&gt;<i> &gt; For info we're running openssl version 1.0.2k-fips on Centos 7 in an AWS
</I>&gt;<i> EC2 instance.
</I>&gt;<i> OpenSSL 1.0.2 is heavily outdated.
</I>&gt;<i> Meanwhile, using anything below 3.0 is discouraged and imposes more or
</I>&gt;<i> less security risks.
</I>&gt;<i>
</I>&gt;<i> A further motivation for upgrading to a recent OpenSSL version is that
</I>&gt;<i> the OpenSSL apps like x509
</I>&gt;<i> meanwhile have a significantly improved documentation and offer extended
</I>&gt;<i> options for advanced use.
</I>&gt;<i>
</I>&gt;<i>  ??? David
</I>&gt;<i>
</I>&gt;<i> On 20.09.23 20:08, Viktor Dukhovni wrote:
</I>&gt;<i> &gt; On Wed, Sep 20, 2023 at 07:28:46AM +0000, Doody, Stephen via
</I>&gt;<i> openssl-users wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; I'm hoping someone can point me in the right direction.
</I>&gt;<i> &gt; Perhaps walk you there step by step...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; We have a pem file that a colleague believes contains a private and a
</I>&gt;<i> public key.
</I>&gt;<i> &gt; More likely, a private key and a (public key) X.509 certificate (a
</I>&gt;<i> &gt; certificate is basically a public key enclosed in a singed name binding
</I>&gt;<i> &gt; attestation).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; They want to extract the public key from the file and deploy that, so
</I>&gt;<i> &gt;&gt; a 3rd party service can access our system.
</I>&gt;<i> &gt; Typically, the 3rd party would want your certificate, though some are
</I>&gt;<i> &gt; sophisticated enough to directly use a &quot;bare&quot; public key.  The
</I>&gt;<i> &gt; distinction is important, so you need to check *precisely* what they're
</I>&gt;<i> &gt; looking for.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; The command they suggested was:
</I>&gt;<i> &gt;&gt; openssl pkey -in ourcert.pem -pubout -out pubkey1.pem
</I>&gt;<i> &gt; This extracts a bare public key from the first private key in the PEM
</I>&gt;<i> &gt; file.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; The pubkey.pem file that is created only contains the public key and
</I>&gt;<i> &gt;&gt; nothing else, so the 3rd party service can no longer connect to our
</I>&gt;<i> &gt;&gt; system as it doesn't recognise this as a valid certificate and
</I>&gt;<i> &gt;&gt; complained that it was not trusted.
</I>&gt;<i> &gt; This makes no sense, because if they wanted a public key, they got one.
</I>&gt;<i> &gt; If they wanted a certificate, they should have asked for that, and not
</I>&gt;<i> &gt; given you incorrect instructions for getting just the key.  It seems
</I>&gt;<i> &gt; they need as much hand-holding as you do. :-(
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; I've read through the man pages for pkey and x509 and I've also tried
</I>&gt;<i> &gt;&gt; this: openssl x509 -in ourcert.pem -pubkey -out pubkey2.pem
</I>&gt;<i> &gt; This extracts two PEM objects, the &quot;bare&quot; public key *and* the
</I>&gt;<i> &gt; certificate (because you didn't also specify &quot;-noout&quot;).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; And apparently, it was the certificate they were looking for after all.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; The 3rd party service can now connect to our system but viewing the
</I>&gt;<i> &gt;&gt; details of the pubkey2.pem file it looks identical to the original
</I>&gt;<i> &gt;&gt; ourcert.pem file.
</I>&gt;<i> &gt; Almost identical, it wouldn't have your private key.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Is pkey or x509 the right way to do this?
</I>&gt;<i> &gt; Apparently &quot;x509&quot;, and you don't need the &quot;-pubout&quot; option, that's not
</I>&gt;<i> &gt; what they meant to ask you for.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; If it is pkey, how do I extract the public key so that it generates a
</I>&gt;<i> &gt;&gt; valid certificate?
</I>&gt;<i> &gt; This makes no sense.  A public key is not a certificate, and does not
</I>&gt;<i> &gt; contain one.  It is the other way around.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt;      Viktor.
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> An HTML attachment was scrubbed...
</I>&gt;<i> URL: &lt;
</I>&gt;<i> <A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20230922/907bb401/attachment-0001.htm">https://mta.openssl.org/pipermail/openssl-users/attachments/20230922/907bb401/attachment-0001.htm</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Subject: Digest Footer
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> openssl-users mailing list
</I>&gt;<i> <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>
</I>&gt;<i> <A HREF="../../../mailman/listinfo/openssl-users.html">https://mta.openssl.org/mailman/listinfo/openssl-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> End of openssl-users Digest, Vol 106, Issue 24
</I>&gt;<i> **********************************************
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20230926/39dad301/attachment.htm">https://mta.openssl.org/pipermail/openssl-users/attachments/20230926/39dad301/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016733.html">Question about using Post Handshake Authentication (SSL_VERIFY_POST_HANDSHAKE) and SSL_get_peer_certificate
</A></li>
	<LI>Next message (by thread): <A HREF="016737.html">Engine vs provider questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16736">[ date ]</a>
              <a href="thread.html#16736">[ thread ]</a>
              <a href="subject.html#16736">[ subject ]</a>
              <a href="author.html#16736">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
