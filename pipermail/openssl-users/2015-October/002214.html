<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Renegotiation procedure (server side)
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2015-October/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Renegotiation%20procedure%20%28server%20side%29&In-Reply-To=%3CCAB%3D4g8JCuM0nPGD86UUzMwSDaWk8CyzzhOZW5su3Thf0Xf5tEQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002208.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Renegotiation procedure (server side)</H1>
    <B>Judson Wilson</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Renegotiation%20procedure%20%28server%20side%29&In-Reply-To=%3CCAB%3D4g8JCuM0nPGD86UUzMwSDaWk8CyzzhOZW5su3Thf0Xf5tEQ%40mail.gmail.com%3E"
       TITLE="[openssl-users] Renegotiation procedure (server side)">wilson.judson at gmail.com
       </A><BR>
    <I>Sat Oct 31 04:41:13 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="002208.html">[openssl-users] FIPS OpenSSL Test Harness and RSA PSS
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2214">[ date ]</a>
              <a href="thread.html#2214">[ thread ]</a>
              <a href="subject.html#2214">[ subject ]</a>
              <a href="author.html#2214">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have seen several sources suggest that the following psuedo code
procedure should force a renegotiation before proceeding:

SSL_renegotiate(...);
while(SSL_renegotation_pending(...))
    SSL_do_handshake(...);

I am using non-blocking I/O, and have ommitted error handling and any
lower-level I/O management from this example.

Calling this from the server, I see a Hello Request sent from the server to
the client, and a Client Hello sent from the client to the server. Then
nothing happens; the server does not respond.

I believe that SSL_do_handshake does nothing to handle the actual handshake
in this scenario. The code appears to be stuck in the loop.

What is the actual sequence of events, from an API user perspective, that
should result in a successful renegotiation?

I have a theory, but I'd like some untainted feedback. :)

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20151030/54693292/attachment.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20151030/54693292/attachment.html</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002208.html">[openssl-users] FIPS OpenSSL Test Harness and RSA PSS
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2214">[ date ]</a>
              <a href="thread.html#2214">[ thread ]</a>
              <a href="subject.html#2214">[ subject ]</a>
              <a href="author.html#2214">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
