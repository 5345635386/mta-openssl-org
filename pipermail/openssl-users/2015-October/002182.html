<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] suggested enhancement documentation or warning for pkey command line tool
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2015-October/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20suggested%20enhancement%20documentation%20or%20warning%0A%20for%20pkey%20command%20line%20tool&In-Reply-To=%3C562ED189.2040405%40wisemo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002178.html">
   <LINK REL="Next"  HREF="002183.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] suggested enhancement documentation or warning for pkey command line tool</H1>
    <B>Jakob Bohm</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20suggested%20enhancement%20documentation%20or%20warning%0A%20for%20pkey%20command%20line%20tool&In-Reply-To=%3C562ED189.2040405%40wisemo.com%3E"
       TITLE="[openssl-users] suggested enhancement documentation or warning for pkey command line tool">jb-openssl at wisemo.com
       </A><BR>
    <I>Tue Oct 27 01:21:13 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="002178.html">[openssl-users] suggested enhancement documentation or warning for pkey command line tool
</A></li>
        <LI>Next message: <A HREF="002183.html">[openssl-users] suggested enhancement documentation or warning for pkey command line tool
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2182">[ date ]</a>
              <a href="thread.html#2182">[ thread ]</a>
              <a href="subject.html#2182">[ subject ]</a>
              <a href="author.html#2182">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 26/10/2015 14:02, Viktor Dukhovni wrote:
&gt;<i> On Mon, Oct 26, 2015 at 01:21:24PM +0100, Michel wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I believe it might be usefull to remind in the documentation that the
</I>&gt;&gt;<i> -cipher argment for openssl pkey command line tool is silently ignore when
</I>&gt;&gt;<i> combined with -outform DER.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> May be it is worth to add a warning too ?
</I>&gt;<i> I think a fatal error would be appropriate.  If you want encrypted
</I>&gt;<i> DER keys, you'll need PKCS#8 or PKCS#12.
</I>&gt;<i>
</I>But the issue is how to make the key conversion command
in the openssl command line tool encrypt the output file,
not which encryption format it should use.

More specifically, the issue is that the currently
recommended command &quot;openssl pkey&quot;, allegedly silently
omits the encryption when told not to Base64 encode the
encrypted key, which is complete nonsense and would be
considered a security issue in any other tool.

I see no particular reason why the &quot;openssl pkey&quot; command
should not encrypt the key in exactly the same way as it
does when Base64 encoding the key, in other words the
difference between -outform DER and -outform PEM should be
*only* the Base64 encoding and the associated decorative
text lines.

Doing something highly dangerous (outputting a private key
unencrypted contrary to user request) in response to an
unrelated option (-outform DER) is a really bad thing.

While on this subject, it would be most useful if all the
openssl command line tools that can output private keys
supported the same command line options to indicate
encryption or lack thereof, specifically, those commands
that currently default to unencrypted should still accept
the &quot;-nodes&quot; command, and should complain if invoked with
the &quot;-passout&quot; option but no encryption request.  5 to 10
years later, it should then be possible to change the
default to encrypted, confident that adding explicit &quot;-nodes&quot;
to scripts and examples will not fail on any reasonably
maintained systems (including systems where openssl is built
by some upstream OS maker).

Enjoy

Jakob
-- 
Jakob Bohm, CIO, Partner, WiseMo A/S.  <A HREF="http://www.wisemo.com">http://www.wisemo.com</A>
Transformervej 29, 2860 S&#248;borg, Denmark.  Direct +45 31 13 16 10
This public discussion message is non-binding and may contain errors.
WiseMo - Remote Service Management for PCs, Phones and Embedded

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002178.html">[openssl-users] suggested enhancement documentation or warning for pkey command line tool
</A></li>
	<LI>Next message: <A HREF="002183.html">[openssl-users] suggested enhancement documentation or warning for pkey command line tool
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2182">[ date ]</a>
              <a href="thread.html#2182">[ thread ]</a>
              <a href="subject.html#2182">[ subject ]</a>
              <a href="author.html#2182">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
