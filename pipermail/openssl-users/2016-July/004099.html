<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Complete CA chain is not getting delivered.
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2016-July/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Complete%20CA%20chain%20is%20not%20getting%20delivered.&In-Reply-To=%3CA25958DB-9AA5-4D56-87FC-DBFB84798AA6%40akamai.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004098.html">
   <LINK REL="Next"  HREF="004100.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Complete CA chain is not getting delivered.</H1>
    <B>Deka, Sanjeeb</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Complete%20CA%20chain%20is%20not%20getting%20delivered.&In-Reply-To=%3CA25958DB-9AA5-4D56-87FC-DBFB84798AA6%40akamai.com%3E"
       TITLE="[openssl-users] Complete CA chain is not getting delivered.">skumarde at akamai.com
       </A><BR>
    <I>Wed Jul 27 13:39:52 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="004098.html">[openssl-users] PKCS7_sign conflict with PKCS7_decrypt?
</A></li>
        <LI>Next message: <A HREF="004100.html">[openssl-users] Load secrets to context.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4099">[ date ]</a>
              <a href="thread.html#4099">[ thread ]</a>
              <a href="subject.html#4099">[ subject ]</a>
              <a href="author.html#4099">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

We needed your input for the following.

We have three different files for the secrets to be used to support SSL.

&#8226;         File1(x.certificate) --&gt; It contains the certificate of the Server.

----BEGIN CERTIFICATE----
Base-64 encoded data for server&#8217;s certificate
----END CERTIFICATE----

&#8226;         File2(y.private_key) --&gt; It contains the private key of the Server.
&#8226;         File3(z.chain_cert) --&gt;  It contains the CA certificate chain(starting with the certificate of the immediate issuer and ending with the certificate of the Root CA).

----BEGIN CERTIFICATE----
Encoded data for certificate of Issuer of server&#8217;s certificate
----END CERTIFICATE----

----BEGIN CERTIFICATE----
Encoded data for certificate of Root CA
----END CERTIFICATE----

&#8226;         Created complete certificate chain(a.chains) from x.certificate and z.chain_cert; created starting with content from x.certificate and followed by content
from z.chain_cert.

----BEGIN CERTIFICATE----
Encoded data for server&#8217;s certificate
----END CERTIFICATE----

----BEGIN CERTIFICATE----
Encoded data for certificate of Issuer of server&#8217;s certificate
----END CERTIFICATE----

----BEGIN CERTIFICATE----
Encoded data for certificate of Root CA
----END CERTIFICATE----

&#8226;         We used SSL_CTX_use_certificate_file() to load the Server&#8217;s certificate(ie. x.certificate) and SSL_CTX_use_certificate_chain_file() to load the complete
certificate chain(a.chains)

With this approach, when we connect to the server, the server was not delivering the complete certificate chain in the CERTIFICATE message of the SSL Handshake.
We could only see certificates of Server followed by certificate of the Root CA; certificate of the intermediate CA was missing.











-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20160727/e468512a/attachment-0001.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20160727/e468512a/attachment-0001.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004098.html">[openssl-users] PKCS7_sign conflict with PKCS7_decrypt?
</A></li>
	<LI>Next message: <A HREF="004100.html">[openssl-users] Load secrets to context.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4099">[ date ]</a>
              <a href="thread.html#4099">[ thread ]</a>
              <a href="subject.html#4099">[ subject ]</a>
              <a href="author.html#4099">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
