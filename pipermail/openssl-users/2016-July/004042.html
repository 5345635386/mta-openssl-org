<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Cipher preference, openssl vs browsers
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2016-July/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Cipher%20preference%2C%20openssl%20vs%20browsers&In-Reply-To=%3C27565f74-19ee-8f87-571f-71956968b3e7%40wisemo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004041.html">
   <LINK REL="Next"  HREF="004043.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Cipher preference, openssl vs browsers</H1>
    <B>Jakob Bohm</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Cipher%20preference%2C%20openssl%20vs%20browsers&In-Reply-To=%3C27565f74-19ee-8f87-571f-71956968b3e7%40wisemo.com%3E"
       TITLE="[openssl-users] Cipher preference, openssl vs browsers">jb-openssl at wisemo.com
       </A><BR>
    <I>Tue Jul 19 09:29:51 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="004041.html">[openssl-users] Cipher preference, openssl vs browsers
</A></li>
        <LI>Next message: <A HREF="004043.html">[openssl-users] Help finding replacement for ASN1_seq_unpack_X509
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4042">[ date ]</a>
              <a href="thread.html#4042">[ thread ]</a>
              <a href="subject.html#4042">[ subject ]</a>
              <a href="author.html#4042">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/07/2016 11:16, Bogdan Harjoc wrote:
&gt;<i> When connecting to a TLS1.2 webserver that uses a weak 512 bit DH key,
</I>&gt;<i> I noticed that browsers select
</I>&gt;<i>
</I>&gt;<i>    TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA
</I>&gt;<i>    (chrome, firefox)
</I>&gt;<i>
</I>&gt;<i> and openssl due to the ciphers list selects
</I>&gt;<i>
</I>&gt;<i>    TLS_DHE_RSA_WITH_CAMELLIA_256_CBC_SHA
</I>&gt;<i>
</I>&gt;<i> openssl s_client -connect 112.175.90.160:443 -cipher
</I>&gt;<i> DEFAULT
</I>&gt;<i> :!EDH-RSA-DES-CBC3-SHA
</I>&gt;<i> :!DHE-RSA-AES128-GCM-SHA256
</I>&gt;<i> :!DHE-RSA-AES256-GCM-SHA384
</I>&gt;<i> :!DHE-RSA-AES128-SHA256
</I>&gt;<i> :!DHE-RSA-AES128-SHA
</I>&gt;<i> :!DHE-RSA-AES256-SHA256
</I>&gt;<i> :!DHE-RSA-AES256-SHA
</I>&gt;<i> :-ECDH
</I>&gt;<i> :-EXPORT:-DES:-SEED:-RC4:-PSK:-IDEA
</I>&gt;<i> :ECDHE-RSA-AES128-SHA
</I>&gt;<i>
</I>&gt;<i> The error is: dh key too small:.\ssl\s3_clnt.c:3424.
</I>&gt;<i>
</I>&gt;<i>  From a client that uses openssl libs, what would the correct
</I>&gt;<i> workaround be ? Try to figure out that the DH key is too small and
</I>&gt;<i> retry with the DHE ciphers disabled ? Or reorder the ciphers ? Given
</I>&gt;<i> that cipher order can lead to failed handshakes, is there a correct
</I>&gt;<i> order for https clients ?
</I>I am not sure, but I guess those browsers default to listing ECDHE
before EDHE, thus never notices the weak DH group parameters (not
key, OpenSSL error message is misleading).

You could try testing those particular versions of chrome and firefox
against <A HREF="https://www.ssllabs.com/ssltest/viewMyClient.html">https://www.ssllabs.com/ssltest/viewMyClient.html</A> to see what
their cipher list is.

Enjoy

Jakob
-- 
Jakob Bohm, CIO, Partner, WiseMo A/S.  <A HREF="https://www.wisemo.com">https://www.wisemo.com</A>
Transformervej 29, 2860 S&#248;borg, Denmark.  Direct +45 31 13 16 10
This public discussion message is non-binding and may contain errors.
WiseMo - Remote Service Management for PCs, Phones and Embedded

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004041.html">[openssl-users] Cipher preference, openssl vs browsers
</A></li>
	<LI>Next message: <A HREF="004043.html">[openssl-users] Help finding replacement for ASN1_seq_unpack_X509
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4042">[ date ]</a>
              <a href="thread.html#4042">[ thread ]</a>
              <a href="subject.html#4042">[ subject ]</a>
              <a href="author.html#4042">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
