<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] How to turn on certain elements in CMS objects
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2016-July/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20How%20to%20turn%20on%20certain%20elements%20in%20CMS%20objects&In-Reply-To=%3C4b763754-0e37-34ef-eff4-6e7c392b82ca%40pdflib.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003992.html">
   <LINK REL="Next"  HREF="003998.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] How to turn on certain elements in CMS objects</H1>
    <B>Stephan M&#252;hlstrasser</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20How%20to%20turn%20on%20certain%20elements%20in%20CMS%20objects&In-Reply-To=%3C4b763754-0e37-34ef-eff4-6e7c392b82ca%40pdflib.com%3E"
       TITLE="[openssl-users] How to turn on certain elements in CMS objects">stm at pdflib.com
       </A><BR>
    <I>Wed Jul  6 14:47:12 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="003992.html">[openssl-users] How to turn on certain elements in CMS objects
</A></li>
        <LI>Next message: <A HREF="003998.html">[openssl-users] How to turn on certain elements in CMS objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3993">[ date ]</a>
              <a href="thread.html#3993">[ thread ]</a>
              <a href="subject.html#3993">[ subject ]</a>
              <a href="author.html#3993">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am 06.07.16 um 16:02 schrieb Dr. Stephen Henson:
&gt;<i> On Wed, Jul 06, 2016, Dr. Stephen Henson wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Fri, Jul 01, 2016, Stephan M?hlstrasser wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> First the AlgorithmIdentifier includes the EC curve name:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>   40   19:               SEQUENCE {
</I>&gt;&gt;&gt;<i>   42    7:                 OBJECT IDENTIFIER ecPublicKey (1 2 840
</I>&gt;&gt;&gt;<i> 10045 2 1)
</I>&gt;&gt;&gt;<i>   51    8:                 OBJECT IDENTIFIER ansiX9p256r1 (1 2 840
</I>&gt;&gt;&gt;<i> 10045 3 1 7)
</I>&gt;&gt;&gt;<i>          :                 }
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> In CMS objects created with OpenSSL with the same recipient
</I>&gt;&gt;&gt;<i> certificate, the curve name is always omitted. Is it possible to
</I>&gt;&gt;&gt;<i> make OpenSSL emit the curve name as well?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> No as this is a violation of the standards. From RFC3278:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>       originator MUST be the alternative originatorKey.  The
</I>&gt;&gt;<i>       originatorKey algorithm field MUST contain the id-ecPublicKey
</I>&gt;&gt;<i>       object identifier (see Section 8.1) with NULL parameters.  The
</I>&gt;&gt;<i>       originatorKey publicKey field MUST contain the DER-encoding of a
</I>&gt;&gt;<i>       value of the ASN.1 type ECPoint (see Section 8.2), which
</I>&gt;&gt;<i>       represents the sending agent's ephemeral EC public key.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Correction... that is not allowed by RFC3278 but is allowed in RFC5753 but
</I>&gt;<i> OpenSSL doesn't currently generate that format. It's not clear what purpose it
</I>&gt;<i> serves as the EC parameters are specified in the recipient's key and
</I>&gt;<i> certificate anyway.
</I>
So do I understand it correctly that OpenSSL currentls only supports 
RFC3278? Does that mean that it can't process CMS enveloped data objects 
that are created according to RFC5753?

In my other thread titled &quot;Unable to decrypt CMS object encrypted with 
EC prime256v1 certificate&quot; the CMS object that cannot be decrypted with 
OpenSSL does contain the EC parameters. Can that be related to the problem?

-- 
Stephan
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003992.html">[openssl-users] How to turn on certain elements in CMS objects
</A></li>
	<LI>Next message: <A HREF="003998.html">[openssl-users] How to turn on certain elements in CMS objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3993">[ date ]</a>
              <a href="thread.html#3993">[ thread ]</a>
              <a href="subject.html#3993">[ subject ]</a>
              <a href="author.html#3993">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
