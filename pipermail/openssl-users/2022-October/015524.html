<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> OpenSSL 1.1.1 Windows dependencies
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2022-October/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20OpenSSL%201.1.1%20Windows%20dependencies&In-Reply-To=%3C63509C3B.16160.7FF0516A%40openssl.pmail.gen.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015523.html">
   <LINK REL="Next"  HREF="015529.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>OpenSSL 1.1.1 Windows dependencies</H1>
    <B>David Harris</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20OpenSSL%201.1.1%20Windows%20dependencies&In-Reply-To=%3C63509C3B.16160.7FF0516A%40openssl.pmail.gen.nz%3E"
       TITLE="OpenSSL 1.1.1 Windows dependencies">openssl at pmail.gen.nz
       </A><BR>
    <I>Thu Oct 20 00:54:19 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015523.html">openssl-users Digest, Vol 95, Issue 24
</A></li>
        <LI>Next message (by thread): <A HREF="015529.html">OpenSSL 1.1.1 Windows dependencies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15524">[ date ]</a>
              <a href="thread.html#15524">[ thread ]</a>
              <a href="subject.html#15524">[ subject ]</a>
              <a href="author.html#15524">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Up front, I'd like to apologize if this is an FAQ or has been answered elsewhere 
on this list: my workload means that I simply can't keep as up-to-date as I would 
like.

I have a situation where my application fails to accept an incoming SSL 
handshake on Windows Server 2012, but the identical software running on 
Server 2019 accepts the same connection from the same remote client without 
a problem. Other types of client software (such as Thunderbird) connect to 
either system without any problems. The connecting client is a Windows Cash 
Register using Window's built-in crypto facilities. If I downgrade my app to 
OpenSSL 1.1.1g or earlier, the problem doesn't happen. With 1.1.1k or 1.1.1q, I 
get the error (I haven't built any versions of OpenSSL between k and q). In case 
it helps, the connection is an incoming SMTP connection on port 587, and 
STARTTLS is used to begin SSL negotiation.

SSL_accept returns -1, with an extended error of &quot;SSL_ERROR_SYSCALL&quot; (5), 
which I understand to be largely what it returns when it doesn't have a clear idea 
of what's gone wrong. The error queue is completely empty in this situation. The 
cert is a LetsEncrypt cert that loads without errors and works fine with other 
clients.

Do recent versions of OpenSSL 1.1.1 have dependencies on some Windows 
facility (winsock and wincrypt seem likely candidates) that might work on Server 
2019 but fail on Server 2012?

The version of my application that is in public release uses 1.1.1g, so isn't 
affected by this issue, but I'm slightly worried that I'm going to see an uptick in 
this type of problem if I release builds based on later versions of 1.1.1.

Does this ring any bells with anyone? Again, apologies if this is answered 
elsewhere - I *did* spend some time in Google but couldn't find anything that 
seemed relevant.

Thanks in advance for any advice.

Cheers!

-- David --

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015523.html">openssl-users Digest, Vol 95, Issue 24
</A></li>
	<LI>Next message (by thread): <A HREF="015529.html">OpenSSL 1.1.1 Windows dependencies
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15524">[ date ]</a>
              <a href="thread.html#15524">[ thread ]</a>
              <a href="subject.html#15524">[ subject ]</a>
              <a href="author.html#15524">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
