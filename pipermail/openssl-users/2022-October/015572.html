<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> OSSL api example to write DH params
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2022-October/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20OSSL%20api%20example%20to%20write%20DH%20params&In-Reply-To=%3CCADmX34oV_f96VzLaGHbQ6qRPs_V6mGntr%2BBueYg44ZmEK%2BH_yQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015581.html">
   <LINK REL="Next"  HREF="015574.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>OSSL api example to write DH params</H1>
    <B>Samiya Khanum</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20OSSL%20api%20example%20to%20write%20DH%20params&In-Reply-To=%3CCADmX34oV_f96VzLaGHbQ6qRPs_V6mGntr%2BBueYg44ZmEK%2BH_yQ%40mail.gmail.com%3E"
       TITLE="OSSL api example to write DH params">samiya.khanum at broadcom.com
       </A><BR>
    <I>Fri Oct 28 12:45:06 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015581.html">Getting cert serial from an OCSP single response
</A></li>
        <LI>Next message (by thread): <A HREF="015574.html">webpages not available
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15572">[ date ]</a>
              <a href="thread.html#15572">[ thread ]</a>
              <a href="subject.html#15572">[ subject ]</a>
              <a href="author.html#15572">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

&quot;PEM_write_DHparams&quot; is deprecated in openssl3.0.
I am trying to replace &quot;PEM_write_DHparams&quot; with the OSSL api. But  getting
below compilation error while assigning the dh.
Could you please provide an example to use &quot;OSSL_ENCODER_CTX_new_for_pkey&quot;
in the correct way and also please provide your inputs on the below error.

FYI, I have included the openssl/evp.h and openssl/dh.h header files.



*error: dereferencing pointer to incomplete type       dh = pkey-&gt;pkey.dh;
              ^*

PEM_write_DHparams code is replaced with OSSL_ENCODER_CTX_new_for_pkey.



* EVP_PKEY *pkey = NULL; OSSL_ENCODER_CTX *ectx = NULL;*















* ectx = OSSL_ENCODER_CTX_new_for_pkey(pkey,
         OSSL_KEYMGMT_SELECT_DOMAIN_PARAMETERS,
             &quot;PEM&quot;,                                         NULL, NULL);
if (NULL != ectx)    {      if (!OSSL_ENCODER_to_fp(ectx, fp))      {
  OSSL_ENCODER_CTX_free(ectx);        EVP_PKEY_free(dhkey);
fclose(fp);        return ;      }      dh = pkey-&gt;pkey.dh;    }*

Thanks &amp; Regards,
Samiya khanum

-- 
This electronic communication and the information and any files transmitted 
with it, or attached to it, are confidential and are intended solely for 
the use of the individual or entity to whom it is addressed and may contain 
information that is confidential, legally privileged, protected by privacy 
laws, or otherwise restricted from disclosure to anyone else. If you are 
not the intended recipient or the person responsible for delivering the 
e-mail to the intended recipient, you are hereby notified that any use, 
copying, distributing, dissemination, forwarding, printing, or copying of 
this e-mail is strictly prohibited. If you received this e-mail in error, 
please return the e-mail to the sender, delete it from your computer, and 
destroy any printed copy of it.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20221028/b6d24350/attachment.htm">https://mta.openssl.org/pipermail/openssl-users/attachments/20221028/b6d24350/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4212 bytes
Desc: S/MIME Cryptographic Signature
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20221028/b6d24350/attachment.p7s">https://mta.openssl.org/pipermail/openssl-users/attachments/20221028/b6d24350/attachment.p7s</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015581.html">Getting cert serial from an OCSP single response
</A></li>
	<LI>Next message (by thread): <A HREF="015574.html">webpages not available
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15572">[ date ]</a>
              <a href="thread.html#15572">[ thread ]</a>
              <a href="subject.html#15572">[ subject ]</a>
              <a href="author.html#15572">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
