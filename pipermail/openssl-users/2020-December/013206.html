<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Help with SSL 8152 SEC_ERROR_INVALID_KEY Intermittent Error (first post please be kind!)
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2020-December/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Help%20with%20SSL%208152%20SEC_ERROR_INVALID_KEY%20Intermittent%20Error%0A%20%28first%20post%20please%20be%20kind%21%29&In-Reply-To=%3C128e1e59d90ec678f3c75f5ae4949ea47fe0f2f3.camel%40redhat.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013204.html">
   <LINK REL="Next"  HREF="013207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Help with SSL 8152 SEC_ERROR_INVALID_KEY Intermittent Error (first post please be kind!)</H1>
    <B>Tomas Mraz</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Help%20with%20SSL%208152%20SEC_ERROR_INVALID_KEY%20Intermittent%20Error%0A%20%28first%20post%20please%20be%20kind%21%29&In-Reply-To=%3C128e1e59d90ec678f3c75f5ae4949ea47fe0f2f3.camel%40redhat.com%3E"
       TITLE="Help with SSL 8152 SEC_ERROR_INVALID_KEY Intermittent Error (first post please be kind!)">tmraz at redhat.com
       </A><BR>
    <I>Wed Dec  9 12:47:26 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="013204.html">Help with SSL 8152 SEC_ERROR_INVALID_KEY Intermittent Error (first post please be kind!)
</A></li>
        <LI>Next message: <A HREF="013207.html">Help with SSL 8152 SEC_ERROR_INVALID_KEY Intermittent Error (first post please be kind!)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13206">[ date ]</a>
              <a href="thread.html#13206">[ thread ]</a>
              <a href="subject.html#13206">[ subject ]</a>
              <a href="author.html#13206">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

curl on RHEL-7 and Centos 7 uses NSS and not OpenSSL as the TLS
backend. So this is unfortunately a wrong mailing list to ask.

Tomas Mraz

On Wed, 2020-12-09 at 20:35 +0900, Craig Henry wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> This is my first post to this list so please be kind!
</I>&gt;<i> 
</I>&gt;<i> Environment - Linux Centos 
</I>&gt;<i> SSL - 1.0.2k19-el7
</I>&gt;<i> 
</I>&gt;<i> Connection - CURL (via PHP) with public / private key auth + http
</I>&gt;<i> basic auth
</I>&gt;<i> 
</I>&gt;<i> We're having an issue where we are seeing intermittent behavior
</I>&gt;<i> connecting to a 3rd party of the key being rejected with a 8152 error
</I>&gt;<i> - &quot;The key does not support the requested operation&quot;. Other times it
</I>&gt;<i> works OK. 
</I>&gt;<i> 
</I>&gt;<i> We have another user who is using this 3rd party and same connection
</I>&gt;<i> type but not reported this issue. 
</I>&gt;<i> 
</I>&gt;<i> Has anyone got any clue as to what might be causing this type of
</I>&gt;<i> intermittent connection issue ?
</I>&gt;<i> 
</I>&gt;<i> The CURL logs are below but altered for privacy reasons. 
</I>&gt;<i> 
</I>&gt;<i> Thanks
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -Craig
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Key blocked response
</I>&gt;<i> 
</I>&gt;<i> * About to connect() to XXXXXXXX port 443 (#96)
</I>&gt;<i> *   Trying XXXXXX
</I>&gt;<i> * Connected to XXXXXX (XXXXXXXXX) port 443 (#96)
</I>&gt;<i> *   CAfile: /XXXXX_tlstrust.pem
</I>&gt;<i>   CApath: none
</I>&gt;<i> * SSL connection using TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
</I>&gt;<i> * Server certificate:
</I>&gt;<i> * subject: CN=XXXXXXX,O=XXXXXXXX,L=Atlanta,ST=Georgia,C=US
</I>&gt;<i> * start date: Jun 17 00:00:00 2020 GMT
</I>&gt;<i> * expire date: Jun 18 12:00:00 2022 GMT
</I>&gt;<i> * common name: XXXXXXXX
</I>&gt;<i> * issuer: CN=DigiCert Global CA G2,O=DigiCert Inc,C=US
</I>&gt;<i> * Server auth using Basic with user 'XXXXXXXX'
</I>&gt;<i> &gt; POST /XXXXXX/services HTTP/1.1
</I>&gt;<i> Authorization: Basic XXXXXXXXX
</I>&gt;<i> Host: XXXXXXXX
</I>&gt;<i> Accept: */*
</I>&gt;<i> Content-Type:text/xml
</I>&gt;<i> Content-Length: 1019
</I>&gt;<i> 
</I>&gt;<i> * upload completely sent off: 1019 out of 1019 bytes
</I>&gt;<i> * NSS: client certificate from file
</I>&gt;<i> * subject: CN=XXXXXXXX,OU=Buntingford,O=XXXXXXXXXX,C=DE
</I>&gt;<i> * start date: Dec 03 10:01:35 2020 GMT
</I>&gt;<i> * expire date: Dec 01 10:01:35 2030 GMT
</I>&gt;<i> * common name: xxxxxxxx
</I>&gt;<i> * issuer: CN=XXXXXX,O=XXXXXXXX GmbH,L=Bad Vilbel,ST=Hessen,C=DE
</I>&gt;<i> * SSL read: errno -8152 (SEC_ERROR_INVALID_KEY)
</I>&gt;<i> * The key does not support the requested operation.
</I>&gt;<i> * Closing connection 96
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Successful response
</I>&gt;<i> 
</I>&gt;<i> * About to connect() to XXXXXXXXXX port 443 (#81)
</I>&gt;<i> *   Trying xxxxxxx...
</I>&gt;<i> * Connected to XXXXXXXX (XXXXXX) port 443 (#81)
</I>&gt;<i> *   CAfile: /XXXXXXXXX
</I>&gt;<i>   CApath: none
</I>&gt;<i> * SSL connection using TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
</I>&gt;<i> * Server certificate:
</I>&gt;<i> * subject: CN=www.xxxxxxxxxxxx,O=XXXXXXn,L=Atlanta,ST=Georgia,C=US
</I>&gt;<i> * start date: Jun 17 00:00:00 2020 GMT
</I>&gt;<i> * expire date: Jun 18 12:00:00 2022 GMT
</I>&gt;<i> * common name: XXXXXXXXXXXXXXX
</I>&gt;<i> * issuer: CN=DigiCert Global CA G2,O=DigiCert Inc,C=US
</I>&gt;<i> * Server auth using Basic with user 'XXXXXXXXX'
</I>&gt;<i> &gt; POST /XXXXX/services HTTP/1.1
</I>&gt;<i> Authorization: Basic xxxxxxxx
</I>&gt;<i> Host: XXXXXXXXX
</I>&gt;<i> Accept: */*
</I>&gt;<i> Content-Type:text/xml
</I>&gt;<i> Content-Length: 1019
</I>&gt;<i> 
</I>&gt;<i> * upload completely sent off: 1019 out of 1019 bytes
</I>&gt;<i> * NSS: client certificate from file
</I>&gt;<i> * subject: CN=XXXXXXXX,OU=Buntingford,O=XXXXXXXXXX Ltd,C=DE
</I>&gt;<i> * start date: Dec 03 10:01:35 2020 GMT
</I>&gt;<i> * expire date: Dec 01 10:01:35 2030 GMT
</I>&gt;<i> * common name:XXXXXXXXX
</I>&gt;<i> * issuer: CN=XXXXXXXXX,O=XXXXXXXXXXXX,L=Bad Vilbel,ST=Hessen,C=DE
</I>&gt;<i> &lt; HTTP/1.1 500 
</I>&gt;<i> &lt; Date: Tue, 08 Dec 2020 13:42:26 GMT
</I>&gt;<i> &lt; Server: Apache
</I>&gt;<i> &lt; Strict-Transport-Security: max-age=63072000; includeSubdomains
</I>&gt;<i> &lt; X-XSS-Protection: 1; mode=block
</I>&gt;<i> &lt; X-Content-Type-Options: nosniff
</I>&gt;<i> &lt; Cache-Control: no-cache, no-store, must-revalidate
</I>&gt;<i> &lt; Pragma: no-cache
</I>&gt;<i> &lt; X-Frame-Options: SAMEORIGIN
</I>&gt;<i> &lt; Content-Security-Policy: default-src 'self' *.googleapis.com
</I>&gt;<i> *.klarna.com *.masterpass.com *.mastercard.com *.npci.org.in 'unsafe-
</I>&gt;<i> eval' 'unsafe-inline'; frame-ancestors 'self'
</I>&gt;<i> &lt; X-Application-Context: application:spring-boot,node-global,node-
</I>&gt;<i> api:8843
</I>&gt;<i> &lt; Accept: text/xml, text/html, image/gif, image/jpeg, *; q=.2, */*;
</I>&gt;<i> q=.2
</I>&gt;<i> &lt; SOAPAction: &quot;&quot;
</I>&gt;<i> &lt; Expires: 0
</I>&gt;<i> &lt; Content-Type: text/xml;charset=utf-8
</I>&gt;<i> &lt; Content-Length: 1481
</I>&gt;<i> &lt; Set-Cookie:
</I>&gt;<i> JSESSIONID=8778DF260AA5C9E0AAB3E1E4C572453D.ipg_api_k8s; Path=/XXXXX;
</I>&gt;<i> Secure; HttpOnly;HttpOnly;Secure;SameSite=Lax
</I>&gt;<i> &lt; Connection: close
</I>&gt;<i> &lt; 
</I>&gt;<i> * Closing connection 81
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Development Team
</I>&gt;<i> 
</I>&gt;<i> tassolutions
</I>&gt;<i> the attic | south suite | fullbridge mill | maldon | essex | cm9 4le
</I>&gt;<i> | UK
</I>&gt;<i> 
</I>&gt;<i> tel:   +44 (0)1621 857785  - www.tas-solutions.co.uk
</I>&gt;<i> 
</I>&gt;<i> Our business | support hours are Monday - Friday 9.00am to 5.30pm
</I>&gt;<i> 
</I>&gt;<i> Offices are closed on all UK Bank Holidays.
</I>&gt;<i> 
</I>&gt;<i> Support outside these hours can be arranged on request.
</I>&gt;<i> 
</I>&gt;<i>            
</I>&gt;<i> 
</I>&gt;<i> This E-mail and any attachments contain confidential and proprietary
</I>&gt;<i> information of TAS Solutions Ltd and are intended only for the use of
</I>&gt;<i> the person/s to whom it is addressed. If you have received this E-
</I>&gt;<i> mail in error please immediately notify support by telephone on +44
</I>&gt;<i> (0)1621 857785. Although this e-mail and any attachments are believed
</I>&gt;<i> to be free of any virus, or other defect which might affect any
</I>&gt;<i> computer or system into which they are received and opened, internet
</I>&gt;<i> communications cannot be guaranteed to be secure or error-free and
</I>&gt;<i> therefore it is the responsibility of the recipient to ensure that
</I>&gt;<i> they are virus free. The sender therefore does not accept liability
</I>&gt;<i> for any loss or damage from receipt or use thereof which arises as a
</I>&gt;<i> result of internet transmission. Any views/opinions expressed within
</I>&gt;<i> this e-mail and any attachments are that of the individual and not
</I>&gt;<i> necessarily that of TAS Solutions Ltd.
</I>-- 
Tom&#225;&#353; Mr&#225;z
No matter how far down the wrong road you've gone, turn back.
                                              Turkish proverb
[You'll know whether the road is wrong if you carefully listen to your
conscience.]


</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013204.html">Help with SSL 8152 SEC_ERROR_INVALID_KEY Intermittent Error (first post please be kind!)
</A></li>
	<LI>Next message: <A HREF="013207.html">Help with SSL 8152 SEC_ERROR_INVALID_KEY Intermittent Error (first post please be kind!)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13206">[ date ]</a>
              <a href="thread.html#13206">[ thread ]</a>
              <a href="subject.html#13206">[ subject ]</a>
              <a href="author.html#13206">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
