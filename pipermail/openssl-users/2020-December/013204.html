<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Help with SSL 8152 SEC_ERROR_INVALID_KEY Intermittent Error (first post please be kind!)
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2020-December/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Help%20with%20SSL%208152%20SEC_ERROR_INVALID_KEY%20Intermittent%20Error%20%28first%0A%20post%20please%20be%20kind%21%29&In-Reply-To=%3CCAC1f2-w4t566nJ-%2BtnuzGSE2G6hDU9FC%2BNXyTcZC0CnaAn4bCQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013216.html">
   <LINK REL="Next"  HREF="013206.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Help with SSL 8152 SEC_ERROR_INVALID_KEY Intermittent Error (first post please be kind!)</H1>
    <B>Craig Henry</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Help%20with%20SSL%208152%20SEC_ERROR_INVALID_KEY%20Intermittent%20Error%20%28first%0A%20post%20please%20be%20kind%21%29&In-Reply-To=%3CCAC1f2-w4t566nJ-%2BtnuzGSE2G6hDU9FC%2BNXyTcZC0CnaAn4bCQ%40mail.gmail.com%3E"
       TITLE="Help with SSL 8152 SEC_ERROR_INVALID_KEY Intermittent Error (first post please be kind!)">craig at tas-solutions.co.uk
       </A><BR>
    <I>Wed Dec  9 11:35:46 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="013216.html">DH_generate_key
</A></li>
        <LI>Next message: <A HREF="013206.html">Help with SSL 8152 SEC_ERROR_INVALID_KEY Intermittent Error (first post please be kind!)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13204">[ date ]</a>
              <a href="thread.html#13204">[ thread ]</a>
              <a href="subject.html#13204">[ subject ]</a>
              <a href="author.html#13204">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

This is my first post to this list so please be kind!

Environment - Linux Centos
SSL - 1.0.2k19-el7

Connection - CURL (via PHP) with public / private key auth + http basic auth

We're having an issue where we are seeing intermittent behavior connecting
to a 3rd party of the key being rejected with a 8152 error - &quot;The key does
not support the requested operation&quot;. Other times it works OK.

We have another user who is using this 3rd party and same connection type
but not reported this issue.

Has anyone got any clue as to what might be causing this type of
intermittent connection issue ?

The CURL logs are below but altered for privacy reasons.

Thanks



-Craig







*Key blocked response*

* About to connect() to XXXXXXXX &lt;<A HREF="http://www.ipg-online.com">http://www.ipg-online.com</A>&gt; port 443 (#96)
*   Trying XXXXXX
* Connected to XXXXXX (XXXXXXXXX) port 443 (#96)
*   CAfile: /XXXXX_tlstrust.pem
&lt;<A HREF="http://tpapi.topicplus.co.uk/public_html/docs/../includes/servers/firstData/WS1110275290_tlstrust.pem">http://tpapi.topicplus.co.uk/public_html/docs/../includes/servers/firstData/WS1110275290_tlstrust.pem</A>&gt;
  CApath: none
* SSL connection using TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
* Server certificate:
* subject: CN=XXXXXXX &lt;<A HREF="http://www.ipg-online.com">http://www.ipg-online.com</A>&gt;
,O=XXXXXXXX,L=Atlanta,ST=Georgia,C=US
* start date: Jun 17 00:00:00 2020 GMT
* expire date: Jun 18 12:00:00 2022 GMT
* common name: XXXXXXXX &lt;<A HREF="http://www.ipg-online.com">http://www.ipg-online.com</A>&gt;
* issuer: CN=DigiCert Global CA G2,O=DigiCert Inc,C=US
* Server auth using Basic with user 'XXXXXXXX'
&gt;<i> POST /XXXXXX/services HTTP/1.1
</I>Authorization: Basic XXXXXXXXX
Host: XXXXXXXX &lt;<A HREF="http://www.ipg-online.com">http://www.ipg-online.com</A>&gt;
Accept: */*
Content-Type:text/xml
Content-Length: 1019

* upload completely sent off: 1019 out of 1019 bytes
* NSS: client certificate from file
* subject: CN=XXXXXXXX,OU=Buntingford,O=XXXXXXXXXX,C=DE
* start date: Dec 03 10:01:35 2020 GMT
* expire date: Dec 01 10:01:35 2030 GMT
* common name: xxxxxxxx
* issuer: CN=XXXXXX &lt;<A HREF="http://prod.ipg-online.com">http://prod.ipg-online.com</A>&gt;,O=XXXXXXXX GmbH,L=Bad
Vilbel,ST=Hessen,C=DE
* SSL read: errno -8152 (SEC_ERROR_INVALID_KEY)
* The key does not support the requested operation.
* Closing connection 96


*Successful response*

* About to connect() to XXXXXXXXXX port 443 (#81)
*   Trying xxxxxxx...
* Connected to XXXXXXXX &lt;<A HREF="http://www.ipg-online.com">http://www.ipg-online.com</A>&gt; (XXXXXX) port 443 (#81)
*   CAfile: /XXXXXXXXX
&lt;<A HREF="http://tpapi.topicplus.co.uk/public_html/docs/../includes/servers/firstData/WS1110275290_tlstrust.pem">http://tpapi.topicplus.co.uk/public_html/docs/../includes/servers/firstData/WS1110275290_tlstrust.pem</A>&gt;
  CApath: none
* SSL connection using TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
* Server certificate:
* subject: CN=www.xxxxxxxxxxxx &lt;<A HREF="http://www.ipg-online.com">http://www.ipg-online.com</A>&gt;
,O=XXXXXXn,L=Atlanta,ST=Georgia,C=US
* start date: Jun 17 00:00:00 2020 GMT
* expire date: Jun 18 12:00:00 2022 GMT
* common name: XXXXXXXXXXXXXXX
* issuer: CN=DigiCert Global CA G2,O=DigiCert Inc,C=US
* Server auth using Basic with user 'XXXXXXXXX'
&gt;<i> POST /XXXXX/services HTTP/1.1
</I>Authorization: Basic xxxxxxxx
Host: XXXXXXXXX &lt;<A HREF="http://www.ipg-online.com">http://www.ipg-online.com</A>&gt;
Accept: */*
Content-Type:text/xml
Content-Length: 1019

* upload completely sent off: 1019 out of 1019 bytes
* NSS: client certificate from file
* subject: CN=XXXXXXXX,OU=Buntingford,O=XXXXXXXXXX Ltd,C=DE
* start date: Dec 03 10:01:35 2020 GMT
* expire date: Dec 01 10:01:35 2030 GMT
* common name:XXXXXXXXX
* issuer: CN=XXXXXXXXX &lt;<A HREF="http://prod.ipg-online.com">http://prod.ipg-online.com</A>&gt;,O=XXXXXXXXXXXX,L=Bad
Vilbel,ST=Hessen,C=DE
&lt; HTTP/1.1 500
&lt; Date: Tue, 08 Dec 2020 13:42:26 GMT
&lt; Server: Apache
&lt; Strict-Transport-Security: max-age=63072000; includeSubdomains
&lt; X-XSS-Protection: 1; mode=block
&lt; X-Content-Type-Options: nosniff
&lt; Cache-Control: no-cache, no-store, must-revalidate
&lt; Pragma: no-cache
&lt; X-Frame-Options: SAMEORIGIN
&lt; Content-Security-Policy: default-src 'self' *.googleapis.com *.klarna.com
*.masterpass.com *.mastercard.com *.npci.org.in 'unsafe-eval'
'unsafe-inline'; frame-ancestors 'self'
&lt; X-Application-Context: application:spring-boot,node-global,node-api:8843
&lt; Accept: text/xml, text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
&lt; SOAPAction: &quot;&quot;
&lt; Expires: 0
&lt; Content-Type: text/xml;charset=utf-8
&lt; Content-Length: 1481
&lt; Set-Cookie: JSESSIONID=8778DF260AA5C9E0AAB3E1E4C572453D.ipg_api_k8s;
Path=/XXXXX; Secure; HttpOnly;HttpOnly;Secure;SameSite=Lax
&lt; Connection: close
&lt;
* Closing connection 81





*Development Team*

*tassolutions &lt;<A HREF="http://www.tas-solutions.co.uk/">http://www.tas-solutions.co.uk/</A>&gt;*
the attic | south suite | fullbridge mill | maldon | essex | cm9 4le | UK

*tel:*   +44 (0)1621 857785 &lt;+44%201621%20857785&gt;  - *www.tas-solutions.co.uk
&lt;<A HREF="http://www.tas-solutions.co.uk/">http://www.tas-solutions.co.uk/</A>&gt;*

*Our business | support hours are Monday - Friday 9.00am to 5.30pm*

Offices are closed on all UK Bank Holidays.

Support outside these hours can be arranged on request.

&lt;<A HREF="https://twitter.com/tassolutions">https://twitter.com/tassolutions</A>&gt;
&lt;<A HREF="https://www.linkedin.com/company/tas-solutions">https://www.linkedin.com/company/tas-solutions</A>&gt;
&lt;<A HREF="https://www.aito.com/aito-information/aito-business-partners">https://www.aito.com/aito-information/aito-business-partners</A>&gt;

This E-mail and any attachments contain confidential and proprietary
information of TAS Solutions Ltd and are intended only for the use of the
person/s to whom it is addressed. If you have received this E-mail in error
please immediately notify support by telephone on +44 (0)1621 857785
&lt;+44%201621%20857785&gt;. Although this e-mail and any attachments are
believed to be free of any virus, or other defect which might affect any
computer or system into which they are received and opened, internet
communications cannot be guaranteed to be secure or error-free and
therefore it is the responsibility of the recipient to ensure that they are
virus free. The sender therefore does not accept liability for any loss or
damage from receipt or use thereof which arises as a result of internet
transmission. Any views/opinions expressed within this e-mail and any
attachments are that of the individual and not necessarily that of TAS
Solutions Ltd.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20201209/11427bda/attachment-0001.html">https://mta.openssl.org/pipermail/openssl-users/attachments/20201209/11427bda/attachment-0001.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 5754 bytes
Desc: not available
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20201209/11427bda/attachment-0003.png">https://mta.openssl.org/pipermail/openssl-users/attachments/20201209/11427bda/attachment-0003.png</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 6713 bytes
Desc: not available
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20201209/11427bda/attachment-0004.png">https://mta.openssl.org/pipermail/openssl-users/attachments/20201209/11427bda/attachment-0004.png</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 9974 bytes
Desc: not available
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20201209/11427bda/attachment-0005.png">https://mta.openssl.org/pipermail/openssl-users/attachments/20201209/11427bda/attachment-0005.png</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013216.html">DH_generate_key
</A></li>
	<LI>Next message: <A HREF="013206.html">Help with SSL 8152 SEC_ERROR_INVALID_KEY Intermittent Error (first post please be kind!)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13204">[ date ]</a>
              <a href="thread.html#13204">[ thread ]</a>
              <a href="subject.html#13204">[ subject ]</a>
              <a href="author.html#13204">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
