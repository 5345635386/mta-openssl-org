<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Compiling OpenSSL 1.0.2l static library with FIPS -2.0.16 on Windows
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2017-October/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Compiling%20OpenSSL%201.0.2l%20static%20library%20with%20FIPS%0A%20-2.0.16%20on%20Windows&In-Reply-To=%3C1224258743.7059750.1509395817353%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006803.html">
   <LINK REL="Next"  HREF="006804.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Compiling OpenSSL 1.0.2l static library with FIPS -2.0.16 on Windows</H1>
    <B>naveen gupta</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Compiling%20OpenSSL%201.0.2l%20static%20library%20with%20FIPS%0A%20-2.0.16%20on%20Windows&In-Reply-To=%3C1224258743.7059750.1509395817353%40mail.yahoo.com%3E"
       TITLE="[openssl-users] Compiling OpenSSL 1.0.2l static library with FIPS -2.0.16 on Windows">gupta_nvn at yahoo.com
       </A><BR>
    <I>Mon Oct 30 20:36:57 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="006803.html">[openssl-users] Forthcoming OpenSSL releases
</A></li>
        <LI>Next message: <A HREF="006804.html">[openssl-users] cross-compiled binary with fips only generates encrypted string output
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6802">[ date ]</a>
              <a href="thread.html#6802">[ thread ]</a>
              <a href="subject.html#6802">[ subject ]</a>
              <a href="author.html#6802">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
I have am trying to compile OpenSSL 1.0.2l static library using FIPS - 2.0.16 on Windows 2012 R2, Visual Studio 2015,&#160; using reference from&#160;<A HREF="https://www.openssl.org/docs/fips/UserGuide-2.0.pdf&#160;,">https://www.openssl.org/docs/fips/UserGuide-2.0.pdf&#160;,</A> page #68.
Step 1:
- cd&#160;openssl-fips-2.0.16
- ms\do_fips
Step 2:
- cd openssl-1.0.2l
- set FIPSDIR=C:\usr\local\ssl\fips-2.0
- perl Configure&#160; &#160; &#160; &#160;VC-WIN64A fips --with-fipsdir=%FIPSDIR% no-shared zlib no-idea no-mdc2 no-rc5 no-ssl2 no-ssl3
- nmake -f ms\nt.mak all

I see that ms\do_fips compile the code with /MD, and somehow step 2 (nmake -f ms\nt.mak all) also ends up compiling with /MD switch. The application now requires the dynamic runt time libraries and compile and run time. OpenSSL static libraries builds fine with /MT switch without FIPS module, so there's something with FIPS module that ends up setting /MD switch.
Has anyone else faced this problem? As per user guide, the FIPS module should build fine with static libraries, but looks like there is some issue with it. Is there any option that can be supplied to do_fips.bat, or a different build script that needs to be run?
Appreciate any help on this.
Thanks,NG&#160;&#160;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20171030/cc3c1d7e/attachment-0001.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20171030/cc3c1d7e/attachment-0001.html</A>&gt;
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006803.html">[openssl-users] Forthcoming OpenSSL releases
</A></li>
	<LI>Next message: <A HREF="006804.html">[openssl-users] cross-compiled binary with fips only generates encrypted string output
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6802">[ date ]</a>
              <a href="thread.html#6802">[ thread ]</a>
              <a href="subject.html#6802">[ subject ]</a>
              <a href="author.html#6802">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
