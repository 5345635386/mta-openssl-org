<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Reg issue in alert message
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2018-October/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Reg%20issue%20in%20alert%20message&In-Reply-To=%3Cf037b5d6-2048-d485-2833-73deacba78f0%40openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009093.html">
   <LINK REL="Next"  HREF="009095.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Reg issue in alert message</H1>
    <B>Matt Caswell</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Reg%20issue%20in%20alert%20message&In-Reply-To=%3Cf037b5d6-2048-d485-2833-73deacba78f0%40openssl.org%3E"
       TITLE="[openssl-users] Reg issue in alert message">matt at openssl.org
       </A><BR>
    <I>Tue Oct 23 12:29:27 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="009093.html">[openssl-users] Reg issue in alert message
</A></li>
        <LI>Next message: <A HREF="009095.html">[openssl-users] Reg issue in alert message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9094">[ date ]</a>
              <a href="thread.html#9094">[ thread ]</a>
              <a href="subject.html#9094">[ subject ]</a>
              <a href="author.html#9094">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On 23/10/2018 12:32, ramakrushna mishra wrote:
&gt;<i> Hi Matt,
</I>&gt;<i> 
</I>&gt;<i> Thanks for your response.
</I>&gt;<i> &#160;My client is built with openssl 1.0.0e
</I>
1.0.0e is very old and out of support. It should be considered insecure.
You should upgrade this to a more recent version.

&gt;<i>&#160; and server with openssl 1.1.1.&#160;
</I>&gt;<i> &#160;I have tried to collect information with wireshark, but I think as my
</I>&gt;<i> server and client are running on same machine , it is not capturing
</I>&gt;<i> anything. I have also tried with tshark on linux and got no traces again.&#160;
</I>&gt;<i> 
</I>&gt;<i> I have this trouble both on nt64and linuxx86_64. Do we have any other
</I>&gt;<i> mechanism to capture the traces ?
</I>&gt;<i> 
</I>&gt;<i> We have internal tracing enabled and I can see following information in
</I>&gt;<i> our tracing. 
</I>
Ok, the internal tracing is enough to see what is happening.


&gt;<i> **********************************************************************************
</I>&gt;<i> [Mon Oct 22 02:53:58 2018] INTERNAL STATE OPERATION --- SSL State: 16
</I>&gt;<i> before SSL initialization
</I>&gt;<i> [Mon Oct 22 02:53:58 2018] ID-0x024545f0 CTX-0x02458750 BIO-0x00000000
</I>&gt;<i> BIO&#160; &#160;--- ctrl to 00000000 [02457660] (6 bytes =&gt; 0 (0x0))
</I>&gt;<i> 
</I>&gt;<i> [Mon Oct 22 02:53:58 2018] ID-0x024545f0 CTX-0x02458750 BIO-0x00000000
</I>&gt;<i> BIO&#160; &#160;--- contents of a BIO dump:
</I>&gt;<i> [Mon Oct 22 02:53:58 2018] INTERNAL STATE OPERATION ---
</I>&gt;<i> SSL_accept:before SSL initialization
</I>&gt;<i> [Mon Oct 22 02:53:58 2018] ID-0x024545f0 CTX-0x02458750 BIO-0x00000000
</I>&gt;<i> BIO&#160; &#160;--- read to 00000000 [02463953] (5 bytes =&gt; 5 (0x5))
</I>&gt;<i> 
</I>&gt;<i> [Mon Oct 22 02:53:58 2018] ID-0x024545f0 CTX-0x02458750 BIO-0x00000000
</I>&gt;<i> BIO&#160; &#160;--- contents of a BIO dump:
</I>&gt;<i> 0000 - 16 03 01 00 b2&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; .....
</I>&gt;<i> [Mon Oct 22 02:53:58 2018] ID-0x024545f0 CTX-0x02458750 BIO-0x00000000
</I>&gt;<i> BIO&#160; &#160;--- read to 00000000 [02463958] (178 bytes =&gt; 178 (0xB2))
</I>&gt;<i> 
</I>&gt;<i> [Mon Oct 22 02:53:58 2018] ID-0x024545f0 CTX-0x02458750 BIO-0x00000000
</I>&gt;<i> BIO&#160; &#160;--- contents of a BIO dump:
</I>&gt;<i> 0000 - 01 00 00 ae 03 03 10 b1-1e 8f f0 07 d6 28 d9 02&#160; &#160;.............(..
</I>&gt;<i> 0010 - b7 91 b4 3d 14 5a af 3e-09 96 2a cf ee 8b ca 30&#160; &#160;...=.Z.&gt;..*....0
</I>&gt;<i> 0020 - cc 68 9f 2c 2e 6e 00 00-62 00 a5 00 a3 00 a1 00&#160; &#160;.h.,.n..b.......
</I>&gt;<i> 0030 - 9f 00 6b 00 6a 00 69 00-68 00 39 00 38 00 37 00&#160; &#160;..k.j.i.h.9.8.7.
</I>&gt;<i> 0040 - 36 00 9d 00 3d 00 35 00-a4 00 a2 00 a0 00 9e 00&#160; &#160;6...=.5.........
</I>&gt;<i> 0050 - 67 00 40 00 3f 00 3e 00-33 00 32 00 31 00 30 00&#160; &#160;<A HREF="../../../mailman/listinfo/openssl-users.html">g. at .</A>?.&gt;.3.2.1.0.
</I>&gt;<i> 0060 - 9a 00 99 00 98 00 97 00-9c 00 3c 00 2f 00 96 00&#160; &#160;..........&lt;./...
</I>&gt;<i> 0070 - 05 00 04 00 16 00 13 00-10 00 0d 00 0a 00 15 00&#160; &#160;................
</I>&gt;<i> 0080 - 12 00 0f 00 0c 00 09 00-ff *56 00* 01 00 00 23 00&#160; &#160;.........V....#.
</I>&gt;<i> 0090 - 23 00 00 00 0d 00 16 00-14 06 01 06 02 05 01 05&#160; &#160;#...............
</I>&gt;<i> 00a0 - 02 04 01 04 02 03 01 03-02 02 01 02 02 00 0f 00&#160; &#160;................
</I>&gt;<i> 00b0 - 01 01&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;..
</I>&gt;<i> [Mon Oct 22 02:53:58 2018] INTERNAL STATE OPERATION ---
</I>&gt;<i> SSL_accept:before SSL initialization
</I>&gt;<i> [Mon Oct 22 02:53:58 2018] ID-0x024545f0 CTX-0x02458750 BIO-0x00000000
</I>&gt;<i> BIO&#160; &#160;--- write to 00000000 [024725E0] (7 bytes =&gt; 7 (0x7))
</I>&gt;<i> 
</I>&gt;<i> [Mon Oct 22 02:53:58 2018] ID-0x024545f0 CTX-0x02458750 BIO-0x00000000
</I>&gt;<i> BIO&#160; &#160;--- contents of a BIO dump:
</I>&gt;<i> 0000 - 15 03 03 00 02 02 56&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; ......V
</I>&gt;<i> [Mon Oct 22 02:53:58 2018] INTERNAL STATE OPERATION ---&#160; write:fatal:unknown
</I>&gt;<i> [Mon Oct 22 02:53:58 2018] INTERNAL STATE OPERATION --- SSL_accept:error
</I>&gt;<i> in error
</I>&gt;<i> ********************
</I>&gt;<i> In the above dump , &quot;56 00 &quot; is present in the cipher suites sent in
</I>&gt;<i> client hello.&#160;
</I>&gt;<i> So, I think client have set TLS_FALLBACK_SCSV in cipher suite list in
</I>&gt;<i> client hello.&#160;
</I>&gt;<i> However there is no earlier failure to this handshake. 
</I>
This suggests there is a bug in the client application. This can only
happen if the client application calls SSL_CTX_set_mode() or
SSL_set_mode() to set the SSL_MODE_SEND_FALLBACK_SCSV mode.

This is incorrect if there has been no previously failed handshake at a
higher protocol version. From the documentation:

    SSL_MODE_SEND_FALLBACK_SCSV

    Send TLS_FALLBACK_SCSV in the ClientHello.
    To be set only by applications that reconnect with a downgraded
    protocol version; see draft-ietf-tls-downgrade-scsv-00 for details.

    DO NOT ENABLE THIS if your application attempts a normal handshake.
    Only use this in explicit fallback retries, following the guidance
    in draft-ietf-tls-downgrade-scsv-00.

(Note the reference to draft-ietf-tls-downgrade-scsv-00 in the docs
really should be updated to RFC7507 as that document is now known).

&gt;<i> 
</I>&gt;<i> As per your comment, client should only send it if it witnessed some
</I>&gt;<i> earlier failure.&#160;
</I>&gt;<i> In that case, I have following additional doubt.&#160;
</I>&gt;<i> 
</I>&gt;<i> -- this set up is working when server is running with TLSv1.2 and only
</I>&gt;<i> failing when server has both TLSv1,2 and TLSv1.3 ( i.e with
</I>&gt;<i> openssl1.1.1). So are there any changes in openssl1.1.1 which will
</I>&gt;<i> effect this behavior when compared to openssl1.0.0e version ?
</I>
The purpose of sending TLS_FALLBACK_SCSV is to signal to the server &quot;I
have attempted to connect to this server with a higher protocol version
than this one, but it failed&quot;. If this is unexpected to the server
because the server supports a higher protocol version then the server
assumes that a downgrade attack is taking place and aborts the connection.

Your client is declaring that it is prepared to speak TLSv1.2 (&quot;03 03&quot;
in the dump above) and is also declaring by sending TLS_FALLBACK_SCSV
that it first tried TLSv1.3 but it failed. This is clearly false since
OpenSSL 1.0.0e does not support TLSv1.3. A 1.1.1 server with TLSv1.3
enabled will then correctly abort the connection because it knows this
scenario should not have happened. A 1.1.1 server with TLSv1.3 disabled
should correctly complete the connection. This will not have happened
with any previous versions of OpenSSL because 1.1.1 is the first one to
support TLSv1.3.

Hope that helps,

Matt



&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Thanks and Regards,
</I>&gt;<i> Ram Krushna
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Mon, Oct 22, 2018 at 11:21 PM &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-request at openssl.org</A>
</I>&gt;<i> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-request at openssl.org</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i>     Send openssl-users mailing list submissions to
</I>&gt;<i>     &#160; &#160; &#160; &#160; <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&gt;
</I>&gt;<i> 
</I>&gt;<i>     To subscribe or unsubscribe via the World Wide Web, visit
</I>&gt;<i>     &#160; &#160; &#160; &#160; <A HREF="../../../mailman/listinfo/openssl-users.html">https://mta.openssl.org/mailman/listinfo/openssl-users</A>
</I>&gt;<i>     or, via email, send a message with subject or body 'help' to
</I>&gt;<i>     &#160; &#160; &#160; &#160; <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-request at openssl.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-request at openssl.org</A>&gt;
</I>&gt;<i> 
</I>&gt;<i>     You can reach the person managing the list at
</I>&gt;<i>     &#160; &#160; &#160; &#160; <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-owner at openssl.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-owner at openssl.org</A>&gt;
</I>&gt;<i> 
</I>&gt;<i>     When replying, please edit your Subject line so it is more specific
</I>&gt;<i>     than &quot;Re: Contents of openssl-users digest...&quot;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     Today's Topics:
</I>&gt;<i> 
</I>&gt;<i>     &#160; &#160;1. Re: What to do with deprecation errors (Salz, Rich)
</I>&gt;<i>     &#160; &#160;2. Re: What to do with deprecation errors (Matt Caswell)
</I>&gt;<i>     &#160; &#160;3. Re: To disable CBC ciphers (Jakob Bohm)
</I>&gt;<i>     &#160; &#160;4. Reg issue in alert message (ramakrushna mishra)
</I>&gt;<i>     &#160; &#160;5. Re: Reg issue in alert message (Matt Caswell)
</I>&gt;<i>     &#160; &#160;6. Re: What to do with deprecation errors (Skip Carter)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     ----------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i>     Message: 1
</I>&gt;<i>     Date: Mon, 22 Oct 2018 02:08:23 +0000
</I>&gt;<i>     From: &quot;Salz, Rich&quot; &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">rsalz at akamai.com</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">rsalz at akamai.com</A>&gt;&gt;
</I>&gt;<i>     To: Skip Carter &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">skip at taygeta.com</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">skip at taygeta.com</A>&gt;&gt;,
</I>&gt;<i>     &quot;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&gt;&quot;
</I>&gt;<i>     &#160; &#160; &#160; &#160; &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&gt;&gt;
</I>&gt;<i>     Subject: Re: [openssl-users] What to do with deprecation errors
</I>&gt;<i>     Message-ID: &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">8260BB64-B12E-4779-B9DF-903D23E47FD3 at akamai.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">8260BB64-B12E-4779-B9DF-903D23E47FD3 at akamai.com</A>&gt;&gt;
</I>&gt;<i>     Content-Type: text/plain; charset=&quot;utf-8&quot;
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; DEPRECATEDIN_1_2_0(int EC_GROUP_get_curve_GF2m(const EC_GROUP
</I>&gt;<i>     *group,&#160;
</I>&gt;<i> 
</I>&gt;<i>     That is &quot;proof&quot; that the pre-processor doesn?t have the right -I
</I>&gt;<i>     flags.&#160; Try running with the -v option or something.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     ------------------------------
</I>&gt;<i> 
</I>&gt;<i>     Message: 2
</I>&gt;<i>     Date: Mon, 22 Oct 2018 08:55:28 +0100
</I>&gt;<i>     From: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">matt at openssl.org</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">matt at openssl.org</A>&gt;&gt;
</I>&gt;<i>     To: <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&gt;
</I>&gt;<i>     Subject: Re: [openssl-users] What to do with deprecation errors
</I>&gt;<i>     Message-ID: &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">7513a526-2840-6a4e-cf9a-99666ffc1330 at openssl.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">7513a526-2840-6a4e-cf9a-99666ffc1330 at openssl.org</A>&gt;&gt;
</I>&gt;<i>     Content-Type: text/plain; charset=utf-8
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     On 21/10/2018 20:01, Skip Carter wrote:
</I>&gt;<i>     &gt; Thats what I originally thought.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; I experimented with manually invoking the pre-compiler (cpp) and this
</I>&gt;<i>     &gt; is what I get:
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; DEPRECATEDIN_1_2_0(int EC_GROUP_get_curve_GF2m(const EC_GROUP
</I>&gt;<i>     *group,&#160;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;?&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;
</I>&gt;<i>     &gt; BIGNUM *p,
</I>&gt;<i>     &gt; ???????????????????????????????????????????????BIGNUM *a, BIGNUM *b,
</I>&gt;<i>     &gt; ???????????????????????????????????????????????BN_CTX *ctx))
</I>&gt;<i>     &gt; the macro is not firing, shouldn't I get:
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; extern int EC_GROUP_get_curve_GF2m(const EC_GROUP *group,&#160; &#160; &#160; &#160; &#160;
</I>&gt;<i>     &#160; &#160;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;?&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; BIGNUM *p,
</I>&gt;<i>     &gt; ???????????????????????????????????????????????BIGNUM *a, BIGNUM *b,
</I>&gt;<i>     &gt; ???
</I>&gt;<i>     &gt; ????????????????????????????????????????????BN_CTX *ctx);
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; On Sun, 2018-10-21 at 18:28 +0000, Salz, Rich via openssl-users wrote:
</I>&gt;<i>     &gt;&gt;&gt; ???And I still have the problem with those macros.
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt; ??
</I>&gt;<i>     &gt;&gt; The problem is almost definitely this:??the files that you are
</I>&gt;<i>     &gt;&gt; compiling (not openssl) are picking up the wrong header files from
</I>&gt;<i>     &gt;&gt; openssl.
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i> 
</I>&gt;<i>     Does your opensslconf.h have the DEPRECATEDIN_1_2_0 macro defined in it?
</I>&gt;<i> 
</I>&gt;<i>     Matt
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     ------------------------------
</I>&gt;<i> 
</I>&gt;<i>     Message: 3
</I>&gt;<i>     Date: Mon, 22 Oct 2018 15:34:20 +0200
</I>&gt;<i>     From: Jakob Bohm &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">jb-openssl at wisemo.com</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">jb-openssl at wisemo.com</A>&gt;&gt;
</I>&gt;<i>     To: <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&gt;
</I>&gt;<i>     Subject: Re: [openssl-users] To disable CBC ciphers
</I>&gt;<i>     Message-ID: &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">d91267e8-4681-9a77-23fa-d790200e2259 at wisemo.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">d91267e8-4681-9a77-23fa-d790200e2259 at wisemo.com</A>&gt;&gt;
</I>&gt;<i>     Content-Type: text/plain; charset=utf-8; format=flowed
</I>&gt;<i> 
</I>&gt;<i>     On 20/10/2018 15:59, Kaushal Shriyan wrote:
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; On Wed, Oct 17, 2018 at 7:00 PM murugesh pitchaiah
</I>&gt;<i>     &gt; &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">murugesh.pitchaiah at gmail.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">murugesh.pitchaiah at gmail.com</A>&gt;
</I>&gt;<i>     &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">murugesh.pitchaiah at gmail.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">murugesh.pitchaiah at gmail.com</A>&gt;&gt;&gt;
</I>&gt;<i>     &gt; wrote:
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;Hi,
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;You may list down what ciphers configured : &quot;openssl ciphers&quot;
</I>&gt;<i>     &gt;&#160; &#160; &#160;Choose CBC ciphers and add them to the list of 'ssl_ciphers'
</I>&gt;<i>     with &quot;!&quot;
</I>&gt;<i>     &gt;&#160; &#160; &#160;prefix appended to current ssl_ciphers.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt; ssl_ciphers HIGH:!aNULL:!MD5:!DH+3DES:!kEDH:!AAA_CBC_BBB:
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;Ref:
</I>&gt;<i>     &gt;&#160; &#160;
</I>&gt;<i>     &#160;<A HREF="https://serverfault.com/questions/692119/meaning-of-ssl-ciphers-line-on-nginx-conf">https://serverfault.com/questions/692119/meaning-of-ssl-ciphers-line-on-nginx-conf</A>
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;Thanks,
</I>&gt;<i>     &gt;&#160; &#160; &#160;Murugesh P.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;On 10/17/18, Kaushal Shriyan &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">kaushalshriyan at gmail.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">kaushalshriyan at gmail.com</A>&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">kaushalshriyan at gmail.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">kaushalshriyan at gmail.com</A>&gt;&gt;&gt; wrote:
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt; Hi,
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt; I have the below ssl settings in nginx.conf file and VAPT test
</I>&gt;<i>     &gt;&#160; &#160; &#160;has reported
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt; us to disable CBC ciphers
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt; ssl_ciphers HIGH:!aNULL:!MD5:!DH+3DES:!kEDH;
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt;&gt; ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt; openssl version on the box is OpenSSL 1.0.2k-fips 26 Jan 2017 on
</I>&gt;<i>     &gt;&#160; &#160; &#160;CentOS
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt; Linux release 7.3.1611 (Core)
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt; I will appreciate if someone can pitch in to help me understand
</I>&gt;<i>     &gt;&#160; &#160; &#160;to disable
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt; CBC ciphers
</I>&gt;<i>     &gt;&#160; &#160; &#160;&gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; Thanks Murugesh. I did checked openssl ciphers
</I>&gt;<i>     &gt; <A HREF="https://www.openssl.org/docs/man1.0.2/apps/ciphers.html">https://www.openssl.org/docs/man1.0.2/apps/ciphers.html</A> and could
</I>&gt;<i>     not see
</I>&gt;<i>     &gt; !AAA_CBC_BBB as mentioned in your email.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;ssl_ciphers HIGH:!aNULL:!MD5:!DH+3DES:!kEDH:!AAA_CBC_BBB:
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; Correct me if i am understanding it wrong. Basically i want to
</I>&gt;<i>     disable
</I>&gt;<i>     &gt; Cipher Block Chaining (CBC) mode cipher encryption. Openssl and OS
</I>&gt;<i>     &gt; version are as below :-
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;openssl version on the box is OpenSSL 1.0.2k-fips 26 Jan 2017 on
</I>&gt;<i>     &gt;&#160; &#160; &#160;CentOS
</I>&gt;<i>     &gt;&#160; &#160; &#160;Linux release 7.3.1611 (Core)
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; Any tools which i can run to find out vulnerabilities in the above
</I>&gt;<i>     &gt; openssl and OS version? Please guide and i look forward to hearing
</I>&gt;<i>     &gt; from you. Thanks in Advance.
</I>&gt;<i>     You need to replace AAA and BBB with actual strings corresponding to
</I>&gt;<i>     each of the unwanted cipher suites.
</I>&gt;<i> 
</I>&gt;<i>     The advisor that tells you to disable &quot;CBC ciphers&quot; is mostly wrong.
</I>&gt;<i>     There is nothing inherently bad about correctly using ciphers in CBC
</I>&gt;<i>     mode, however some TLS protocol versions happen to use CBC cipher
</I>&gt;<i>     suites in a problematic way, while having no secure non-CBC cipher
</I>&gt;<i>     suites.? More recent TLS versions (such as TLS 1.2) have less
</I>&gt;<i>     problematic (but not perfect) CBC usage and also offers some
</I>&gt;<i>     overhyped US government ciphers such as the AES_GCM family.
</I>&gt;<i> 
</I>&gt;<i>     Enjoy
</I>&gt;<i> 
</I>&gt;<i>     Jakob
</I>&gt;<i>     -- 
</I>&gt;<i>     Jakob Bohm, CIO, Partner, WiseMo A/S.&#160; <A HREF="https://www.wisemo.com">https://www.wisemo.com</A>
</I>&gt;<i>     Transformervej 29, 2860 S?borg, Denmark.&#160; Direct +45 31 13 16 10
</I>&gt;<i>     This public discussion message is non-binding and may contain errors.
</I>&gt;<i>     WiseMo - Remote Service Management for PCs, Phones and Embedded
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     ------------------------------
</I>&gt;<i> 
</I>&gt;<i>     Message: 4
</I>&gt;<i>     Date: Mon, 22 Oct 2018 19:26:55 +0530
</I>&gt;<i>     From: ramakrushna mishra &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">rama.krushna7 at gmail.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">rama.krushna7 at gmail.com</A>&gt;&gt;
</I>&gt;<i>     To: <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&gt;
</I>&gt;<i>     Subject: [openssl-users] Reg issue in alert message
</I>&gt;<i>     Message-ID:
</I>&gt;<i>     &#160; &#160; &#160; &#160;
</I>&gt;<i>     &lt;CAHgr=kJyCXVY9QssB2CO3hY=<A HREF="../../../mailman/listinfo/openssl-users.html">GsEwiEcvzwQ-Pyd3VKqSm51XLA at mail.gmail.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">GsEwiEcvzwQ-Pyd3VKqSm51XLA at mail.gmail.com</A>&gt;&gt;
</I>&gt;<i>     Content-Type: text/plain; charset=&quot;utf-8&quot;
</I>&gt;<i> 
</I>&gt;<i>     Hi,
</I>&gt;<i> 
</I>&gt;<i>     I am facing an issue after openssl upgrade to 1.1.1.
</I>&gt;<i>     I have a odbc client with maximum version support up to TLSv1.2 and&#160; my
</I>&gt;<i>     database is running with TLSv1.2,TLsv1.3.
</I>&gt;<i> 
</I>&gt;<i>     The handhake is failing and I am getting following contents on my
</I>&gt;<i>     BIO dump.
</I>&gt;<i>     &quot;15 03 03 00 02 02 56&quot; .
</I>&gt;<i>     If i have understood correctly this is for alert message and But I could
</I>&gt;<i>     not find any reference to alert description at (
</I>&gt;<i>     <A HREF="https://tools.ietf.org/id/draft-ietf-tls-tls13-25.html#alert-protocol">https://tools.ietf.org/id/draft-ietf-tls-tls13-25.html#alert-protocol</A> )
</I>&gt;<i>     corresponding to 56.
</I>&gt;<i> 
</I>&gt;<i>     So, Could you please help me figure out what does this correspond to ?
</I>&gt;<i> 
</I>&gt;<i>     Moreover I have following doubt.
</I>&gt;<i> 
</I>&gt;<i>     -- If my TLSv1.2 client does not handle the&#160; &quot;downgrade sentinel &quot;
</I>&gt;<i>     present
</I>&gt;<i>     in server hello ( TLSv1.3 , will it create any problem ?
</I>&gt;<i>     -- In the above example client is receving error such as &quot;SSL Handshake
</I>&gt;<i>     Failure reason [error:1407743E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1
</I>&gt;<i>     alert inappropriate fallback].&quot; ? Could you please help me to hint
</I>&gt;<i>     me about
</I>&gt;<i>     how to debug this ?
</I>&gt;<i> 
</I>&gt;<i>     Thanks and Regards,
</I>&gt;<i>     Ram Krushna
</I>&gt;<i>     -------------- next part --------------
</I>&gt;<i>     An HTML attachment was scrubbed...
</I>&gt;<i>     URL:
</I>&gt;<i>     &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20181022/cb04af81/attachment-0001.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20181022/cb04af81/attachment-0001.html</A>&gt;
</I>&gt;<i> 
</I>&gt;<i>     ------------------------------
</I>&gt;<i> 
</I>&gt;<i>     Message: 5
</I>&gt;<i>     Date: Mon, 22 Oct 2018 15:10:55 +0100
</I>&gt;<i>     From: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">matt at openssl.org</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">matt at openssl.org</A>&gt;&gt;
</I>&gt;<i>     To: <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&gt;
</I>&gt;<i>     Subject: Re: [openssl-users] Reg issue in alert message
</I>&gt;<i>     Message-ID: &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">3c26e4ec-32e4-f3df-c1ae-0ed1cdeb5848 at openssl.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">3c26e4ec-32e4-f3df-c1ae-0ed1cdeb5848 at openssl.org</A>&gt;&gt;
</I>&gt;<i>     Content-Type: text/plain; charset=utf-8
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     On 22/10/2018 14:56, ramakrushna mishra wrote:
</I>&gt;<i>     &gt; Hi,
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; I am facing an issue after openssl upgrade to 1.1.1.?
</I>&gt;<i>     &gt; I have a odbc client with maximum version support up to TLSv1.2
</I>&gt;<i>     and? my
</I>&gt;<i>     &gt; database is running with TLSv1.2,TLsv1.3.?
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; The handhake is failing and I am getting following contents on my
</I>&gt;<i>     BIO dump.?
</I>&gt;<i>     &gt; &quot;15 03 03 00 02 02 56&quot; .?
</I>&gt;<i>     &gt; If i have understood correctly this is for alert message and But I
</I>&gt;<i>     could
</I>&gt;<i>     &gt; not find any reference to alert description at (
</I>&gt;<i>     &gt;
</I>&gt;<i>     <A HREF="https://tools.ietf.org/id/draft-ietf-tls-tls13-25.html#alert-protocol">https://tools.ietf.org/id/draft-ietf-tls-tls13-25.html#alert-protocol</A> )?
</I>&gt;<i>     &gt; corresponding to 56.
</I>&gt;<i> 
</I>&gt;<i>     56 hex == 86 decimal == inappropriate_fallback
</I>&gt;<i> 
</I>&gt;<i>     i.e. this doesn't tell you any further information than you have below.
</I>&gt;<i> 
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; So, Could you please help me figure out what does this correspond
</I>&gt;<i>     to ??
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; Moreover I have following doubt.?
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; -- If my TLSv1.2 client does not handle the? &quot;downgrade sentinel &quot;
</I>&gt;<i>     &gt; present in server hello ( TLSv1.3 , will it create any problem ?
</I>&gt;<i> 
</I>&gt;<i>     No, this should not be a problem.
</I>&gt;<i> 
</I>&gt;<i>     &gt; -- In the above example client is receving error such as &quot;SSL
</I>&gt;<i>     Handshake
</I>&gt;<i>     &gt; Failure reason [error:1407743E:SSL
</I>&gt;<i>     routines:SSL23_GET_SERVER_HELLO:tlsv1
</I>&gt;<i>     &gt; alert inappropriate fallback].&quot; ? Could you please help me to hint me
</I>&gt;<i>     &gt; about how to debug this ?
</I>&gt;<i> 
</I>&gt;<i>     What version of OpenSSL are you using for the client?
</I>&gt;<i> 
</I>&gt;<i>     Is it possible for you to send me a wireshark trace of the failing
</I>&gt;<i>     handshake?
</I>&gt;<i> 
</I>&gt;<i>     In particular I am interested to see if the TLS_FALLBACK_SCSV
</I>&gt;<i>     ciphersuite is present in the ClientHello (RFC 7507). The
</I>&gt;<i>     TLS_FALLBACK_SCSV is only supposed to be sent if the client has already
</I>&gt;<i>     attempted an earlier handshake that failed, and it is now trying a
</I>&gt;<i>     downgraded protocol version. So, does the wireshark trace reveal the
</I>&gt;<i>     client attempting an initial handshake that is failing for some other
</I>&gt;<i>     reason, followed by a second attempt that fails with the inappropriate
</I>&gt;<i>     fallback error?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     Matt
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     ------------------------------
</I>&gt;<i> 
</I>&gt;<i>     Message: 6
</I>&gt;<i>     Date: Mon, 22 Oct 2018 10:50:31 -0700
</I>&gt;<i>     From: Skip Carter &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">skip at taygeta.com</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">skip at taygeta.com</A>&gt;&gt;
</I>&gt;<i>     To: <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&gt;
</I>&gt;<i>     Subject: Re: [openssl-users] What to do with deprecation errors
</I>&gt;<i>     Message-ID: &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">1540230631.4886.20.camel at taygeta.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">1540230631.4886.20.camel at taygeta.com</A>&gt;&gt;
</I>&gt;<i>     Content-Type: text/plain; charset=&quot;UTF-8&quot;
</I>&gt;<i> 
</I>&gt;<i>     Yes the macro is there, its just not being expanded by the pre-
</I>&gt;<i>     compiler.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     On Mon, 2018-10-22 at 08:55 +0100, Matt Caswell wrote:
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; On 21/10/2018 20:01, Skip Carter wrote:
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; Does your opensslconf.h have the DEPRECATEDIN_1_2_0 macro defined in
</I>&gt;<i>     &gt; it?
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; Matt
</I>&gt;<i>     -- 
</I>&gt;<i>     Skip Carter
</I>&gt;<i>     Taygeta Scientific Inc.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     ------------------------------
</I>&gt;<i> 
</I>&gt;<i>     Subject: Digest Footer
</I>&gt;<i> 
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     openssl-users mailing list
</I>&gt;<i>     <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A> &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&gt;
</I>&gt;<i>     <A HREF="../../../mailman/listinfo/openssl-users.html">https://mta.openssl.org/mailman/listinfo/openssl-users</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     ------------------------------
</I>&gt;<i> 
</I>&gt;<i>     End of openssl-users Digest, Vol 47, Issue 35
</I>&gt;<i>     *********************************************
</I>&gt;<i> 
</I>&gt;<i> 
</I></PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009093.html">[openssl-users] Reg issue in alert message
</A></li>
	<LI>Next message: <A HREF="009095.html">[openssl-users] Reg issue in alert message
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9094">[ date ]</a>
              <a href="thread.html#9094">[ thread ]</a>
              <a href="subject.html#9094">[ subject ]</a>
              <a href="author.html#9094">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
