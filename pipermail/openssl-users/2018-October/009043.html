<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] no-async needs -DOPENSSL_NO_ASYNC nonetheless?
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2018-October/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20no-async%20needs%20-DOPENSSL_NO_ASYNC%20nonetheless%3F&In-Reply-To=%3Ce3c0e393-4aea-edd2-ee88-476090bbe0c2%40openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009042.html">
   <LINK REL="Next"  HREF="009049.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] no-async needs -DOPENSSL_NO_ASYNC nonetheless?</H1>
    <B>Matt Caswell</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20no-async%20needs%20-DOPENSSL_NO_ASYNC%20nonetheless%3F&In-Reply-To=%3Ce3c0e393-4aea-edd2-ee88-476090bbe0c2%40openssl.org%3E"
       TITLE="[openssl-users] no-async needs -DOPENSSL_NO_ASYNC nonetheless?">matt at openssl.org
       </A><BR>
    <I>Wed Oct 17 21:40:42 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="009042.html">[openssl-users] no-async needs -DOPENSSL_NO_ASYNC nonetheless?
</A></li>
        <LI>Next message: <A HREF="009049.html">[openssl-users] no-async needs -DOPENSSL_NO_ASYNC nonetheless?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9043">[ date ]</a>
              <a href="thread.html#9043">[ thread ]</a>
              <a href="subject.html#9043">[ subject ]</a>
              <a href="author.html#9043">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On 17/10/2018 22:07, Steffen Nurpmeso wrote:
&gt;<i>  |
</I>&gt;<i>  |This is definitely an environmental issue. I just installed an Alpine
</I>&gt;<i>  |Linux VM. I got the above error consistently when using clang as the
</I>&gt;<i>  |compiler (whether or not I added &quot;-DOPENSSL_NO_ASYNC&quot;). I got a
</I>&gt;<i>  |successful build if I used gcc instead of clang.
</I>&gt;<i>  |
</I>&gt;<i>  |With clang I was able to build successfully after this:
</I>&gt;<i>  |
</I>&gt;<i>  |$ apk add clang-dev
</I>&gt;<i> 
</I>&gt;<i> Well.  I have reported that no-async alone does not disable
</I>&gt;<i> inclusion of (finally) stdatomic.h even though the build does not
</I>&gt;<i> need it.
</I>
The async feature and the inclusion of stdatomic.h are entirely
independent of each other. I would not expect no-async to disable the
inclusion of stdatomic.h.

The build does not *need* stdatomic.h, but you will get better
performance if you do. The build is supposed to detect whether the
compiler has support for it automatically and only include it if it
does. It seems to me that the default Alpine clang package is slightly
broken in this respect, in that it has the defines to indicate
stdatomic.h support, but actually you need to install another package to
get it.

&gt;<i>  If i add -DOPENSSL_NO_ASYNC on top of the no-async that
</I>&gt;<i> i have chosen, it builds fine.
</I>
This bit I do not understand at all. It makes no sense to me - and I did
not see it in my testing on Alpine. Are you sure you're not building
with gcc in that build? It's the only thing I can think of. If that's
not the case then I have no clue.

&gt;<i> Maybe the subject was to offensive or misleading, for which
</I>&gt;<i> i hereby apologize.
</I>
I'm not sure what you are apologising for? No offence has been taken
(did I say something to suggest that it had...if so then *I* apologise!).

Matt

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009042.html">[openssl-users] no-async needs -DOPENSSL_NO_ASYNC nonetheless?
</A></li>
	<LI>Next message: <A HREF="009049.html">[openssl-users] no-async needs -DOPENSSL_NO_ASYNC nonetheless?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9043">[ date ]</a>
              <a href="thread.html#9043">[ thread ]</a>
              <a href="subject.html#9043">[ subject ]</a>
              <a href="author.html#9043">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
