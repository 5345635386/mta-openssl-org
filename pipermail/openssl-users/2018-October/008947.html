<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Issue with using TLS
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2018-October/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Issue%20with%20using%20TLS&In-Reply-To=%3C8323ead9-cdb8-088d-827e-b137cb45f9a3%40openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008945.html">
   <LINK REL="Next"  HREF="008948.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Issue with using TLS</H1>
    <B>Matt Caswell</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Issue%20with%20using%20TLS&In-Reply-To=%3C8323ead9-cdb8-088d-827e-b137cb45f9a3%40openssl.org%3E"
       TITLE="[openssl-users] Issue with using TLS">matt at openssl.org
       </A><BR>
    <I>Mon Oct  8 17:08:58 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="008945.html">[openssl-users] Issue with using TLS
</A></li>
        <LI>Next message: <A HREF="008948.html">[openssl-users] Incompatible Object error from EC_POINT_mul	(Nicola)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8947">[ date ]</a>
              <a href="thread.html#8947">[ thread ]</a>
              <a href="subject.html#8947">[ subject ]</a>
              <a href="author.html#8947">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On 08/10/18 16:43, Sean Glazier wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I have an issue with using a TLS client-server&#160;set up.
</I>&gt;<i> 
</I>&gt;<i> on the client side I am using 32 open ssl&#160;library version 1.1 and the
</I>&gt;<i> same set on the server side in VA smalltalk. Both are on windows.
</I>&gt;<i> 
</I>&gt;<i> On the c side I set the SSL_CTX_new(TLS_client_method()) on the server I
</I>&gt;<i> restricted to TLS only as per our security policy.
</I>&gt;<i> 
</I>&gt;<i> I get through the hand shake and the client sends data over to the
</I>&gt;<i> sever. however upon reading the server gives and openSSL&#160;error as follows:
</I>&gt;<i> OpenSSLError
</I>&gt;<i> Error Code: 336130315
</I>&gt;<i> Error Object: ('wrong version number')
</I>&gt;<i> Error String: 'error:1408F10B:SSL routines:ssl3_get_record:wrong version
</I>&gt;<i> number'
</I>&gt;<i> Error Hint: 'ssl3_get_record:wrong version number'
</I>&gt;<i> AuxiliaryData: nil. 
</I>
This usually occurs if the data that is received doesn't look like TLS,
either because it is corrupted or is some other protocol. The TLS record
version number is the first thing we check, so if you've got bad data
then this is the first error you hit.

&gt;<i> 
</I>&gt;<i> I have attempted to work around this by setting on the server side the
</I>&gt;<i> following option:&#160;&#160;SSL_OP_TLS_ROLLBACK_BUG .&#160;I saw from forums that this
</I>&gt;<i> will tell the server to ignore this bug. However, I still get the same bug.
</I>
Don't do that. That option is an ancient client bug workaround that
should not be necessary in modern code.


&gt;<i> Does anyone know the workaround for this issue?&#160;
</I>
Send me a wireshark trace of a failing connection and I can take a look
at it.

Matt


&gt;<i> &#160;
</I>&gt;<i> Kind Regards,
</I>&gt;<i> &#160;
</I>&gt;<i> Sean Glazier
</I>&gt;<i> &#160;
</I>&gt;<i> 
</I>&gt;<i> 
</I></PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008945.html">[openssl-users] Issue with using TLS
</A></li>
	<LI>Next message: <A HREF="008948.html">[openssl-users] Incompatible Object error from EC_POINT_mul	(Nicola)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8947">[ date ]</a>
              <a href="thread.html#8947">[ thread ]</a>
              <a href="subject.html#8947">[ subject ]</a>
              <a href="author.html#8947">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
