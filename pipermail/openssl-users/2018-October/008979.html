<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] CMS_verify provides empty output
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2018-October/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20CMS_verify%20provides%20empty%20output&In-Reply-To=%3C8a594640-5278-c5f5-8cd4-0e4f4ad3a640%40wisemo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008978.html">
   <LINK REL="Next"  HREF="008980.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] CMS_verify provides empty output</H1>
    <B>Jakob Bohm</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20CMS_verify%20provides%20empty%20output&In-Reply-To=%3C8a594640-5278-c5f5-8cd4-0e4f4ad3a640%40wisemo.com%3E"
       TITLE="[openssl-users] CMS_verify provides empty output">jb-openssl at wisemo.com
       </A><BR>
    <I>Wed Oct 10 12:06:42 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="008978.html">[openssl-users] CMS_verify provides empty output
</A></li>
        <LI>Next message: <A HREF="008980.html">[openssl-users] SSL_get_peer_certificate returns NULL in client_cert_cb after upgrade to openssl 1.1.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8979">[ date ]</a>
              <a href="thread.html#8979">[ thread ]</a>
              <a href="subject.html#8979">[ subject ]</a>
              <a href="author.html#8979">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/10/2018 13:55, RudyAC wrote:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> when verifying  a signed email with CMS_verify() the verification failed.
</I>&gt;<i> That is not the main problem.
</I>&gt;<i> My problem is that the out data is empty. Using the library I got following
</I>&gt;<i> error:
</I>&gt;<i>
</I>&gt;<i> OpenSSL Error code all:    &lt;772382878d&gt;
</I>&gt;<i> OpenSSL Error code lib:    &lt;46d&gt;
</I>&gt;<i> OpenSSL Error code func:   &lt;154d&gt;
</I>&gt;<i> OpenSSL Error code reason: &lt;158d&gt;
</I>&gt;<i> OpenSSL Error: error:2E09A09E:CMS
</I>&gt;<i> routines:CMS_SignerInfo_verify_content:verification failure
</I>&gt;<i>
</I>&gt;<i> The mail body is base64 encoded.
</I>&gt;<i>
</I>&gt;<i> When verifying the email on console with &quot;openssl cms -verify&quot; there is no
</I>&gt;<i> message output, only the error
</I>&gt;<i> message :
</I>&gt;<i>
</I>&gt;<i> Verification failure
</I>&gt;<i> 47883249174256:error:04091068:rsa routines:INT_RSA_VERIFY:bad
</I>&gt;<i> signature:rsa_sign.c:278:
</I>&gt;<i> 47883249174256:error:2E09809E:CMS
</I>&gt;<i> routines:CMS_SignerInfo_verify:verification failure:cms_sd.c:775:
</I>&gt;<i>
</I>&gt;<i> Any hints are welcome
</I>The general assumption in OpenSSL is that if the signature is
invalid, the contents is probably fake,false or invalid, and
thus unwanted.

This is generally true in cryptography, but for actual e-mail
applications it may very well be desired to allow the user to
ignore signature verification failures.&#160; If so, one could combine
allowing the mail software to access the MIME message normally (as
if the signature was some unknown MIME part) with a meaningful
(human readable) form of the actual error message from verification
(there is more than one way the verification can fail, and the
desired human response would often differ).

Enjoy

Jakob
-- 
Jakob Bohm, CIO, Partner, WiseMo A/S.  <A HREF="https://www.wisemo.com">https://www.wisemo.com</A>
Transformervej 29, 2860 S&#248;borg, Denmark.  Direct +45 31 13 16 10
This public discussion message is non-binding and may contain errors.
WiseMo - Remote Service Management for PCs, Phones and Embedded

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008978.html">[openssl-users] CMS_verify provides empty output
</A></li>
	<LI>Next message: <A HREF="008980.html">[openssl-users] SSL_get_peer_certificate returns NULL in client_cert_cb after upgrade to openssl 1.1.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8979">[ date ]</a>
              <a href="thread.html#8979">[ thread ]</a>
              <a href="subject.html#8979">[ subject ]</a>
              <a href="author.html#8979">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
