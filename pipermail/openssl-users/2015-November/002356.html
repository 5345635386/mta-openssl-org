<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] openssl des-ede3-cbc does not match with Java one
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2015-November/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20openssl%20des-ede3-cbc%20does%20not%20match%20with%20Java%20one&In-Reply-To=%3CCAH-yTufomhKgPxVLeKjE%2Bs56c8TM9oqAJtiK7WXU-UTTygkWzQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002355.html">
   <LINK REL="Next"  HREF="002357.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] openssl des-ede3-cbc does not match with Java one</H1>
    <B>David Garc&#237;a</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20openssl%20des-ede3-cbc%20does%20not%20match%20with%20Java%20one&In-Reply-To=%3CCAH-yTufomhKgPxVLeKjE%2Bs56c8TM9oqAJtiK7WXU-UTTygkWzQ%40mail.gmail.com%3E"
       TITLE="[openssl-users] openssl des-ede3-cbc does not match with Java one">garcia.narbona at gmail.com
       </A><BR>
    <I>Tue Nov 24 11:56:29 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="002355.html">[openssl-users] Verifying Authenticode timestamp using openssl apis
</A></li>
        <LI>Next message: <A HREF="002357.html">[openssl-users] openssl des-ede3-cbc does not match with Java one
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2356">[ date ]</a>
              <a href="thread.html#2356">[ thread ]</a>
              <a href="subject.html#2356">[ subject ]</a>
              <a href="author.html#2356">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am trying to use openssl command line tool for des-ede3-cbc encryption,
but it does not mach with the one I have in Java (and that I know that
works ok). I try to generate a des-ede3-cbc encryption with an IV =
0,0,0,0,0,0,0,0. Then I launch following command:


echo 'text_to_cypher' | openssl enc -e -des-ede3-cbc -k
'b2aec78eb50e04f2a60b9efa20b82c903e3cad4f3bd2027g' -iv 00000000 -nosalt |
openssl enc -base64


But I don't get the same result as the one I get in Java using Cipher:

private final byte [] IV = {0, 0, 0, 0, 0, 0, 0, 0};
.....
DESedeKeySpec desKeySpec = new DESedeKeySpec(toByteArray(hexKey));
SecretKey desKey = new SecretKeySpec(desKeySpec.getKey(), &quot;DESede&quot;);
Cipher desCipher = Cipher.getInstance(&quot;DESede/CBC/NoPadding&quot;);
desCipher.init(Cipher.ENCRYPT_MODE, desKey, new IvParameterSpec(IV));

//text 0 padding to get it multilpe of 8

byte[] ciphertext = desCipher.doFinal(cleartext);
new String(Base64.encodeBase64(ciphertext), &quot;UTF-8&quot;);



Could anyone point me to what I am doing worng in this command line call?

Thanks in advance.
-- 
David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20151124/c0f04344/attachment.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20151124/c0f04344/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002355.html">[openssl-users] Verifying Authenticode timestamp using openssl apis
</A></li>
	<LI>Next message: <A HREF="002357.html">[openssl-users] openssl des-ede3-cbc does not match with Java one
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2356">[ date ]</a>
              <a href="thread.html#2356">[ thread ]</a>
              <a href="subject.html#2356">[ subject ]</a>
              <a href="author.html#2356">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
