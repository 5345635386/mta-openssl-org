<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Strange problem: openssl verify not working on Proxmox VM, works on a bare metal system
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2022-September/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Strange%20problem%3A%20openssl%20verify%20not%20working%20on%20Proxmox%20VM%2C%20works%0A%20on%20a%20bare%20metal%20system&In-Reply-To=%3C18ee962a-ca8f-1eae-ba2c-75c7729dfae8%40elyograg.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015385.html">
   <LINK REL="Next"  HREF="015387.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Strange problem: openssl verify not working on Proxmox VM, works on a bare metal system</H1>
    <B>Shawn Heisey</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Strange%20problem%3A%20openssl%20verify%20not%20working%20on%20Proxmox%20VM%2C%20works%0A%20on%20a%20bare%20metal%20system&In-Reply-To=%3C18ee962a-ca8f-1eae-ba2c-75c7729dfae8%40elyograg.org%3E"
       TITLE="Strange problem: openssl verify not working on Proxmox VM, works on a bare metal system">openssl at elyograg.org
       </A><BR>
    <I>Sat Sep  3 18:26:12 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015385.html">Strange problem: openssl verify not working on Proxmox VM, works on a bare metal system
</A></li>
        <LI>Next message (by thread): <A HREF="015387.html">Strange problem: openssl verify not working on Proxmox VM, works on a bare metal system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15386">[ date ]</a>
              <a href="thread.html#15386">[ thread ]</a>
              <a href="subject.html#15386">[ subject ]</a>
              <a href="author.html#15386">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 9/2/22 21:42, Shawn Heisey via openssl-users wrote:
&gt;<i> Other bare metal systems and their results with the same PEM file:
</I>&gt;<i>
</I>&gt;<i> Verifies on Proxmox (the one running the VM) with openssl 1.1.1n
</I>&gt;<i> Verifies on Ubuntu 22.04 with openssl 3.0.2
</I>&gt;<i> Fails on CentOS 7.5.1804 with openssl 1.0.2k-fips
</I>
Additional tests done with an identical PEM file and the results:

Passed on Ubuntu Server 22.04 VM, openssl 3.0.2, installed on the same 
proxmox host as the Alma VM that fails.
Passed on Ubuntu 22.04 desktop bare metal, openssl 3.0.2
Failed on Centos 7 VM running in qemu on that Ubuntu desktop, openssl 
1.0.2k-fips
Failed on Fedora35 VM running in qemu on that Ubuntu desktop, openssl 1.1.1q
Passed on Ubuntu Server 22.04 bare metal, using quictls openssl version 
3.0.5+quic

Looks like there is something about RPM-based distros that breaks part 
of openssl.

One other bit of info.&#160; I ran another test on the Alma VM where I 
compiled the master branch of <A HREF="https://github.com/openssl/openssl">https://github.com/openssl/openssl</A> to 
/usr/local/ossl3 and used that to try the verify. This is the failure 
output:

[<A HREF="../../../mailman/listinfo/openssl-users.html">root at certs</A> ~]# /usr/local/bin/ossl verify -CAfile 
/etc/ssl/certs/local/DOMAIN.wildcards.pem 
/etc/ssl/certs/local/DOMAIN.wildcards.pem
C=US, O=Let's Encrypt, CN=R3
error 2 at 1 depth lookup: unable to get issuer certificate
error /etc/ssl/certs/local/DOMAIN.wildcards.pem: verification failed
[<A HREF="../../../mailman/listinfo/openssl-users.html">root at certs</A> ~]# /usr/local/bin/ossl version
OpenSSL 3.1.0-dev&#160; (Library: OpenSSL 3.1.0-dev )


Thoughts?

Thanks,
Shawn


</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015385.html">Strange problem: openssl verify not working on Proxmox VM, works on a bare metal system
</A></li>
	<LI>Next message (by thread): <A HREF="015387.html">Strange problem: openssl verify not working on Proxmox VM, works on a bare metal system
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15386">[ date ]</a>
              <a href="thread.html#15386">[ thread ]</a>
              <a href="subject.html#15386">[ subject ]</a>
              <a href="author.html#15386">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
