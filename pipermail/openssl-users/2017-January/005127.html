<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] troubleshooting a puzzling issue
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2017-January/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20troubleshooting%20a%20puzzling%20issue&In-Reply-To=%3C20170113.163718.1498855054591690568.levitte%40openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005128.html">
   <LINK REL="Next"  HREF="005129.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] troubleshooting a puzzling issue</H1>
    <B>Richard Levitte</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20troubleshooting%20a%20puzzling%20issue&In-Reply-To=%3C20170113.163718.1498855054591690568.levitte%40openssl.org%3E"
       TITLE="[openssl-users] troubleshooting a puzzling issue">levitte at openssl.org
       </A><BR>
    <I>Fri Jan 13 15:37:18 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="005128.html">[openssl-users] troubleshooting a puzzling issue
</A></li>
        <LI>Next message: <A HREF="005129.html">[openssl-users] troubleshooting a puzzling issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5127">[ date ]</a>
              <a href="thread.html#5127">[ thread ]</a>
              <a href="subject.html#5127">[ subject ]</a>
              <a href="author.html#5127">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>In message &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">41A36A7F-FF5D-4190-9178-E9FF11AFF712 at inria.fr</A>&gt; on Fri, 13 Jan 2017 11:28:40 +0100, Thierry Parmentelat &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">thierry.parmentelat at inria.fr</A>&gt; said:

thierry.parmentelat&gt; I am facing a problem that I have narrowed down to this:
thierry.parmentelat&gt; 
thierry.parmentelat&gt; I have two certificates, one being signed by the other
thierry.parmentelat&gt; the attached code is a python code that uses M2Crypto to check for that fact
thierry.parmentelat&gt; 
thierry.parmentelat&gt; and it turns out, on some boxes x509_verify() returns 1 as expected, while on some others I am getting -1
thierry.parmentelat&gt; 
thierry.parmentelat&gt; 
thierry.parmentelat&gt; ---
thierry.parmentelat&gt; I apologize that I am not able to write a pure C code that would reproduce the issue (I&#8217;m afraid that me trying to achieve that would just lead to more artificial problems than be actually helpful in any way :)
thierry.parmentelat&gt; 
thierry.parmentelat&gt; the m2crypto guys tell me they are essentially just passing stuff along to openssl&#8217;s function
thierry.parmentelat&gt; X509_verify
thierry.parmentelat&gt; as described here
thierry.parmentelat&gt; <A HREF="https://www.openssl.org/docs/man1.1.0/crypto/X509_verify.html">https://www.openssl.org/docs/man1.1.0/crypto/X509_verify.html</A>

Considering both certs in the attached script use the signature
algorithm md5WithRSAEncryption, you could get that kind of error with
an OpenSSL installation where MD5 has been disabled.  'openssl help'
will show you what's enabled, or 'openssl list -disabled' (with
OpenSSL 1.1.0) to see what's disabled.

There are other things that can give you a -1 as well...

Cheers,
Richard

-- 
Richard Levitte         <A HREF="../../../mailman/listinfo/openssl-users.html">levitte at openssl.org</A>
OpenSSL Project         <A HREF="http://www.openssl.org/~levitte/">http://www.openssl.org/~levitte/</A>
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005128.html">[openssl-users] troubleshooting a puzzling issue
</A></li>
	<LI>Next message: <A HREF="005129.html">[openssl-users] troubleshooting a puzzling issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5127">[ date ]</a>
              <a href="thread.html#5127">[ thread ]</a>
              <a href="subject.html#5127">[ subject ]</a>
              <a href="author.html#5127">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
