<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Problem in installing gem puma
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2015-August/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Problem%20in%20installing%20gem%20puma&In-Reply-To=%3CB550B44BF8AF314BB00C4E2AC1C18088014C2FB5D1%40Rock-Exchange1.microfocus.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001958.html">
   <LINK REL="Next"  HREF="001965.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Problem in installing gem puma</H1>
    <B>Michael Wojcik</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Problem%20in%20installing%20gem%20puma&In-Reply-To=%3CB550B44BF8AF314BB00C4E2AC1C18088014C2FB5D1%40Rock-Exchange1.microfocus.com%3E"
       TITLE="[openssl-users] Problem in installing gem puma">Michael.Wojcik at microfocus.com
       </A><BR>
    <I>Wed Aug 19 13:55:39 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001958.html">[openssl-users] Problem in installing gem puma
</A></li>
        <LI>Next message: <A HREF="001965.html">[openssl-users] Problem in installing gem puma
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1962">[ date ]</a>
              <a href="thread.html#1962">[ thread ]</a>
              <a href="subject.html#1962">[ subject ]</a>
              <a href="author.html#1962">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is not an OpenSSL issue; it's an autoconf one.

From your installation log:

-----
&quot;gcc -o conftest.exe -IC:/Ruby21/include/ruby-2.1.0/i386-mingw32 -IC:/Ruby21/include/ruby-2.1.0/ruby/backward -IC:/Ruby21/include/ruby-2.1.0 -I. -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64   -O3 -fno-omit-frame-pointer -fno-fast-math -g -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration conftest.c  -L. -LC:/Ruby21/lib -L.      -lmsvcrt-ruby210 -lcrypto  -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  &quot;
conftest.c: In function 't':
conftest.c:16:57: error: 'BIO_read' undeclared (first use in this function)
conftest.c:16:57: note: each undeclared identifier is reported only once for each function it appears in
conftest.c:16:32: warning: variable 'p' set but not used [-Wunused-but-set-variable]
checked program was:
/* begin */
 1: #include &quot;ruby.h&quot;
 2: 
 3: #include &lt;winsock2.h&gt;
 4: #include &lt;windows.h&gt;
 5: 
 6: /*top*/
 7: extern int t(void);
 8: int main(int argc, char **argv)
 9: {
10:   if (argc &gt; 1000000) {
11:     printf(&quot;%p&quot;, &amp;t);
12:   }
13: 
14:   return 0;
15: }
16: int t(void) { void ((*volatile p)()); p = (void ((*)()))BIO_read; return 0; }
/* end */
-----

Note:
- The conftest.c generated by autoconf does not include any OpenSSL headers
- gcc correctly complains that BIO_read has not been declared

It's not a linker failure - it's a compiler diagnostic. autoconf isn't successfully checking whether the symbol can be resolved by the library because the test program it's generating is rubbish.

Autoconf should be generating an extern declaration for BIO_read in conftest.c; apparently whoever wrote that bit of autoconf doesn't know C. (No surprise there.) I suspect it normally works because gcc is configured with different default settings and treats the lack of a declaration as non-fatal. I don't know why it's different in your case, and I have no idea how to fix it, as I've never had to poke into the implementation of autoconf and don't know what's making your gcc behave differently.

-- 
Michael Wojcik
Technology Specialist, Micro Focus

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001958.html">[openssl-users] Problem in installing gem puma
</A></li>
	<LI>Next message: <A HREF="001965.html">[openssl-users] Problem in installing gem puma
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1962">[ date ]</a>
              <a href="thread.html#1962">[ thread ]</a>
              <a href="subject.html#1962">[ subject ]</a>
              <a href="author.html#1962">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
