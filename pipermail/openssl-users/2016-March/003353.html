<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] [openssl-dev] openssl 1.0.1p PEM_write_bio_RSAPrivateKey fail. error: ASN1_get_object:too long
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2016-March/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20%5Bopenssl-dev%5D%20openssl%201.0.1p%0A%20PEM_write_bio_RSAPrivateKey%20fail.%20error%3A%20ASN1_get_object%3Atoo%20long&In-Reply-To=%3CBN1PR03MB17101812F0E529A52C1D5B0EA8C0%40BN1PR03MB171.namprd03.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003346.html">
   <LINK REL="Next"  HREF="003354.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] [openssl-dev] openssl 1.0.1p PEM_write_bio_RSAPrivateKey fail. error: ASN1_get_object:too long</H1>
    <B>Tekale, Sharad</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20%5Bopenssl-dev%5D%20openssl%201.0.1p%0A%20PEM_write_bio_RSAPrivateKey%20fail.%20error%3A%20ASN1_get_object%3Atoo%20long&In-Reply-To=%3CBN1PR03MB17101812F0E529A52C1D5B0EA8C0%40BN1PR03MB171.namprd03.prod.outlook.com%3E"
       TITLE="[openssl-users] [openssl-dev] openssl 1.0.1p PEM_write_bio_RSAPrivateKey fail. error: ASN1_get_object:too long">sharad.tekale at zebra.com
       </A><BR>
    <I>Fri Mar 18 06:14:17 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="003346.html">[openssl-users] [openssl-dev] openssl 1.0.1p PEM_write_bio_RSAPrivateKey fail. error: ASN1_get_object:too long
</A></li>
        <LI>Next message: <A HREF="003354.html">[openssl-users] openssl 1.0.1p PEM_write_bio_RSAPrivateKey	fail. error: ASN1_get_object:too long
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3353">[ date ]</a>
              <a href="thread.html#3353">[ thread ]</a>
              <a href="subject.html#3353">[ subject ]</a>
              <a href="author.html#3353">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Farrell,


Thanks a lot for your reply.

I've actually used password of 64 characters in my program, for simplicity I've showcased as 6 byte password in below example.

Looks like there is some other issue or some stringent check that is added in 1.0.1p as the same code works fine in 0.9.8zg version.

Can you please give us pointers to debug this issue.

Thanks,
Sharad.


From: openssl-dev [mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-dev-bounces at openssl.org</A>] On Behalf Of Jeremy Farrell
Sent: Friday, March 18, 2016 1:25 AM
To: <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>
Cc: <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-dev at openssl.org</A>
Subject: Re: [openssl-dev] openssl 1.0.1p PEM_write_bio_RSAPrivateKey fail. error: ASN1_get_object:too long

On 17/03/2016 06:32, Ranjith Kumar A. wrote:
&gt;<i>
</I>&gt;<i> Need help.
</I>
This is a question about using the OpenSSL libraries, further discussion should be on openssl-users; I've set 'reply-to' appropriately, but I don't know what the mailing list will do with it.

&gt;<i> I'm not able to encrypt a key using passphrase, below is the error
</I>&gt;<i> message.
</I>&gt;<i>
</I>&gt;<i> **&quot;error:0D07209B:asn1 encoding routines:ASN1_get_object:too long&quot;**
</I>&gt;<i>
</I>&gt;<i> Have already googled for error but couldn't got much info
</I>&gt;<i>
</I>&gt;<i> unsigned char pass[] = &quot;123456&quot;;
</I>&gt;<i>
</I>&gt;<i> BIO *priv_bio = BIO_new( BIO_s_mem() );
</I>&gt;<i>
</I>&gt;<i> RSA *rsa = RSA_generate_key( 2048, 65537, NULL, NULL ) ret =
</I>&gt;<i> PEM_write_bio_RSAPrivateKey( priv_bio, rsa, EVP_aes_256_cbc(), pass, 64, NULL, NULL );
</I>
I don't know if or how it's related to your problem, but you have defined a 7 byte array as the passphrase then told the function to use 64 bytes at that location. There's no saying what values the other 57 bytes of the passphrase will have, assuming they're accessible at all.

&gt;<i> ...
</I>&gt;<i> The same piece of code is working on openssl-0.9.8zg.
</I>
More luck than good judgement I suspect.

&gt;<i> ...
</I>
--
J. J. Farrell
Not speaking for Oracle.


________________________________
- CONFIDENTIAL-

This email and any files transmitted with it are confidential, and may also be legally privileged. If you are not the intended recipient, you may not review, use, copy, or distribute this message. If you receive this email in error, please notify the sender immediately by reply email and then delete this email.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20160318/67dabba6/attachment-0001.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20160318/67dabba6/attachment-0001.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003346.html">[openssl-users] [openssl-dev] openssl 1.0.1p PEM_write_bio_RSAPrivateKey fail. error: ASN1_get_object:too long
</A></li>
	<LI>Next message: <A HREF="003354.html">[openssl-users] openssl 1.0.1p PEM_write_bio_RSAPrivateKey	fail. error: ASN1_get_object:too long
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3353">[ date ]</a>
              <a href="thread.html#3353">[ thread ]</a>
              <a href="subject.html#3353">[ subject ]</a>
              <a href="author.html#3353">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
