<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] verify certificate chain (in memory)
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2016-March/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20verify%20certificate%20chain%20%28in%20memory%29&In-Reply-To=%3C776079348.3341670.1457225763793.JavaMail.yahoo%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003225.html">
   <LINK REL="Next"  HREF="003227.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] verify certificate chain (in memory)</H1>
    <B>Lei Sun</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20verify%20certificate%20chain%20%28in%20memory%29&In-Reply-To=%3C776079348.3341670.1457225763793.JavaMail.yahoo%40mail.yahoo.com%3E"
       TITLE="[openssl-users] verify certificate chain (in memory)">ls00722 at yahoo.com
       </A><BR>
    <I>Sun Mar  6 00:56:03 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="003225.html">[openssl-users] verify certificate chain (in memory)
</A></li>
        <LI>Next message: <A HREF="003227.html">[openssl-users] verify certificate chain (in memory)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3226">[ date ]</a>
              <a href="thread.html#3226">[ thread ]</a>
              <a href="subject.html#3226">[ subject ]</a>
              <a href="author.html#3226">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi :
  I haven't tried that. In the command line:

openssl verify -CAfile root.cert inter.crt 
OK.
That means intermediate cert can be verified with root cert, so as a first step i try to perform this two level verify with C program. but it failed. 

If I combine the server's cert and intermediate into single file, and use d2i_X509(), would it return a china of certificates then?

I will try it. But I still concern why intermediate cert verification would fail. 

Thanks
Lei 


----- Original Message -----
From: &#193;ngel Gonz&#225;lez &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">angel at tls.16bits.net</A>&gt;
To: <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>
Sent: Saturday, March 5, 2016 8:44 AM
Subject: Re: [openssl-users] verify certificate chain (in memory)

Lei Sun wrote:

&gt;<i> Hi:
</I>&gt;<i>   In my project I need to verify certificate chain sent from server.
</I>&gt;<i> The chain has root-&gt;inter mediate -&gt; server, 3 level chain. The
</I>&gt;<i> server certificate files can be verified by &quot;openssl verify&quot; command:
</I>&gt;<i> 
</I>&gt;<i> openssl verify -CAfile root.crt server.crt
</I>&gt;<i> OK.
</I>&gt;<i> 
</I>&gt;<i> But I had to combine the root cert and intermediate cert into single
</I>&gt;<i> file, to verify the whole chain via command line.
</I>
Have you tried combining the intermediate and the server cert into a
single file? That should work, and is more akin to the actual behavior
(the server sends its certificate plus any  intermediates, and the
client should only need the root).

Kind regards

-- 
openssl-users mailing list
To unsubscribe: <A HREF="../../../mailman/listinfo/openssl-users.html">https://mta.openssl.org/mailman/listinfo/openssl-users</A>
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003225.html">[openssl-users] verify certificate chain (in memory)
</A></li>
	<LI>Next message: <A HREF="003227.html">[openssl-users] verify certificate chain (in memory)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3226">[ date ]</a>
              <a href="thread.html#3226">[ thread ]</a>
              <a href="subject.html#3226">[ subject ]</a>
              <a href="author.html#3226">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
