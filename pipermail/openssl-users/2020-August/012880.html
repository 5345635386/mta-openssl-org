<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Assembly build issues for UEFI with nasm and RtlVirtualUnwind
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2020-August/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Assembly%20build%20issues%20for%20UEFI%20with%20nasm%20and%20RtlVirtualUnwind&In-Reply-To=%3CMWHPR1101MB2125BCA594968DF217B9A3C1B35D0%40MWHPR1101MB2125.namprd11.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012886.html">
   <LINK REL="Next"  HREF="012884.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Assembly build issues for UEFI with nasm and RtlVirtualUnwind</H1>
    <B>Zurcher, Christopher J</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Assembly%20build%20issues%20for%20UEFI%20with%20nasm%20and%20RtlVirtualUnwind&In-Reply-To=%3CMWHPR1101MB2125BCA594968DF217B9A3C1B35D0%40MWHPR1101MB2125.namprd11.prod.outlook.com%3E"
       TITLE="Assembly build issues for UEFI with nasm and RtlVirtualUnwind">christopher.j.zurcher at intel.com
       </A><BR>
    <I>Wed Aug 19 23:26:12 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="012886.html">query on dns resolver
</A></li>
        <LI>Next message: <A HREF="012884.html">Surprising behaviour of DTLSv1_listen
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12880">[ date ]</a>
              <a href="thread.html#12880">[ thread ]</a>
              <a href="subject.html#12880">[ subject ]</a>
              <a href="author.html#12880">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Within the TianoCore/EDK2 project for UEFI, the prescribed assembler is NASM. In order build the 64-bit assembly config of OpenSSL with .nasm files, it appears that the Windows API function RtlVirtualUnwind is required. For my current implementation I have provided a stub function to satisfy the build but I would like to remove this function altogether. Is there a config flag I am missing that would let me build with .nasm files and without RtlVirtualUnwind? As far as I can tell, I have to set perlasm_scheme to nasm to get the correct output format, but this also forces the win64 flag to be set, which always includes  __imp_RtlVirtualUnwind.

Additionally, I am avoiding AVX instructions in 64- and 32-bit configs by hiding the nasm executable from the perl assembly generators (to skip the version check), but it would be helpful to have some sort of flag to disable AVX.

Thanks,
Christopher Zurcher
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012886.html">query on dns resolver
</A></li>
	<LI>Next message: <A HREF="012884.html">Surprising behaviour of DTLSv1_listen
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12880">[ date ]</a>
              <a href="thread.html#12880">[ thread ]</a>
              <a href="subject.html#12880">[ subject ]</a>
              <a href="author.html#12880">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
