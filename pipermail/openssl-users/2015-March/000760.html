<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] How to make a rehandshake(renegotiation)?
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2015-March/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20How%20to%20make%20a%20rehandshake%28renegotiation%29%3F&In-Reply-To=%3C13253711426173307%40web13h.yandex.ru%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000757.html">
   <LINK REL="Next"  HREF="000713.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] How to make a rehandshake(renegotiation)?</H1>
    <B>Serj Rakitov</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20How%20to%20make%20a%20rehandshake%28renegotiation%29%3F&In-Reply-To=%3C13253711426173307%40web13h.yandex.ru%3E"
       TITLE="[openssl-users] How to make a rehandshake(renegotiation)?">rasjv at yandex.com
       </A><BR>
    <I>Thu Mar 12 15:15:07 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000757.html">[openssl-users] How to make a rehandshake(renegotiation)?
</A></li>
        <LI>Next message: <A HREF="000713.html">[openssl-users] How to disable all EXPORT Ciphers?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#760">[ date ]</a>
              <a href="thread.html#760">[ thread ]</a>
              <a href="subject.html#760">[ subject ]</a>
              <a href="author.html#760">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I managed to do a renegotiation. 
My mistake was that I start renegotiation when not all data were received or sended. 
Probably there was a situation when not all packets(records) were processed and i got a error: unexpected record or bad length.

Really only one function SSL_renegotiate and flag SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION are quite enough. Seems to be all others was for old OpenSLL versions.

Only one question remain, it's opposite to the first one: if i want don't use renegotiation at all, how to disable it?
I see that insecure renegotiation can be disabled by: 
SSL_CTX_clear_options(ctx,SSL_OP_LEGACY_SERVER_CONNECT)
that is enabled by default. 

But what about secure renegotiation? Is it possible to disable it at all for client and server. So, Server rejects queries on secure renegotiation from client and client rejects queries on secure renegotiation from server.

Regards.
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000757.html">[openssl-users] How to make a rehandshake(renegotiation)?
</A></li>
	<LI>Next message: <A HREF="000713.html">[openssl-users] How to disable all EXPORT Ciphers?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#760">[ date ]</a>
              <a href="thread.html#760">[ thread ]</a>
              <a href="subject.html#760">[ subject ]</a>
              <a href="author.html#760">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
