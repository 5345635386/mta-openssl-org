<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> SSL_read() fails when using manually managed buffers
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2023-January/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20SSL_read%28%29%20fails%20when%20using%20manually%20managed%20buffers&In-Reply-To=%3CCAHf7xWvuo7kaBAW%2BGmiv4_bJC%3DqPNf1vqX-Zs-dDPxbWOv_FLw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015779.html">
   <LINK REL="Next"  HREF="015777.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>SSL_read() fails when using manually managed buffers</H1>
    <B>Christian Mazakas</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20SSL_read%28%29%20fails%20when%20using%20manually%20managed%20buffers&In-Reply-To=%3CCAHf7xWvuo7kaBAW%2BGmiv4_bJC%3DqPNf1vqX-Zs-dDPxbWOv_FLw%40mail.gmail.com%3E"
       TITLE="SSL_read() fails when using manually managed buffers">christian.mazakas at gmail.com
       </A><BR>
    <I>Wed Jan  4 16:55:07 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015779.html">SSL_read() fails when using manually managed buffers
</A></li>
        <LI>Next message (by thread): <A HREF="015777.html">SSL_read() fails when using manually managed buffers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15780">[ date ]</a>
              <a href="thread.html#15780">[ thread ]</a>
              <a href="subject.html#15780">[ subject ]</a>
              <a href="author.html#15780">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> You can't connect the server SSL handle and client SSL handle to the
</I>&gt;<i> same bio pair.  They each need their own, and you'll need a loop copying
</I>&gt;<i> data between them.
</I>My naming must be poor because I *should* be doing this already.

I've updated the error string printing and it seems like there's no common
cipher
between the client and the server.

Here's an updated Compiler Explorer link that should demonstrate the issue:
<A HREF="https://godbolt.org/z/KejG9e3hG">https://godbolt.org/z/KejG9e3hG</A>

&gt;<i> I am manually handling the SSL_accept() for the server with state
</I>&gt;<i> tracking though, with similar error checking &amp; handling. I left some
</I>&gt;<i> references to my internal data structures and functions in and hope they
</I>&gt;<i> are self explaining.
</I>
Heh, are you able to link to the code so I can take a look? It seems hard
to find
examples of manually using BIO pairs like this.

- Christian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20230104/8e0a6dfa/attachment.htm">https://mta.openssl.org/pipermail/openssl-users/attachments/20230104/8e0a6dfa/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015779.html">SSL_read() fails when using manually managed buffers
</A></li>
	<LI>Next message (by thread): <A HREF="015777.html">SSL_read() fails when using manually managed buffers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15780">[ date ]</a>
              <a href="thread.html#15780">[ thread ]</a>
              <a href="subject.html#15780">[ subject ]</a>
              <a href="author.html#15780">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
