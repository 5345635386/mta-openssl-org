<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> SMIME signed message verification
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2020-October/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20SMIME%20signed%20message%20verification&In-Reply-To=%3C5DF3C0F0-512C-4A56-84A3-61B7AE118A1A%40c-works.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013085.html">
   <LINK REL="Next"  HREF="013082.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>SMIME signed message verification</H1>
    <B>Harald Koch</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20SMIME%20signed%20message%20verification&In-Reply-To=%3C5DF3C0F0-512C-4A56-84A3-61B7AE118A1A%40c-works.net%3E"
       TITLE="SMIME signed message verification">root at c-works.net
       </A><BR>
    <I>Fri Oct 30 07:14:42 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="013085.html">SMIME signed message verification
</A></li>
        <LI>Next message: <A HREF="013082.html">Facing problems with openssl-1.1.1c &amp; later versions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13086">[ date ]</a>
              <a href="thread.html#13086">[ thread ]</a>
              <a href="subject.html#13086">[ subject ]</a>
              <a href="author.html#13086">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Michael,

&gt;<i> Am 29.10.2020 um 22:55 schrieb Michael Richardson &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">mcr at sandelman.ca</A>&gt;:
</I>&gt;<i> 
</I>&gt;&gt;<i> Yes, the signed message is contained in a HTTP(S) multipart request
</I>&gt;&gt;<i> with more payload and header information, sure. The only different part
</I>&gt;&gt;<i> is the signed content, all other content has been manually checked,
</I>&gt;&gt;<i> they are exactly the same. May it be possible that the CMS data which
</I>&gt;&gt;<i> openSSL generates is much bigger due to unneeded certificate
</I>&gt;&gt;<i> information, which makes the Java process stumble over the input?
</I>&gt;<i> so, do have detached content then?
</I>Yes.

&gt;<i> And MIME and HTTP is involved?  My bet is that you have CRLF/LF issues, which
</I>&gt;<i> you might not see unless you look at the raw packets --- after the TLS is
</I>&gt;<i> removed, which is a hassle, but there is a way in openssl to get that data
</I>&gt;<i> put somewhere, but I can't recall what it is.
</I>
The CRLF issue known to me, and the used &#8222;vi&#8220; editor is showing them good in blue color with &#8222;^M&#8220; at every line ending, so there is no error here (since I use the flag PKCS7_CRLFEOL / CMS_CRLFEOL for correct encoding of line endings for HTTP(S) transmission).
I&#8217;ve obtained the raw message via netcat and examined it in detail, the only difference seems to be the signed content. One big difference in the contained ASN1 data is that openSSL includes much more information from the used certificate, i.e. the X509v3 extensions, which Java doesn&#8217;t do. Perhaps it&#8217;s a matter of what certificate information is included in the signed data?
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013085.html">SMIME signed message verification
</A></li>
	<LI>Next message: <A HREF="013082.html">Facing problems with openssl-1.1.1c &amp; later versions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13086">[ date ]</a>
              <a href="thread.html#13086">[ thread ]</a>
              <a href="subject.html#13086">[ subject ]</a>
              <a href="author.html#13086">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
