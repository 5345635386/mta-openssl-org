<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> &#22238;&#22797;: openssl-users Digest, Vol 86, Issue 1
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2022-January/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%3D%3FUTF-8%3FQ%3F%3DE5%3D9B%3D9E%3DE5%3DA4%3D8D%3D3A%3F%3D%20openssl-users%20Digest%2C%20Vol%2086%2C%0A%20Issue%201&In-Reply-To=%3C920a3c54a6a05ac6d27bf6d4aa4f45fbad843266.camel%40markhack.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014777.html">
   <LINK REL="Next"  HREF="014778.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>&#22238;&#22797;: openssl-users Digest, Vol 86, Issue 1</H1>
    <B>Mark Hack</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%3D%3FUTF-8%3FQ%3F%3DE5%3D9B%3D9E%3DE5%3DA4%3D8D%3D3A%3F%3D%20openssl-users%20Digest%2C%20Vol%2086%2C%0A%20Issue%201&In-Reply-To=%3C920a3c54a6a05ac6d27bf6d4aa4f45fbad843266.camel%40markhack.com%3E"
       TITLE="&#22238;&#22797;: openssl-users Digest, Vol 86, Issue 1">markhack at markhack.com
       </A><BR>
    <I>Wed Jan  5 15:08:46 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014777.html">&#22238;&#22797;: openssl-users Digest, Vol 86, Issue 1
</A></li>
        <LI>Next message (by thread): <A HREF="014778.html">KTLS with openssl 3.0 fail with error ENOTCONN(Transport endpoint is not connected) 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14783">[ date ]</a>
              <a href="thread.html#14783">[ thread ]</a>
              <a href="subject.html#14783">[ subject ]</a>
              <a href="author.html#14783">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You are welcome. Determining why TLS handshakes fail is a challenge
since it does require knowledge of what cipher suites and algorithms
are required by the server and are missing in the client.

On Tue, 2022-01-04 at 23:08 +0000, Ma Zhenhua wrote:
&gt;<i> Hi Mark,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Thanks so much for your advice.
</I>&gt;<i>  You're right. This is truely caused by signature_algorithms_cert
</I>&gt;<i> extension not containing rsa_pkcs1_sha256 (0x0401). Below solutions
</I>&gt;<i> now works well regarding TLS handshake.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 1.The ClientHello doesn't include signature_algorithms_cert
</I>&gt;<i> extension.
</I>&gt;<i> 
</I>&gt;<i> 2.The signature_algorithms_cert extension in ClientHello contains
</I>&gt;<i> rsa_pkcs1_sha256 (0x0401).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Allen
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &#21457;&#20214;&#20154;: openssl-users &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-bounces at openssl.org</A>&gt; &#20195;&#34920; 
</I>&gt;<i> <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-request at openssl.org</A> &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-request at openssl.org</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> &#21457;&#36865;&#26102;&#38388;: 2022&#24180;1&#26376;1&#26085; 15:48
</I>&gt;<i> 
</I>&gt;<i> &#25910;&#20214;&#20154;: <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A> &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> &#20027;&#39064;: openssl-users Digest, Vol 86, Issue 1
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Send openssl-users mailing list submissions to
</I>&gt;<i> 
</I>&gt;<i>         <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> To subscribe or unsubscribe via the World Wide Web, visit
</I>&gt;<i> 
</I>&gt;<i>         <A HREF="../../../mailman/listinfo/openssl-users.html">https://mta.openssl.org/mailman/listinfo/openssl-users</A>
</I>&gt;<i> 
</I>&gt;<i> or, via email, send a message with subject or body 'help' to
</I>&gt;<i> 
</I>&gt;<i>         <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-request at openssl.org</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> You can reach the person managing the list at
</I>&gt;<i> 
</I>&gt;<i>         <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-owner at openssl.org</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> When replying, please edit your Subject line so it is more specific
</I>&gt;<i> 
</I>&gt;<i> than &quot;Re: Contents of openssl-users digest...&quot;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Today's Topics:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>    1. RE: undefined symbol: OSSL_provider_init when running &quot;make
</I>&gt;<i> 
</I>&gt;<i>       test&quot; for OpenSSL 3.0 (Lee Staniforth)
</I>&gt;<i> 
</I>&gt;<i>    2. RE: [openssl-1.1.1l] TLS1.2 Server responses with Alert
</I>&gt;<i> 
</I>&gt;<i>       (Michael Wojcik)
</I>&gt;<i> 
</I>&gt;<i>    3. Re: [openssl-1.1.1l] TLS1.2 Server responses with Alert
</I>&gt;<i> 
</I>&gt;<i>       (Mark Hack)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -------------------------------------------------------------------
</I>&gt;<i> ---
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Message: 1
</I>&gt;<i> 
</I>&gt;<i> Date: Fri, 31 Dec 2021 13:46:49 +0000
</I>&gt;<i> 
</I>&gt;<i> From: Lee Staniforth &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">Lee.Staniforth at synchronoss.com</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> To: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">matt at openssl.org</A>&gt;, &quot;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&quot;
</I>&gt;<i> 
</I>&gt;<i>         &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> Subject: RE: undefined symbol: OSSL_provider_init when running &quot;make
</I>&gt;<i> 
</I>&gt;<i>         test&quot; for OpenSSL 3.0
</I>&gt;<i> 
</I>&gt;<i> Message-ID:
</I>&gt;<i> 
</I>&gt;<i>         &lt;
</I>&gt;<i> <A HREF="../../../mailman/listinfo/openssl-users.html">DM6PR07MB8028DD6128102487938131E882469 at DM6PR07MB8028.namprd07.prod.outlook.com</A>
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i>         
</I>&gt;<i> 
</I>&gt;<i> Content-Type: text/plain; charset=&quot;us-ascii&quot;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Thanks very much, Matt and defulger.
</I>&gt;<i> 
</I>&gt;<i> Removing the &quot;-fvisibility=hidden&quot; has enabled the tests to pass.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I'll now have to see how my application (which is statically linked
</I>&gt;<i> to OpenSSL) fairs.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Lee
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> From: Matt Caswell &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">matt at openssl.org</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> Sent: 23 December 2021 10:13
</I>&gt;<i> 
</I>&gt;<i> To: Lee Staniforth &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">Lee.Staniforth at synchronoss.com</A>&gt;; 
</I>&gt;<i> <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>
</I>&gt;<i> 
</I>&gt;<i> Subject: Re: undefined symbol: OSSL_provider_init when running &quot;make
</I>&gt;<i> test&quot; for OpenSSL 3.0
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 21/12/2021 15:09, Lee Staniforth wrote: &gt; ./Configure linux-x86_64 
</I>&gt;<i> no-shared -m64 -fPIC -fvisibility=hidden Try dropping &quot;-
</I>&gt;<i> fvisibility=hidden&quot;. I can replicate this problem when using no-
</I>&gt;<i> shared and
</I>&gt;<i> 
</I>&gt;<i> External (<A HREF="../../../mailman/listinfo/openssl-users.html">matt at openssl.org</A>&lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">matt at openssl.org</A>&gt;)
</I>&gt;<i> 
</I>&gt;<i>   Report This Email&lt;
</I>&gt;<i> <A HREF="https://protection.inkyphishfence.com/report?id=c3luY2hyb25vc3MvbGVlLnN0YW5pZm9ydGhAc3luY2hyb25vc3MuY29tL2NiZGFiM2RjZDIzNWI3NDllOWQzYzRlYzBlYTA3Y2I1LzE2NDAyNTQzODIuMzc=#key=1fa1e349d7396284bf7cc883faec871a">https://protection.inkyphishfence.com/report?id=c3luY2hyb25vc3MvbGVlLnN0YW5pZm9ydGhAc3luY2hyb25vc3MuY29tL2NiZGFiM2RjZDIzNWI3NDllOWQzYzRlYzBlYTA3Y2I1LzE2NDAyNTQzODIuMzc=#key=1fa1e349d7396284bf7cc883faec871a</A>
</I>&gt;<i> &gt; 
</I>&gt;<i>  FAQ&lt;<A HREF="https://www.inky.com/banner-faq/">https://www.inky.com/banner-faq/</A>&gt;  Protection by INKY&lt;
</I>&gt;<i> <A HREF="https://www.inky.com">https://www.inky.com</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 21/12/2021 15:09, Lee Staniforth wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; ./Configure linux-x86_64 no-shared -m64 -fPIC -fvisibility=hidden
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Try dropping &quot;-fvisibility=hidden&quot;. I can replicate this problem when
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> using no-shared and -fvisibility=hidden. If I drop the
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &quot;-fvisibility=hidden&quot; the problem goes away.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Matt
</I>&gt;<i> 
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> 
</I>&gt;<i> An HTML attachment was scrubbed...
</I>&gt;<i> 
</I>&gt;<i> URL: &lt;
</I>&gt;<i> <A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20211231/0f037481/attachment-0001.htm">https://mta.openssl.org/pipermail/openssl-users/attachments/20211231/0f037481/attachment-0001.htm</A>
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Message: 2
</I>&gt;<i> 
</I>&gt;<i> Date: Fri, 31 Dec 2021 15:05:26 +0000
</I>&gt;<i> 
</I>&gt;<i> From: Michael Wojcik &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">Michael.Wojcik at microfocus.com</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> To: &quot;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&quot; &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> Subject: RE: [openssl-1.1.1l] TLS1.2 Server responses with Alert
</I>&gt;<i> 
</I>&gt;<i> Message-ID:
</I>&gt;<i> 
</I>&gt;<i>         &lt;
</I>&gt;<i> <A HREF="../../../mailman/listinfo/openssl-users.html">DM6PR18MB27005C4E44DE291D1C26B9EEF9469 at DM6PR18MB2700.namprd18.prod.outlook.com</A>
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i>         
</I>&gt;<i> 
</I>&gt;<i> Content-Type: text/plain; charset=&quot;us-ascii&quot;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; From: openssl-users &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-bounces at openssl.org</A>&gt; On Behalf
</I>&gt;<i> Of Ma Zhenhua
</I>&gt;<i> 
</I>&gt;<i> &gt; Sent: Thursday, 30 December, 2021 23:59
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; On the SSL/TLS server, there's one error as follows. 
</I>&gt;<i> 
</I>&gt;<i> &gt; &quot;SSL Error(118) - no suitable signature algorithm&quot;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Debugging handshake failures isn't my area of expertise, but I note
</I>&gt;<i> both ClientHellos include a signature_algorithms extension, and the
</I>&gt;<i> contents are quite different. In particular, the successful
</I>&gt;<i> ClientHello includes the Signature Hash Algorithm Hash and Signature
</I>&gt;<i>  Hash Algorithm Signature parameters, while the failing one doesn't.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The failing one also includes a signature_algorithms_cert extension,
</I>&gt;<i> while the successful one does not. I don't know offhand how the
</I>&gt;<i> algorithms specified in that extension correspond to the signature-
</I>&gt;<i> algorithm OIDs in signatures, but the server's certificate
</I>&gt;<i>  has 1.2.840.113549.1.1.11 (sha256WithRSAEncryption) which seems like
</I>&gt;<i> it ought to correspond to either rsa_pss_rsae_sha256 or
</I>&gt;<i> rsa_pss_pss_sha256. (Apparently those are both RSA-PSS with SHA256,
</I>&gt;<i> as the name implies, and the difference between the two of them
</I>&gt;<i>  is whether the public key is encoded using the rsaEncryption format
</I>&gt;<i> in the certificate, or the id-RSASSA-PSS format. The failing client
</I>&gt;<i> is saying it understands both, AIUI.)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> So my guess would be the server is unhappy that the failing client's
</I>&gt;<i> ClientHello doesn't include the parameters for the various supported
</I>&gt;<i> signature schemes in its signature_algorithms extension. But that's
</I>&gt;<i> just a guess, and I don't know how you'd fix it.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20220105/1cce73cb/attachment.htm">https://mta.openssl.org/pipermail/openssl-users/attachments/20220105/1cce73cb/attachment.htm</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014777.html">&#22238;&#22797;: openssl-users Digest, Vol 86, Issue 1
</A></li>
	<LI>Next message (by thread): <A HREF="014778.html">KTLS with openssl 3.0 fail with error ENOTCONN(Transport endpoint is not connected) 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14783">[ date ]</a>
              <a href="thread.html#14783">[ thread ]</a>
              <a href="subject.html#14783">[ subject ]</a>
              <a href="author.html#14783">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
