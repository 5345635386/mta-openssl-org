<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Throwing in the towel on ENV for DN
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2017-August/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Throwing%20in%20the%20towel%20on%20ENV%20for%20DN&In-Reply-To=%3Cb6a42ba7-e891-77fa-9985-aea96aac02c5%40htt-consult.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006335.html">
   <LINK REL="Next"  HREF="006342.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Throwing in the towel on ENV for DN</H1>
    <B>Robert Moskowitz</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Throwing%20in%20the%20towel%20on%20ENV%20for%20DN&In-Reply-To=%3Cb6a42ba7-e891-77fa-9985-aea96aac02c5%40htt-consult.com%3E"
       TITLE="[openssl-users] Throwing in the towel on ENV for DN">rgm at htt-consult.com
       </A><BR>
    <I>Fri Aug 18 14:54:29 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="006335.html">[openssl-users] Throwing in the towel on ENV for DN
</A></li>
        <LI>Next message: <A HREF="006342.html">[openssl-users] Pilgrims progress
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6339">[ date ]</a>
              <a href="thread.html#6339">[ thread ]</a>
              <a href="subject.html#6339">[ subject ]</a>
              <a href="author.html#6339">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On 08/18/2017 08:48 AM, Jeffrey Walton wrote:
&gt;&gt;<i> It is coming down that I would need a unique cnf for each cert type, rather
</I>&gt;&gt;<i> than one per signing CA.  Things just don't work well without prompting or
</I>&gt;&gt;<i> very consistent DN content.  So I am going to pull most of my. ENV.  I am
</I>&gt;&gt;<i> leaving it in for dir and SAN.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I feel it is a bug that if in 'prompt = no' or -batch, if a DN object is
</I>&gt;&gt;<i> empty (size 0), it should just be dropped.  This is not an error condition.
</I>&gt;<i> If this is a private PKI, then you can do things like that.
</I>I as not clear.   meant one of the DN's objects like OU.

If you have prompt = no and

organizationalUnitName  =

It takes OU's size as zero and fails.  This should not be an error 
condition, OU should be skipped just like if you had in the command 
(which I *KNOW* works):

-subj &quot;/CN=US/ST=MI/O= HTT Consulting/OU=/CN=Root CA&quot;

So I call it a bug.

&gt;<i> But I believe you need a distinguished name if you are following the
</I>&gt;<i> RFCs. Maybe you can modify your script to stuff the principal name
</I>&gt;<i> from the SAN in the DN somewhere.
</I>&gt;<i>
</I>&gt;&gt;<i> Next steps:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> complete basic setup for ecdsa pki and 802.1AR leaf.  Publish on my website.
</I>&gt;&gt;<i> Write up 'lessons learned' and post it here.
</I>&gt;<i> I think there's a separate RFC or draft for 802.1AR, but I have not read it.
</I>&gt;<i>
</I>&gt;<i> Maybe part of the pain point is, OpenSSL is not aware of it. Its just
</I>&gt;<i> using RFC 5280 (and to some extent, 6125).
</I>&gt;<i>
</I>&gt;<i> Maybe you should stop using the command line tools and code something
</I>&gt;<i> up in C. Once you hit your stride using the C APIs, its easy to crank
</I>&gt;<i> out certificates the way you want them.
</I>&gt;<i>
</I>&gt;<i> Jeff
</I>
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006335.html">[openssl-users] Throwing in the towel on ENV for DN
</A></li>
	<LI>Next message: <A HREF="006342.html">[openssl-users] Pilgrims progress
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6339">[ date ]</a>
              <a href="thread.html#6339">[ thread ]</a>
              <a href="subject.html#6339">[ subject ]</a>
              <a href="author.html#6339">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
