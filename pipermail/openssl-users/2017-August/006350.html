<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Question about X509_V_ERR_SELF_SIGNED_CERT_IN_CHAIN for a cert chain including the root cert
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2017-August/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Question%20about%20X509_V_ERR_SELF_SIGNED_CERT_IN_CHAIN%0A%20for%20a%20cert%20chain%20including%20the%20root%20cert&In-Reply-To=%3Cc583ca64-6257-5434-8bb8-3754e79c3510%40convey.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006349.html">
   <LINK REL="Next"  HREF="006351.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Question about X509_V_ERR_SELF_SIGNED_CERT_IN_CHAIN for a cert chain including the root cert</H1>
    <B>Bernhard Fr&#246;hlich</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Question%20about%20X509_V_ERR_SELF_SIGNED_CERT_IN_CHAIN%0A%20for%20a%20cert%20chain%20including%20the%20root%20cert&In-Reply-To=%3Cc583ca64-6257-5434-8bb8-3754e79c3510%40convey.de%3E"
       TITLE="[openssl-users] Question about X509_V_ERR_SELF_SIGNED_CERT_IN_CHAIN for a cert chain including the root cert">ted at convey.de
       </A><BR>
    <I>Mon Aug 21 10:58:36 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="006349.html">[openssl-users] Clearing up some of my mistakes on serial number
</A></li>
        <LI>Next message: <A HREF="006351.html">[openssl-users] Using set_serial to control serial number size	directly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6350">[ date ]</a>
              <a href="thread.html#6350">[ thread ]</a>
              <a href="subject.html#6350">[ subject ]</a>
              <a href="author.html#6350">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

I have a question about certificate chain checkin when the chain 
includes a root certificate.

The server I want to connect to with openssl s_client (Version 0.9.8zc) 
sends this certificate chain:

0 s:Server's cert
  i:Intermediate cert
1 s:Intermediate cert
  i:Root 1 cert
2 s:Root 1 cert
  i: Root 2 cert
3 s:Root 2 cert
  i:Root 2 cert

If my CA file includes the self signed Root 1 cert, but not the &quot;Root 2 
cert&quot; I get &quot;Verify return code: 19 (self signed certificate in 
certificate chain)&quot;
If I add the Root 2 cert to the CA file everything is fine.
If I try openssl verify on the Server's cert with a CA file including 
Intermediate cert and self-signed Root 1 cert, but not Root 2 cert, 
verify reports OK.

My view was that the Root 1 cert in the CA file should verify the chain. 
Obviously it does not, but why?
Are two certificates with the same subject but different issuer 
considered different? Or is this an issue with my ancient openssl version?

Kind regards
Ted

-- 
PGP Public Key Information
Key ID = 7AFB8D26
Key fingerprint = 31B0 E029 BCF9 6605 DAC1  B2E1 0CC8 70F4 7AFB 8D26


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006349.html">[openssl-users] Clearing up some of my mistakes on serial number
</A></li>
	<LI>Next message: <A HREF="006351.html">[openssl-users] Using set_serial to control serial number size	directly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6350">[ date ]</a>
              <a href="thread.html#6350">[ thread ]</a>
              <a href="subject.html#6350">[ subject ]</a>
              <a href="author.html#6350">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
