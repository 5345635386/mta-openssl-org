<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] MinGW64 / MSYS2 and ./Configure : use of Windows style path causing failures to 'make'
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2016-December/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20MinGW64%20/%20MSYS2%20and%20./Configure%20%3A%20use%20of%20Windows%0A%20style%20path%20causing%20failures%20to%20%27make%27&In-Reply-To=%3C1733025605.2034908.1482816244923%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005024.html">
   <LINK REL="Next"  HREF="005027.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] MinGW64 / MSYS2 and ./Configure : use of Windows style path causing failures to 'make'</H1>
    <B>Ron Gaw &lt;ronmlgaw at yahoo dot com&gt;</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20MinGW64%20/%20MSYS2%20and%20./Configure%20%3A%20use%20of%20Windows%0A%20style%20path%20causing%20failures%20to%20%27make%27&In-Reply-To=%3C1733025605.2034908.1482816244923%40mail.yahoo.com%3E"
       TITLE="[openssl-users] MinGW64 / MSYS2 and ./Configure : use of Windows style path causing failures to 'make'">ronmlgaw at yahoo.com
       </A><BR>
    <I>Tue Dec 27 05:24:04 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="005024.html">[openssl-users] Unable to STARTTLS behind a specific network
</A></li>
        <LI>Next message: <A HREF="005027.html">[openssl-users] MinGW64 / MSYS2 and ./Configure : use of Windows style path causing failures to 'make'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5026">[ date ]</a>
              <a href="thread.html#5026">[ thread ]</a>
              <a href="subject.html#5026">[ subject ]</a>
              <a href="author.html#5026">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am using a MinGW64 / MSYS2 environment to compile OpenSSL1.1.0c, but failing consistently after multiple attempts with a few variations each attempt (including deleting entire source directory and re-untar/ungzipping). &#160; I believe there's something wrong either with my environment settings or ./Configure options.&#160; This is the output of ./Configure after setting only the CFLAGS env var:
$ export &quot;CFLAGS=-03&quot;$ ./Configure mingw64 --prefix=/usr/local zlib shared
Configuring OpenSSL version 1.1.0c (0x1010003fL)
&#160;&#160;&#160; no-asan&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; [default]&#160; OPENSSL_NO_ASAN
&#160;&#160;&#160; no-crypto-mdebug [default]&#160; OPENSSL_NO_CRYPTO_MDEBUG
&#160;&#160;&#160; no-crypto-mdebug-backtrace [default]&#160; OPENSSL_NO_CRYPTO_MDEBUG_BACKTRACE
&#160;&#160;&#160; no-ec_nistp_64_gcc_128 [default]&#160; OPENSSL_NO_EC_NISTP_64_GCC_128
&#160;&#160;&#160; no-egd&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; [default]&#160; OPENSSL_NO_EGD
&#160;&#160;&#160; no-fuzz-afl&#160;&#160;&#160;&#160; [default]&#160; OPENSSL_NO_FUZZ_AFL
&#160;&#160;&#160; no-fuzz-libfuzzer [default]&#160; OPENSSL_NO_FUZZ_LIBFUZZER
&#160;&#160;&#160; no-heartbeats&#160;&#160; [default]&#160; OPENSSL_NO_HEARTBEATS
&#160;&#160;&#160; no-md2&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; [default]&#160; OPENSSL_NO_MD2 (skip dir)
&#160;&#160;&#160; no-msan&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; [default]&#160; OPENSSL_NO_MSAN
&#160;&#160;&#160; no-rc5&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; [default]&#160; OPENSSL_NO_RC5 (skip dir)
&#160;&#160;&#160; no-sctp&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; [default]&#160; OPENSSL_NO_SCTP
&#160;&#160;&#160; no-ssl-trace&#160;&#160;&#160; [default]&#160; OPENSSL_NO_SSL_TRACE
&#160;&#160;&#160; no-ssl3&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; [default]&#160; OPENSSL_NO_SSL3
&#160;&#160;&#160; no-ssl3-method&#160; [default]&#160; OPENSSL_NO_SSL3_METHOD
&#160;&#160;&#160; no-ubsan&#160;&#160;&#160;&#160;&#160;&#160;&#160; [default]&#160; OPENSSL_NO_UBSAN
&#160;&#160;&#160; no-unit-test&#160;&#160;&#160; [default]&#160; OPENSSL_NO_UNIT_TEST
&#160;&#160;&#160; no-weak-ssl-ciphers [default]&#160; OPENSSL_NO_WEAK_SSL_CIPHERS
&#160;&#160;&#160; no-zlib-dynamic [default]
Configuring for mingw64
CC&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; =gcc
CFLAG&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; =-DL_ENDIAN -DWIN32_LEAN_AND_MEAN -DUNICODE -D_UNICODE -m64 -Wall -O3 -D_MT
SHARED_CFLAG&#160; =-D_WINDLL
DEFINES&#160;&#160;&#160;&#160;&#160;&#160; =ZLIB DSO_WIN32 NDEBUG OPENSSL_THREADS OPENSSL_NO_STATIC_ENGINE OPENSSL_PIC OPENSSL_IA32_SSE2 OPENSSL_BN_ASM_MONT OPENSSL_BN_ASM_MONT5 OPENSSL_BN_ASM_GF2m SHA1_ASM SHA256_ASM SHA512_ASM RC4_ASM MD5_ASM AES_ASM VPAES_ASM BSAES_ASM GHASH_ASM ECP_NISTZ256_ASM POLY1305_ASM
LFLAG&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; =
PLIB_LFLAG&#160;&#160;&#160; =
EX_LIBS&#160;&#160;&#160;&#160;&#160;&#160; =-lz -lws2_32 -lgdi32 -lcrypt32
APPS_OBJ&#160;&#160;&#160;&#160;&#160; =win32_init.o
CPUID_OBJ&#160;&#160;&#160;&#160; =x86_64cpuid.o
UPLINK_OBJ&#160;&#160;&#160; =
BN_ASM&#160;&#160;&#160;&#160;&#160;&#160;&#160; =asm/x86_64-gcc.o x86_64-mont.o x86_64-mont5.o x86_64-gf2m.o rsaz_exp.o rsaz-x86_64.o rsaz-avx2.o
EC_ASM&#160;&#160;&#160;&#160;&#160;&#160;&#160; =ecp_nistz256.o ecp_nistz256-x86_64.o
DES_ENC&#160;&#160;&#160;&#160;&#160;&#160; =des_enc.o fcrypt_b.o
AES_ENC&#160;&#160;&#160;&#160;&#160;&#160; =aes-x86_64.o vpaes-x86_64.o bsaes-x86_64.o aesni-x86_64.o aesni-sha1-x86_64.o aesni-sha256-x86_64.o aesni-mb-x86_64.o
BF_ENC&#160;&#160;&#160;&#160;&#160;&#160;&#160; =bf_enc.o
CAST_ENC&#160;&#160;&#160;&#160;&#160; =c_enc.o
RC4_ENC&#160;&#160;&#160;&#160;&#160;&#160; =rc4-x86_64.o rc4-md5-x86_64.o
RC5_ENC&#160;&#160;&#160;&#160;&#160;&#160; =rc5_enc.o
MD5_OBJ_ASM&#160;&#160; =md5-x86_64.o
SHA1_OBJ_ASM&#160; =sha1-x86_64.o sha256-x86_64.o sha512-x86_64.o sha1-mb-x86_64.o sha256-mb-x86_64.o
RMD160_OBJ_ASM=
CMLL_ENC&#160;&#160;&#160;&#160;&#160; =cmll-x86_64.o cmll_misc.o
MODES_OBJ&#160;&#160;&#160;&#160; =ghash-x86_64.o aesni-gcm-x86_64.o
PADLOCK_OBJ&#160;&#160; =e_padlock-x86_64.o
CHACHA_ENC&#160;&#160;&#160; =chacha-x86_64.o
POLY1305_OBJ&#160; =poly1305-x86_64.o
BLAKE2_OBJ&#160;&#160;&#160; =
PROCESSOR&#160;&#160;&#160;&#160; =
RANLIB&#160;&#160;&#160;&#160;&#160;&#160;&#160; =ranlib
ARFLAGS&#160;&#160;&#160;&#160;&#160;&#160; =
PERL&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; =C:\msys64\mingw64\bin\perl.exe

SIXTY_FOUR_BIT mode

Configured for mingw64.

$ make
C:\msys64\mingw64\bin\perl.exe &quot;-I.&quot; -Mconfigdata &quot;util\dofile.pl&quot; \
&#160;&#160;&#160; &quot;-oMakefile&quot; crypto\include\internal\bn_conf.h.in &gt; crypto\include\internal\bn_conf.h
/bin/sh: C:msys64mingw64binperl.exe: command not found
make: *** [Makefile:701: crypto\include\internal\bn_conf.h] Error 127


It seems the &quot;\&quot; is the culprit here, since the execution of the make command appears to strip those out and then (as expected) the /bin/sh cannot recognize that large hash of what should have been the path to Perl.&#160; I did edit the first Makefile above to :&#160;&#160;&#160; Change the base PERL to &quot;C:/msys64/mingw64/bin/perl.exe&quot;, *and*
&#160;&#160;&#160; crypto/include/internal/bin_conf.h.in &gt; crypto/include/internal/bin_conf.h
The above worked, but *only* for that line of the make file (as I expected).&#160; It then fails at the very next line because I didn't edit every &quot;\&quot; to become &quot;/&quot; instead.&#160; I'm not sure I'm willing to do that much editing... seems there's got to be a better way to make this work.

I realize this has something to do with specifying ./Configure mingw64 .... and how it's populating the Makefiles using Windows-style paths, but I'm not sure it's safe / okay to fake having a Unix build target instead, since this will likely create new / other problems with libraries, etc.
Am I missing a ./Configure option, an environment variable I should preset, or something else altogether?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20161227/6744c147/attachment.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20161227/6744c147/attachment.html</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005024.html">[openssl-users] Unable to STARTTLS behind a specific network
</A></li>
	<LI>Next message: <A HREF="005027.html">[openssl-users] MinGW64 / MSYS2 and ./Configure : use of Windows style path causing failures to 'make'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5026">[ date ]</a>
              <a href="thread.html#5026">[ thread ]</a>
              <a href="subject.html#5026">[ subject ]</a>
              <a href="author.html#5026">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
