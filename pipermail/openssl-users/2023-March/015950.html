<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Need Help on OpenSSl 3.0.x and FIPS enablement
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2023-March/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Need%20Help%20on%20OpenSSl%203.0.x%20and%20FIPS%20enablement&In-Reply-To=%3C7ff1f7be-9781-4b12-25f5-2983b9f605ff%40openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015949.html">
   <LINK REL="Next"  HREF="015951.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Need Help on OpenSSl 3.0.x and FIPS enablement</H1>
    <B>Dr Paul Dale</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Need%20Help%20on%20OpenSSl%203.0.x%20and%20FIPS%20enablement&In-Reply-To=%3C7ff1f7be-9781-4b12-25f5-2983b9f605ff%40openssl.org%3E"
       TITLE="Need Help on OpenSSl 3.0.x and FIPS enablement">pauli at openssl.org
       </A><BR>
    <I>Thu Mar  2 08:45:54 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015949.html">Need Help on OpenSSl 3.0.x and FIPS enablement
</A></li>
        <LI>Next message (by thread): <A HREF="015951.html">Need Help on OpenSSl 3.0.x and FIPS enablement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15950">[ date ]</a>
              <a href="thread.html#15950">[ thread ]</a>
              <a href="subject.html#15950">[ subject ]</a>
              <a href="author.html#15950">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You **must** run the fipsinstall program on every device that you want 
to claim as FIPS validated.&#160; This means that it must be installed &amp; 
executed on each and every platform.&#160; There is no room for maneuver 
here.&#160; Obey the security policy to the letter or not be FIPS.&#160; Deeply 
embedded platforms do **not** get an exception and never have.

If you want to discuss things further, you should engage with your FIPS lab.

Pauli

On 2/3/2023 7:34 pm, Prasad, PCRaghavendra wrote:
&gt;<i>
</I>&gt;<i> Hi Paul,
</I>&gt;<i>
</I>&gt;<i> Thanks for the information.
</I>&gt;<i>
</I>&gt;<i> We will go through the documents once again for more understanding.
</I>&gt;<i>
</I>&gt;<i> One basic doubt is when we deploy/build OpenSSL on our build machine 
</I>&gt;<i> with FIPS enabled (enable_fips) which will generate fips.dll/so and 
</I>&gt;<i> fipsmodule.cnf.
</I>&gt;<i>
</I>&gt;<i> We then change the openssl.cnf to access the fipsmodule.cnf and enable 
</I>&gt;<i> fips on the build machine and execute the application or do it 
</I>&gt;<i> programmatically to load the fips module and run the application.
</I>&gt;<i>
</I>&gt;<i> As for running on different machines to the build one, the security 
</I>&gt;<i> policy [csrc.nist.gov] 
</I>&gt;<i> &lt;<A HREF="https://urldefense.com/v3/__https:/csrc.nist.gov/CSRC/media/projects/cryptographic-module-validation-program/documents/security-policies/140sp4282.pdf__;!!LpKI!m6MpgYacWH24YdMndJMC-_RMlzLmjAHdaRHojogd7dgY9kbo0NUvc9yknt1Y_6gxdXxScH71o77lFX7ijN_GHg$">https://urldefense.com/v3/__https:/csrc.nist.gov/CSRC/media/projects/cryptographic-module-validation-program/documents/security-policies/140sp4282.pdf__;!!LpKI!m6MpgYacWH24YdMndJMC-_RMlzLmjAHdaRHojogd7dgY9kbo0NUvc9yknt1Y_6gxdXxScH71o77lFX7ijN_GHg$</A>&gt; 
</I>&gt;<i> is clear that the checksum configuration cannot be copied between 
</I>&gt;<i> machines:
</I>&gt;<i>
</I>&gt;<i>   * But we carry libssl.so and libcrypto.so in our build artifacts
</I>&gt;<i>     till now and activate the fips at run time in our application
</I>&gt;<i>     (OpenSSL 1.0.2 FIPS) &#160;on different machines (customer machines) as
</I>&gt;<i>     we are embedded software, so how it can be achieved using OpenSSL
</I>&gt;<i>     3.0.x + FIPS versions? how can we achieve FIPS on different
</I>&gt;<i>     machines but built on one machine? Is it possible
</I>&gt;<i>
</I>&gt;<i> Can you please throw some input on this?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Ragahvendra
</I>&gt;<i>
</I>&gt;<i> *From:* openssl-users &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-bounces at openssl.org</A>&gt; *On Behalf 
</I>&gt;<i> Of *Dr Paul Dale
</I>&gt;<i> *Sent:* Wednesday, March 1, 2023 3:34 AM
</I>&gt;<i> *To:* <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>
</I>&gt;<i> *Subject:* Re: Need Help on OpenSSl 3.0.x and FIPS enablement
</I>&gt;<i>
</I>&gt;<i> [EXTERNAL EMAIL]
</I>&gt;<i>
</I>&gt;<i> Have you read the relevant documentation? Specifically, the FIPS 
</I>&gt;<i> module guide [openssl.org] 
</I>&gt;<i> &lt;<A HREF="https://urldefense.com/v3/__https:/www.openssl.org/docs/man3.0/man7/fips_module.html__;!!LpKI!m6MpgYacWH24YdMndJMC-_RMlzLmjAHdaRHojogd7dgY9kbo0NUvc9yknt1Y_6gxdXxScH71o77lFX4qN9JYmA$">https://urldefense.com/v3/__https:/www.openssl.org/docs/man3.0/man7/fips_module.html__;!!LpKI!m6MpgYacWH24YdMndJMC-_RMlzLmjAHdaRHojogd7dgY9kbo0NUvc9yknt1Y_6gxdXxScH71o77lFX4qN9JYmA$</A>&gt;, 
</I>&gt;<i> the FIPS provider [openssl.org] 
</I>&gt;<i> &lt;<A HREF="https://urldefense.com/v3/__https:/www.openssl.org/docs/man3.0/man7/OSSL_PROVIDER-FIPS.html__;!!LpKI!m6MpgYacWH24YdMndJMC-_RMlzLmjAHdaRHojogd7dgY9kbo0NUvc9yknt1Y_6gxdXxScH71o77lFX7hLE-Nwg$">https://urldefense.com/v3/__https:/www.openssl.org/docs/man3.0/man7/OSSL_PROVIDER-FIPS.html__;!!LpKI!m6MpgYacWH24YdMndJMC-_RMlzLmjAHdaRHojogd7dgY9kbo0NUvc9yknt1Y_6gxdXxScH71o77lFX7hLE-Nwg$</A>&gt; 
</I>&gt;<i> and the migration guide [openssl.org] 
</I>&gt;<i> &lt;<A HREF="https://urldefense.com/v3/__https:/www.openssl.org/docs/man3.0/man7/migration_guide.html__;!!LpKI!m6MpgYacWH24YdMndJMC-_RMlzLmjAHdaRHojogd7dgY9kbo0NUvc9yknt1Y_6gxdXxScH71o77lFX4Csj3-Tw$">https://urldefense.com/v3/__https:/www.openssl.org/docs/man3.0/man7/migration_guide.html__;!!LpKI!m6MpgYacWH24YdMndJMC-_RMlzLmjAHdaRHojogd7dgY9kbo0NUvc9yknt1Y_6gxdXxScH71o77lFX4Csj3-Tw$</A>&gt;?&#160; 
</I>&gt;<i> These answer most of your questions and can be easy to miss.
</I>&gt;<i>
</I>&gt;<i> With the FIPS provider in OpenSSL 3.0 you will not be able to escape 
</I>&gt;<i> having some configuration in a file.&#160; The FIPS provider does an 
</I>&gt;<i> integrity check on start up and the correct checksum comes from 
</I>&gt;<i> configuration.
</I>&gt;<i>
</I>&gt;<i> As for running on different machines to the build one, the security 
</I>&gt;<i> policy [csrc.nist.gov] 
</I>&gt;<i> &lt;<A HREF="https://urldefense.com/v3/__https:/csrc.nist.gov/CSRC/media/projects/cryptographic-module-validation-program/documents/security-policies/140sp4282.pdf__;!!LpKI!m6MpgYacWH24YdMndJMC-_RMlzLmjAHdaRHojogd7dgY9kbo0NUvc9yknt1Y_6gxdXxScH71o77lFX7ijN_GHg$">https://urldefense.com/v3/__https:/csrc.nist.gov/CSRC/media/projects/cryptographic-module-validation-program/documents/security-policies/140sp4282.pdf__;!!LpKI!m6MpgYacWH24YdMndJMC-_RMlzLmjAHdaRHojogd7dgY9kbo0NUvc9yknt1Y_6gxdXxScH71o77lFX7ijN_GHg$</A>&gt; 
</I>&gt;<i> is clear that the checksum configuration cannot be copied between 
</I>&gt;<i> machines:
</I>&gt;<i>
</I>&gt;<i>     /Note: The Module shall have the self-tests run, and the Module
</I>&gt;<i>     config file output generated on each platform where it is intended
</I>&gt;<i>     to be used. The Module config file output data shall not be copied
</I>&gt;<i>     from one machine to another./
</I>&gt;<i>
</I>&gt;<i> I'll note that following the build and installation instructions from 
</I>&gt;<i> in the security policy [csrc.nist.gov] 
</I>&gt;<i> &lt;<A HREF="https://urldefense.com/v3/__https:/csrc.nist.gov/CSRC/media/projects/cryptographic-module-validation-program/documents/security-policies/140sp4282.pdf__;!!LpKI!m6MpgYacWH24YdMndJMC-_RMlzLmjAHdaRHojogd7dgY9kbo0NUvc9yknt1Y_6gxdXxScH71o77lFX7ijN_GHg$">https://urldefense.com/v3/__https:/csrc.nist.gov/CSRC/media/projects/cryptographic-module-validation-program/documents/security-policies/140sp4282.pdf__;!!LpKI!m6MpgYacWH24YdMndJMC-_RMlzLmjAHdaRHojogd7dgY9kbo0NUvc9yknt1Y_6gxdXxScH71o77lFX7ijN_GHg$</A>&gt; 
</I>&gt;<i> is necessary for a FIPS compliant provider.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Pauli
</I>&gt;<i>
</I>&gt;<i> On 1/3/23 04:52, Prasad, PCRaghavendra via openssl-users wrote:
</I>&gt;<i>
</I>&gt;<i>     Hi Team,
</I>&gt;<i>
</I>&gt;<i>     Our team has started migrating from OpenSSL 1.0.2 to OpenSSL 3.0.x
</I>&gt;<i>     version.
</I>&gt;<i>
</I>&gt;<i>     We are doing POC for the same on windows and Linux.
</I>&gt;<i>
</I>&gt;<i>     We have a tight schedule to finish the migration by April 1^st
</I>&gt;<i>     week as we need to fix one critical BD issue and support TLS 1.3
</I>&gt;<i>     feature as well.
</I>&gt;<i>
</I>&gt;<i>     The team and I are going through multiple docs of OpenSSL 3.x and
</I>&gt;<i>     trying to figure out how to configure fips once we build the OpenSSL.
</I>&gt;<i>
</I>&gt;<i>     Few things:
</I>&gt;<i>
</I>&gt;<i>      1. In openssl 3.0.x Fips module is installed/integrated by
</I>&gt;<i>         default (enable-fips) during the build step
</I>&gt;<i>      2. Fipsmodule.cnf is present in the default location
</I>&gt;<i>         (c:\usr\local\ssl\)
</I>&gt;<i>      3. After reading multiple ways on how to enable fips, one way is
</I>&gt;<i>         the config way where we need to change few params in openssl.cnf
</I>&gt;<i>      4. By changing that and we did the test using openssl.exe ( sha1
</I>&gt;<i>         passed and md5 failed) all good
</I>&gt;<i>      5. Now the challenge is we need to set the fips enablement
</I>&gt;<i>         programmatically which we were going through multiple docs
</I>&gt;<i>         (openssl and some forums)
</I>&gt;<i>      6. Till now we used OpenSSL 1.0.2 where the fipsmodule is
</I>&gt;<i>         embedded in libcrypto and we need to set it at the beginning
</I>&gt;<i>         of the application (fips_mode_set()) and everything else is
</I>&gt;<i>         taken care by default.
</I>&gt;<i>      7. Now with OpenSSL 3.0.x how to set that fips mode for the
</I>&gt;<i>         entire application is not very clear
</I>&gt;<i>      8. Very where they are talking about the config files, our
</I>&gt;<i>         application is a standalone application that bundles all the
</I>&gt;<i>         required libs(crypto/SSL) and runs on its own, it will not
</I>&gt;<i>         refer to any system config/lib files
</I>&gt;<i>      9. So our doubt is if we build on the application on build
</I>&gt;<i>         machine containing OpenSSL 3.0.x and create an artifact. We
</I>&gt;<i>         need to run on different machines.
</I>&gt;<i>     10. In OpenSSL 3.0.x is there any hard dependency on the .cnf
</I>&gt;<i>         files should we carry them in our artifact and if so should we
</I>&gt;<i>         install them in the default path like ( C:\usr or /us/local)
</I>&gt;<i>         which we were not doing till now?
</I>&gt;<i>
</I>&gt;<i>     Any input on this will be really helpful
</I>&gt;<i>
</I>&gt;<i>     Thanks,
</I>&gt;<i>
</I>&gt;<i>     Raghavendra
</I>&gt;<i>
</I>&gt;<i>     Internal Use - Confidential
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20230302/e0363d44/attachment.htm">https://mta.openssl.org/pipermail/openssl-users/attachments/20230302/e0363d44/attachment.htm</A>&gt;
</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015949.html">Need Help on OpenSSl 3.0.x and FIPS enablement
</A></li>
	<LI>Next message (by thread): <A HREF="015951.html">Need Help on OpenSSl 3.0.x and FIPS enablement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15950">[ date ]</a>
              <a href="thread.html#15950">[ thread ]</a>
              <a href="subject.html#15950">[ subject ]</a>
              <a href="author.html#15950">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
