<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Certificate verification failure
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2016-January/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Certificate%20verification%20failure&In-Reply-To=%3Cc3ed5b0c1693432aae6148131a1e2c61%40SW550EXP003.visa.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002889.html">
   <LINK REL="Next"  HREF="002892.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Certificate verification failure</H1>
    <B>Yan, Bob</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Certificate%20verification%20failure&In-Reply-To=%3Cc3ed5b0c1693432aae6148131a1e2c61%40SW550EXP003.visa.com%3E"
       TITLE="[openssl-users] Certificate verification failure">BYan at visa.com
       </A><BR>
    <I>Fri Jan 29 18:40:45 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="002889.html">[openssl-users] Building without SOVERSION
</A></li>
        <LI>Next message: <A HREF="002892.html">[openssl-users] Configure with both options &quot;no-comp&quot; and &quot;zlib&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2891">[ date ]</a>
              <a href="thread.html#2891">[ thread ]</a>
              <a href="subject.html#2891">[ subject ]</a>
              <a href="author.html#2891">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Sir/Madam,

I have an application which acting as SSL server. When the application loads the root and intermediate CA files from a CA path, the handshake between my application and openssl client was failed at the point when my application was authenticating the client's certificate. But when I bound the root CA and intermediate CA into a single pem file and reload it from my application, the handshake is successful. Could anybody help me resolve this issue? Below is the sample of my application code for loading the CA certificates:

if (SSL_CTX_load_verify_locations(ctx, caFile, caPath) != 1) {
    exit;
}
if (SSL_CTX_set_default_verify_paths(ctx) != 1) {
    exit;
}
if (SSL_CTX_use_certificate_chain_file(ctx, certFile) != 1) {
    exit;
}
if (SSL_CTX_use_PrivateKey_file(ctx, keyFile, SSL_FILETYPE_PEM) != 1) {
    exit;
}
SSL_CTX_set_verify_depth(ctx, chainDepths);
SSL_CTX_set_verify(ctx, SSL_VERIFY_PEER | SSL_VERIFY_FAIL_IF_NO_PEER_CERT, callback);
SSL_CTX_set_options(ctx, SSL_OP_ALL | SSL_OP_NO_SSLv2);

Thank you very much!
Bob

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20160129/74b1dd2b/attachment.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20160129/74b1dd2b/attachment.html</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002889.html">[openssl-users] Building without SOVERSION
</A></li>
	<LI>Next message: <A HREF="002892.html">[openssl-users] Configure with both options &quot;no-comp&quot; and &quot;zlib&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2891">[ date ]</a>
              <a href="thread.html#2891">[ thread ]</a>
              <a href="subject.html#2891">[ subject ]</a>
              <a href="author.html#2891">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
