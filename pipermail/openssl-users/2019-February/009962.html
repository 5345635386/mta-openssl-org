<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> OpenSSL 1.1.1b for WinCE700
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2019-February/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20OpenSSL%201.1.1b%20for%20WinCE700&In-Reply-To=%3CBN6PR2001MB09632B41026144D9A3E3EB6395740%40BN6PR2001MB0963.namprd20.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009961.html">
   <LINK REL="Next"  HREF="009963.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>OpenSSL 1.1.1b for WinCE700</H1>
    <B>Torrelli, Maxime</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20OpenSSL%201.1.1b%20for%20WinCE700&In-Reply-To=%3CBN6PR2001MB09632B41026144D9A3E3EB6395740%40BN6PR2001MB0963.namprd20.prod.outlook.com%3E"
       TITLE="OpenSSL 1.1.1b for WinCE700">Maxime.Torrelli at conduent.com
       </A><BR>
    <I>Wed Feb 27 17:22:01 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="009961.html">shared libraries vs test cases
</A></li>
        <LI>Next message: <A HREF="009963.html">OpenSSL 1.1.1b for WinCE700
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9962">[ date ]</a>
              <a href="thread.html#9962">[ thread ]</a>
              <a href="subject.html#9962">[ subject ]</a>
              <a href="author.html#9962">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Sorry to send you again an email about the same subject but I really need some help on this topic. I will try to give as much information I can.

I am using WCECOMPAT tool to compile OpenSSL 1.1.1b for WINCE700 on a ARMV4I CPU. We have to do this because the Long Time Support of OpenSSL 1.0.2 is ending in December 2019.
Is VC-CE platform still supported ?

If so you will find below what I did :

My computer : Windows 7 Enterprise N (32 bits)
Visual Studio 2008 Professional Edition + Windows Embedded Compact 7.5.2884.0


I.                    WCECOMPAT Compilation
set LIB=C:\Program Files\Windows CE Tools\SDKs\SDK WEC7 for VPE420 device\Lib\ARMV4I;C:\Program Files\Microsoft SDKs\Windows\v6.0A\Lib;C:\Program Files\Microsoft Visual Studio 9.0\VC\ce\lib\ARMV4I;C:\Program Files\Microsoft Visual Studio 9.0\VC\lib
set INCLUDE=C:\Program Files\Windows CE Tools\SDKs\SDK WEC7 for VPE420 device\Include\ARMV4I
set OSVERSION=WCE700
set PLATFORM=VC-CE
set TARGETCPU=ARMV4I
set Path=C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE;C:\Program Files\Microsoft Visual Studio 9.0\VC\ce\bin\x86_arm;%Path%
set LIBPATH=&quot;C:\Program Files\Windows CE Tools\SDKs\SDK WEC7 for VPE420 device\Lib\ARMV4I&quot;;C:\Program Files\Microsoft Visual Studio 9.0\VC\lib;

(my WINCE700 SDK is called &quot;SDK WEC7 for VPE420 device&quot;)

In a command prompt :

-          Perl config.pl

-          Nmake -f makefile

The compilation is a success.


II.                  OpenSSL Compilation

The I open another command prompt in the openssl-1.1.1b folder.


*       set OSVERSION=WCE700

*       set PLATFORM=VC-CE

*       set TARGETCPU=ARMV4I

*       set LIB=C:\Program Files\Windows CE Tools\SDKs\SDK WEC7 for VPE420 device\Lib\ARMV4I;C:\Program Files\Microsoft SDKs\Windows\v6.0A\Lib;C:\Program Files\Microsoft Visual Studio 9.0\VC\ce\lib\ARMV4I;C:\Program Files\Microsoft Visual Studio 9.0\VC\lib

*       set INCLUDE=C:\Program Files\Windows CE Tools\SDKs\SDK WEC7 for VPE420 device\Include\ARMV4I;C:\Program Files\Microsoft Visual Studio 9.0\VC\atlmfc\include;C:\Program Files\Microsoft Visual Studio 9.0\VC\INCLUDE;C:\Program Files\Microsoft SDKs\Windows\v6.0A\include;

*       set Path=C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE;C:\Program Files\Microsoft Visual Studio 9.0\VC\ce\bin\x86_arm;%Path%

*       set LIBPATH=C:\Program Files\Windows CE Tools\SDKs\SDK WEC7 for VPE420 device\Lib\ARMV4I;C:\Program Files\Microsoft Visual Studio 9.0\VC\lib;C:\Program Files\Microsoft Visual Studio 9.0\VC\ce\lib\ARMV4I;

*       set WCECOMPAT=../wcecompat


*       perl Configure no-idea no-mdc2 no-rc5 no-asm no-ssl2 no-ssl3 VC-CE


*       nmake

The output is the following :

Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
Copyright (C) Microsoft Corporation.  All rights reserved.


Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
Copyright (C) Microsoft Corporation.  All rights reserved.


Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
Copyright (C) Microsoft Corporation.  All rights reserved.

              &quot;C:\Strawberry\perl\bin\perl.exe&quot; &quot;-I.&quot; -Mconfigdata &quot;util\dofile.pl&quot;  &quot;-omakefile&quot; &quot;crypto\include\internal\bn_conf.h.in&quot; &gt; crypto\include\internal\bn_conf.h
              &quot;C:\Strawberry\perl\bin\perl.exe&quot; &quot;-I.&quot; -Mconfigdata &quot;util\dofile.pl&quot;  &quot;-omakefile&quot; &quot;crypto\include\internal\dso_conf.h.in&quot; &gt; crypto\include\internal\dso_conf.h
              &quot;C:\Strawberry\perl\bin\perl.exe&quot; &quot;-I.&quot; -Mconfigdata &quot;util\dofile.pl&quot;  &quot;-omakefile&quot; &quot;include\openssl\opensslconf.h.in&quot; &gt; include\openssl\opensslconf.h
              &quot;C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\nmake.exe&quot; /                   depend &amp;&amp; &quot;C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\nmake.exe&quot; /                   _all
              cl  /Zi /Fdossl_static.pdb /GF /Gy  /MD /W3 /wd4090 /nologo /O1i /I &quot;.&quot; /I &quot;include&quot; -D_WIN32_WCE=700 -DUNDER_CE=700 -DWCE_PLATFORM_VC-CE -DARM -D_ARM_ -DARMV4I -QRarch4T -QRinterwork-return -D&quot;L_ENDIAN&quot; -D&quot;NO_CHMOD&quot; -D&quot;OPENSSL_SMALL_FOOTPRINT&quot; -D&quot;OPENSSL_PIC&quot; -D&quot;OPENSSLDIR=\&quot;C:\\Program Files\\Common Files\\SSL\&quot;&quot; -D&quot;ENGINESDIR=\&quot;C:\\Program Files\\OpenSSL\\lib\\engines-1_1\&quot;&quot; -D_WIN32_WCE=700 -DUNDER_CE=700 -DWCE_PLATFORM_VC-CE -DARM -D_ARM_ -DARMV4I -QRarch4T -QRinterwork-return -D&quot;OPENSSL_SYS_WIN32&quot; -D&quot;WIN32_LEAN_AND_MEAN&quot; -D&quot;UNICODE&quot; -D&quot;_UNICODE&quot; -D&quot;_CRT_SECURE_NO_DEPRECATE&quot; -D&quot;_WINSOCK_DEPRECATED_NO_WARNINGS&quot; -D&quot;NDEBUG&quot; -I&quot;\../wcecompat/include&quot;  -c /Foapps\app_rand.obj &quot;apps\app_rand.c&quot;
app_rand.c
C:\openssl-1.1.1b\e_os.h(287) : warning C4005: 'open' : macro redefinition
        C:\wcecompat\include\io.h(43) : see previous definition of 'open'
C:\openssl-1.1.1b\e_os.h(289) : warning C4005: 'close' : macro redefinition
        C:\wcecompat\include\io.h(45) : see previous definition of 'close'
C:\openssl-1.1.1b\e_os.h(293) : warning C4005: 'unlink' : macro redefinition
        C:\wcecompat\include\io.h(50) : see previous definition of 'unlink'
              cl  /Zi /Fdossl_static.pdb /GF /Gy  /MD /W3 /wd4090 /nologo /O1i /I &quot;.&quot; /I &quot;include&quot; -D_WIN32_WCE=700 -DUNDER_CE=700 -DWCE_PLATFORM_VC-CE -DARM -D_ARM_ -DARMV4I -QRarch4T -QRinterwork-return -D&quot;L_ENDIAN&quot; -D&quot;NO_CHMOD&quot; -D&quot;OPENSSL_SMALL_FOOTPRINT&quot; -D&quot;OPENSSL_PIC&quot; -D&quot;OPENSSLDIR=\&quot;C:\\Program Files\\Common Files\\SSL\&quot;&quot; -D&quot;ENGINESDIR=\&quot;C:\\Program Files\\OpenSSL\\lib\\engines-1_1\&quot;&quot; -D_WIN32_WCE=700 -DUNDER_CE=700 -DWCE_PLATFORM_VC-CE -DARM -D_ARM_ -DARMV4I -QRarch4T -QRinterwork-return -D&quot;OPENSSL_SYS_WIN32&quot; -D&quot;WIN32_LEAN_AND_MEAN&quot; -D&quot;UNICODE&quot; -D&quot;_UNICODE&quot; -D&quot;_CRT_SECURE_NO_DEPRECATE&quot; -D&quot;_WINSOCK_DEPRECATED_NO_WARNINGS&quot; -D&quot;NDEBUG&quot; -I&quot;\../wcecompat/include&quot;  /Zs /showIncludes &quot;apps\app_rand.c&quot; 2&gt;&amp;1 &gt; apps\app_rand.d
              cl  /Zi /Fdossl_static.pdb /GF /Gy  /MD /W3 /wd4090 /nologo /O1i /I &quot;.&quot; /I &quot;include&quot; -D_WIN32_WCE=700 -DUNDER_CE=700 -DWCE_PLATFORM_VC-CE -DARM -D_ARM_ -DARMV4I -QRarch4T -QRinterwork-return -D&quot;L_ENDIAN&quot; -D&quot;NO_CHMOD&quot; -D&quot;OPENSSL_SMALL_FOOTPRINT&quot; -D&quot;OPENSSL_PIC&quot; -D&quot;OPENSSLDIR=\&quot;C:\\Program Files\\Common Files\\SSL\&quot;&quot; -D&quot;ENGINESDIR=\&quot;C:\\Program Files\\OpenSSL\\lib\\engines-1_1\&quot;&quot; -D_WIN32_WCE=700 -DUNDER_CE=700 -DWCE_PLATFORM_VC-CE -DARM -D_ARM_ -DARMV4I -QRarch4T -QRinterwork-return -D&quot;OPENSSL_SYS_WIN32&quot; -D&quot;WIN32_LEAN_AND_MEAN&quot; -D&quot;UNICODE&quot; -D&quot;_UNICODE&quot; -D&quot;_CRT_SECURE_NO_DEPRECATE&quot; -D&quot;_WINSOCK_DEPRECATED_NO_WARNINGS&quot; -D&quot;NDEBUG&quot; -I&quot;\../wcecompat/include&quot;  -c /Foapps\apps.obj &quot;apps\apps.c&quot;
apps.c
C:\openssl-1.1.1b\e_os.h(287) : warning C4005: 'open' : macro redefinition
        C:\wcecompat\include\io.h(43) : see previous definition of 'open'
C:\openssl-1.1.1b\e_os.h(289) : warning C4005: 'close' : macro redefinition
        C:\wcecompat\include\io.h(45) : see previous definition of 'close'
C:\openssl-1.1.1b\e_os.h(293) : warning C4005: 'unlink' : macro redefinition
        C:\wcecompat\include\io.h(50) : see previous definition of 'unlink'
apps\apps.c(2596) : warning C4013: '_fdopen' undefined; assuming extern returning int
apps\apps.c(2596) : warning C4047: '=' : 'FILE *' differs in levels of indirection from 'int'
apps\apps.c(2614) : warning C4013: '_close' undefined; assuming extern returning int
apps\apps.c(2696) : warning C4013: 'GetStdHandle' undefined; assuming extern returning int
apps\apps.c(2696) : error C2065: 'STD_INPUT_HANDLE' : undeclared identifier
apps\apps.c(2696) : warning C4047: 'initializing' : 'HANDLE' differs in levels of indirection from 'int'
apps\apps.c(2698) : error C2065: 'INPUT_RECORD' : undeclared identifier
apps\apps.c(2698) : error C2146: syntax error : missing ';' before identifier 'inputrec'
apps\apps.c(2698) : error C2065: 'inputrec' : undeclared identifier
apps\apps.c(2699) : error C2275: 'DWORD' : illegal use of this type as an expression
        C:\Program Files\Windows CE Tools\SDKs\SDK WEC7 for VPE420 device\Include\ARMV4I\windef.h(161) : see declaration of 'DWORD'
apps\apps.c(2699) : error C2146: syntax error : missing ';' before identifier 'insize'
apps\apps.c(2699) : error C2065: 'insize' : undeclared identifier
apps\apps.c(2700) : error C2275: 'BOOL' : illegal use of this type as an expression
        C:\Program Files\Windows CE Tools\SDKs\SDK WEC7 for VPE420 device\Include\ARMV4I\windef.h(162) : see declaration of 'BOOL'
apps\apps.c(2700) : error C2146: syntax error : missing ';' before identifier 'peeked'
apps\apps.c(2700) : error C2065: 'peeked' : undeclared identifier
apps\apps.c(2706) : error C2065: 'peeked' : undeclared identifier
apps\apps.c(2706) : warning C4013: 'PeekConsoleInput' undefined; assuming extern returning int
apps\apps.c(2706) : error C2065: 'inputrec' : undeclared identifier
apps\apps.c(2706) : error C2065: 'insize' : undeclared identifier
apps\apps.c(2707) : error C2065: 'peeked' : undeclared identifier

NMAKE : fatal error U1077: '&quot;C:\Program Files\Microsoft Visual Studio 9.0\VC\ce\
bin\x86_arm\cl.EXE&quot;' : return code '0x2'
Stop.
NMAKE : fatal error U1077: '&quot;C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN
\nmake.exe&quot;' : return code '0x2'
Stop.

Any guess or hint would be much appreciated.


Greetings,

Maxime TORRELLI
Embedded Software Engineer

Conduent
Conduent Business Solutions (France)
1 rue Claude Chappe - BP 345
07503 Guilherand Granges Cedex

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20190227/c586176b/attachment-0001.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20190227/c586176b/attachment-0001.html</A>&gt;
</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009961.html">shared libraries vs test cases
</A></li>
	<LI>Next message: <A HREF="009963.html">OpenSSL 1.1.1b for WinCE700
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9962">[ date ]</a>
              <a href="thread.html#9962">[ thread ]</a>
              <a href="subject.html#9962">[ subject ]</a>
              <a href="author.html#9962">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
