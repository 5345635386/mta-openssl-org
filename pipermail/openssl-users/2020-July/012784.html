<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Using the library to encrypt a RSA private key compatible with Web Crypto API (PBKDF2)
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2020-July/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Using%20the%20library%20to%20encrypt%20a%20RSA%20private%20key%20compatible%20with%20Web%0A%20Crypto%20API%20%28PBKDF2%29&In-Reply-To=%3CDM5PR20MB1276FD2F73D72BE3CF10E6D3F7790%40DM5PR20MB1276.namprd20.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012782.html">
   <LINK REL="Next"  HREF="012785.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Using the library to encrypt a RSA private key compatible with Web Crypto API (PBKDF2)</H1>
    <B>Claude Robitaille</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Using%20the%20library%20to%20encrypt%20a%20RSA%20private%20key%20compatible%20with%20Web%0A%20Crypto%20API%20%28PBKDF2%29&In-Reply-To=%3CDM5PR20MB1276FD2F73D72BE3CF10E6D3F7790%40DM5PR20MB1276.namprd20.prod.outlook.com%3E"
       TITLE="Using the library to encrypt a RSA private key compatible with Web Crypto API (PBKDF2)">claude-robitaille at hotmail.com
       </A><BR>
    <I>Wed Jul 22 20:36:30 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="012782.html">Wrong HMAC in the implementation of ECIES IEEE1363a
</A></li>
        <LI>Next message: <A HREF="012785.html">Using the library to encrypt a RSA private key compatible with Web Crypto API (PBKDF2)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12784">[ date ]</a>
              <a href="thread.html#12784">[ thread ]</a>
              <a href="subject.html#12784">[ subject ]</a>
              <a href="author.html#12784">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is NOT about using the command line utility, it is about using the library in a program and exporting a private key, while encrypting it.

But first; I successfully tested the resulting key using the command-line and parameters iter 64000, hmacWithSHA512 and aes256. So I know for sure (at least I think so) that openssl 1.1.1 (I am using 1.1.1d as the development library) generates something compatible with the Web Crypt API importKey function (the parameters are the same as default in openCrypto, which is a wrapper around Web Crypto API).

Now, for my application. I am not sure how to do this. I normally use PEM_write_bio_PKCS8PrivateKey to generate a PEM string. That function do accept a passphrase and a cipher but it is not possible to set parameters. The default values, as I could gather by reading on the Internet are weak so I just do not want to lower the Web Crypto API end. How to proceed? Is there another function that can be used?

How does the command line utility do?

I looked at the EVP_KDF but soon realized it was not 1.1.1 but only in the new 3.0 beta stuff, which I prefer not to use now.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20200722/c2887521/attachment.html">https://mta.openssl.org/pipermail/openssl-users/attachments/20200722/c2887521/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012782.html">Wrong HMAC in the implementation of ECIES IEEE1363a
</A></li>
	<LI>Next message: <A HREF="012785.html">Using the library to encrypt a RSA private key compatible with Web Crypto API (PBKDF2)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12784">[ date ]</a>
              <a href="thread.html#12784">[ thread ]</a>
              <a href="subject.html#12784">[ subject ]</a>
              <a href="author.html#12784">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
