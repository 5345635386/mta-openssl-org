<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> EVP_PKEY_get_raw_public_key fails with OpenSSL 3.0
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2022-November/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20EVP_PKEY_get_raw_public_key%20fails%20with%20OpenSSL%203.0&In-Reply-To=%3Cc616f4be-494c-b459-4512-349bc3222a6c%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015649.html">
   <LINK REL="Next"  HREF="015651.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>EVP_PKEY_get_raw_public_key fails with OpenSSL 3.0</H1>
    <B>James Muir</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20EVP_PKEY_get_raw_public_key%20fails%20with%20OpenSSL%203.0&In-Reply-To=%3Cc616f4be-494c-b459-4512-349bc3222a6c%40gmail.com%3E"
       TITLE="EVP_PKEY_get_raw_public_key fails with OpenSSL 3.0">muir.james.a at gmail.com
       </A><BR>
    <I>Fri Nov 11 00:49:00 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015649.html">EVP_PKEY_get_raw_public_key fails with OpenSSL 3.0
</A></li>
        <LI>Next message (by thread): <A HREF="015651.html">EVP_PKEY_get_raw_public_key fails with OpenSSL 3.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15650">[ date ]</a>
              <a href="thread.html#15650">[ thread ]</a>
              <a href="subject.html#15650">[ subject ]</a>
              <a href="author.html#15650">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2022-11-10 18:35, <A HREF="../../../mailman/listinfo/openssl-users.html">fus at plutonium24.de</A> wrote:
&gt;<i> I have been using EVP_PKEY_get_raw_public_key with OpenSSL 1.1.1 without 
</I>&gt;<i> any problems to extract a raw public key (secp521r1, NIST curve P-521). 
</I>&gt;<i> With OpenSSL 3.0 this fails. I'm using this call to get the raw public 
</I>&gt;<i> key and to compare it with a reference value I have and I also check 
</I>&gt;<i> that the group name is &quot;secp521r1&quot;.
</I>
That doesn't work in 3.0.

Quoting from 
<A HREF="https://www.openssl.org/docs/manmaster/man3/EVP_PKEY_new.html">https://www.openssl.org/docs/manmaster/man3/EVP_PKEY_new.html</A>  :

&lt;quote&gt;
EVP_PKEY_get_raw_public_key() fills the buffer provided by pub with raw 
public key data. The size of the pub buffer should be in *len on entry 
to the function, and on exit *len is updated with the number of bytes 
actually written. If the buffer pub is NULL then *len is populated with 
the number of bytes required to hold the key. The calling application is 
responsible for ensuring that the buffer is large enough to receive the 
public key data. This function only works for algorithms that support 
raw public keys. Currently this is: EVP_PKEY_X25519, EVP_PKEY_ED25519, 
EVP_PKEY_X448 or EVP_PKEY_ED448.
&lt;/quote&gt;

You were reading the P521 public-key previously (with 1.1.1), but in 
what format was it sent you?  Do you want just the bytes of the public 
EC point?

-James M
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015649.html">EVP_PKEY_get_raw_public_key fails with OpenSSL 3.0
</A></li>
	<LI>Next message (by thread): <A HREF="015651.html">EVP_PKEY_get_raw_public_key fails with OpenSSL 3.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15650">[ date ]</a>
              <a href="thread.html#15650">[ thread ]</a>
              <a href="subject.html#15650">[ subject ]</a>
              <a href="author.html#15650">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
