<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> EVP_PKEY_get_raw_public_key fails with OpenSSL 3.0
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2022-November/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20EVP_PKEY_get_raw_public_key%20fails%20with%20OpenSSL%203.0&In-Reply-To=%3Cddca6097-3c8d-3fdc-a211-3b3b0bedad14%40plutonium24.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015654.html">
   <LINK REL="Next"  HREF="015656.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>EVP_PKEY_get_raw_public_key fails with OpenSSL 3.0</H1>
    <B>fus at plutonium24.de</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20EVP_PKEY_get_raw_public_key%20fails%20with%20OpenSSL%203.0&In-Reply-To=%3Cddca6097-3c8d-3fdc-a211-3b3b0bedad14%40plutonium24.de%3E"
       TITLE="EVP_PKEY_get_raw_public_key fails with OpenSSL 3.0">fus at plutonium24.de
       </A><BR>
    <I>Thu Nov 24 01:23:15 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015654.html">EVP_PKEY_get_raw_public_key fails with OpenSSL 3.0
</A></li>
        <LI>Next message (by thread): <A HREF="015656.html">OpenSSL AES Decryption fails randomly C++
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15690">[ date ]</a>
              <a href="thread.html#15690">[ thread ]</a>
              <a href="subject.html#15690">[ subject ]</a>
              <a href="author.html#15690">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

Am 11.11.2022 um 17:44 schrieb Matt Caswell:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 11/11/2022 12:41, <A HREF="../../../mailman/listinfo/openssl-users.html">fus at plutonium24.de</A> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My apologies. I tested the code you supplied and of course it also fails with 1.1.1. The code was changed without my knowledge when updating to 3.0 and the version that was working used the deprecated &quot;EC_POINT_point2oct&quot;. During my test I missed this.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Concerning the questions James akesd: I extract the key from an X509 certificate (with X509_get0_pubkey). And as you suggested I just need the bytes of the public EC point. As a reference to which I want to compare this data I only have the raw public key and a proprietarily encoded curve id which I also check.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'd like to come back to the question : how can I get the raw public key^without using deprecated functionality?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Frank
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Probably calling EVP_PKEY_get_octet_string_param() and asking for the parameter OSSL_PKEY_PARAM_ENCODED_PUBLIC_KEY should do it. See these man pages:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://www.openssl.org/docs/man3.0/man3/EVP_PKEY_get_params.html">https://www.openssl.org/docs/man3.0/man3/EVP_PKEY_get_params.html</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://www.openssl.org/docs/man3.0/man7/EVP_PKEY-EC.html">https://www.openssl.org/docs/man3.0/man7/EVP_PKEY-EC.html</A>
</I>&gt;<i>
</I>&gt;<i> Matt
</I>&gt;<i>
</I>Many&#160;thanks,&#160;asking&#160;for&#160;the&#160;encoded&#160;public&#160;key&#160;as&#160;an&#160;octet&#160;string&#160;did&#160;work&#160;correctly.

Frank
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015654.html">EVP_PKEY_get_raw_public_key fails with OpenSSL 3.0
</A></li>
	<LI>Next message (by thread): <A HREF="015656.html">OpenSSL AES Decryption fails randomly C++
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15690">[ date ]</a>
              <a href="thread.html#15690">[ thread ]</a>
              <a href="subject.html#15690">[ subject ]</a>
              <a href="author.html#15690">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
