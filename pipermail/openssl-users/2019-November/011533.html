<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Static linking libssl.a and libcrypto.a on Linux x64 fails
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2019-November/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Static%20linking%20libssl.a%20and%20libcrypto.a%20on%20Linux%20x64%20fails&In-Reply-To=%3CCAHB2L%2BcaWXGmLt4rfUDo%3DJj%2B9ediDALXkv7_t1cDF6bVBpzEuQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011532.html">
   <LINK REL="Next"  HREF="011537.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Static linking libssl.a and libcrypto.a on Linux x64 fails</H1>
    <B>Aijaz Baig</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Static%20linking%20libssl.a%20and%20libcrypto.a%20on%20Linux%20x64%20fails&In-Reply-To=%3CCAHB2L%2BcaWXGmLt4rfUDo%3DJj%2B9ediDALXkv7_t1cDF6bVBpzEuQ%40mail.gmail.com%3E"
       TITLE="Static linking libssl.a and libcrypto.a on Linux x64 fails">aijazbaig1 at gmail.com
       </A><BR>
    <I>Wed Nov 13 06:45:26 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="011532.html">Using PSKs with openssl app.
</A></li>
        <LI>Next message: <A HREF="011537.html">Static linking libssl.a and libcrypto.a on Linux x64 fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11533">[ date ]</a>
              <a href="thread.html#11533">[ thread ]</a>
              <a href="subject.html#11533">[ subject ]</a>
              <a href="author.html#11533">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So I posted this question over at stackoverflow (
<A HREF="https://stackoverflow.com/questions/58771714/compiling-c-and-c-with-single-makefile">https://stackoverflow.com/questions/58771714/compiling-c-and-c-with-single-makefile</A>)
but the gist of it is as follows:

I am trying to statically link libssl.a and libcrypto.a into a static
library of my own which I will be using in an application (Linux). So I
first create that library (let's call it libAPP.a) and then I use that
library in an application. So first things first:

1. when I checkout the contents of that library (nm libAPP.a | less) ,
almost all (I haven't confirmed every single one but it sure looks that
way) SSL related symbols (ex. BIO_new) are left undefined in libAPP.a. Why
is that?
2. perhaps this is related to question one above, but when I use libAPP.a
in my application, I get a whole bunch of 'undefined reference to' errors
for the SSL symbols; they disappear when I pass libSSL.a and libCrypto.a to
the linker. may be I need a refresher course on libraries but what is the
point of linking statically when I still have to keep those libraries?
3. Even after supplying all these libraries, my linker was complaining
about a whole bunch of symbols like dlopen, dlclose etc so after some
googling, I supplied -ldl and -lz to the linker. So those linker errors
related to dlopen etc went but now it complains that it cannot find libz on
the system when it is clearly present.

Can anyone please elaborate on the steps need for a clean static linking of
libssl.a into an application? Is it even doable on Linux considering such
tight coupling of libc everywhere?? If not what are the alternatives??

-- 

Best Regards,
Aijaz Baig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20191113/423d97d7/attachment.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20191113/423d97d7/attachment.html</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011532.html">Using PSKs with openssl app.
</A></li>
	<LI>Next message: <A HREF="011537.html">Static linking libssl.a and libcrypto.a on Linux x64 fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11533">[ date ]</a>
              <a href="thread.html#11533">[ thread ]</a>
              <a href="subject.html#11533">[ subject ]</a>
              <a href="author.html#11533">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
