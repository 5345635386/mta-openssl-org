<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] decrypt error
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2019-January/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20decrypt%20error&In-Reply-To=%3CA0075AC8F849D648B8077B454DA0D87E2CD3A271%40ES-2010.francotyp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009777.html">
   <LINK REL="Next"  HREF="009776.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] decrypt error</H1>
    <B>Scharfenberg, Carsten</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20decrypt%20error&In-Reply-To=%3CA0075AC8F849D648B8077B454DA0D87E2CD3A271%40ES-2010.francotyp.com%3E"
       TITLE="[openssl-users] decrypt error">c.scharfenberg at francotyp.com
       </A><BR>
    <I>Fri Jan 25 10:42:54 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="009777.html">[openssl-users] decrypt error
</A></li>
        <LI>Next message: <A HREF="009776.html">[openssl-users] ec_point_is_compat
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9778">[ date ]</a>
              <a href="thread.html#9778">[ thread ]</a>
              <a href="subject.html#9778">[ subject ]</a>
              <a href="author.html#9778">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes, it is a certificate error: a very stupid one.
I've used the wrong CA cert - from a different hierarchy.

I'm sorry for the hassle.
Nevertheless thanks for your support.

Carsten

-----Urspr&#252;ngliche Nachricht-----
Von: openssl-users [mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-bounces at openssl.org</A>] Im Auftrag von Jakob Bohm via openssl-users
Gesendet: Freitag, 25. Januar 2019 02:17
An: <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>
Betreff: Re: [openssl-users] decrypt error

Since this seems to be a certificate issue, would it be possible
to make the server log all the certificate checking steps and
errors with the failing certificates.

One obvious test would be to try connecting to the &quot;openssl s_server&quot;
utility with a similar configuration and lots of debug options. Another
would be to install all the debug symbols and running haproxy under a
debugger with strategically set breakpoints to look at the execution stack
when errors are reported or validation occurs.

On 24/01/2019 16:55, Scharfenberg, Carsten wrote:
&gt;<i> Yes, it works if I deactivate client auth.
</I>&gt;<i> Concerning the cipher: I use one specific cipher on server and on client side. This is the only cipher supported by the actual hardware client.
</I>&gt;<i> Concerning the sigalg: I've had big trouble with this because due to bug in the client I need to restrict the sigalgs offered by the server. This is not possible with haproxy. But it is possible with openssl.cnf since version 1.1.1. This is why I've installed haproxy and openssl from Debian testing.
</I>&gt;<i> So I'm very confident about the cipher suite and the signature algorithm.
</I>&gt;<i>
</I>&gt;<i> I've just created a new certificate hierarchy. Et voila: it works.
</I>&gt;<i> So obviously this issue is certificate-related.
</I>&gt;<i> Still I have to figure out what is wrong with the old certificates because I cannot replace them in the productive environment.
</I>&gt;<i> My next step will be to create new hierarchy again that matches the original hierarchy as close as possible (including constraints and extensions).
</I>&gt;<i>
</I>
Enjoy

Jakob
-- 
Jakob Bohm, CIO, Partner, WiseMo A/S.  <A HREF="https://www.wisemo.com">https://www.wisemo.com</A>
Transformervej 29, 2860 S&#248;borg, Denmark.  Direct +45 31 13 16 10
This public discussion message is non-binding and may contain errors.
WiseMo - Remote Service Management for PCs, Phones and Embedded

-- 
openssl-users mailing list
To unsubscribe: <A HREF="../../../mailman/listinfo/openssl-users.html">https://mta.openssl.org/mailman/listinfo/openssl-users</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009777.html">[openssl-users] decrypt error
</A></li>
	<LI>Next message: <A HREF="009776.html">[openssl-users] ec_point_is_compat
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9778">[ date ]</a>
              <a href="thread.html#9778">[ thread ]</a>
              <a href="subject.html#9778">[ subject ]</a>
              <a href="author.html#9778">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
