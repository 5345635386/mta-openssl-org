<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Compiling FIPS-cable OpenSSL on Windows Server	2012R2
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2019-January/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Compiling%20FIPS-cable%20OpenSSL%20on%20Windows%20Server%0A%092012R2&In-Reply-To=%3C8B308719-0560-4E2C-A53E-51DF3C21BE0B%40alteryx.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009666.html">
   <LINK REL="Next"  HREF="009638.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Compiling FIPS-cable OpenSSL on Windows Server	2012R2</H1>
    <B>Chris Fernando</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Compiling%20FIPS-cable%20OpenSSL%20on%20Windows%20Server%0A%092012R2&In-Reply-To=%3C8B308719-0560-4E2C-A53E-51DF3C21BE0B%40alteryx.com%3E"
       TITLE="[openssl-users] Compiling FIPS-cable OpenSSL on Windows Server	2012R2">cfernando at alteryx.com
       </A><BR>
    <I>Mon Jan  7 15:20:55 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="009666.html">[openssl-users] possible C bugs in ecp_nistp521
</A></li>
        <LI>Next message: <A HREF="009638.html">[openssl-users] Compiling FIPS-cable OpenSSL on Windows	Server	2012R2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9636">[ date ]</a>
              <a href="thread.html#9636">[ thread ]</a>
              <a href="subject.html#9636">[ subject ]</a>
              <a href="author.html#9636">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I perused the list archives for all of 2018 and did not see anything current relating to this problem, so if this is a question that has been asked &amp; answered, please feel free to point me at the relevant location to read about what I'm doing incorrectly. =)

I'm not at all familiar with Windows &amp; compiling Open Source projects, but I am having no trouble on Linux with OpenSSL + FIPS. On Windows, with Visual Studio 2017 (Community Edition), I am able to compile the FIPS 2.0.16 module and OpenSSL 1.0.2q (NO FIPS) without issue.

When I try to compile OpenSSL with the FIPS canister, per the User Guide instructions, I end up with the following error.

        cl /Fotmp32dll\o_fips.obj  -Iinc32 -Itmp32dll /MD /Ox -DOPENSSL_THREADS
 -DDSO_WIN32 -W3 -Gs0 -Gy -nologo -DOPENSSL_SYSNAME_WIN32 -DWIN32_LEAN_AND_MEAN
-DL_ENDIAN -DUNICODE -D_UNICODE -D_CRT_SECURE_NO_DEPRECATE -Ic:\..\openssl-fips/
include -DOPENSSL_USE_APPLINK -I. -DOPENSSL_NO_RC5 -DOPENSSL_NO_MD2 -DOPENSSL_NO
_SSL2 -DOPENSSL_NO_KRB5 -DOPENSSL_FIPS -DOPENSSL_NO_JPAKE -DOPENSSL_NO_WEAK_SSL_
CIPHERS -DOPENSSL_NO_STATIC_ENGINE /Zi /Fdtmp32dll/lib -D_WINDLL  -DOPENSSL_BUIL
D_SHLIBCRYPTO -c .\crypto\o_fips.c
o_fips.c
.\crypto\o_fips.c(61): fatal error C1083: Cannot open include file: 'openssl/fip
s.h': No such file or directory
NMAKE : fatal error U1077: '&quot;C:\Program Files (x86)\Microsoft Visual Studio\2017
\Community\VC\Tools\MSVC\14.16.27023\bin\HostX86\x86\cl.EXE&quot;' : return code '0x2
'
Stop.


I am doing the following to compile FIPS:
cd c:\path\to\fips-source
ms\do_fips no-asm

I am doing the following to compile OpenSSL+FIPS (Strawberry Perl installed):
cd c:\path\to\openssl-source
nmake -f ms\ntdll.mak clean
nmake -f ms\nt.mak clean
perl Configure VC-WIN64A fips no-asm --with-fipsdir=c:\path\to\fips-source
ms\do_win64a no-asm
nmake -f ms\ntdll.mak


I feel like I'm missing something fundamental here and I know the User Guide says to install the FIPS files in a protected area. However, as I'm just building the source on this device, shouldn't I be able to to do the above and have it work?

Any help would be greatly appreciated.


Thanks,

Chris
</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009666.html">[openssl-users] possible C bugs in ecp_nistp521
</A></li>
	<LI>Next message: <A HREF="009638.html">[openssl-users] Compiling FIPS-cable OpenSSL on Windows	Server	2012R2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9636">[ date ]</a>
              <a href="thread.html#9636">[ thread ]</a>
              <a href="subject.html#9636">[ subject ]</a>
              <a href="author.html#9636">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
