<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] The server's &quot;SSL_write&quot; freezes if invoked while client disconnects
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2015-September/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20The%20server%27s%20%22SSL_write%22%20freezes%20if%20invoked%20while%0A%20client%20disconnects&In-Reply-To=%3Ctrinity-2a6264ed-c9e7-4fc3-b1b8-e7cc100a84fd-1443024146082%40msvc-mesg-web001%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002128.html">
   <LINK REL="Next"  HREF="002107.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] The server's &quot;SSL_write&quot; freezes if invoked while client disconnects</H1>
    <B>Newcomer83 at web.de</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20The%20server%27s%20%22SSL_write%22%20freezes%20if%20invoked%20while%0A%20client%20disconnects&In-Reply-To=%3Ctrinity-2a6264ed-c9e7-4fc3-b1b8-e7cc100a84fd-1443024146082%40msvc-mesg-web001%3E"
       TITLE="[openssl-users] The server's &quot;SSL_write&quot; freezes if invoked while client disconnects">Newcomer83 at web.de
       </A><BR>
    <I>Wed Sep 23 16:02:26 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="002128.html">[openssl-users] Key Deriviation Function Tests for TLS
</A></li>
        <LI>Next message: <A HREF="002107.html">[openssl-users] Getting role of SSL endpoint
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2106">[ date ]</a>
              <a href="thread.html#2106">[ thread ]</a>
              <a href="subject.html#2106">[ subject ]</a>
              <a href="author.html#2106">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello everyone,

I have an OpenSSL client (Windows) and server (Ubuntu). When my client tries to disconnect from the server, but the server happens to call SSL_write during the disconnect process by chance, then SSL_write freezes. I tried to check the socket via select and I tried to make it non-blocking before writing, but nothing worked. The function simply freezes (i.e. no return, even as a non-blocking socket), probably because the socket thinks that it is ready, even though it really isn't. Is there any function out there that can reliably tell me whether or not I can call SSL_write in this scenario?

And if there isn't any way to do this, because I made some noobish mistake nobody who knows the first thing about OpenSSL should make:
What is the proper way of dealing with this scenario?

I simply have a scenario where both client and server can send messages at any time and the client can disconnect at any time. The latter is especially bad if it happens via network problems, because a user-invoked disconnect can be worked-around, e.g. the client tells the server &quot;I'm going to disconnect soon, don't call SSL_write any more&quot; and then it waits until the server is ready for disconnecting.

Kind regards
Alex
</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002128.html">[openssl-users] Key Deriviation Function Tests for TLS
</A></li>
	<LI>Next message: <A HREF="002107.html">[openssl-users] Getting role of SSL endpoint
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2106">[ date ]</a>
              <a href="thread.html#2106">[ thread ]</a>
              <a href="subject.html#2106">[ subject ]</a>
              <a href="author.html#2106">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
