<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Forcing the FIPS module to fail (no way)
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2015-September/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Forcing%20the%20FIPS%20module%20to%20fail%20%28no%20way%29&In-Reply-To=%3CCAL9uvPeYMvan%3Ds4-nPS50C5c7%2B51L-4i77a6cnYPDOCWaPok0w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="001994.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Forcing the FIPS module to fail (no way)</H1>
    <B>Alberto Roman Linacero</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Forcing%20the%20FIPS%20module%20to%20fail%20%28no%20way%29&In-Reply-To=%3CCAL9uvPeYMvan%3Ds4-nPS50C5c7%2B51L-4i77a6cnYPDOCWaPok0w%40mail.gmail.com%3E"
       TITLE="[openssl-users] Forcing the FIPS module to fail (no way)">aroman at alienvault.com
       </A><BR>
    <I>Tue Sep  1 17:28:35 UTC 2015</I>
    <P><UL>
        
        <LI>Next message: <A HREF="001994.html">[openssl-users] Forcing the FIPS module to fail (no way)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1993">[ date ]</a>
              <a href="thread.html#1993">[ thread ]</a>
              <a href="subject.html#1993">[ subject ]</a>
              <a href="author.html#1993">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there, I'd like to know how to make fail some application compiled
with the FIPS module, I need to make that test for a certification
process but my tests doesn't get the application fail.

When some application is compiled with fipscanister.o  it stores
inside the application a FIPS_signature. Then, when the application
calls to FIPS_mode_set(1) that HMAC-SHA1 signature is checked and if
the application binary has been modified it will lead to an error.

But I'm not able to generate that error. To test it, I compiled
openssl with fips support , then I started FIPS mode, brutally changed
some random bits in the apps/openssl binary, and then I tried a simple
hash1:

server:~/openssl-1.0.1p# export OPENSSL_FIPS=1
server:~/openssl-1.0.1p# vi apps/openssl
server:~/openssl-1.0.1p# apps/openssl sha1 NEWS
SHA1(NEWS)= 163e5a1ff9b2b06dafdc8783ce91c4d0a49f55db

Why it is not failing? The fips self-tests should show some kind of
error, AFAIK. (obviously I can easily get a segfault, but that's not
what I want).

Also, editing the openssl binary I can see the etaonrishdlcupfm signature.

Then, I tried a similar thing with stunnel4, that links to a
libcrypto.so.1.0.0 compiled with fips support (that file also has the
etaonrishdlcupfm signature). I modified some bits in the
libcrypto.so.1.0.0 file and stunnel is not giving any error, its log
says that it enters into FIPS mode correctly.

So, why is not the FIPS module failing to start? Why it doesn't alerts
me about the application manipulation?

Thanks in advance and best regards,
Alberto.








-- 
Alberto.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="001994.html">[openssl-users] Forcing the FIPS module to fail (no way)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1993">[ date ]</a>
              <a href="thread.html#1993">[ thread ]</a>
              <a href="subject.html#1993">[ subject ]</a>
              <a href="author.html#1993">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
