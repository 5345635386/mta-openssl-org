<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Re: openssl cms verification date
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2024-February/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%3D%3Futf-8%3Fq%3FRe%3D3A%3F%3D%20openssl%20cms%20verification%20date&In-Reply-To=%3C10235-65c4d380-2b-d1b3f10%40129830095%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016971.html">
   <LINK REL="Next"  HREF="016973.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Re: openssl cms verification date</H1>
    <B>Fran&#231;ois Legal</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%3D%3Futf-8%3Fq%3FRe%3D3A%3F%3D%20openssl%20cms%20verification%20date&In-Reply-To=%3C10235-65c4d380-2b-d1b3f10%40129830095%3E"
       TITLE="Re: openssl cms verification date">devel at thom.fr.eu.org
       </A><BR>
    <I>Thu Feb  8 13:13:35 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016971.html">openssl cms verification date
</A></li>
        <LI>Next message (by thread): <A HREF="016973.html">openssl cms verification date
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16972">[ date ]</a>
              <a href="thread.html#16972">[ thread ]</a>
              <a href="subject.html#16972">[ subject ]</a>
              <a href="author.html#16972">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Le Jeudi, F&#233;vrier 08, 2024 11:46 CET, Tomas Mraz &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">tomas at openssl.org</A>&gt; a &#233;crit: 
 
&gt;<i> On Thu, 2024-02-08 at 11:37 +0100, Fran&#231;ois Legal wrote:
</I>&gt;<i> &gt; Hello,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I'm new to this list.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I'm using pkcs7 packages to embbed firmware, to procide authenticity
</I>&gt;<i> &gt; verification before doing firmware upgrades.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I use the openssl cms command for verification purpose, but face the
</I>&gt;<i> &gt; following problem :
</I>&gt;<i> &gt; when doing verify, openssl cms -verify does check whether the signing
</I>&gt;<i> &gt; certificate is valid today, not whether or not it was still valid
</I>&gt;<i> &gt; when the package got signed.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I saw the -attime option to specify the verification date, but found
</I>&gt;<i> &gt; no easy way to fetch the signature date from the package for each
</I>&gt;<i> &gt; signature.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; So I was wondering if it was the intended function that the
</I>&gt;<i> &gt; certificate validity verification was made at the verification date
</I>&gt;<i> &gt; and not the signature date.
</I>&gt;<i> 
</I>&gt;<i> Yes, this was certainly intentional. I could envision that a new option
</I>&gt;<i> could be added to the cms command that would verify the signature at
</I>&gt;<i> the date when the signature was made. However please note that without
</I>&gt;<i> some kind of assurance that the signature was really made at the time
</I>&gt;<i> that is recorded in the message, the signature could have been done
</I>&gt;<i> with a key that was already expired anyway. This assurance is done
</I>&gt;<i> usually by timestamping via a trusted timestamping authority but there
</I>&gt;<i> might be other means.
</I>&gt;<i> 
</I>
Sure I get the point. You can't really be sure that the signature was made at the clained time as the signerInfo structure is not signed itself. Could you please comment however on why verifying the validity of the certificate at the verification date is better in that matter.
I already have a patch to provide for verifying the signature at signature time. Shall I send a pull request ?

Fran&#231;ois


&gt;<i> -- 
</I>&gt;<i> Tom&#225;&#353; Mr&#225;z, OpenSSL
</I>&gt;<i>
</I>
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016971.html">openssl cms verification date
</A></li>
	<LI>Next message (by thread): <A HREF="016973.html">openssl cms verification date
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16972">[ date ]</a>
              <a href="thread.html#16972">[ thread ]</a>
              <a href="subject.html#16972">[ subject ]</a>
              <a href="author.html#16972">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
