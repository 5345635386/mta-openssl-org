<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> OpenSSL 3.0 different behaviour on smaller DH groups?
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2022-April/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20OpenSSL%203.0%20different%20behaviour%20on%20smaller%20DH%20groups%3F&In-Reply-To=%3CCAOOWow0rbFjfy0e-opXAWqH%2B%3Dxv8-Q4QUJMqoNmOK1F0T%2BN1jw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015070.html">
   <LINK REL="Next"  HREF="015072.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>OpenSSL 3.0 different behaviour on smaller DH groups?</H1>
    <B>Simon Chopin</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20OpenSSL%203.0%20different%20behaviour%20on%20smaller%20DH%20groups%3F&In-Reply-To=%3CCAOOWow0rbFjfy0e-opXAWqH%2B%3Dxv8-Q4QUJMqoNmOK1F0T%2BN1jw%40mail.gmail.com%3E"
       TITLE="OpenSSL 3.0 different behaviour on smaller DH groups?">simon.chopin at canonical.com
       </A><BR>
    <I>Tue Apr  5 17:05:37 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015070.html">OpenSSL 3.0.2 PKCS12_parse Failure
</A></li>
        <LI>Next message (by thread): <A HREF="015072.html">OpenSSL 3.0 different behaviour on smaller DH groups?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15071">[ date ]</a>
              <a href="thread.html#15071">[ thread ]</a>
              <a href="subject.html#15071">[ subject ]</a>
              <a href="author.html#15071">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm working on migrating the Ruby net-ssh package to OpenSSL 3.0 as part
of our larger transition in Ubuntu, but there's an issue that I can't
figure out.

This test suite fails several times with a failed call to
EVP_PKEY_derive_set_peer, without much more details:
<A HREF="https://github.com/net-ssh/net-ssh/blob/master/test/transport/kex/test_diffie_hellman_group14_sha1.rb">https://github.com/net-ssh/net-ssh/blob/master/test/transport/kex/test_diffie_hellman_group14_sha1.rb</A>

However, the *exact same* test suite works, with the only difference
being that the failing suite uses the DH group 14, which is 2048bits,
whereas the one that passes uses the group 1, which the Internet tells
me is 768bits.

I'm working on trying to come up with a pure-C reproducer, but I'm
sending this in the hopes that someone out there has a sudden epiphany
and knows what is causing this?

For the curious out there, we're tracking this work at
<A HREF="https://bugs.launchpad.net/ubuntu/+source/vagrant/+bug/1964025">https://bugs.launchpad.net/ubuntu/+source/vagrant/+bug/1964025</A>

Cheers,

--
Simon Chopin
Foundations Team                               	             Ubuntu MOTU
<A HREF="../../../mailman/listinfo/openssl-users.html">simon.chopin at canonical.com</A>                            <A HREF="../../../mailman/listinfo/openssl-users.html">schopin at ubuntu.com</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015070.html">OpenSSL 3.0.2 PKCS12_parse Failure
</A></li>
	<LI>Next message (by thread): <A HREF="015072.html">OpenSSL 3.0 different behaviour on smaller DH groups?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15071">[ date ]</a>
              <a href="thread.html#15071">[ thread ]</a>
              <a href="subject.html#15071">[ subject ]</a>
              <a href="author.html#15071">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
