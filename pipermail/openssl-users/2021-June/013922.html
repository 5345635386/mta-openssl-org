<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> client certificate error
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2021-June/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20client%20certificate%20error&In-Reply-To=%3Cb7296407-4b84-5818-e0bb-2a07db2e1662%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013920.html">
   <LINK REL="Next"  HREF="013919.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>client certificate error</H1>
    <B>Paulo Wollny</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20client%20certificate%20error&In-Reply-To=%3Cb7296407-4b84-5818-e0bb-2a07db2e1662%40gmail.com%3E"
       TITLE="client certificate error">ppjjvvww at gmail.com
       </A><BR>
    <I>Wed Jun 30 13:22:25 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="013920.html">client certificate error
</A></li>
        <LI>Next message: <A HREF="013919.html">Hi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13922">[ date ]</a>
              <a href="thread.html#13922">[ thread ]</a>
              <a href="subject.html#13922">[ subject ]</a>
              <a href="author.html#13922">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

thank you for the answer.

can you please point the right direction for solution, please?

Regarding the &quot;look suspicious - it means your client is connecting from 
127.0.0.1 and your server is also listening on 127.0.0.1 ; is this 
really what you have in mind? &quot;  i'm testin on my local system, having 
apache server and browser (chrome) on the same system.

And yes, the server cetificate have localhost as DNS alias.

Again, thank you so much.

PW

Am 30.06.21 um 05:32 schrieb Jan Just Keijser:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> On 30/06/21 00:23, Paulo Wollny wrote:
</I>&gt;&gt;<i> Dear @ll
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My environment:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> OpenSSL 1.1.1f&#160; 31 Mar 2020
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ubuntu 20.04
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Server version: Apache/2.4.41 (Ubuntu)
</I>&gt;&gt;<i> Server built:&#160;&#160; 2021-06-17T18:27:53
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My problem:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> connecting to a secure server requiring client certificate, i get the 
</I>&gt;&gt;<i> following error when presenting my certificate:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ERR_BAD_SSL_CLIENT_AUTH_CERT
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It started to fail after the previous one voided and i issued a new one.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> CA, the same, server cert, renewed after previous voided.
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> this is an apache/mod_ssl issue and has little to do with openssl; from 
</I>&gt;<i> reading the logs the lines
</I>&gt;<i> 
</I>&gt;<i> [Tue Jun 29 19:15:45.592363 2021] [ssl:error] [pid 241357] [client 
</I>&gt;<i> 127.0.0.1:57026] AH02261: Re-negotiation handshake failed
</I>&gt;<i> 
</I>&gt;<i> look suspicious - it means your client is connecting from 127.0.0.1 and 
</I>&gt;<i> your server is also listening on 127.0.0.1 ; is this really what you 
</I>&gt;<i> have in mind?
</I>&gt;<i> 
</I>&gt;<i> But again, this is an apache httpd/mod_sssl issue and does not belong on 
</I>&gt;<i> this list.
</I>&gt;<i> 
</I>&gt;<i> JJK
</I>&gt;<i> 
</I>&gt;&gt;<i> My server conf:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;VirtualHost *:443&gt;
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ServerAdmin <A HREF="../../../mailman/listinfo/openssl-users.html">webmaster at localhost</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; DocumentRoot /home/www/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # Available loglevels: trace8, ..., trace1, debug, 
</I>&gt;&gt;<i> info, notice, warn,
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # error, crit, alert, emerg.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # It is also possible to configure the loglevel for 
</I>&gt;&gt;<i> particular
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # modules, e.g.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #LogLevel info ssl:warn
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ErrorLog /var/log/apache2/ssl_engine.log
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; LogLevel debug
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #ErrorLog ${APACHE_LOG_DIR}/error.log
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; CustomLog ${APACHE_LOG_DIR}/access.log combined
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # For most configuration files from conf-available/, 
</I>&gt;&gt;<i> which are
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # enabled or disabled at a global level, it is 
</I>&gt;&gt;<i> possible to
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # include a line for only one particular virtual host. 
</I>&gt;&gt;<i> For example the
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # following line enables the CGI configuration for 
</I>&gt;&gt;<i> this host only
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # after it has been globally disabled with &quot;a2disconf&quot;.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #Include conf-available/serve-cgi-bin.conf
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; SSL Engine Switch:
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; Enable/Disable SSL for this virtual host.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSLEngine on
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSLProtocol all -SSLv3 -TLSv1.3
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #SSLProtocol all
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #SSLProtocol all -SSLv2 -SSLv3 -TLSv1 -TLSv1.1 -TLSv1.3
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSLHonorCipherOrder on
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSLCipherSuite &quot;EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM 
</I>&gt;&gt;<i> EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 
</I>&gt;&gt;<i> EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA RC4 !aNULL !eNULL !LOW 
</I>&gt;&gt;<i> !3DES !MD5 !EXP !PSK !SRP !DSS&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; A self-signed (snakeoil) certificate can be 
</I>&gt;&gt;<i> created by installing
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; the ssl-cert package. See
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; /usr/share/doc/apache2/README.Debian.gz for more 
</I>&gt;&gt;<i> info.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; If both key and certificate are stored in the same 
</I>&gt;&gt;<i> file, only the
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; SSLCertificateFile directive is needed.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSLCertificateFile /etc/ssl/private/server.crt
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSLCertificateKeyFile /etc/ssl/private/server.key
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSLCACertificatePath /etc/ssl/certs/
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #SSLCACertificateFile 
</I>&gt;&gt;<i> /etc/ssl/certs/PSign_TrustCenter_Root_CA-I.pem
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSLCACertificateFile /etc/ssl/private/fullchain.crt
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; Server Certificate Chain:
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; Point SSLCertificateChainFile at a file containing 
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; concatenation of PEM encoded CA certificates which 
</I>&gt;&gt;<i> form the
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; certificate chain for the server certificate. 
</I>&gt;&gt;<i> Alternatively
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; the referenced file can be the same as 
</I>&gt;&gt;<i> SSLCertificateFile
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; when the CA certificates are directly appended to 
</I>&gt;&gt;<i> the server
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; certificate for convinience.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #SSLCertificateChainFile 
</I>&gt;&gt;<i> /etc/apache2/ssl.crt/server-ca.crt
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; Certificate Authority (CA):
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; Set the CA certificate verification path where to 
</I>&gt;&gt;<i> find CA
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; certificates for client authentication or 
</I>&gt;&gt;<i> alternatively one
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; huge file containing all of them (file must be PEM 
</I>&gt;&gt;<i> encoded)
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; Note: Inside SSLCACertificatePath you need hash 
</I>&gt;&gt;<i> symlinks
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; to point to the certificate files. 
</I>&gt;&gt;<i> Use the provided
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Makefile to update the hash symlinks 
</I>&gt;&gt;<i> after changes.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #SSLCACertificatePath /etc/ssl/certs/
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #SSLCACertificateFile /etc/apache2/ssl.crt/ca-bundle.crt
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; Certificate Revocation Lists (CRL):
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; Set the CA revocation path where to find CA CRLs 
</I>&gt;&gt;<i> for client
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; authentication or alternatively one huge file 
</I>&gt;&gt;<i> containing all
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; of them (file must be PEM encoded)
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; Note: Inside SSLCARevocationPath you need hash 
</I>&gt;&gt;<i> symlinks
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; to point to the certificate files. 
</I>&gt;&gt;<i> Use the provided
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Makefile to update the hash symlinks 
</I>&gt;&gt;<i> after changes.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #SSLCARevocationPath /etc/apache2/ssl.crl/
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #SSLCARevocationFile /etc/apache2/ssl.crl/ca-bundle.crl
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; Client Authentication (Type):
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; Client certificate verification type and depth. 
</I>&gt;&gt;<i> Types are
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; none, optional, require and optional_no_ca. Depth 
</I>&gt;&gt;<i> is a
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; number which specifies how deeply to verify the 
</I>&gt;&gt;<i> certificate
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; issuer chain before deciding the certificate is 
</I>&gt;&gt;<i> not valid.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #SSLVerifyClient require
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #SSLVerifyDepth&#160; 10
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; SSL Engine Options:
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; Set various options for the SSL engine.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; o FakeBasicAuth:
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; Translate the client X.509 into a Basic 
</I>&gt;&gt;<i> Authorisation.&#160; This means that
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; the standard Auth/DBMAuth methods can be used 
</I>&gt;&gt;<i> for access control.&#160; The
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; user name is the `one line' version of the 
</I>&gt;&gt;<i> client's X.509 certificate.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; Note that no password is obtained from the 
</I>&gt;&gt;<i> user. Every entry in the user
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; file needs this password: `xxj31ZMTZzkVA'.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; o ExportCertData:
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; This exports two additional environment 
</I>&gt;&gt;<i> variables: SSL_CLIENT_CERT and
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSL_SERVER_CERT. These contain the 
</I>&gt;&gt;<i> PEM-encoded certificates of the
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; server (always existing) and the client (only 
</I>&gt;&gt;<i> existing when client
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; authentication is used). This can be used to 
</I>&gt;&gt;<i> import the certificates
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; into CGI scripts.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; o StdEnvVars:
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; This exports the standard SSL/TLS related 
</I>&gt;&gt;<i> `SSL_*' environment variables.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; Per default this exportation is switched off 
</I>&gt;&gt;<i> for performance reasons,
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; because the extraction step is an expensive 
</I>&gt;&gt;<i> operation and is usually
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; useless for serving static content. So one 
</I>&gt;&gt;<i> usually enables the
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; exportation for CGI and SSI requests only.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; o OptRenegotiate:
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; This enables optimized SSL connection 
</I>&gt;&gt;<i> renegotiation handling when SSL
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; directives are used in per-directory context.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #SSLOptions +FakeBasicAuth +ExportCertData +StrictRequire
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;FilesMatch &quot;\.(cgi|shtml|phtml|php)$&quot;&gt;
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSLOptions +StdEnvVars
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/FilesMatch&gt;
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;Directory /usr/lib/cgi-bin&gt;
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSLOptions +StdEnvVars
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/Directory&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; SSL Protocol Adjustments:
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; The safe and default but still SSL/TLS standard 
</I>&gt;&gt;<i> compliant shutdown
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; approach is that mod_ssl sends the close notify 
</I>&gt;&gt;<i> alert but doesn't wait for
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; the close notify alert from client. When you need 
</I>&gt;&gt;<i> a different shutdown
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; approach you can use one of the following variables:
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; o ssl-unclean-shutdown:
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; This forces an unclean shutdown when the 
</I>&gt;&gt;<i> connection is closed, i.e. no
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSL close notify alert is send or allowed to 
</I>&gt;&gt;<i> received.&#160; This violates
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; the SSL/TLS standard but is needed for some 
</I>&gt;&gt;<i> brain-dead browsers. Use
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; this when you receive I/O errors because of 
</I>&gt;&gt;<i> the standard approach where
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; mod_ssl sends the close notify alert.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; o ssl-accurate-shutdown:
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; This forces an accurate shutdown when the 
</I>&gt;&gt;<i> connection is closed, i.e. a
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSL close notify alert is send and mod_ssl 
</I>&gt;&gt;<i> waits for the close notify
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; alert of the client. This is 100% SSL/TLS 
</I>&gt;&gt;<i> standard compliant, but in
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; practice often causes hanging connections 
</I>&gt;&gt;<i> with brain-dead browsers. Use
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; this only for browsers where you know that 
</I>&gt;&gt;<i> their SSL implementation
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160; works correctly.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; Notice: Most problems of broken clients are also 
</I>&gt;&gt;<i> related to the HTTP
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; keep-alive facility, so you usually additionally 
</I>&gt;&gt;<i> want to disable
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; keep-alive for those clients, too. Use variable 
</I>&gt;&gt;<i> &quot;nokeepalive&quot; for this.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; Similarly, one has to force some clients to use 
</I>&gt;&gt;<i> HTTP/1.0 to workaround
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; their broken HTTP/1.1 implementation. Use 
</I>&gt;&gt;<i> variables &quot;downgrade-1.0&quot; and
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160; &quot;force-response-1.0&quot; for this.
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # BrowserMatch &quot;MSIE [2-6]&quot; \
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; nokeepalive ssl-unclean-shutdown \
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; #&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; downgrade-1.0 force-response-1.0
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> # private
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160; Alias /ssl/ /home/www/html-ssl-certs/
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160; &lt;location /ssl/&gt;
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSLVerifyClient require
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSLVerifyDepth&#160;&#160;&#160;&#160;&#160;&#160; 5
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; SSLOptions +StdEnvVars +ExportCertData
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; AuthType Basic
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; AuthName &quot;Protected User access required&quot;
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; AuthUserFile /etc/apache2/.htpasswd
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Require valid-user
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; DirectoryIndex phpinfo.php
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; DirectoryIndexRedirect permanent
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Order deny,allow
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Allow from all
</I>&gt;&gt;<i> &#160;&#160;&#160;&#160;&#160; &lt;/location&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;/VirtualHost&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> log shows:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.024571 2021] [socache_shmcb:debug] [pid 241359] 
</I>&gt;&gt;<i> mod_socache_shmcb.c(530): AH00835: socache_shmcb_retrieve (0xae -&gt; 
</I>&gt;&gt;<i> subcache 14)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.024597 2021] [socache_shmcb:debug] [pid 241359] 
</I>&gt;&gt;<i> mod_socache_shmcb.c(916): AH00851: shmcb_subcache_retrieve found no match
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.024605 2021] [socache_shmcb:debug] [pid 241359] 
</I>&gt;&gt;<i> mod_socache_shmcb.c(541): AH00836: leaving socache_shmcb_retrieve 
</I>&gt;&gt;<i> successfully
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.024632 2021] [ssl:debug] [pid 241359] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(2387): [client 127.0.0.1:57022] AH02044: No 
</I>&gt;&gt;<i> matching SSL virtual host for servername localhost found (using 
</I>&gt;&gt;<i> default/first virtual host)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.024700 2021] [ssl:debug] [pid 241359] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(2387): [client 127.0.0.1:57022] AH02044: No 
</I>&gt;&gt;<i> matching SSL virtual host for servername localhost found (using 
</I>&gt;&gt;<i> default/first virtual host)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.024711 2021] [core:debug] [pid 241359] 
</I>&gt;&gt;<i> protocol.c(2313): [client 127.0.0.1:57022] AH03155: select protocol 
</I>&gt;&gt;<i> from , choices=h2,http/1.1 for server hp15pw
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.026143 2021] [ssl:info] [pid 241355] [client 
</I>&gt;&gt;<i> 127.0.0.1:57024] AH01964: Connection to child 0 established (server 
</I>&gt;&gt;<i> hp15pw:443)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.026407 2021] [socache_shmcb:debug] [pid 241355] 
</I>&gt;&gt;<i> mod_socache_shmcb.c(530): AH00835: socache_shmcb_retrieve (0x07 -&gt; 
</I>&gt;&gt;<i> subcache 7)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.026424 2021] [socache_shmcb:debug] [pid 241355] 
</I>&gt;&gt;<i> mod_socache_shmcb.c(916): AH00851: shmcb_subcache_retrieve found no match
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.026429 2021] [socache_shmcb:debug] [pid 241355] 
</I>&gt;&gt;<i> mod_socache_shmcb.c(541): AH00836: leaving socache_shmcb_retrieve 
</I>&gt;&gt;<i> successfully
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.026449 2021] [ssl:debug] [pid 241355] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(2387): [client 127.0.0.1:57024] AH02044: No 
</I>&gt;&gt;<i> matching SSL virtual host for servername localhost found (using 
</I>&gt;&gt;<i> default/first virtual host)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.026489 2021] [ssl:debug] [pid 241355] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(2387): [client 127.0.0.1:57024] AH02044: No 
</I>&gt;&gt;<i> matching SSL virtual host for servername localhost found (using 
</I>&gt;&gt;<i> default/first virtual host)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.026497 2021] [core:debug] [pid 241355] 
</I>&gt;&gt;<i> protocol.c(2313): [client 127.0.0.1:57024] AH03155: select protocol 
</I>&gt;&gt;<i> from , choices=h2,http/1.1 for server hp15pw
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.321198 2021] [ssl:debug] [pid 241359] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(2254): [client 127.0.0.1:57022] AH02041: Protocol: 
</I>&gt;&gt;<i> TLSv1.2, Cipher: ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.323322 2021] [ssl:debug] [pid 241359] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(415): [client 127.0.0.1:57022] AH02034: Initial 
</I>&gt;&gt;<i> (No.1) HTTPS request received for child 4 (server hp15pw:443)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.323413 2021] [ssl:debug] [pid 241355] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(2254): [client 127.0.0.1:57024] AH02041: Protocol: 
</I>&gt;&gt;<i> TLSv1.2, Cipher: ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.323733 2021] [ssl:debug] [pid 241359] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(782): [client 127.0.0.1:57022] AH02255: Changed 
</I>&gt;&gt;<i> client verification type will force renegotiation
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.323837 2021] [ssl:info] [pid 241359] [client 
</I>&gt;&gt;<i> 127.0.0.1:57022] AH02221: Requesting connection re-negotiation
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.323893 2021] [ssl:debug] [pid 241359] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(984): [client 127.0.0.1:57022] AH02260: Performing 
</I>&gt;&gt;<i> full renegotiation: complete handshake protocol (client does support 
</I>&gt;&gt;<i> secure renegotiation)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.324148 2021] [ssl:debug] [pid 241359] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(2254): [client 127.0.0.1:57022] AH02041: Protocol: 
</I>&gt;&gt;<i> TLSv1.2, Cipher: ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.324265 2021] [ssl:info] [pid 241359] [client 
</I>&gt;&gt;<i> 127.0.0.1:57022] AH02226: Awaiting re-negotiation handshake
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.324869 2021] [ssl:debug] [pid 241359] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(2387): [client 127.0.0.1:57022] AH02044: No 
</I>&gt;&gt;<i> matching SSL virtual host for servername localhost found (using 
</I>&gt;&gt;<i> default/first virtual host)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.331104 2021] [ssl:error] [pid 241359] [client 
</I>&gt;&gt;<i> 127.0.0.1:57022] AH02261: Re-negotiation handshake failed
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.331256 2021] [ssl:debug] [pid 241359] 
</I>&gt;&gt;<i> ssl_engine_io.c(1368): (70014)End of file found: [client 
</I>&gt;&gt;<i> 127.0.0.1:57022] AH02007: SSL handshake interrupted by system [Hint: 
</I>&gt;&gt;<i> Stop button pressed in browser?!]
</I>&gt;&gt;<i> [Tue Jun 29 19:15:43.331328 2021] [ssl:info] [pid 241359] [client 
</I>&gt;&gt;<i> 127.0.0.1:57022] AH01998: Connection closed to child 4 with abortive 
</I>&gt;&gt;<i> shutdown (server hp15pw:443)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.526753 2021] [ssl:info] [pid 241355] (70014)End 
</I>&gt;&gt;<i> of file found: [client 127.0.0.1:57024] AH01991: SSL input filter read 
</I>&gt;&gt;<i> failed.
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.527179 2021] [ssl:debug] [pid 241355] 
</I>&gt;&gt;<i> ssl_engine_io.c(1102): [client 127.0.0.1:57024] AH02001: Connection 
</I>&gt;&gt;<i> closed to child 0 with standard shutdown (server hp15pw:443)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.537952 2021] [ssl:info] [pid 241357] [client 
</I>&gt;&gt;<i> 127.0.0.1:57026] AH01964: Connection to child 2 established (server 
</I>&gt;&gt;<i> hp15pw:443)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.538859 2021] [socache_shmcb:debug] [pid 241357] 
</I>&gt;&gt;<i> mod_socache_shmcb.c(530): AH00835: socache_shmcb_retrieve (0x68 -&gt; 
</I>&gt;&gt;<i> subcache 8)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.538910 2021] [socache_shmcb:debug] [pid 241357] 
</I>&gt;&gt;<i> mod_socache_shmcb.c(916): AH00851: shmcb_subcache_retrieve found no match
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.538929 2021] [socache_shmcb:debug] [pid 241357] 
</I>&gt;&gt;<i> mod_socache_shmcb.c(541): AH00836: leaving socache_shmcb_retrieve 
</I>&gt;&gt;<i> successfully
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.538994 2021] [ssl:debug] [pid 241357] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(2387): [client 127.0.0.1:57026] AH02044: No 
</I>&gt;&gt;<i> matching SSL virtual host for servername localhost found (using 
</I>&gt;&gt;<i> default/first virtual host)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.539162 2021] [ssl:debug] [pid 241357] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(2387): [client 127.0.0.1:57026] AH02044: No 
</I>&gt;&gt;<i> matching SSL virtual host for servername localhost found (using 
</I>&gt;&gt;<i> default/first virtual host)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.539188 2021] [core:debug] [pid 241357] 
</I>&gt;&gt;<i> protocol.c(2313): [client 127.0.0.1:57026] AH03155: select protocol 
</I>&gt;&gt;<i> from , choices=h2,http/1.1 for server hp15pw
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.574552 2021] [ssl:debug] [pid 241357] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(2254): [client 127.0.0.1:57026] AH02041: Protocol: 
</I>&gt;&gt;<i> TLSv1.2, Cipher: ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.589868 2021] [ssl:debug] [pid 241357] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(415): [client 127.0.0.1:57026] AH02034: Initial 
</I>&gt;&gt;<i> (No.1) HTTPS request received for child 2 (server hp15pw:443)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.590043 2021] [ssl:debug] [pid 241357] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(782): [client 127.0.0.1:57026] AH02255: Changed 
</I>&gt;&gt;<i> client verification type will force renegotiation
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.590051 2021] [ssl:info] [pid 241357] [client 
</I>&gt;&gt;<i> 127.0.0.1:57026] AH02221: Requesting connection re-negotiation
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.590124 2021] [ssl:debug] [pid 241357] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(984): [client 127.0.0.1:57026] AH02260: Performing 
</I>&gt;&gt;<i> full renegotiation: complete handshake protocol (client does support 
</I>&gt;&gt;<i> secure renegotiation)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.590251 2021] [ssl:debug] [pid 241357] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(2254): [client 127.0.0.1:57026] AH02041: Protocol: 
</I>&gt;&gt;<i> TLSv1.2, Cipher: ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.590261 2021] [ssl:info] [pid 241357] [client 
</I>&gt;&gt;<i> 127.0.0.1:57026] AH02226: Awaiting re-negotiation handshake
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.590535 2021] [ssl:debug] [pid 241357] 
</I>&gt;&gt;<i> ssl_engine_kernel.c(2387): [client 127.0.0.1:57026] AH02044: No 
</I>&gt;&gt;<i> matching SSL virtual host for servername localhost found (using 
</I>&gt;&gt;<i> default/first virtual host)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.592237 2021] [socache_shmcb:debug] [pid 241357] 
</I>&gt;&gt;<i> mod_socache_shmcb.c(555): AH00837: socache_shmcb_remove (0x4c -&gt; 
</I>&gt;&gt;<i> subcache 12)
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.592290 2021] [socache_shmcb:debug] [pid 241357] 
</I>&gt;&gt;<i> mod_socache_shmcb.c(570): AH00839: leaving socache_shmcb_remove 
</I>&gt;&gt;<i> successfully
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.592363 2021] [ssl:error] [pid 241357] [client 
</I>&gt;&gt;<i> 127.0.0.1:57026] AH02261: Re-negotiation handshake failed
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.592456 2021] [ssl:error] [pid 241357] SSL Library 
</I>&gt;&gt;<i> Error: error:1417C0C7:SSL routines:tls_process_client_certificate:peer 
</I>&gt;&gt;<i> did not return a certificate -- No CAs known to server for verification?
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.592643 2021] [ssl:debug] [pid 241357] 
</I>&gt;&gt;<i> ssl_engine_io.c(1368): [client 127.0.0.1:57026] AH02007: SSL handshake 
</I>&gt;&gt;<i> interrupted by system [Hint: Stop button pressed in browser?!]
</I>&gt;&gt;<i> [Tue Jun 29 19:15:45.592662 2021] [ssl:info] [pid 241357] [client 
</I>&gt;&gt;<i> 127.0.0.1:57026] AH01998: Connection closed to child 2 with abortive 
</I>&gt;&gt;<i> shutdown (server hp15pw:443)
</I>&gt;&gt;<i> <A HREF="../../../mailman/listinfo/openssl-users.html">root at hp15pw</A>:/var/log/apache2#
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Any cue? I'm not being able to find out what is wrong.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thx in advance.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013920.html">client certificate error
</A></li>
	<LI>Next message: <A HREF="013919.html">Hi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13922">[ date ]</a>
              <a href="thread.html#13922">[ thread ]</a>
              <a href="subject.html#13922">[ subject ]</a>
              <a href="author.html#13922">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
