<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] ECDSA private key load error
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2015-February/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20ECDSA%20private%20key%20load%20error&In-Reply-To=%3CCA%2BmfXPFysFSFjgOEq5qhoOddgexEbreOuyhvGtLsp09G69rZFw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000451.html">
   <LINK REL="Next"  HREF="000423.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] ECDSA private key load error</H1>
    <B>Rajeswari K</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20ECDSA%20private%20key%20load%20error&In-Reply-To=%3CCA%2BmfXPFysFSFjgOEq5qhoOddgexEbreOuyhvGtLsp09G69rZFw%40mail.gmail.com%3E"
       TITLE="[openssl-users] ECDSA private key load error">raji.kotamraju at gmail.com
       </A><BR>
    <I>Mon Feb  2 10:04:43 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000451.html">[openssl-users] ECDHE-ECDSA certificate returning with no	shared cipher error
</A></li>
        <LI>Next message: <A HREF="000423.html">[openssl-users] i2d_X509_SIG() in FIPS mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#422">[ date ]</a>
              <a href="thread.html#422">[ thread ]</a>
              <a href="subject.html#422">[ subject ]</a>
              <a href="author.html#422">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Openssl users,

Am facing following issue while am loading ECDSA private key using
EVP_PKCS82PKEY().

I hope am missing some initialization in this regard. Can you please point
me what am i doing wrong.

Steps followed :
Have generated CSR and signed using openssl commans.

Following are the parameters updated in the certificate.

Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: 6 (0x6)
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: CN=ecdsa
        Validity
            Not Before: Feb  2 06:00:29 2015 GMT
            Not After : Feb  2 06:00:29 2016 GMT
        Subject: CN=eccert
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:

                ASN1 OID: prime256v1
        X509v3 extensions:
            X509v3 Subject Key Identifier:

            X509v3 Authority Key Identifier:


            X509v3 Key Usage: critical
                Digital Signature
    Signature Algorithm: ecdsa-with-SHA256

Step 2 : Tried to convert the private key in to PKCS8 format.

Step 3 : Tried to call &quot;EVP_PKCS82PKEY(pkey)&quot;.

This function is always returning NULL.

When further checked on the return types, i could see following.

As part of &quot;PKCS8_pkey_get0(&amp;algoid, NULL, NULL, NULL, p8)&quot;, the type is of
V_ASN1_OCTET_STRING. (i.e. p8-&gt;pkey-&gt;type == V_ASN1_OCTET_STRING).


But OBJ_obj2nid(algoid) returning the nid value as 0 i.e. NID_undef.

Due to this, EVP_PKEY_set_type(pkey, OBJ_obj2nid(algoid)) always returns
NULL.

Can you help me to get out of this error.

Thanks,
Rajeswari.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20150202/13b5d909/attachment.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20150202/13b5d909/attachment.html</A>&gt;
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000451.html">[openssl-users] ECDHE-ECDSA certificate returning with no	shared cipher error
</A></li>
	<LI>Next message: <A HREF="000423.html">[openssl-users] i2d_X509_SIG() in FIPS mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#422">[ date ]</a>
              <a href="thread.html#422">[ thread ]</a>
              <a href="subject.html#422">[ subject ]</a>
              <a href="author.html#422">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
