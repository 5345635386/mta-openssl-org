<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] CMS questions
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2015-February/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20CMS%20questions&In-Reply-To=%3C20150224142106.GA1228%40openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000615.html">
   <LINK REL="Next"  HREF="000620.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] CMS questions</H1>
    <B>Dr. Stephen Henson</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20CMS%20questions&In-Reply-To=%3C20150224142106.GA1228%40openssl.org%3E"
       TITLE="[openssl-users] CMS questions">steve at openssl.org
       </A><BR>
    <I>Tue Feb 24 14:21:06 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000615.html">[openssl-users] CMS questions
</A></li>
        <LI>Next message: <A HREF="000620.html">[openssl-users] CMS questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#618">[ date ]</a>
              <a href="thread.html#618">[ thread ]</a>
              <a href="subject.html#618">[ subject ]</a>
              <a href="author.html#618">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Feb 23, 2015, Richard Welty wrote:

&gt;<i> i'm starting on some work that needs to use CMS in an
</I>&gt;<i> application, and i'm having trouble getting my head
</I>&gt;<i> wrapped around how to handle the case of verifying
</I>&gt;<i> a signature and then decrypting the enveloped data
</I>&gt;<i> that has been signed. specifically, i'm not grasping
</I>&gt;<i> how to extract the encrypted data to pass to CMS_decrypt
</I>&gt;<i> after verification is done. do i need to use a BIO
</I>&gt;<i> filter for this or is there some other mechanism i'm not
</I>&gt;<i> seeing?
</I>&gt;<i> 
</I>
Typically you'd write the signed content to a memory BIO and then decrypt
that. Precisely how you decrypt the enveloped data depends on the format. It
might be in MIME format in which case you'd pass it through the MIME parser.
Alternatively it could be enveloped data content type in which case you'd
decode it as BER form.

There are shortcuts you can make if, for example, you know the signed content
is not detached and in BER form.

Steve.
--
Dr Stephen N. Henson. OpenSSL project core developer.
Commercial tech support now available see: <A HREF="http://www.openssl.org">http://www.openssl.org</A>
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000615.html">[openssl-users] CMS questions
</A></li>
	<LI>Next message: <A HREF="000620.html">[openssl-users] CMS questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#618">[ date ]</a>
              <a href="thread.html#618">[ thread ]</a>
              <a href="subject.html#618">[ subject ]</a>
              <a href="author.html#618">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
