<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> OpenSSL 1.1.1g Windows build slow rsa tests
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2021-January/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20OpenSSL%201.1.1g%20Windows%20build%20slow%20rsa%20tests&In-Reply-To=%3Cb2aef85d-5543-a078-160d-2b140a217b7d%40openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013364.html">
   <LINK REL="Next"  HREF="013369.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>OpenSSL 1.1.1g Windows build slow rsa tests</H1>
    <B>Dr Paul Dale</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20OpenSSL%201.1.1g%20Windows%20build%20slow%20rsa%20tests&In-Reply-To=%3Cb2aef85d-5543-a078-160d-2b140a217b7d%40openssl.org%3E"
       TITLE="OpenSSL 1.1.1g Windows build slow rsa tests">pauli at openssl.org
       </A><BR>
    <I>Wed Jan 20 23:18:53 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="013364.html">OpenSSL 1.1.1g Windows build slow rsa tests
</A></li>
        <LI>Next message: <A HREF="013369.html">OpenSSL 1.1.1g Windows build slow rsa tests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13365">[ date ]</a>
              <a href="thread.html#13365">[ thread ]</a>
              <a href="subject.html#13365">[ subject ]</a>
              <a href="author.html#13365">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Try building without the no-asm configuration option.

Pauli

On 21/1/21 6:18 am, Dan Heinz wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I&#8217;m building openssl 1.1.1g &#160;on multiple platforms and I found that the 
</I>&gt;<i> rsa speed tests are significantly slower in my build than on the other 
</I>&gt;<i> OS platforms (Linux and macOS).
</I>&gt;<i> 
</I>&gt;<i> I downloaded a Windows 64-bit binary distribution of openssl from 
</I>&gt;<i> <A HREF="https://kb.firedaemon.com/support/solutions/articles/4000121705">https://kb.firedaemon.com/support/solutions/articles/4000121705</A> 
</I>&gt;<i> &lt;<A HREF="https://kb.firedaemon.com/support/solutions/articles/4000121705">https://kb.firedaemon.com/support/solutions/articles/4000121705</A>&gt; as 
</I>&gt;<i> they include the configure parameters used for their build.
</I>&gt;<i> 
</I>&gt;<i> I ran the speed rsa tests on their openssl Windows 64-bit binary and 
</I>&gt;<i> they were much faster than the tests on my build.
</I>&gt;<i> 
</I>&gt;<i> Here&#8217;s some output.
</I>&gt;<i> My openssl binary executed with openssl speed rsa:
</I>&gt;<i> 
</I>&gt;<i> Doing 2048 bits private rsa's for 10s: 409 2048 bits private RSA's in 10.00s
</I>&gt;<i> 
</I>&gt;<i> Doing 2048 bits public rsa's for 10s: 15663 2048 bits public RSA's in 10.02s
</I>&gt;<i> 
</I>&gt;<i> Doing 4096 bits private rsa's for 10s: 60 4096 bits private RSA's in 10.00s
</I>&gt;<i> 
</I>&gt;<i> Doing 4096 bits public rsa's for 10s: 4316 4096 bits public RSA's in 10.02s
</I>&gt;<i> 
</I>&gt;<i> OpenSSL 1.1.1g&#160; 21 Apr 2020
</I>&gt;<i> 
</I>&gt;<i> built on: Wed Jan 20 18:38:14 2021 UTC
</I>&gt;<i> 
</I>&gt;<i> options:bn(64,64) rc4(int) des(long) aes(partial) blowfish(ptr)
</I>&gt;<i> 
</I>&gt;<i> compiler: cl /Fdossl_static.pdb&#160; /Gs0 /GF /Gy /MT /Zi /W3 /wd4090 
</I>&gt;<i> /nologo /O2 -DL_ENDIAN -DOPENSSL_PIC -DOPENSSL_NO_DEPRECATED
</I>&gt;<i> 
</I>&gt;<i>  &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; sign&#160;&#160;&#160; verify&#160;&#160;&#160; sign/s verify/s
</I>&gt;<i> 
</I>&gt;<i> rsa 2048 bits 0.024450s 0.000639s&#160;&#160;&#160;&#160; 40.9&#160;&#160; 1563.9
</I>&gt;<i> 
</I>&gt;<i> rsa 4096 bits 0.166667s 0.002321s&#160;&#160;&#160;&#160;&#160; 6.0&#160;&#160;&#160; 430.9
</I>&gt;<i> 
</I>&gt;<i> Here is the downloaded binary from 
</I>&gt;<i> <A HREF="https://kb.firedaemon.com/support/solutions/articles/4000121705">https://kb.firedaemon.com/support/solutions/articles/4000121705</A> 
</I>&gt;<i> &lt;<A HREF="https://kb.firedaemon.com/support/solutions/articles/4000121705">https://kb.firedaemon.com/support/solutions/articles/4000121705</A>&gt;:
</I>&gt;<i> Doing 2048 bits private rsa's for 10s: 1622 2048 bits private RSA's in 
</I>&gt;<i> 10.02s
</I>&gt;<i> 
</I>&gt;<i> Doing 2048 bits public rsa's for 10s: 72622 2048 bits public RSA's in 10.00s
</I>&gt;<i> 
</I>&gt;<i> Doing 4096 bits private rsa's for 10s: 255 4096 bits private RSA's in 10.03s
</I>&gt;<i> 
</I>&gt;<i> Doing 4096 bits public rsa's for 10s: 18976 4096 bits public RSA's in 10.00s
</I>&gt;<i> 
</I>&gt;<i> OpenSSL 1.1.1j-dev&#160; xx XXX xxxx
</I>&gt;<i> 
</I>&gt;<i> built on: Wed Jan&#160; 6 11:11:12 2021 UTC
</I>&gt;<i> 
</I>&gt;<i> options:bn(64,64) rc4(int) des(long) aes(partial) idea(int) blowfish(ptr)
</I>&gt;<i> 
</I>&gt;<i> compiler: cl /Zi /Fdossl_static.pdb /Gs0 /GF /Gy /MD /W3 /wd4090 /nologo 
</I>&gt;<i> /O2 -DL_ENDIAN -DOPENSSL_PIC -DOPENSSL_NO_DEPRECATED
</I>&gt;<i> 
</I>&gt;<i>  &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; sign&#160;&#160;&#160; verify&#160;&#160;&#160; sign/s verify/s
</I>&gt;<i> 
</I>&gt;<i> rsa 2048 bits 0.006175s 0.000138s&#160;&#160;&#160; 161.9&#160;&#160; 7262.2
</I>&gt;<i> 
</I>&gt;<i> rsa 4096 bits 0.039338s 0.000527s&#160;&#160;&#160;&#160; 25.4&#160;&#160; 1897.6
</I>&gt;<i> 
</I>&gt;<i> That is a little over 4 times faster.
</I>&gt;<i> 
</I>&gt;<i> Here are my configure parameters:
</I>&gt;<i> Configure VC-WIN64A no-shared&#160; no-asm no-idea no-mdc2 no-rc5 no-ssl2 
</I>&gt;<i> no-ssl3 no-zlib no-comp no-pinshared no-ui-console 
</I>&gt;<i>  &#160;-DOPENSSL_NO_DEPRECATED --api=1.1.0
</I>&gt;<i> 
</I>&gt;<i> And their configure parameters:
</I>&gt;<i> Configure VC-WIN64Ano-asm no-ssl3 no-zlib no-comp no-ui-console 
</I>&gt;<i> --api=1.1.0 --prefix=&quot;%openssl-dst%&quot; --openssldir=ssl 
</I>&gt;<i> -DOPENSSL_NO_DEPRECATED
</I>&gt;<i> 
</I>&gt;<i> Both my build and theirs are built with Visual Studio 2015.
</I>&gt;<i> 
</I>&gt;<i> Any ideas why my build is so much slower?&#160; Is there something in my 
</I>&gt;<i> configuration that might cause this?
</I>&gt;<i> 
</I></PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013364.html">OpenSSL 1.1.1g Windows build slow rsa tests
</A></li>
	<LI>Next message: <A HREF="013369.html">OpenSSL 1.1.1g Windows build slow rsa tests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13365">[ date ]</a>
              <a href="thread.html#13365">[ thread ]</a>
              <a href="subject.html#13365">[ subject ]</a>
              <a href="author.html#13365">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
