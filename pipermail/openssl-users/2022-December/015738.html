<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> openssl-users Digest, Vol 97, Issue 13
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2022-December/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20openssl-users%20Digest%2C%20Vol%2097%2C%20Issue%2013&In-Reply-To=%3CCACTRa%3DsWNL_pj%2ByPf8uf-EyLkaoeMcZb_Rw2P5OAbSPFw2NkUA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015736.html">
   <LINK REL="Next"  HREF="015741.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>openssl-users Digest, Vol 97, Issue 13</H1>
    <B>Pierre-Luc Boily</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20openssl-users%20Digest%2C%20Vol%2097%2C%20Issue%2013&In-Reply-To=%3CCACTRa%3DsWNL_pj%2ByPf8uf-EyLkaoeMcZb_Rw2P5OAbSPFw2NkUA%40mail.gmail.com%3E"
       TITLE="openssl-users Digest, Vol 97, Issue 13">pierreluc.boily at gmail.com
       </A><BR>
    <I>Sun Dec 18 01:47:43 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015736.html">How to fix &quot;OpenSSL failed - error:0A000086:SSL routines::certificate verify failed&quot;
</A></li>
        <LI>Next message (by thread): <A HREF="015741.html">undefined reference to `__atomic_is_lock_free'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15738">[ date ]</a>
              <a href="thread.html#15738">[ thread ]</a>
              <a href="subject.html#15738">[ subject ]</a>
              <a href="author.html#15738">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello M.Dukhovni,

Thank you for your reply.  FYI, you missed an email I sent earlier
yesterday,  I mistakenly replied only to M. Wojcik instead of the openssl
mailing list.  I re-sent the email to the group. In the mail, I dug deeper
in the code and added more information.

In your email, you told me

*But it does not confirm that the server sent a &quot;full&quot; certificate chain*


The screenshot below shows the chrome address bar of my React front end web
page.  The server is https, and I added the CA on the Trusted Root
Certification Authorities store.  It says that my connection is secured.
Does it sound OK ?

[image: image.png]

*It also does not confirm that you've set the correct peer hostname in the
&gt;<i> OpenSSL case*
</I>

I created a CA-Signed certificate for my dev sites and I used a SAN :

authorityKeyIdentifier=keyid,issuer
basicConstraints=CA:FALSE
keyUsage = digitalSignature, nonRepudiation, keyEncipherment,
dataEncipherment
subjectAltName = @alt_names

[alt_names]
DNS.1 = localhost
IP.1 = 192.168.230.138
IP.2 = 127.0.0.1




 By the way, all of this is for demo/prototype purposes.  I am fully aware
that when we will be ready to go on production, we will have to have a
better understanding of SSL.  Our first prototype iteration is to
demonstrate the feasibility to have a web page communicate with our speech
system on Windows platform using WebRTC.  And WebRTC is available only with
secure connection.

Thank you for reading all of this and thank you for your patience, it is
really appreciated.

Pierre-Luc Boily

Le sam. 17 d&#233;c. 2022, &#224; 07 h 00, &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-request at openssl.org</A>&gt; a
&#233;crit :

&gt;<i> Send openssl-users mailing list submissions to
</I>&gt;<i>         <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>
</I>&gt;<i>
</I>&gt;<i> To subscribe or unsubscribe via the World Wide Web, visit
</I>&gt;<i>         <A HREF="../../../mailman/listinfo/openssl-users.html">https://mta.openssl.org/mailman/listinfo/openssl-users</A>
</I>&gt;<i> or, via email, send a message with subject or body 'help' to
</I>&gt;<i>         <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-request at openssl.org</A>
</I>&gt;<i>
</I>&gt;<i> You can reach the person managing the list at
</I>&gt;<i>         <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-owner at openssl.org</A>
</I>&gt;<i>
</I>&gt;<i> When replying, please edit your Subject line so it is more specific
</I>&gt;<i> than &quot;Re: Contents of openssl-users digest...&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Today's Topics:
</I>&gt;<i>
</I>&gt;<i>    1. Re: How to fix &quot;OpenSSL failed - error:0A000086:SSL
</I>&gt;<i>       routines::certificate verify failed&quot; (Viktor Dukhovni)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 1
</I>&gt;<i> Date: Fri, 16 Dec 2022 18:38:10 -0500
</I>&gt;<i> From: Viktor Dukhovni &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at dukhovni.org</A>&gt;
</I>&gt;<i> To: <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>
</I>&gt;<i> Subject: Re: How to fix &quot;OpenSSL failed - error:0A000086:SSL
</I>&gt;<i>         routines::certificate verify failed&quot;
</I>&gt;<i> Message-ID: &lt;Y50BYt6lEZjc9/<A HREF="../../../mailman/listinfo/openssl-users.html">LR at straasha.imrryr.org</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=us-ascii
</I>&gt;<i>
</I>&gt;<i> On Fri, Dec 16, 2022 at 05:07:51PM -0500, Pierre-Luc Boily wrote:
</I>&gt;<i>
</I>&gt;<i> &gt;    1. I have a React front end using wss to communicate to my https
</I>&gt;<i> nodejs
</I>&gt;<i> &gt;    server. *It works -&gt;* *This confirms that my key and certificate are
</I>&gt;<i> &gt;    valid.*
</I>&gt;<i>
</I>&gt;<i> But it does not confirm that the server sent a &quot;full&quot; certificate chain,
</I>&gt;<i> with all the required intermediate certificates.  It also does not
</I>&gt;<i> confirm that you've set the correct peer hostname in the OpenSSL case
</I>&gt;<i> (if you don't set the hostname at all, your connection is insecure).
</I>&gt;<i>
</I>&gt;<i> &gt; So, I had to dig into the OpenSSL code and I found where the error is
</I>&gt;<i> &gt; triggered, see code below.  In my case *s-&gt;verify_mode* is equal to
</I>&gt;<i> &gt; *SSL_VERIFY_PEER* and *i* equal to *0* and I don't know if those values
</I>&gt;<i> are
</I>&gt;<i> &gt; OK or not.
</I>&gt;<i>
</I>&gt;<i> OpenSSL failed to validat the certificate chain, it could be missing
</I>&gt;<i> intermediate certificates (from the server), or the wrong expected peer
</I>&gt;<i> hostname specified on the client end.  It could also be related to SNI,
</I>&gt;<i> some servers return different certificates depending on what SNI name
</I>&gt;<i> is signalled by the client.
</I>&gt;<i>
</I>&gt;<i> So double-check that the server certificate chain is complete (includes
</I>&gt;<i> all intermediate CA certificates) optionally apart from a root CA (trust
</I>&gt;<i> anchor) configured on the client.
</I>&gt;<i>
</I>&gt;<i> Then ensure that the client application correctly sets the SNI extension
</I>&gt;<i> and the expected peer hostname to check in the server certificate.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>     Viktor.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Subject: Digest Footer
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> openssl-users mailing list
</I>&gt;<i> <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>
</I>&gt;<i> <A HREF="../../../mailman/listinfo/openssl-users.html">https://mta.openssl.org/mailman/listinfo/openssl-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> End of openssl-users Digest, Vol 97, Issue 13
</I>&gt;<i> *********************************************
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20221217/68131cfd/attachment.htm">https://mta.openssl.org/pipermail/openssl-users/attachments/20221217/68131cfd/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 5000 bytes
Desc: not available
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20221217/68131cfd/attachment.png">https://mta.openssl.org/pipermail/openssl-users/attachments/20221217/68131cfd/attachment.png</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015736.html">How to fix &quot;OpenSSL failed - error:0A000086:SSL routines::certificate verify failed&quot;
</A></li>
	<LI>Next message (by thread): <A HREF="015741.html">undefined reference to `__atomic_is_lock_free'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15738">[ date ]</a>
              <a href="thread.html#15738">[ thread ]</a>
              <a href="subject.html#15738">[ subject ]</a>
              <a href="author.html#15738">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
