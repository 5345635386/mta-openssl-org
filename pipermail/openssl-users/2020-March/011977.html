<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> How to cleanup CRL memory used after SSL(OpenSSL) handshake has completed?
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2020-March/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20How%20to%20cleanup%20CRL%20memory%20used%20after%20SSL%28OpenSSL%29%20handshake%20has%0A%20completed%3F&In-Reply-To=%3C1583464406682-0.post%40n7.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011978.html">
   <LINK REL="Next"  HREF="011980.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>How to cleanup CRL memory used after SSL(OpenSSL) handshake has completed?</H1>
    <B>Hyer Low</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20How%20to%20cleanup%20CRL%20memory%20used%20after%20SSL%28OpenSSL%29%20handshake%20has%0A%20completed%3F&In-Reply-To=%3C1583464406682-0.post%40n7.nabble.com%3E"
       TITLE="How to cleanup CRL memory used after SSL(OpenSSL) handshake has completed?">kheemen at hotmail.com
       </A><BR>
    <I>Fri Mar  6 03:13:26 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="011978.html">Issue with v1.1.1 in CentOS 8 regarding OPENSSL_CONF
</A></li>
        <LI>Next message: <A HREF="011980.html">How to cleanup CRL memory used after SSL(OpenSSL) handshake has completed?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11977">[ date ]</a>
              <a href="thread.html#11977">[ thread ]</a>
              <a href="subject.html#11977">[ subject ]</a>
              <a href="author.html#11977">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm using *X509_load_cert_crl_file*(openssl) to load the CRL file into the
CTX and create SSL for ssl_accept handshake. For each SSL connection that
has CRL file(600KB) loaded used up 10 times memory more than SSL connection
that doesn't load CRL.

The system is having &gt;300 ports that serving TLS for 300 different config,
where there will be 300 different CTX created where each CTX will only serve
only 1 TLS connection. That has use up most of the system memory.

If the CTX is only used during the handshake, how to force the CTX to be
cleanup, or at least cleanup the CRL/cert store in CTX, after the handshake
completed?

To optimize the server memory, can I use *SSL_CTX_set_cert_store(ssl-&gt;ctx,
X509_STORE_new())* to force all X509_store to be cleanup after handshake?
Will there be any side effect?

/*OCSP is not an option in the server/



--
Sent from: <A HREF="http://openssl.6102.n7.nabble.com/OpenSSL-User-f3.html">http://openssl.6102.n7.nabble.com/OpenSSL-User-f3.html</A>
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011978.html">Issue with v1.1.1 in CentOS 8 regarding OPENSSL_CONF
</A></li>
	<LI>Next message: <A HREF="011980.html">How to cleanup CRL memory used after SSL(OpenSSL) handshake has completed?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11977">[ date ]</a>
              <a href="thread.html#11977">[ thread ]</a>
              <a href="subject.html#11977">[ subject ]</a>
              <a href="author.html#11977">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
