<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Using SSL_CTX_set_min_proto_version
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2021-April/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Using%20SSL_CTX_set_min_proto_version&In-Reply-To=%3C8706c885-a103-7678-4bee-e041b273f18e%40openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013653.html">
   <LINK REL="Next"  HREF="013649.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Using SSL_CTX_set_min_proto_version</H1>
    <B>Matt Caswell</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Using%20SSL_CTX_set_min_proto_version&In-Reply-To=%3C8706c885-a103-7678-4bee-e041b273f18e%40openssl.org%3E"
       TITLE="Using SSL_CTX_set_min_proto_version">matt at openssl.org
       </A><BR>
    <I>Wed Apr  7 14:52:35 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="013653.html">Using SSL_CTX_set_min_proto_version
</A></li>
        <LI>Next message: <A HREF="013649.html">How to dump all certificates from a file?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13654">[ date ]</a>
              <a href="thread.html#13654">[ thread ]</a>
              <a href="subject.html#13654">[ subject ]</a>
              <a href="author.html#13654">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On 07/04/2021 15:22, Tamara Kogan via openssl-users wrote:
&gt;<i> I have not found any confirmation in TLS specs that the &#8220;record layer&#8221; 
</I>&gt;<i> version must be 1.0.
</I>
I did not mean to imply that the specs say that the record layer version 
*must* be 1.0. Only that that is what OpenSSL *does*.

In fact the earlier versions of the SSL/TLS specs were quite ambiguous 
and unclear on this matter. It is partly for this reason and partly 
because of a proliferation a buggy server implementations that TLS 
version negotiation became the mess that it is today.

The current OpenSSL behaviour was chosen as a result of trying to go 
with the behaviour that gives the maximum interoperability whilst being 
entirely consistent with the specs.

The TLSv1.2 RFC was more explicit about what is allowed for the record 
layer version in the ClientHello message that the earlier versions:

   &quot;TLS clients that wish to negotiate with older servers MAY send any
    value {03,XX} as the record layer version number.  Typical values
    would be {03,00}, the lowest version number supported by the client,
    and the value of ClientHello.client_version.  No single value will
    guarantee interoperability with all old servers, but this is a
    complex topic beyond the scope of this document.&quot;


TLSv1.3 says something different about it:

    &quot;legacy_record_version:  MUST be set to 0x0303 for all records
     generated by a TLS 1.3 implementation other than an initial
     ClientHello (i.e., one not generated after a HelloRetryRequest),
     where it MAY also be 0x0301 for compatibility purposes.  This
     field is deprecated and MUST be ignored for all purposes.
     Previous versions of TLS would use other values in this field
     under some circumstances.&quot;


&gt;<i> Our client failed to connect to a mail server when the server changed 
</I>&gt;<i> settings and limited &#160;TLS versions to &#160;1.2 only. The server parsed the 
</I>&gt;<i> first three bytes of ClientHello, detected 1.0 version and closed the 
</I>&gt;<i> connection.
</I>
Then, IMO, this server is buggy and not consistent with the TLSv1.2 spec.

Matt

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013653.html">Using SSL_CTX_set_min_proto_version
</A></li>
	<LI>Next message: <A HREF="013649.html">How to dump all certificates from a file?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13654">[ date ]</a>
              <a href="thread.html#13654">[ thread ]</a>
              <a href="subject.html#13654">[ subject ]</a>
              <a href="author.html#13654">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
