<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Openssl seems to inspects application data?
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2024-March/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Openssl%20seems%20to%20inspects%20application%20data%3F&In-Reply-To=%3CCAJbOq173tSWTRK7S3LC4V65UuaTq8opnO4FstwM0x_4-ByU9%3Dw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017064.html">
   <LINK REL="Next"  HREF="017066.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Openssl seems to inspects application data?</H1>
    <B>Neil Horman</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Openssl%20seems%20to%20inspects%20application%20data%3F&In-Reply-To=%3CCAJbOq173tSWTRK7S3LC4V65UuaTq8opnO4FstwM0x_4-ByU9%3Dw%40mail.gmail.com%3E"
       TITLE="Openssl seems to inspects application data?">nhorman at openssl.org
       </A><BR>
    <I>Tue Mar 26 17:55:25 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017064.html">Openssl seems to inspects application data?
</A></li>
        <LI>Next message (by thread): <A HREF="017066.html">Openssl seems to inspects application data?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17065">[ date ]</a>
              <a href="thread.html#17065">[ thread ]</a>
              <a href="subject.html#17065">[ subject ]</a>
              <a href="author.html#17065">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What library call are you getting that error in response to?  If you
believe that this is coming from some attempt to interpret application data
(which you are correct, it shouldn't be, unless the application auth
protocol is somehow getting aliased as a tls control message of some sort),
then I would, after the handshake, clear the error stack, and check it
after a call from SSL_read returns.

On Tue, Mar 26, 2024 at 1:38&#8239;PM Kreissl, Jochen &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">Jochen.Kreissl at vector.com</A>&gt;
wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I am using openssl (3.2) in an application.
</I>&gt;<i>
</I>&gt;<i> Handshake works just fine but I get a very weird behavior when I receive a
</I>&gt;<i> big certificate chain inside application data (TLS 1.3 but NOT using
</I>&gt;<i> Post-Handshake Auth, this is some level-7 auth protocol on top of tls).
</I>&gt;<i>
</I>&gt;<i> The openssl error I get is error:0308010C:digital envelope
</I>&gt;<i> routines::unsupported
</I>&gt;<i>
</I>&gt;<i> Which &#8230; seems to indicate that openssl is trying (and failing) to
</I>&gt;<i> interpret the certificate chain&#8230;?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I really don&#8217;t understand what is going on.
</I>&gt;<i>
</I>&gt;<i> I thought openssl would treat any application data sent using SSL_write following
</I>&gt;<i> a completed handshake would be opaque for openssl &#8211; because why would it
</I>&gt;<i> look inside and try to parse something?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Does anyone have an explanation or have encountered something similar?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards
</I>&gt;<i>
</I>&gt;<i> Jochen
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://mta.openssl.org/pipermail/openssl-users/attachments/20240326/f757b79e/attachment.htm">https://mta.openssl.org/pipermail/openssl-users/attachments/20240326/f757b79e/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017064.html">Openssl seems to inspects application data?
</A></li>
	<LI>Next message (by thread): <A HREF="017066.html">Openssl seems to inspects application data?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17065">[ date ]</a>
              <a href="thread.html#17065">[ thread ]</a>
              <a href="subject.html#17065">[ subject ]</a>
              <a href="author.html#17065">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
