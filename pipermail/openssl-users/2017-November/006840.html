<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] Troubleshooting SSL connections
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2017-November/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Troubleshooting%20SSL%20connections&In-Reply-To=%3C061905cd-82b5-ddff-31b0-0e9b9899ac30%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006837.html">
   <LINK REL="Next"  HREF="006842.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] Troubleshooting SSL connections</H1>
    <B>Paul Greene</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20Troubleshooting%20SSL%20connections&In-Reply-To=%3C061905cd-82b5-ddff-31b0-0e9b9899ac30%40gmail.com%3E"
       TITLE="[openssl-users] Troubleshooting SSL connections">paul.greene.va at gmail.com
       </A><BR>
    <I>Thu Nov  2 14:23:49 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="006837.html">[openssl-users] SSL_write &amp; SSL_read speed optimization on embedded	platform
</A></li>
        <LI>Next message: <A HREF="006842.html">[openssl-users] Troubleshooting SSL connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6840">[ date ]</a>
              <a href="thread.html#6840">[ thread ]</a>
              <a href="subject.html#6840">[ subject ]</a>
              <a href="author.html#6840">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello All,

I've got two servers that need to communicate with each other using SSL. 
The applications that are supposed to talk to each other are custom in 
house applications.

When I try to connect to the upstream server, you can see the initial 
connection established - &quot;Connecting to &quot;&lt;upstream server&gt;&lt;ip 
address&gt;&quot;:8443 ... connected&quot;

Then you get &quot;Initiating SSL handshake. SSL handshake failed. Closed fd 
3. Unable to establish SSL connection&quot;

The network path between the two servers is rather convoluted - the IP 
address of my server gets NATed at least twice, it passes through a 
couple of different firewalls, proxy servers, and load balancers. The 
upstream server is on a public IP address, but the path to get there is 
an internal network that doesn't hit the public internet directly.

As a test with the application administrator, I cloned my server and 
moved the cloned copy (vmware servers) to a public IP address and 
attempted the connection from there, and it worked without an issue. The 
connection was established and it started polling the upstream server 
the way it was supposed to. That should indicate that there isn't an 
issue with either the server I'm managing or the upstream server, and 
the problem must be somewhere in the network in between. (the upstream 
server has been up and running for at least a year, so I'm pretty sure 
there is no issue with their server itself)

There's three different tech support groups that I have to deal with to 
troubleshoot this issue. They all have monitored the traffic and seen 
the initial connection being established, so they believe there is 
nothing on their side blocking the traffic, but no one can determine why 
the SSL connection keeps failing. But something, somewhere in that 
network path is messing with the network stream when it comes to 
processing the SSL packets.

Sorry this post is rather convoluted and long winded - what I'm hoping 
is that someone might suggest what might be happening here that is 
messing with the connections (because this is an openssl list and the 
problem is related to failing ssl connections). I don't manage or have 
control over any of the network devices in between, so all I can do is 
suggest something &quot;out of the box&quot; that they might not have thought of 
before.

Thanks,

Paul

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006837.html">[openssl-users] SSL_write &amp; SSL_read speed optimization on embedded	platform
</A></li>
	<LI>Next message: <A HREF="006842.html">[openssl-users] Troubleshooting SSL connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6840">[ date ]</a>
              <a href="thread.html#6840">[ thread ]</a>
              <a href="subject.html#6840">[ subject ]</a>
              <a href="author.html#6840">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
