<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] SSL_read() = -1 and SSL_ERROR_SYSCALL,	with mem BIO's
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2017-May/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20SSL_read%28%29%20%3D%20-1%20and%20SSL_ERROR_SYSCALL%2C%0A%09with%20mem%20BIO%27s&In-Reply-To=%3C88a3617f-8be7-cb9b-c397-ba9aa92e1e46%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005871.html">
   <LINK REL="Next"  HREF="005860.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] SSL_read() = -1 and SSL_ERROR_SYSCALL,	with mem BIO's</H1>
    <B>Ian Gilmour</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20SSL_read%28%29%20%3D%20-1%20and%20SSL_ERROR_SYSCALL%2C%0A%09with%20mem%20BIO%27s&In-Reply-To=%3C88a3617f-8be7-cb9b-c397-ba9aa92e1e46%40gmail.com%3E"
       TITLE="[openssl-users] SSL_read() = -1 and SSL_ERROR_SYSCALL,	with mem BIO's">ian.gilmour.x at gmail.com
       </A><BR>
    <I>Fri May 19 11:02:50 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="005871.html">[openssl-users] Question about fetching client ciphers
</A></li>
        <LI>Next message: <A HREF="005860.html">[openssl-users] automating my CA
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5859">[ date ]</a>
              <a href="thread.html#5859">[ thread ]</a>
              <a href="subject.html#5859">[ subject ]</a>
              <a href="author.html#5859">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm using a 3rd party library that maintains a TLS connection to a 
server using mem BIO's and in which, usually under load, SSL_read() 
occasionally returns -1, the SSL_get_error() returns SSL_ERROR_SYSCALL 
and ERR_get_error() returns 0 (errno is 0). Under these conditions the 
original code closes the existing connection and a few seconds later 
reopens a new connection to the server.

I'd like to try and avoid these short offline periods if possible. When 
the system is under load I'm seeing this error occur every few minutes.

As a test I modified the code to not close the connection on this 
specific error condition.

With this mod in place and the system under load, the connection appears 
to stay up for hours rather than minutes, with no adverse affects that I 
can see.

But is it valid to do this? Or is the fact that I'm seeing this error so 
frequently an indication of a problem elsewhere in the code?

Thanks in advance,

Ian G

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005871.html">[openssl-users] Question about fetching client ciphers
</A></li>
	<LI>Next message: <A HREF="005860.html">[openssl-users] automating my CA
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5859">[ date ]</a>
              <a href="thread.html#5859">[ thread ]</a>
              <a href="subject.html#5859">[ subject ]</a>
              <a href="author.html#5859">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
