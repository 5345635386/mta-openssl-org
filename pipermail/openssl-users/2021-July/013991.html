<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> SSL_connect with TLS 1.3 and client Certificates
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2021-July/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20SSL_connect%20with%20TLS%201.3%20and%20client%20Certificates&In-Reply-To=%3Cdff90fc6-edce-c244-e723-107b07470919%40openssl.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013980.html">
   <LINK REL="Next"  HREF="013992.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>SSL_connect with TLS 1.3 and client Certificates</H1>
    <B>Matt Caswell</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20SSL_connect%20with%20TLS%201.3%20and%20client%20Certificates&In-Reply-To=%3Cdff90fc6-edce-c244-e723-107b07470919%40openssl.org%3E"
       TITLE="SSL_connect with TLS 1.3 and client Certificates">matt at openssl.org
       </A><BR>
    <I>Wed Jul 14 11:31:09 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="013980.html">SSL_connect with TLS 1.3 and client Certificates
</A></li>
        <LI>Next message: <A HREF="013992.html">SSL_connect with TLS 1.3 and client Certificates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13991">[ date ]</a>
              <a href="thread.html#13991">[ thread ]</a>
              <a href="subject.html#13991">[ subject ]</a>
              <a href="author.html#13991">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On 13/07/2021 19:44, Christian Schmidt wrote:
&gt;<i> Hello all,
</I>&gt;<i> 
</I>&gt;<i> I am currently trying to build both client and server of an application
</I>&gt;<i> that uses TLS 1.3 and mutual authentication using certificates. The
</I>&gt;<i> application works so far - I can establish connections, certificates are
</I>&gt;<i> verified, data is successfully transmitted, etc.
</I>&gt;<i> 
</I>&gt;<i> However, I have an issue, or maybe two.
</I>&gt;<i> 
</I>&gt;<i> 1. SSL_connect returns successfully before the client certificate is
</I>&gt;<i> sent from the client to the server. The client certificate is only sent
</I>&gt;<i> on the first SSL_write_ex with &gt; 0 bytes, and as such, at this point the
</I>&gt;<i> server can generate SSL alerts like access denied, etc.
</I>
TLSv1.3 supports two types of certificate request. It can occur during 
the initial handshake, or it can occur as a post-handshake request. It 
sounds like you are doing the latter, but you want the former. Is that 
correct?

What are you doing in your code to request the certificate from the client?

Matt
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013980.html">SSL_connect with TLS 1.3 and client Certificates
</A></li>
	<LI>Next message: <A HREF="013992.html">SSL_connect with TLS 1.3 and client Certificates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13991">[ date ]</a>
              <a href="thread.html#13991">[ thread ]</a>
              <a href="subject.html#13991">[ subject ]</a>
              <a href="author.html#13991">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
