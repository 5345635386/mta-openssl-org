<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> SSL_connect with TLS 1.3 and client Certificates
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2021-July/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20SSL_connect%20with%20TLS%201.3%20and%20client%20Certificates&In-Reply-To=%3Cc68ca97a-1afe-7a23-7125-4c337681477b%40digadd.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013990.html">
   <LINK REL="Next"  HREF="013991.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>SSL_connect with TLS 1.3 and client Certificates</H1>
    <B>Christian Schmidt</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20SSL_connect%20with%20TLS%201.3%20and%20client%20Certificates&In-Reply-To=%3Cc68ca97a-1afe-7a23-7125-4c337681477b%40digadd.de%3E"
       TITLE="SSL_connect with TLS 1.3 and client Certificates">schmidt at digadd.de
       </A><BR>
    <I>Tue Jul 13 18:44:11 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="013990.html">EVP_MAC_init - specify the hash algorithm
</A></li>
        <LI>Next message: <A HREF="013991.html">SSL_connect with TLS 1.3 and client Certificates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13980">[ date ]</a>
              <a href="thread.html#13980">[ thread ]</a>
              <a href="subject.html#13980">[ subject ]</a>
              <a href="author.html#13980">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

I am currently trying to build both client and server of an application
that uses TLS 1.3 and mutual authentication using certificates. The
application works so far - I can establish connections, certificates are
verified, data is successfully transmitted, etc.

However, I have an issue, or maybe two.

1. SSL_connect returns successfully before the client certificate is
sent from the client to the server. The client certificate is only sent
on the first SSL_write_ex with &gt; 0 bytes, and as such, at this point the
server can generate SSL alerts like access denied, etc.

2. When trying to benchmark latency on the application, the first
roundtrip is extended by the client certificate verification.

Is there any way I can complete the handshake, and thus validate the
full connection, without sending data?

I must say that even after reading RFC8446 I am not sure if there is a
positive confirmation after the client certificate is sent, so I am not
sure if what I am asking for is even possible.

Best regards,
Chris
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013990.html">EVP_MAC_init - specify the hash algorithm
</A></li>
	<LI>Next message: <A HREF="013991.html">SSL_connect with TLS 1.3 and client Certificates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13980">[ date ]</a>
              <a href="thread.html#13980">[ thread ]</a>
              <a href="subject.html#13980">[ subject ]</a>
              <a href="author.html#13980">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
