<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Opaque structures - Cant access buf_len variable from evp_cipher_ctx_st
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2019-May/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Opaque%20structures%20-%20Cant%20access%20buf_len%20variable%20from%0A%20evp_cipher_ctx_st&In-Reply-To=%3CCADMeakCMNMOULXvWst2GsSFmU34LAeABQ05r2XQosqQ7%2BdEqXg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010539.html">
   <LINK REL="Next"  HREF="010540.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Opaque structures - Cant access buf_len variable from evp_cipher_ctx_st</H1>
    <B>Pedro Lopes</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Opaque%20structures%20-%20Cant%20access%20buf_len%20variable%20from%0A%20evp_cipher_ctx_st&In-Reply-To=%3CCADMeakCMNMOULXvWst2GsSFmU34LAeABQ05r2XQosqQ7%2BdEqXg%40mail.gmail.com%3E"
       TITLE="Opaque structures - Cant access buf_len variable from evp_cipher_ctx_st">pedroterrosolopes at gmail.com
       </A><BR>
    <I>Thu May 23 10:58:49 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="010539.html">Compiling openssl executable as static binary
</A></li>
        <LI>Next message: <A HREF="010540.html">Using openssl with embedded systems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10537">[ date ]</a>
              <a href="thread.html#10537">[ thread ]</a>
              <a href="subject.html#10537">[ subject ]</a>
              <a href="author.html#10537">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good morning,

I'd like to know how to get buffer length from cipher structures since 1.1
version.

I'm using that variable member to know what should be the required length
if something gets wrong and return to the caller. Snippet of my source code:

DecryptUpdate(unsigned char* pEncryptedPart, unsigned long int
ulEncryptedPartLen,
unsigned char* pPart, unsigned long int *pulPartLen){

unsigned long required_rest = (ctx.buf_len + ulEncryptedPartLen) %
EVP_CIPHER_block_size(mCipher);
unsigned long required_len = ctx.buf_len + ulEncryptedPartLen -
required_rest;

if (pPart == NULL_PTR || *pulPartLen &lt; required_len)
{
*pulPartLen = required_len;
return pPart == NULL_PTR  ? CKR_OK : CKR_BUFFER_TOO_SMALL;
}
...
}

-- 
Kind Regards,
Pedro Lopes
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://mta.openssl.org/pipermail/openssl-users/attachments/20190523/0be7cad7/attachment-0001.html">http://mta.openssl.org/pipermail/openssl-users/attachments/20190523/0be7cad7/attachment-0001.html</A>&gt;
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010539.html">Compiling openssl executable as static binary
</A></li>
	<LI>Next message: <A HREF="010540.html">Using openssl with embedded systems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10537">[ date ]</a>
              <a href="thread.html#10537">[ thread ]</a>
              <a href="subject.html#10537">[ subject ]</a>
              <a href="author.html#10537">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
