<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Application linking to both libcrypto.so.1.0.0 and libcrypto.so.1.1
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2019-May/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Application%20linking%20to%20both%20libcrypto.so.1.0.0%20and%0A%20libcrypto.so.1.1&In-Reply-To=%3CBYAPR18MB29185D910DD6FCC17B2CB0B3F91F0%40BYAPR18MB2918.namprd18.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010578.html">
   <LINK REL="Next"  HREF="010587.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Application linking to both libcrypto.so.1.0.0 and libcrypto.so.1.1</H1>
    <B>Michael Wojcik</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20Application%20linking%20to%20both%20libcrypto.so.1.0.0%20and%0A%20libcrypto.so.1.1&In-Reply-To=%3CBYAPR18MB29185D910DD6FCC17B2CB0B3F91F0%40BYAPR18MB2918.namprd18.prod.outlook.com%3E"
       TITLE="Application linking to both libcrypto.so.1.0.0 and libcrypto.so.1.1">Michael.Wojcik at microfocus.com
       </A><BR>
    <I>Wed May 29 13:43:24 UTC 2019</I>
    <P><UL>
        <LI>Previous message: <A HREF="010578.html">Application linking to both libcrypto.so.1.0.0 and libcrypto.so.1.1
</A></li>
        <LI>Next message: <A HREF="010587.html">Application linking to both libcrypto.so.1.0.0 and libcrypto.so.1.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10580">[ date ]</a>
              <a href="thread.html#10580">[ thread ]</a>
              <a href="subject.html#10580">[ subject ]</a>
              <a href="author.html#10580">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> From: Chethan Kumar [mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">Chethan.Kumar at toshiba-tsip.com</A>]
</I>&gt;<i> Sent: Wednesday, May 29, 2019 04:07
</I>&gt;<i>
</I>&gt;<i> Below is the output from ldd on application.
</I>&gt;<i> Seriously I didn't knew application uses these many libraries[Knew only the
</I>&gt;<i> problem].
</I>&gt;<i>         linux-gate.so.1 (0xf76fc000)
</I>&gt;<i>         libpam.so.0 =&gt; /lib/i386-linux-gnu/libpam.so.0 (0xf6a63000)
</I>&gt;<i>         libldap-2.4.so.2 =&gt; /home/SYSROM_SRC/build/release/lib/libldap-
</I>&gt;<i> 2.4.so.2 (0xf6a29000)
</I>&gt;<i>         libssl.so.1.1 =&gt; /home/SYSROM_SRC/build/release/lib/libssl.so.1.1
</I>&gt;<i> (0xf6990000)
</I>&gt;<i>         libpthread.so.0 =&gt; /lib/i386-linux-gnu/libpthread.so.0 (0xf6972000)
</I>&gt;<i>         libsqlite3.so.0 =&gt; /usr/lib/i386-linux-gnu/libsqlite3.so.0
</I>&gt;<i> (0xf689c000)
</I>&gt;<i>         libcrypto.so.1.1 =&gt;
</I>&gt;<i> /home/SYSROM_SRC/build/release/lib/libcrypto.so.1.1 (0xf65af000)
</I>&gt;<i>         libk5crypto.so.3 =&gt; /usr/lib/i386-linux-gnu/libk5crypto.so.3
</I>&gt;<i> (0xf657e000)
</I>&gt;<i>         libresolv.so.2 =&gt; /lib/i386-linux-gnu/libresolv.so.2 (0xf6566000)
</I>&gt;<i>         libext2fs.so.2 =&gt; /lib/i386-linux-gnu/libext2fs.so.2 (0xf6516000)
</I>&gt;<i>         libuuid.so.1 =&gt; /lib/i386-linux-gnu/libuuid.so.1 (0xf6511000)
</I>&gt;<i>         libdns.so.69 =&gt; /home/SYSROM_SRC/build/release/lib/libdns.so.69
</I>&gt;<i> (0xf635c000)
</I>&gt;<i>         libisc.so.62 =&gt; /home/SYSROM_SRC/build/release/lib/libisc.so.62
</I>&gt;<i> (0xf62e7000)
</I>&gt;<i>         librt.so.1 =&gt; /lib/i386-linux-gnu/librt.so.1 (0xf62de000)
</I>&gt;<i>         libkrb5support.so.0 =&gt; /usr/lib/i386-linux-gnu/libkrb5support.so.0
</I>&gt;<i> (0xf62d2000)
</I>&gt;<i>         libkrb5.so.25 =&gt; /home/SYSROM_SRC/build/release/lib/libkrb5.so.25
</I>&gt;<i> (0xf6259000)
</I>&gt;<i>         libgssapi.so.2 =&gt; /home/SYSROM_SRC/build/release/lib/libgssapi.so.2
</I>&gt;<i> (0xf6222000)
</I>&gt;<i>         libCryptolib.so.0 =&gt;
</I>&gt;<i> /home/SYSROM_SRC/build/release/lib/libCryptolib.so.0 (0xf6191000)
</I>&gt;<i>         libimf.so =&gt; /mfp/lib/libimf.so (0xf5dd8000)
</I>&gt;<i>         libirng.so =&gt; /usr/lib/libirng.so (0xf5c6e000)
</I>&gt;<i>         libm.so.6 =&gt; /lib/i386-linux-gnu/libm.so.6 (0xf5c1a000)
</I>&gt;<i>         libcilkrts.so.5 =&gt; /usr/lib/libcilkrts.so.5 (0xf5bec000)
</I>&gt;<i>         libstdc++.so.6 =&gt; /usr/lib/i386-linux-gnu/libstdc++.so.6 (0xf5afd000)
</I>&gt;<i>         libsvml.so =&gt; /mfp/lib/libsvml.so (0xf4bbf000)
</I>&gt;<i>         libgcc_s.so.1 =&gt; /lib/i386-linux-gnu/libgcc_s.so.1 (0xf4bab000)
</I>&gt;<i>         libdl.so.2 =&gt; /lib/i386-linux-gnu/libdl.so.2 (0xf4ba6000)
</I>&gt;<i>         libc.so.6 =&gt; /lib/i386-linux-gnu/libc.so.6 (0xf49e4000)
</I>&gt;<i>         liblber-2.4.so.2 =&gt; /home/SYSROM_SRC/build/release/lib/liblber-
</I>&gt;<i> 2.4.so.2 (0xf49d9000)
</I>&gt;<i>         libsasl2.so.3 =&gt; /home/SYSROM_SRC/build/release/lib/libsasl2.so.3
</I>&gt;<i> (0xf49a4000)
</I>&gt;<i>         /lib/i386-linux-gnu/ld-linux.so.2 (0xf76fd000)
</I>&gt;<i>         libkeyutils.so.1 =&gt; /lib/i386-linux-gnu/libkeyutils.so.1 (0xf49a0000)
</I>&gt;<i>         libcom_err.so.2 =&gt; /lib/i386-linux-gnu/libcom_err.so.2 (0xf499b000)
</I>&gt;<i>         libgssapi_krb5.so.2 =&gt; /usr/lib/i386-linux-gnu/libgssapi_krb5.so.2
</I>&gt;<i> (0xf494c000)
</I>&gt;<i>         libcom_err.so.1 =&gt; /home/SYSROM_SRC/build/release/lib/libcom_err.so.1
</I>&gt;<i> (0xf4948000)
</I>&gt;<i>         libcrypto.so.1.0.0 =&gt; /usr/lib/i386-linux-gnu/libcrypto.so.1.0.0
</I>&gt;<i> (0xf476b000)
</I>
So either the application program depends on libcrypto.so.1.0.0, or one of the preceding libraries does. Some path through the dependency graph leads to libcrypto.so.1.0.0.

&gt;<i>From the readelf output below, we see it's not the application program - that only depends on libcrypto.so.1.1. So it's one of the preceding libraries. There's a good chance it's one that comes from the OS library collection rather than a library you've built (though that's by no means certain), so let's focus on ones that aren't under /home/SYSROM_SRC.
</I>
Kerberos seems like a candidate, but a quick ldd on libk5crypto and libkrb5support doesn't show any libcrypto dependency. The same is true of libgssapi_krb5. Neither does libkeyutils.

OpenLDAP (libldap) is generally built using NSS rather than OpenSSL, so it doesn't usually link libcrypto.

None of the other OS libraries above look particularly likely to use libcrypto. So I'd suggest you use ldd on each of the libraries listed above to find out which is giving you the dependency on libcrypto.so.1.0.0. Or use LD_DEBUG to generate a loader report for your application, and work backward from that.

Writing a script to use readelf to generate a dependency graph report showing the path for each dependency is left as an exercise for the reader.

--
Michael Wojcik
Distinguished Engineer, Micro Focus



</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010578.html">Application linking to both libcrypto.so.1.0.0 and libcrypto.so.1.1
</A></li>
	<LI>Next message: <A HREF="010587.html">Application linking to both libcrypto.so.1.0.0 and libcrypto.so.1.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10580">[ date ]</a>
              <a href="thread.html#10580">[ thread ]</a>
              <a href="subject.html#10580">[ subject ]</a>
              <a href="author.html#10580">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
