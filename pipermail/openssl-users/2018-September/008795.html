<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] OpenSSL OCSP and RFC 6960
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2018-September/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20OpenSSL%20OCSP%20and%20RFC%206960&In-Reply-To=%3Cb1c6ca55-495c-c879-0add-3b6c8f59d4d1%40csdoc.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008798.html">
   <LINK REL="Next"  HREF="008796.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] OpenSSL OCSP and RFC 6960</H1>
    <B>Gena Makhomed</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20OpenSSL%20OCSP%20and%20RFC%206960&In-Reply-To=%3Cb1c6ca55-495c-c879-0add-3b6c8f59d4d1%40csdoc.com%3E"
       TITLE="[openssl-users] OpenSSL OCSP and RFC 6960">gmm at csdoc.com
       </A><BR>
    <I>Fri Sep 14 14:30:34 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="008798.html">[openssl-users] openssl 1.1.1 daily snapshots
</A></li>
        <LI>Next message: <A HREF="008796.html">[openssl-users] (no subject)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8795">[ date ]</a>
              <a href="thread.html#8795">[ thread ]</a>
              <a href="subject.html#8795">[ subject ]</a>
              <a href="author.html#8795">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello, All!

For certificates generated by &quot;Let's Encrypt Authority X3&quot;
for getting ocsp response from letsencrypt I need to use such command:

# openssl ocsp -verify_other chain.pem \
                -issuer chain.pem \
                -cert cert.pem \
                -text \
                -url <A HREF="http://ocsp.int-x3.letsencrypt.org">http://ocsp.int-x3.letsencrypt.org</A> \
                -header &quot;Host&quot; &quot;ocsp.int-x3.letsencrypt.org&quot;

===========================

If I remove '-header &quot;Host&quot; &quot;ocsp.int-x3.letsencrypt.org&quot;'
from command line I got error:

Error querying OCSP responder
140274026829712:error:27076072:OCSP routines:PARSE_HTTP_LINE1:server 
response error:ocsp_ht.c:314:Code=400,Reason=Bad Request

openssl ocsp utility does not send 'Host' header by default?
But why? Looks like this is bug.

===========================

If I remove '-verify_other chain.pem' from command line I got error:

Response Verify Failure
140272439146384:error:27069076:OCSP routines:OCSP_basic_verify:signer 
certificate not found:ocsp_vfy.c:92:

'man ocsp' tell what

        -verify_other file
            file containing additional certificates to search
            when attempting to locate the OCSP response signing
            certificate. Some responders omit the actual signer's
            certificate from the response: this option can be used
            to supply the necessary certificate in such cases.

But why I need to provide '-verify_other chain.pem'
with issuer certificate?

As I understand, RFC 6960 tell what only issuer certificate
is required for OCSP response verification.

Looks like this is bug in OpenSSL library / openssl ocsp utility.

-- 
Best regards,
  Gena
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008798.html">[openssl-users] openssl 1.1.1 daily snapshots
</A></li>
	<LI>Next message: <A HREF="008796.html">[openssl-users] (no subject)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8795">[ date ]</a>
              <a href="thread.html#8795">[ thread ]</a>
              <a href="subject.html#8795">[ subject ]</a>
              <a href="author.html#8795">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
