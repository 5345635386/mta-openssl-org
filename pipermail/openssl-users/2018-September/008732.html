<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openssl-users] OpenSSL 1.0.2p w/ FIPS 2.0.16 - Apache 2.4.29
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2018-September/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20OpenSSL%201.0.2p%20w/%20FIPS%202.0.16%20-%20Apache%202.4.29&In-Reply-To=%3C1536694045663-0.post%40n7.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008738.html">
   <LINK REL="Next"  HREF="008737.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openssl-users] OpenSSL 1.0.2p w/ FIPS 2.0.16 - Apache 2.4.29</H1>
    <B>Strife1817</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%5Bopenssl-users%5D%20OpenSSL%201.0.2p%20w/%20FIPS%202.0.16%20-%20Apache%202.4.29&In-Reply-To=%3C1536694045663-0.post%40n7.nabble.com%3E"
       TITLE="[openssl-users] OpenSSL 1.0.2p w/ FIPS 2.0.16 - Apache 2.4.29">ian.f.kelly at gmail.com
       </A><BR>
    <I>Tue Sep 11 19:27:25 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="008738.html">[openssl-users] openssl 1.1.1 and FreeBSD 11.2
</A></li>
        <LI>Next message: <A HREF="008737.html">[openssl-users] Curves and ECDHParameters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8732">[ date ]</a>
              <a href="thread.html#8732">[ thread ]</a>
              <a href="subject.html#8732">[ subject ]</a>
              <a href="author.html#8732">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Noticing that my earlier attempts to compile Apache were not FIPS compliant,
I set off to correct my error.  I found the wiki, that provides the steps
for building Apache with FIPS.  Every time that it attempts to compile the
SSL module, it dies. 

&quot;mod_ssl.c&quot;, line 41: warning: syntax error:  empty declaration 
&quot;mod_ssl.c&quot;, line 398: warning: implicit function declaration:
OPENSSL_malloc_init 
cc: acomp failed for mod_ssl.c 
*** Error code 1 
make: Fatal error: Command failed for target `mod_ssl.lo' 
Current working directory
/export/home/kellyi/Apache-2.4-Test/httpd-2.4.29/modules/ssl 
*** Error code 1 
The following command caused the error: 
otarget=`echo all-recursive|sed s/-recursive//`; \ 
list='  '; \ 
for i in $list; do \ 
    if test -d &quot;$i&quot;; then \ 
        target=&quot;$otarget&quot;; \ 
        echo &quot;Making $target in $i&quot;; \ 
        if test &quot;$i&quot; = &quot;.&quot;; then \ 
                made_local=yes; \ 
                target=&quot;local-$target&quot;; \ 
        fi; \ 
        (cd $i &amp;&amp; make $target) || exit 1; \ 
    fi; \ 
done; \ 
if test &quot;$otarget&quot; = &quot;all&quot; &amp;&amp; test -z 'libmod_ssl.la'; then \ 
    made_local=yes; \ 
fi; \ 
if test &quot;$made_local&quot; != &quot;yes&quot;; then \ 
    make &quot;local-$otarget&quot; || exit 1; \ 
fi 
make: Fatal error: Command failed for target `all-recursive' 
Current working directory
/export/home/kellyi/Apache-2.4-Test/httpd-2.4.29/modules/ssl 
*** Error code 1 
The following command caused the error: 
otarget=`echo all-recursive|sed s/-recursive//`; \ 
list='  aaa cache core database debugging filters http loggers metadata
session slotmem ssl arch/unix dav/main generators dav/fs mappers'; \ 
for i in $list; do \ 
    if test -d &quot;$i&quot;; then \ 
        target=&quot;$otarget&quot;; \ 
        echo &quot;Making $target in $i&quot;; \ 
        if test &quot;$i&quot; = &quot;.&quot;; then \ 
                made_local=yes; \ 
                target=&quot;local-$target&quot;; \ 
        fi; \ 
        (cd $i &amp;&amp; make $target) || exit 1; \ 
    fi; \ 
done; \ 
if test &quot;$otarget&quot; = &quot;all&quot; &amp;&amp; test -z ''; then \ 
    made_local=yes; \ 
fi; \ 
if test &quot;$made_local&quot; != &quot;yes&quot;; then \ 
    make &quot;local-$otarget&quot; || exit 1; \ 
fi 
make: Fatal error: Command failed for target `all-recursive' 
Current working directory
/export/home/kellyi/Apache-2.4-Test/httpd-2.4.29/modules 
*** Error code 1 
The following command caused the error: 
otarget=`echo all-recursive|sed s/-recursive//`; \ 
list='  srclib os server modules support'; \ 
for i in $list; do \ 
    if test -d &quot;$i&quot;; then \ 
        target=&quot;$otarget&quot;; \ 
        echo &quot;Making $target in $i&quot;; \ 
        if test &quot;$i&quot; = &quot;.&quot;; then \ 
                made_local=yes; \ 
                target=&quot;local-$target&quot;; \ 
        fi; \ 
        (cd $i &amp;&amp; make $target) || exit 1; \ 
    fi; \ 
done; \ 
if test &quot;$otarget&quot; = &quot;all&quot; &amp;&amp; test -z 'httpd shared-build '; then \ 
    made_local=yes; \ 
fi; \ 
if test &quot;$made_local&quot; != &quot;yes&quot;; then \ 
    make &quot;local-$otarget&quot; || exit 1; \ 
fi 
make: Fatal error: Command failed for target `all-recursive' 


However, now that I go back and look at openssl again, I see that there
issues with it, as well.  Here is the result from attempting to rebuild
openssl. 

making all in crypto... 
/usr/bin/perl ../util/mkbuildinf.pl &quot;/opt/developerstudio12.6/bin/cc -I.
-I.. -I../include  -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H
-m32 -xarch=sparc -xO5 -xstrconst -xdepend -Xa -DB_ENDIAN -DBN_DIV2W
-DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_GF2m
-I/usr/local/ssl/fips-2.0/include -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM
-DMD5_ASM -DAES_ASM -DGHASH_ASM&quot; &quot;solaris-sparcv9-cc&quot; &gt;buildinf.h 
/opt/developerstudio12.6/bin/cc -I. -I.. -I../include  -DOPENSSL_THREADS
-D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -m32 -xarch=sparc -xO5 -xstrconst
-xdepend -Xa -DB_ENDIAN -DBN_DIV2W -DOPENSSL_BN_ASM_MONT
-DOPENSSL_BN_ASM_GF2m -I/usr/local/ssl/fips-2.0/include -DSHA1_ASM
-DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DGHASH_ASM  -c  cryptlib.c 
/opt/developerstudio12.6/bin/cc -I. -I.. -I../include  -DOPENSSL_THREADS
-D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -m32 -xarch=sparc -xO5 -xstrconst
-xdepend -Xa -DB_ENDIAN -DBN_DIV2W -DOPENSSL_BN_ASM_MONT
-DOPENSSL_BN_ASM_GF2m -I/usr/local/ssl/fips-2.0/include -DSHA1_ASM
-DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DGHASH_ASM  -c  mem.c 
/opt/developerstudio12.6/bin/cc -I. -I.. -I../include  -DOPENSSL_THREADS
-D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -m32 -xarch=sparc -xO5 -xstrconst
-xdepend -Xa -DB_ENDIAN -DBN_DIV2W -DOPENSSL_BN_ASM_MONT
-DOPENSSL_BN_ASM_GF2m -I/usr/local/ssl/fips-2.0/include -DSHA1_ASM
-DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DGHASH_ASM  -c  mem_dbg.c 
/opt/developerstudio12.6/bin/cc -I. -I.. -I../include  -DOPENSSL_THREADS
-D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -m32 -xarch=sparc -xO5 -xstrconst
-xdepend -Xa -DB_ENDIAN -DBN_DIV2W -DOPENSSL_BN_ASM_MONT
-DOPENSSL_BN_ASM_GF2m -I/usr/local/ssl/fips-2.0/include -DSHA1_ASM
-DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DGHASH_ASM  -c  cversion.c 
/opt/developerstudio12.6/bin/cc -I. -I.. -I../include  -DOPENSSL_THREADS
-D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -m32 -xarch=sparc -xO5 -xstrconst
-xdepend -Xa -DB_ENDIAN -DBN_DIV2W -DOPENSSL_BN_ASM_MONT
-DOPENSSL_BN_ASM_GF2m -I/usr/local/ssl/fips-2.0/include -DSHA1_ASM
-DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DGHASH_ASM  -c  ex_data.c 
/opt/developerstudio12.6/bin/cc -I. -I.. -I../include  -DOPENSSL_THREADS
-D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -m32 -xarch=sparc -xO5 -xstrconst
-xdepend -Xa -DB_ENDIAN -DBN_DIV2W -DOPENSSL_BN_ASM_MONT
-DOPENSSL_BN_ASM_GF2m -I/usr/local/ssl/fips-2.0/include -DSHA1_ASM
-DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DGHASH_ASM  -c  cpt_err.c 
/opt/developerstudio12.6/bin/cc -I. -I.. -I../include  -DOPENSSL_THREADS
-D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -m32 -xarch=sparc -xO5 -xstrconst
-xdepend -Xa -DB_ENDIAN -DBN_DIV2W -DOPENSSL_BN_ASM_MONT
-DOPENSSL_BN_ASM_GF2m -I/usr/local/ssl/fips-2.0/include -DSHA1_ASM
-DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DGHASH_ASM  -c  ebcdic.c 
&quot;ebcdic.c&quot;, line 9: warning: empty translation unit 
/opt/developerstudio12.6/bin/cc -I. -I.. -I../include  -DOPENSSL_THREADS
-D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -m32 -xarch=sparc -xO5 -xstrconst
-xdepend -Xa -DB_ENDIAN -DBN_DIV2W -DOPENSSL_BN_ASM_MONT
-DOPENSSL_BN_ASM_GF2m -I/usr/local/ssl/fips-2.0/include -DSHA1_ASM
-DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DGHASH_ASM  -c  uid.c 
/opt/developerstudio12.6/bin/cc -I. -I.. -I../include  -DOPENSSL_THREADS
-D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -m32 -xarch=sparc -xO5 -xstrconst
-xdepend -Xa -DB_ENDIAN -DBN_DIV2W -DOPENSSL_BN_ASM_MONT
-DOPENSSL_BN_ASM_GF2m -I/usr/local/ssl/fips-2.0/include -DSHA1_ASM
-DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DGHASH_ASM  -c  o_time.c 
/opt/developerstudio12.6/bin/cc -I. -I.. -I../include  -DOPENSSL_THREADS
-D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -m32 -xarch=sparc -xO5 -xstrconst
-xdepend -Xa -DB_ENDIAN -DBN_DIV2W -DOPENSSL_BN_ASM_MONT
-DOPENSSL_BN_ASM_GF2m -I/usr/local/ssl/fips-2.0/include -DSHA1_ASM
-DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DGHASH_ASM  -c  o_str.c 
/opt/developerstudio12.6/bin/cc -I. -I.. -I../include  -DOPENSSL_THREADS
-D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -m32 -xarch=sparc -xO5 -xstrconst
-xdepend -Xa -DB_ENDIAN -DBN_DIV2W -DOPENSSL_BN_ASM_MONT
-DOPENSSL_BN_ASM_GF2m -I/usr/local/ssl/fips-2.0/include -DSHA1_ASM
-DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DGHASH_ASM  -c  o_dir.c 
/opt/developerstudio12.6/bin/cc -I. -I.. -I../include  -DOPENSSL_THREADS
-D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -m32 -xarch=sparc -xO5 -xstrconst
-xdepend -Xa -DB_ENDIAN -DBN_DIV2W -DOPENSSL_BN_ASM_MONT
-DOPENSSL_BN_ASM_GF2m -I/usr/local/ssl/fips-2.0/include -DSHA1_ASM
-DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DGHASH_ASM  -c  o_fips.c 
&quot;o_fips.c&quot;, line 61: cannot find include file: &lt;openssl/fips.h&gt;
&quot;o_fips.c&quot;, line 62: cannot find include file: &lt;openssl/fips_rand.h&gt;
&quot;o_fips.c&quot;, line 70: warning: implicit function declaration:
FIPS_module_mode 
&quot;o_fips.c&quot;, line 83: warning: implicit function declaration:
FIPS_module_mode_set 
&quot;o_fips.c&quot;, line 86: warning: implicit function declaration:
FIPS_rand_get_method 
&quot;o_fips.c&quot;, line 86: warning: improper pointer/integer combination: arg #1 
cc: acomp failed for o_fips.c 
*** Error code 2 
make: Fatal error: Command failed for target `o_fips.o' 
Current working directory /export/home/kellyi/openssl/openssl-1.0.2p/crypto 
*** Error code 1 
The following command caused the error: 
dir=crypto; target=all; if expr &quot; crypto ssl engines apps test tools &quot; : &quot;.*
$dir &quot; &gt;/dev/null 2&gt;&amp;1; then  if [ -d &quot;$dir&quot; ]; then  (    cd $dir &amp;&amp; echo
&quot;making $target in $dir...&quot; &amp;&amp;  TOP= &amp;&amp; unset TOP ${LIB+LIB} ${LIBS+LIBS}       
${INCLUDE+INCLUDE} ${INCLUDES+INCLUDES}         ${DIR+DIR} ${DIRS+DIRS}
${SRC+SRC}              ${LIBSRC+LIBSRC} ${LIBOBJ+LIBOBJ} ${ALL+ALL}   
${EXHEADER+EXHEADER} ${HEADER+HEADER}           ${GENERAL+GENERAL}
${CFLAGS+CFLAGS}             ${ASFLAGS+ASFLAGS} ${AFLAGS+AFLAGS}            
${LDCMD+LDCMD} ${LDFLAGS+LDFLAGS} ${SCRIPTS+SCRIPTS}   
${SHAREDCMD+SHAREDCMD} ${SHAREDFLAGS+SHAREDFLAGS}      
${SHARED_LIB+SHARED_LIB} ${LIBEXTRAS+LIBEXTRAS}         ${APPS+APPS} &amp;&amp; make
-e LC_ALL=C PLATFORM='solaris-sparcv9-cc' PROCESSOR=''
CC='/opt/developerstudio12.6/bin/cc' CFLAG='-DOPENSSL_THREADS -D_REENTRANT
-DDSO_DLFCN -DHAVE_DLFCN_H -m32 -xarch=sparc -xO5 -xstrconst -xdepend -Xa
-DB_ENDIAN -DBN_DIV2W -DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_GF2m
-I/usr/local/ssl/fips-2.0/include -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM
-DMD5_ASM -DAES_ASM -DGHASH_ASM'                     
AS='/opt/developerstudio12.6/bin/cc' ASFLAG='-DOPENSSL_THREADS -D_REENTRANT
-DDSO_DLFCN -DHAVE_DLFCN_H -m32 -xarch=sparc -xO5 -xstrconst -xdepend -Xa
-DB_ENDIAN -DBN_DIV2W -DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_GF2m
-I/usr/local/ssl/fips-2.0/include -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM
-DMD5_ASM -DAES_ASM -DGHASH_ASM -c'                      AR='ar  r' NM='nm'
RANLIB='/usr/ccs/bin/ranlib'         RC='windres'                                   
CROSS_COMPILE=''        PERL='/usr/bin/perl' ENGDIRS='ccgost'          
SDIRS='objects  md4 md5 sha mdc2 hmac ripemd whrlpool  des aes rc2 rc4 idea
bf cast camellia seed modes  bn ec rsa dsa ecdsa dh ecdh dso engine  buffer
bio stack lhash rand err  evp asn1 pem x509 x509v3 conf txt_db pkcs7 pkcs12
comp ocsp ui krb5  cms pqueue ts srp cmac' LIBRPATH='/usr/local/ssl/lib'   
INSTALL_PREFIX=''               INSTALLTOP='/usr/local/ssl'
OPENSSLDIR='/usr/local/ssl/ssl'     LIBDIR='lib'                           
MAKEDEPEND='$${TOP}/util/domd $${TOP} -MD makedepend' 
DEPFLAG='-DOPENSSL_NO_DEPRECATED -DOPENSSL_NO_EC_NISTP_64_GCC_128
-DOPENSSL_NO_GMP -DOPENSSL_NO_JPAKE -DOPENSSL_NO_LIBUNBOUND -DOPENSSL_NO_MD2
-DOPENSSL_NO_RC5 -DOPENSSL_NO_RFC3779 -DOPENSSL_NO_RSAX -DOPENSSL_NO_SCTP
-DOPENSSL_NO_SSL_TRACE -DOPENSSL_NO_SSL2 -DOPENSSL_NO_STORE
-DOPENSSL_NO_UNIT_TEST -DOPENSSL_NO_WEAK_SSL_CIPHERS'      
MAKEDEPPROG='makedepend'                        SHARED_LDFLAGS='-G -dy -z
text'                 KRB5_INCLUDES='' LIBKRB5=''     ZLIB_INCLUDE=''
LIBZLIB=''      EXE_EXT='' SHARED_LIBS=''       SHLIB_EXT='.so.1.0.0'
SHLIB_TARGET='solaris-shared'     PEX_LIBS='' EX_LIBS='-lsocket -lnsl -ldl'      
CPUID_OBJ='sparcv9cap.o sparccpuid.o' BN_ASM='bn-sparcv9.o sparcv9-mont.o
sparcv9a-mont.o vis3-mont.o sparct4-mont.o sparcv9-gf2m.o'    EC_ASM=''
DES_ENC='des_enc-sparc.o fcrypt_b.o dest4-sparcv9.o'         
AES_ENC='aes_core.o aes_cbc.o aes-sparcv9.o aest4-sparcv9.o'
CMLL_ENC='camellia.o cmll_misc.o cmll_cbc.o cmllt4-sparcv9.o'     
BF_ENC='bf_enc.o' CAST_ENC='c_enc.o'    RC4_ENC='rc4_enc.o rc4_skey.o'
RC5_ENC='rc5_enc.o'      SHA1_ASM_OBJ='sha1-sparcv9.o sha256-sparcv9.o
sha512-sparcv9.o'                         MD5_ASM_OBJ='md5-sparcv9.o'                    
RMD160_ASM_OBJ=''               WP_ASM_OBJ='wp_block.o'                        
MODES_ASM_OBJ='ghash-sparcv9.o'                 ENGINES_ASM_OBJ=''             
PERLASM_SCHEME='void'           FIPSLIBDIR='/usr/local/ssl/fips-2.0/lib/'                      
FIPSDIR='/usr/local/ssl/fips-2.0'                              
FIPSCANLIB=&quot;${FIPSCANLIB:-libcrypto}&quot;   THIS=${THIS:-build_crypto}
MAKEFILE=Makefile MAKEOVERRIDES= TOP=.. DIR=$dir $target  ) || exit 1;  fi; 
fi 
make: Fatal error: Command failed for target `build_crypto' 

Please respond as soon as you are able, if you are able to assist.  I need
to try to get this upgrade completed this week, because I am moving to a
different job; next week.  It will be difficult for me to be able to get
back to assist with this. 

     Thanks for your time, and attention to this. 

     Ian 



--
Sent from: <A HREF="http://openssl.6102.n7.nabble.com/OpenSSL-User-f3.html">http://openssl.6102.n7.nabble.com/OpenSSL-User-f3.html</A>
</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008738.html">[openssl-users] openssl 1.1.1 and FreeBSD 11.2
</A></li>
	<LI>Next message: <A HREF="008737.html">[openssl-users] Curves and ECDHParameters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8732">[ date ]</a>
              <a href="thread.html#8732">[ thread ]</a>
              <a href="subject.html#8732">[ subject ]</a>
              <a href="author.html#8732">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
