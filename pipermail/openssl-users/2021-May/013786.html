<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Re: I installed Openssl 1.1.1k and Ubuntu 20.04 did an upgrade and reverted it back to 1.1.1f. Usually Ubuntu upgrades don&#8217;t break it.
   </TITLE>
   <LINK REL="Index" HREF="https://mta.openssl.org/pipermail/openssl-users/2021-May/index.html" >
   <LINK REL="made" HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%3D%3FUTF-8%3FQ%3FRe%3D3a_I_installed_Openssl_1%3D2e1%3D2e1k_and_Ubuntu_20%3D2e04_d%3F%3D%0A%20%3D%3FUTF-8%3FQ%3Fid_an_upgrade_and_reverted_it_back_to_1%3D2e1%3D2e1f%3D2e_Usually_Ubunt%3F%3D%0A%20%3D%3FUTF-8%3FQ%3Fu_upgrades_don%3De2%3D80%3D99t_break_it%3D2e%3F%3D&In-Reply-To=%3C440284a1-9d3e-a08c-1225-01a283d6e2d9%40wisemo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013784.html">
   <LINK REL="Next"  HREF="013792.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Re: I installed Openssl 1.1.1k and Ubuntu 20.04 did an upgrade and reverted it back to 1.1.1f. Usually Ubuntu upgrades don&#8217;t break it.</H1>
    <B>Jakob Bohm</B> 
    <A HREF="mailto:openssl-users%40openssl.org?Subject=Re%3A%20%3D%3FUTF-8%3FQ%3FRe%3D3a_I_installed_Openssl_1%3D2e1%3D2e1k_and_Ubuntu_20%3D2e04_d%3F%3D%0A%20%3D%3FUTF-8%3FQ%3Fid_an_upgrade_and_reverted_it_back_to_1%3D2e1%3D2e1f%3D2e_Usually_Ubunt%3F%3D%0A%20%3D%3FUTF-8%3FQ%3Fu_upgrades_don%3De2%3D80%3D99t_break_it%3D2e%3F%3D&In-Reply-To=%3C440284a1-9d3e-a08c-1225-01a283d6e2d9%40wisemo.com%3E"
       TITLE="Re: I installed Openssl 1.1.1k and Ubuntu 20.04 did an upgrade and reverted it back to 1.1.1f. Usually Ubuntu upgrades don&#8217;t break it.">jb-openssl at wisemo.com
       </A><BR>
    <I>Fri May 21 20:13:47 UTC 2021</I>
    <P><UL>
        <LI>Previous message: <A HREF="013784.html">Re: I installed Openssl 1.1.1k and Ubuntu 20.04 did an upgrade and reverted it back to 1.1.1f. Usually Ubuntu upgrades don&#8217;t break it.
</A></li>
        <LI>Next message: <A HREF="013792.html">RE: I installed Openssl 1.1.1k and Ubuntu 20.04 did an upgrade and reverted it back to 1.1.1f. Usually Ubuntu upgrades don&#8217;t break it.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13786">[ date ]</a>
              <a href="thread.html#13786">[ thread ]</a>
              <a href="subject.html#13786">[ subject ]</a>
              <a href="author.html#13786">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>(Replying on list to bring this back to the public forum where others 
can help you)

On 2021-05-21 16:18, Michael McKenney wrote:
&gt;<i> It took awhile to run all these commands
</I>&gt;<i> 
</I>&gt;<i> Sorry, but you did not state what command and output indicates
</I>&gt;<i> that Ubuntu undid your upgrade, what is the output of each of
</I>&gt;<i> the following diagnostic commands (after Ubuntu apparently
</I>&gt;<i> undid your upgrade).
</I>&gt;<i> 
</I>&gt;<i> $ dpkg --status libssl1.1
</I>&gt;<i> $ dpkg --status libssl-dev
</I>&gt;<i> $ dpkg --status openssl
</I>&gt;<i> $ type openssl
</I>&gt;<i> $ openssl version -a
</I>&gt;<i> $ ls -alF /usr/lib/x86_64-linux-gnu/libssl*
</I>&gt;<i> $ ls -alF /usr/locallib/libssl*
</I>
Oops, my bad, should have been /usr/local/lib/libssl*

&gt;<i> $ ls -alF /usr/local/bin/openssl
</I>&gt;<i> $ /usr/local/bin/openssl version -a
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Here is the results
</I>&gt;<i> 
</I>&gt;<i> $ dpkg --status libssl1.1
</I>&gt;<i> 
</I>&gt;<i> sudo dpkg --status libssl1.1
</I>
This shouldn't require root privileges, at least on Debian (Ubuntu is a 
heavily modified Debian).

&gt;<i> 
</I>&gt;<i> [sudo] password for michael:
</I>&gt;<i> 
</I>&gt;<i> Package: libssl1.1
</I>&gt;<i> Status: install ok installed
</I>&gt;<i> Priority: optional
</I>&gt;<i> Section: libs
</I>&gt;<i> Installed-Size: 4027
</I>&gt;<i> Maintainer: Ubuntu Developers <A HREF="../../../mailman/listinfo/openssl-users.html">ubuntu-devel-discuss at lists.ubuntu.com</A> 
</I>&gt;<i>   &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">ubuntu-devel-discuss at lists.ubuntu.com</A>&gt;
</I>&gt;<i> Architecture: amd64
</I>&gt;<i> Multi-Arch: same
</I>&gt;<i> Source: openssl
</I>&gt;<i> Version: 1.1.1f-1ubuntu2.4
</I>
Ok, go to the Ubuntu website and check which OpenSSL bug fixes are 
included in Ubuntu OpenSSL 1.1.1f-1ubuntu2.4, or look in the file
/usr/share/doc/libssl1.1/Changelog.Debian.gz

&gt;<i> Depends: libc6 (&gt;= 2.25), debconf (&gt;= 0.5) | debconf-2.0
</I>&gt;<i> Breaks: isync (&lt;&lt; 1.3.0-2), lighttpd (&lt;&lt; 1.4.49-2), python-boto (&lt;&lt; 
</I>&gt;<i>   2.44.0-1.1), python-httplib2 (&lt;&lt; 0.11.3-1), python-imaplib2 (&lt;&lt; 2.57-5), 
</I>&gt;<i>   python3-boto (&lt;&lt; 2.44.0-1.1), python3-imaplib2 (&lt;&lt; 2.57-5)
</I>&gt;<i> Description: Secure Sockets Layer toolkit - shared libraries
</I>&gt;<i>  This package is part of the OpenSSL project's implementation of the SSL
</I>&gt;<i>  and TLS cryptographic protocols for secure communication over the
</I>&gt;<i>  Internet.
</I>&gt;<i>  .
</I>&gt;<i>  It provides the libssl and libcrypto shared libraries.
</I>&gt;<i> Homepage: <A HREF="https://www.openssl.org/">https://www.openssl.org/</A>
</I>&gt;<i> Original-Maintainer: Debian OpenSSL Team 
</I>&gt;<i>  <A HREF="../../../mailman/listinfo/openssl-users.html">pkg-openssl-devel at lists.alioth.debian.org</A> 
</I>&gt;<i>  &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">pkg-openssl-devel at lists.alioth.debian.org</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> $ dpkg --status libssl-dev
</I>&gt;<i> 
</I>&gt;<i> sudo dpkg --status libssl-dev
</I>&gt;<i> 
</I>
This shouldn't require root privileges, at least on Debian (Ubuntu is a 
heavily modified Debian).

&gt;<i> dpkg-query: package 'libssl-dev' is not installed and no information is 
</I>&gt;<i> available
</I>&gt;<i> 
</I>&gt;<i> Use dpkg --info (= dpkg-deb --info) to examine archive files.
</I>&gt;<i> 
</I>
Ok, this confirms that you have not installed the OpenSSL development 
files from Ubuntu.

&gt;<i> $ dpkg --status openssl
</I>&gt;<i> 
</I>&gt;<i> sudo dpkg --status openssl
</I>&gt;<i> 
</I>
This shouldn't require root privileges, at least on Debian (Ubuntu is a 
heavily modified Debian).

&gt;<i> Package: openssl
</I>&gt;<i> Status: install ok installed
</I>&gt;<i> Priority: optional
</I>&gt;<i> Section: utils
</I>&gt;<i> Installed-Size: 1257
</I>&gt;<i> Maintainer: Ubuntu Developers <A HREF="../../../mailman/listinfo/openssl-users.html">ubuntu-devel-discuss at lists.ubuntu.com</A> 
</I>&gt;<i>  &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">ubuntu-devel-discuss at lists.ubuntu.com</A>&gt;
</I>&gt;<i> Architecture: amd64
</I>&gt;<i> Multi-Arch: foreign
</I>&gt;<i> Version: 1.1.1f-1ubuntu2.4
</I>&gt;<i> Depends: libc6 (&gt;= 2.15), libssl1.1 (&gt;= 1.1.1)
</I>&gt;<i> Suggests: ca-certificates
</I>&gt;<i> Conffiles:
</I>&gt;<i>  /etc/ssl/openssl.cnf fb92a2dab53f11f4f5f22adc5257b553
</I>&gt;<i> Description: Secure Sockets Layer toolkit - cryptographic utility
</I>&gt;<i>  This package is part of the OpenSSL project's implementation of the SSL
</I>&gt;<i>  and TLS cryptographic protocols for secure communication over the
</I>&gt;<i>  Internet.
</I>&gt;<i>  .
</I>&gt;<i>  It contains the general-purpose command line binary /usr/bin/openssl,
</I>&gt;<i>  useful for cryptographic operations such as:
</I>&gt;<i>  &#160; * creating RSA, DH, and DSA key parameters;
</I>&gt;<i>  &#160; * creating X.509 certificates, CSRs, and CRLs;
</I>&gt;<i>  &#160; * calculating message digests;
</I>&gt;<i>  &#160; * encrypting and decrypting with ciphers;
</I>&gt;<i>  &#160; * testing SSL/TLS clients and servers;
</I>&gt;<i>  &#160; * handling S/MIME signed or encrypted mail.
</I>&gt;<i> Homepage: <A HREF="https://www.openssl.org/">https://www.openssl.org/</A>
</I>&gt;<i> Original-Maintainer: Debian OpenSSL Team 
</I>&gt;<i>  <A HREF="../../../mailman/listinfo/openssl-users.html">pkg-openssl-devel at lists.alioth.debian.org</A> 
</I>&gt;<i>  &lt;mailto:<A HREF="../../../mailman/listinfo/openssl-users.html">pkg-openssl-devel at lists.alioth.debian.org</A>&gt;
</I>
Ok, go to the Ubuntu website and check which OpenSSL bug fixes are 
included in Ubuntu OpenSSL 1.1.1f-1ubuntu2.4, or look in the file
/usr/share/doc/openssl/Changelog.Debian.gz

&gt;<i> 
</I>&gt;<i> $ type openssl
</I>&gt;<i> openssl is hashed (/usr/local/ssl/bin/openssl)
</I>
Ok, this shows that your locally built OpenSSL is still there under
/usr/local/...

&gt;<i> $ openssl version -a
</I>&gt;<i> OpenSSL 1.1.1k&#160; 25 Mar 2021
</I>&gt;<i> built on: Thu May 20 12:00:48 2021 UTC
</I>&gt;<i> platform: linux-x86_64
</I>&gt;<i> options:&#160; bn(64,64) rc4(16x,int) des(int) idea(int) blowfish(ptr)
</I>&gt;<i> compiler: gcc -fPIC -pthread -m64 -Wa,--noexecstack -Wall -O3 
</I>&gt;<i> -DOPENSSL_USE_NODELETE -DL_ENDIAN -DOPENSSL_PIC -DOPENSSL_CPUID_OBJ 
</I>&gt;<i> -DOPENSSL_IA32_SSE2 -DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_MONT5 
</I>&gt;<i> -DOPENSSL_BN_ASM_GF2m -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM 
</I>&gt;<i> -DKECCAK1600_ASM -DRC4_ASM -DMD5_ASM -DAESNI_ASM -DVPAES_ASM -DGHASH_ASM 
</I>&gt;<i> -DECP_NISTZ256_ASM -DX25519_ASM -DPOLY1305_ASM -DZLIB -DNDEBUG
</I>&gt;<i> OPENSSLDIR: &quot;/usr/local/ssl&quot;
</I>&gt;<i> ENGINESDIR: &quot;/usr/local/ssl/lib/engines-1.1&quot;
</I>&gt;<i> Seeding source: os-specific
</I>&gt;<i> 
</I>&gt;<i> <A HREF="../../../mailman/listinfo/openssl-users.html">michael at ubuntuwpmm1tb</A>:~$
</I>&gt;<i> 
</I>&gt;<i> $ ls -alF /usr/lib/x86_64-linux-gnu/libssl*
</I>&gt;<i> 
</I>&gt;<i> -rw-r--r-- 1 root root 598104 Apr 27 20:37 /usr/lib/x86_64-linux-gnu/libssl.so.1.1
</I>
This shows that the Ubuntu installed OpenSSL was built by Ubuntu on the 
most recent April 27 (2021-04-27) at 20:37 your timezone.

&gt;<i> 
</I>&gt;<i> <A HREF="../../../mailman/listinfo/openssl-users.html">michael at ubuntuwpmm1tb</A>:~$
</I>&gt;<i> 
</I>&gt;<i> $ ls -alF /usr/locallib/libssl*
</I>&gt;<i> 
</I>&gt;<i> ls -alF /usr/locallib/libssl*
</I>&gt;<i> 
</I>&gt;<i> ls: cannot access '/usr/locallib/libssl*': No such file or directory
</I>&gt;<i> 
</I>&gt;<i> $ ls -alF /usr/local/bin/openssl
</I>&gt;<i> 
</I>&gt;<i> ls -alF /usr/local/bin/openssl
</I>&gt;<i> 
</I>&gt;<i> ls: cannot access '/usr/local/bin/openssl': No such file or directory
</I>&gt;<i> 
</I>&gt;<i> $ /usr/local/bin/openssl version -a
</I>&gt;<i> 
</I>&gt;<i> /usr/local/bin/openssl version -a
</I>&gt;<i> 
</I>&gt;<i> -bash: /usr/local/bin/openssl: No such file or directory
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> *From:*openssl-users &lt;<A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users-bounces at openssl.org</A>&gt; *On Behalf Of 
</I>&gt;<i> *Jakob Bohm via openssl-users
</I>&gt;<i> *Sent:* Friday, May 21, 2021 10:03 AM
</I>&gt;<i> *To:* <A HREF="../../../mailman/listinfo/openssl-users.html">openssl-users at openssl.org</A>
</I>&gt;<i> *Subject:* Re: I installed Openssl 1.1.1k and Ubuntu 20.04 did an 
</I>&gt;<i> upgrade and reverted it back to 1.1.1f. Usually Ubuntu upgrades don&#8217;t 
</I>&gt;<i> break it.
</I>&gt;<i> 
</I>&gt;<i> On 2021-05-19 19:56, Michael McKenney wrote:
</I>&gt;<i> 
</I>&gt;<i>     I installed Openssl 1.1.1k and Ubuntu 20.04 did an upgrade and
</I>&gt;<i>     reverted it back to 1.1.1f.&#160;&#160; Usually Ubuntu upgrades don&#8217;t break it.
</I>&gt;<i> 
</I>&gt;<i>     OpenSSL 1.1.1f&#160; 31 Mar 2020 (Library: OpenSSL 1.1.1k&#160; 25 Mar 2021)
</I>&gt;<i> 
</I>&gt;<i>     built on: Thu Apr 29 14:11:04 2021 UTC
</I>&gt;<i> 
</I>&gt;<i>     platform: linux-x86_64
</I>&gt;<i> 
</I>&gt;<i>     options:&#160; bn(64,64) rc4(16x,int) des(int) blowfish(ptr)
</I>&gt;<i> 
</I>&gt;<i>     compiler: gcc -fPIC -pthread -m64 -Wa,--noexecstack -Wall -O3
</I>&gt;<i>     -DOPENSSL_USE_NODELETE -DL_ENDIAN -DOPENSSL_PIC -DOPENSSL_CPUID_OBJ
</I>&gt;<i>     -DOPENSSL_IA32_SSE2 -DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_MONT5
</I>&gt;<i>     -DOPENSSL_BN_ASM_GF2m -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM
</I>&gt;<i>     -DKECCAK1600_ASM -DRC4_ASM -DMD5_ASM -DAESNI_ASM -DVPAES_ASM
</I>&gt;<i>     -DGHASH_ASM -DECP_NISTZ256_ASM -DX25519_ASM -DPOLY1305_ASM -DZLIB
</I>&gt;<i>     -DNDEBUG
</I>&gt;<i> 
</I>&gt;<i>     OPENSSLDIR: &quot;/usr/local/ssl&quot;
</I>&gt;<i> 
</I>&gt;<i>     ENGINESDIR: &quot;/usr/local/ssl/lib/engines-1.1&quot;
</I>&gt;<i> 
</I>&gt;<i>     Seeding source: os-specific
</I>&gt;<i> 
</I>&gt;<i>     How do I change it back to 1.1.1k?&#160; I tried a reinstall. &#160;Didn&#8217;t work.
</I>&gt;<i> 
</I>&gt;<i>     This is the directions I use to install
</I>&gt;<i> 
</I>&gt;<i>     sudo apt-get update &amp;&amp; sudo apt-get upgrade
</I>&gt;<i> 
</I>&gt;<i>     openssl version -a
</I>&gt;<i> 
</I>&gt;<i>     sudo apt install build-essential checkinstall zlib1g-dev -y
</I>&gt;<i> 
</I>&gt;<i>     cd /usr/local/src/
</I>&gt;<i> 
</I>&gt;<i>     sudo wget <A HREF="https://www.openssl.org/source/openssl-1.1.1k.tar.gz">https://www.openssl.org/source/openssl-1.1.1k.tar.gz</A>
</I>&gt;<i> 
</I>&gt;<i>     sudo tar -xf openssl-1.1.1k.tar.gz
</I>&gt;<i> 
</I>&gt;<i>     cd openssl-1.1.1k
</I>&gt;<i> 
</I>&gt;<i>     sudo ./config --prefix=/usr/local/ssl --openssldir=/usr/local/ssl
</I>&gt;<i>     shared zlib
</I>&gt;<i> 
</I>&gt;<i>     sudo make
</I>&gt;<i> 
</I>&gt;<i>     sudo make test
</I>&gt;<i> 
</I>&gt;<i>     sudo make install
</I>&gt;<i> 
</I>&gt;<i>     cd /etc/ld.so.conf.d/
</I>&gt;<i> 
</I>&gt;<i>     sudo vim openssl-1.1.1k.conf
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160; add&#160;&#160;&#160; /usr/local/ssl/lib
</I>&gt;<i> 
</I>&gt;<i>     sudo ldconfig -v
</I>&gt;<i> 
</I>&gt;<i>     sudo mv /usr/bin/c_rehash /usr/bin/c_rehash.backup
</I>&gt;<i> 
</I>&gt;<i>     sudo mv /usr/bin/openssl /usr/bin/openssl.backup
</I>&gt;<i> 
</I>&gt;<i>     sudo vim /etc/environment
</I>&gt;<i> 
</I>&gt;<i>     add    
</I>&gt;<i>     PATH=&quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; :/usr/local/games:/usr/local/ssl/bin&quot;
</I>&gt;<i> 
</I>&gt;<i>     source /etc/environment
</I>&gt;<i> 
</I>&gt;<i>     echo $PATH
</I>&gt;<i> 
</I>&gt;<i>     which openssl
</I>&gt;<i> 
</I>&gt;<i>     openssl version -a
</I>&gt;<i> 
</I>&gt;<i> Sorry, but you did not state what command and output indicates
</I>&gt;<i> that Ubuntu undid your upgrade, what is the output of each of
</I>&gt;<i> the following diagnostic commands (after Ubuntu apparently
</I>&gt;<i> undid your upgrade).
</I>&gt;<i> 
</I>&gt;<i> $ dpkg --status libssl1.1
</I>&gt;<i> $ dpkg --status libssl-dev
</I>&gt;<i> $ dpkg --status openssl
</I>&gt;<i> $ type openssl
</I>&gt;<i> $ openssl version -a
</I>&gt;<i> $ ls -alF /usr/lib/x86_64-linux-gnu/libssl*
</I>&gt;<i> $ ls -alF /usr/locallib/libssl*
</I>&gt;<i> $ ls -alF /usr/local/bin/openssl
</I>&gt;<i> $ /usr/local/bin/openssl version -a
</I>&gt;<i> 
</I>


Enjoy

Jakob
-- 
Jakob Bohm, CIO, Partner, WiseMo A/S.  <A HREF="https://www.wisemo.com">https://www.wisemo.com</A>
Transformervej 29, 2860 S&#248;borg, Denmark.  Direct +45 31 13 16 10
This public discussion message is non-binding and may contain errors.
WiseMo - Remote Service Management for PCs, Phones and Embedded
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013784.html">Re: I installed Openssl 1.1.1k and Ubuntu 20.04 did an upgrade and reverted it back to 1.1.1f. Usually Ubuntu upgrades don&#8217;t break it.
</A></li>
	<LI>Next message: <A HREF="013792.html">RE: I installed Openssl 1.1.1k and Ubuntu 20.04 did an upgrade and reverted it back to 1.1.1f. Usually Ubuntu upgrades don&#8217;t break it.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13786">[ date ]</a>
              <a href="thread.html#13786">[ thread ]</a>
              <a href="subject.html#13786">[ subject ]</a>
              <a href="author.html#13786">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../mailman/listinfo/openssl-users.html">More information about the openssl-users
mailing list</a><br>
</body></html>
